"use strict";var AT=Object.create;var su=Object.defineProperty;var vT=Object.getOwnPropertyDescriptor;var MT=Object.getOwnPropertyNames;var TT=Object.getPrototypeOf,kT=Object.prototype.hasOwnProperty;var IT=(e,t,r)=>t in e?su(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var q=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Os=(e,t)=>{for(var r in t)su(e,r,{get:t[r],enumerable:!0})},PT=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of MT(t))!kT.call(e,n)&&n!==r&&su(e,n,{get:()=>t[n],enumerable:!(o=vT(t,n))||o.enumerable});return e};var xn=(e,t,r)=>(r=e!=null?AT(TT(e)):{},PT(t||!e||!e.__esModule?su(r,"default",{value:e,enumerable:!0}):r,e));var $t=(e,t,r)=>(IT(e,typeof t!="symbol"?t+"":t,r),r);var Wv=q((vY,Uv)=>{"use strict";Uv.exports=({onlyFirst:e=!1}={})=>{let t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}});var Jf=q((MY,zv)=>{"use strict";var iU=Wv();zv.exports=e=>typeof e=="string"?e.replace(iU(),""):e});var mb=q((TY,fb)=>{"use strict";var Kv=e=>Number.isNaN(e)?!1:e>=4352&&(e<=4447||e===9001||e===9002||11904<=e&&e<=12871&&e!==12351||12880<=e&&e<=19903||19968<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65131||65281<=e&&e<=65376||65504<=e&&e<=65510||110592<=e&&e<=110593||127488<=e&&e<=127569||131072<=e&&e<=262141);fb.exports=Kv;fb.exports.default=Kv});var Gv=q((kY,$v)=>{"use strict";$v.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}});var Xi=q((IY,db)=>{"use strict";var aU=Jf(),cU=mb(),uU=Gv(),Vv=e=>{if(typeof e!="string"||e.length===0||(e=aU(e),e.length===0))return 0;e=e.replace(uU(),"  ");let t=0;for(let r=0;r<e.length;r++){let o=e.codePointAt(r);o<=31||o>=127&&o<=159||o>=768&&o<=879||(o>65535&&r++,t+=cU(o)?2:1)}return t};db.exports=Vv;db.exports.default=Vv});var Zv=q((PY,Yv)=>{"use strict";var Jv="[\uD800-\uDBFF][\uDC00-\uDFFF]",pU=e=>e&&e.exact?new RegExp(`^${Jv}$`):new RegExp(Jv,"g");Yv.exports=pU});var Xv=q((NY,Qv)=>{"use strict";Qv.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var hb=q((LY,tM)=>{"use strict";var ru=Xv(),eM={};for(let e of Object.keys(ru))eM[ru[e]]=e;var M={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};tM.exports=M;for(let e of Object.keys(M)){if(!("channels"in M[e]))throw new Error("missing channels property: "+e);if(!("labels"in M[e]))throw new Error("missing channel labels property: "+e);if(M[e].labels.length!==M[e].channels)throw new Error("channel and label counts mismatch: "+e);let{channels:t,labels:r}=M[e];delete M[e].channels,delete M[e].labels,Object.defineProperty(M[e],"channels",{value:t}),Object.defineProperty(M[e],"labels",{value:r})}M.rgb.hsl=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255,n=Math.min(t,r,o),s=Math.max(t,r,o),i=s-n,a,c;s===n?a=0:t===s?a=(r-o)/i:r===s?a=2+(o-t)/i:o===s&&(a=4+(t-r)/i),a=Math.min(a*60,360),a<0&&(a+=360);let p=(n+s)/2;return s===n?c=0:p<=.5?c=i/(s+n):c=i/(2-s-n),[a,c*100,p*100]};M.rgb.hsv=function(e){let t,r,o,n,s,i=e[0]/255,a=e[1]/255,c=e[2]/255,p=Math.max(i,a,c),l=p-Math.min(i,a,c),f=function(d){return(p-d)/6/l+1/2};return l===0?(n=0,s=0):(s=l/p,t=f(i),r=f(a),o=f(c),i===p?n=o-r:a===p?n=1/3+t-o:c===p&&(n=2/3+r-t),n<0?n+=1:n>1&&(n-=1)),[n*360,s*100,p*100]};M.rgb.hwb=function(e){let t=e[0],r=e[1],o=e[2],n=M.rgb.hsl(e)[0],s=1/255*Math.min(t,Math.min(r,o));return o=1-1/255*Math.max(t,Math.max(r,o)),[n,s*100,o*100]};M.rgb.cmyk=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255,n=Math.min(1-t,1-r,1-o),s=(1-t-n)/(1-n)||0,i=(1-r-n)/(1-n)||0,a=(1-o-n)/(1-n)||0;return[s*100,i*100,a*100,n*100]};function lU(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}M.rgb.keyword=function(e){let t=eM[e];if(t)return t;let r=1/0,o;for(let n of Object.keys(ru)){let s=ru[n],i=lU(e,s);i<r&&(r=i,o=n)}return o};M.keyword.rgb=function(e){return ru[e]};M.rgb.xyz=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,o=o>.04045?((o+.055)/1.055)**2.4:o/12.92;let n=t*.4124+r*.3576+o*.1805,s=t*.2126+r*.7152+o*.0722,i=t*.0193+r*.1192+o*.9505;return[n*100,s*100,i*100]};M.rgb.lab=function(e){let t=M.rgb.xyz(e),r=t[0],o=t[1],n=t[2];r/=95.047,o/=100,n/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,o=o>.008856?o**(1/3):7.787*o+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;let s=116*o-16,i=500*(r-o),a=200*(o-n);return[s,i,a]};M.hsl.rgb=function(e){let t=e[0]/360,r=e[1]/100,o=e[2]/100,n,s,i;if(r===0)return i=o*255,[i,i,i];o<.5?n=o*(1+r):n=o+r-o*r;let a=2*o-n,c=[0,0,0];for(let p=0;p<3;p++)s=t+1/3*-(p-1),s<0&&s++,s>1&&s--,6*s<1?i=a+(n-a)*6*s:2*s<1?i=n:3*s<2?i=a+(n-a)*(2/3-s)*6:i=a,c[p]=i*255;return c};M.hsl.hsv=function(e){let t=e[0],r=e[1]/100,o=e[2]/100,n=r,s=Math.max(o,.01);o*=2,r*=o<=1?o:2-o,n*=s<=1?s:2-s;let i=(o+r)/2,a=o===0?2*n/(s+n):2*r/(o+r);return[t,a*100,i*100]};M.hsv.rgb=function(e){let t=e[0]/60,r=e[1]/100,o=e[2]/100,n=Math.floor(t)%6,s=t-Math.floor(t),i=255*o*(1-r),a=255*o*(1-r*s),c=255*o*(1-r*(1-s));switch(o*=255,n){case 0:return[o,c,i];case 1:return[a,o,i];case 2:return[i,o,c];case 3:return[i,a,o];case 4:return[c,i,o];case 5:return[o,i,a]}};M.hsv.hsl=function(e){let t=e[0],r=e[1]/100,o=e[2]/100,n=Math.max(o,.01),s,i;i=(2-r)*o;let a=(2-r)*n;return s=r*n,s/=a<=1?a:2-a,s=s||0,i/=2,[t,s*100,i*100]};M.hwb.rgb=function(e){let t=e[0]/360,r=e[1]/100,o=e[2]/100,n=r+o,s;n>1&&(r/=n,o/=n);let i=Math.floor(6*t),a=1-o;s=6*t-i,i&1&&(s=1-s);let c=r+s*(a-r),p,l,f;switch(i){default:case 6:case 0:p=a,l=c,f=r;break;case 1:p=c,l=a,f=r;break;case 2:p=r,l=a,f=c;break;case 3:p=r,l=c,f=a;break;case 4:p=c,l=r,f=a;break;case 5:p=a,l=r,f=c;break}return[p*255,l*255,f*255]};M.cmyk.rgb=function(e){let t=e[0]/100,r=e[1]/100,o=e[2]/100,n=e[3]/100,s=1-Math.min(1,t*(1-n)+n),i=1-Math.min(1,r*(1-n)+n),a=1-Math.min(1,o*(1-n)+n);return[s*255,i*255,a*255]};M.xyz.rgb=function(e){let t=e[0]/100,r=e[1]/100,o=e[2]/100,n,s,i;return n=t*3.2406+r*-1.5372+o*-.4986,s=t*-.9689+r*1.8758+o*.0415,i=t*.0557+r*-.204+o*1.057,n=n>.0031308?1.055*n**(1/2.4)-.055:n*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,n=Math.min(Math.max(0,n),1),s=Math.min(Math.max(0,s),1),i=Math.min(Math.max(0,i),1),[n*255,s*255,i*255]};M.xyz.lab=function(e){let t=e[0],r=e[1],o=e[2];t/=95.047,r/=100,o/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;let n=116*r-16,s=500*(t-r),i=200*(r-o);return[n,s,i]};M.lab.xyz=function(e){let t=e[0],r=e[1],o=e[2],n,s,i;s=(t+16)/116,n=r/500+s,i=s-o/200;let a=s**3,c=n**3,p=i**3;return s=a>.008856?a:(s-16/116)/7.787,n=c>.008856?c:(n-16/116)/7.787,i=p>.008856?p:(i-16/116)/7.787,n*=95.047,s*=100,i*=108.883,[n,s,i]};M.lab.lch=function(e){let t=e[0],r=e[1],o=e[2],n;n=Math.atan2(o,r)*360/2/Math.PI,n<0&&(n+=360);let i=Math.sqrt(r*r+o*o);return[t,i,n]};M.lch.lab=function(e){let t=e[0],r=e[1],n=e[2]/360*2*Math.PI,s=r*Math.cos(n),i=r*Math.sin(n);return[t,s,i]};M.rgb.ansi16=function(e,t=null){let[r,o,n]=e,s=t===null?M.rgb.hsv(e)[2]:t;if(s=Math.round(s/50),s===0)return 30;let i=30+(Math.round(n/255)<<2|Math.round(o/255)<<1|Math.round(r/255));return s===2&&(i+=60),i};M.hsv.ansi16=function(e){return M.rgb.ansi16(M.hsv.rgb(e),e[2])};M.rgb.ansi256=function(e){let t=e[0],r=e[1],o=e[2];return t===r&&r===o?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(o/255*5)};M.ansi16.rgb=function(e){let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];let r=(~~(e>50)+1)*.5,o=(t&1)*r*255,n=(t>>1&1)*r*255,s=(t>>2&1)*r*255;return[o,n,s]};M.ansi256.rgb=function(e){if(e>=232){let s=(e-232)*10+8;return[s,s,s]}e-=16;let t,r=Math.floor(e/36)/5*255,o=Math.floor((t=e%36)/6)/5*255,n=t%6/5*255;return[r,o,n]};M.rgb.hex=function(e){let r=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r};M.hex.rgb=function(e){let t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let r=t[0];t[0].length===3&&(r=r.split("").map(a=>a+a).join(""));let o=parseInt(r,16),n=o>>16&255,s=o>>8&255,i=o&255;return[n,s,i]};M.rgb.hcg=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255,n=Math.max(Math.max(t,r),o),s=Math.min(Math.min(t,r),o),i=n-s,a,c;return i<1?a=s/(1-i):a=0,i<=0?c=0:n===t?c=(r-o)/i%6:n===r?c=2+(o-t)/i:c=4+(t-r)/i,c/=6,c%=1,[c*360,i*100,a*100]};M.hsl.hcg=function(e){let t=e[1]/100,r=e[2]/100,o=r<.5?2*t*r:2*t*(1-r),n=0;return o<1&&(n=(r-.5*o)/(1-o)),[e[0],o*100,n*100]};M.hsv.hcg=function(e){let t=e[1]/100,r=e[2]/100,o=t*r,n=0;return o<1&&(n=(r-o)/(1-o)),[e[0],o*100,n*100]};M.hcg.rgb=function(e){let t=e[0]/360,r=e[1]/100,o=e[2]/100;if(r===0)return[o*255,o*255,o*255];let n=[0,0,0],s=t%1*6,i=s%1,a=1-i,c=0;switch(Math.floor(s)){case 0:n[0]=1,n[1]=i,n[2]=0;break;case 1:n[0]=a,n[1]=1,n[2]=0;break;case 2:n[0]=0,n[1]=1,n[2]=i;break;case 3:n[0]=0,n[1]=a,n[2]=1;break;case 4:n[0]=i,n[1]=0,n[2]=1;break;default:n[0]=1,n[1]=0,n[2]=a}return c=(1-r)*o,[(r*n[0]+c)*255,(r*n[1]+c)*255,(r*n[2]+c)*255]};M.hcg.hsv=function(e){let t=e[1]/100,r=e[2]/100,o=t+r*(1-t),n=0;return o>0&&(n=t/o),[e[0],n*100,o*100]};M.hcg.hsl=function(e){let t=e[1]/100,o=e[2]/100*(1-t)+.5*t,n=0;return o>0&&o<.5?n=t/(2*o):o>=.5&&o<1&&(n=t/(2*(1-o))),[e[0],n*100,o*100]};M.hcg.hwb=function(e){let t=e[1]/100,r=e[2]/100,o=t+r*(1-t);return[e[0],(o-t)*100,(1-o)*100]};M.hwb.hcg=function(e){let t=e[1]/100,o=1-e[2]/100,n=o-t,s=0;return n<1&&(s=(o-n)/(1-n)),[e[0],n*100,s*100]};M.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};M.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};M.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};M.gray.hsl=function(e){return[0,0,e[0]]};M.gray.hsv=M.gray.hsl;M.gray.hwb=function(e){return[0,100,e[0]]};M.gray.cmyk=function(e){return[0,0,0,e[0]]};M.gray.lab=function(e){return[e[0],0,0]};M.gray.hex=function(e){let t=Math.round(e[0]/100*255)&255,o=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(o.length)+o};M.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}});var oM=q((qY,rM)=>{"use strict";var Yf=hb();function fU(){let e={},t=Object.keys(Yf);for(let r=t.length,o=0;o<r;o++)e[t[o]]={distance:-1,parent:null};return e}function mU(e){let t=fU(),r=[e];for(t[e].distance=0;r.length;){let o=r.pop(),n=Object.keys(Yf[o]);for(let s=n.length,i=0;i<s;i++){let a=n[i],c=t[a];c.distance===-1&&(c.distance=t[o].distance+1,c.parent=o,r.unshift(a))}}return t}function dU(e,t){return function(r){return t(e(r))}}function hU(e,t){let r=[t[e].parent,e],o=Yf[t[e].parent][e],n=t[e].parent;for(;t[n].parent;)r.unshift(t[n].parent),o=dU(Yf[t[n].parent][n],o),n=t[n].parent;return o.conversion=r,o}rM.exports=function(e){let t=mU(e),r={},o=Object.keys(t);for(let n=o.length,s=0;s<n;s++){let i=o[s];t[i].parent!==null&&(r[i]=hU(i,t))}return r}});var sM=q((HY,nM)=>{"use strict";var gb=hb(),gU=oM(),ea={},xU=Object.keys(gb);function yU(e){let t=function(...r){let o=r[0];return o==null?o:(o.length>1&&(r=o),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function bU(e){let t=function(...r){let o=r[0];if(o==null)return o;o.length>1&&(r=o);let n=e(r);if(typeof n=="object")for(let s=n.length,i=0;i<s;i++)n[i]=Math.round(n[i]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}xU.forEach(e=>{ea[e]={},Object.defineProperty(ea[e],"channels",{value:gb[e].channels}),Object.defineProperty(ea[e],"labels",{value:gb[e].labels});let t=gU(e);Object.keys(t).forEach(o=>{let n=t[o];ea[e][o]=bU(n),ea[e][o].raw=yU(n)})});nM.exports=ea});var lM=q((jY,pM)=>{"use strict";var iM=(e,t)=>(...r)=>`\x1B[${e(...r)+t}m`,aM=(e,t)=>(...r)=>{let o=e(...r);return`\x1B[${38+t};5;${o}m`},cM=(e,t)=>(...r)=>{let o=e(...r);return`\x1B[${38+t};2;${o[0]};${o[1]};${o[2]}m`},Zf=e=>e,uM=(e,t,r)=>[e,t,r],ta=(e,t,r)=>{Object.defineProperty(e,t,{get:()=>{let o=r();return Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0}),o},enumerable:!0,configurable:!0})},xb,ra=(e,t,r,o)=>{xb===void 0&&(xb=sM());let n=o?10:0,s={};for(let[i,a]of Object.entries(xb)){let c=i==="ansi16"?"ansi":i;i===t?s[c]=e(r,n):typeof a=="object"&&(s[c]=e(a[t],n))}return s};function DU(){let e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(let[r,o]of Object.entries(t)){for(let[n,s]of Object.entries(o))t[n]={open:`\x1B[${s[0]}m`,close:`\x1B[${s[1]}m`},o[n]=t[n],e.set(s[0],s[1]);Object.defineProperty(t,r,{value:o,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="\x1B[39m",t.bgColor.close="\x1B[49m",ta(t.color,"ansi",()=>ra(iM,"ansi16",Zf,!1)),ta(t.color,"ansi256",()=>ra(aM,"ansi256",Zf,!1)),ta(t.color,"ansi16m",()=>ra(cM,"rgb",uM,!1)),ta(t.bgColor,"ansi",()=>ra(iM,"ansi16",Zf,!0)),ta(t.bgColor,"ansi256",()=>ra(aM,"ansi256",Zf,!0)),ta(t.bgColor,"ansi16m",()=>ra(cM,"rgb",uM,!0)),t}Object.defineProperty(pM,"exports",{enumerable:!0,get:DU})});var Xf=q((BY,hM)=>{"use strict";var SU=mb(),EU=Zv(),fM=lM(),dM=["\x1B","\x9B"],Qf=e=>`${dM[0]}[${e}m`,mM=(e,t,r)=>{let o=[];e=[...e];for(let n of e){let s=n;n.includes(";")&&(n=n.split(";")[0][0]+"0");let i=fM.codes.get(Number.parseInt(n,10));if(i){let a=e.indexOf(i.toString());a===-1?o.push(Qf(t?i:s)):e.splice(a,1)}else if(t){o.push(Qf(0));break}else o.push(Qf(s))}if(t&&(o=o.filter((n,s)=>o.indexOf(n)===s),r!==void 0)){let n=Qf(fM.codes.get(Number.parseInt(r,10)));o=o.reduce((s,i)=>i===n?[i,...s]:[...s,i],[])}return o.join("")};hM.exports=(e,t,r)=>{let o=[...e],n=[],s=typeof r=="number"?r:o.length,i=!1,a,c=0,p="";for(let[l,f]of o.entries()){let d=!1;if(dM.includes(f)){let h=/\d[^m]*/.exec(e.slice(l,l+18));a=h&&h.length>0?h[0]:void 0,c<s&&(i=!0,a!==void 0&&n.push(a))}else i&&f==="m"&&(i=!1,d=!0);if(!i&&!d&&c++,!EU({exact:!0}).test(f)&&SU(f.codePointAt())&&(c++,typeof r!="number"&&s++),c>t&&c<=s)p+=f;else if(c===t&&!i&&a!==void 0)p=mM(n);else if(c>=s){p+=mM(n,!0,a);break}}return p}});var yb=q(em=>{"use strict";Object.defineProperty(em,"__esModule",{value:!0});em.getBorderCharacters=void 0;var CU=e=>{if(e==="honeywell")return{topBody:"\u2550",topJoin:"\u2564",topLeft:"\u2554",topRight:"\u2557",bottomBody:"\u2550",bottomJoin:"\u2567",bottomLeft:"\u255A",bottomRight:"\u255D",bodyLeft:"\u2551",bodyRight:"\u2551",bodyJoin:"\u2502",headerJoin:"\u252C",joinBody:"\u2500",joinLeft:"\u255F",joinRight:"\u2562",joinJoin:"\u253C",joinMiddleDown:"\u252C",joinMiddleUp:"\u2534",joinMiddleLeft:"\u2524",joinMiddleRight:"\u251C"};if(e==="norc")return{topBody:"\u2500",topJoin:"\u252C",topLeft:"\u250C",topRight:"\u2510",bottomBody:"\u2500",bottomJoin:"\u2534",bottomLeft:"\u2514",bottomRight:"\u2518",bodyLeft:"\u2502",bodyRight:"\u2502",bodyJoin:"\u2502",headerJoin:"\u252C",joinBody:"\u2500",joinLeft:"\u251C",joinRight:"\u2524",joinJoin:"\u253C",joinMiddleDown:"\u252C",joinMiddleUp:"\u2534",joinMiddleLeft:"\u2524",joinMiddleRight:"\u251C"};if(e==="ramac")return{topBody:"-",topJoin:"+",topLeft:"+",topRight:"+",bottomBody:"-",bottomJoin:"+",bottomLeft:"+",bottomRight:"+",bodyLeft:"|",bodyRight:"|",bodyJoin:"|",headerJoin:"+",joinBody:"-",joinLeft:"|",joinRight:"|",joinJoin:"|",joinMiddleDown:"+",joinMiddleUp:"+",joinMiddleLeft:"+",joinMiddleRight:"+"};if(e==="void")return{topBody:"",topJoin:"",topLeft:"",topRight:"",bottomBody:"",bottomJoin:"",bottomLeft:"",bottomRight:"",bodyLeft:"",bodyRight:"",bodyJoin:"",headerJoin:"",joinBody:"",joinLeft:"",joinRight:"",joinJoin:"",joinMiddleDown:"",joinMiddleUp:"",joinMiddleLeft:"",joinMiddleRight:""};throw new Error('Unknown border template "'+e+'".')};em.getBorderCharacters=CU});var ze=q(G=>{"use strict";var bb=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(G,"__esModule",{value:!0});G.isCellInRange=G.areCellEqual=G.calculateRangeCoordinate=G.findOriginalRowIndex=G.flatten=G.extractTruncates=G.sumArray=G.sequence=G.distributeUnevenly=G.countSpaceSequence=G.groupBySizes=G.makeBorderConfig=G.splitAnsi=G.normalizeString=void 0;var _U=bb(Xf()),OU=bb(Xi()),wU=bb(Jf()),RU=yb(),FU=e=>e.replace(/\r\n/g,`
`);G.normalizeString=FU;var AU=e=>{let t=(0,wU.default)(e).split(`
`).map(OU.default),r=[],o=0;return t.forEach(n=>{r.push(n===0?"":(0,_U.default)(e,o,o+n)),o+=n+1}),r};G.splitAnsi=AU;var vU=e=>({...(0,RU.getBorderCharacters)("honeywell"),...e});G.makeBorderConfig=vU;var MU=(e,t)=>{let r=0;return t.map(o=>{let n=e.slice(r,r+o);return r+=o,n})};G.groupBySizes=MU;var TU=e=>{var t,r;return(r=(t=e.match(/\s+/g))===null||t===void 0?void 0:t.length)!==null&&r!==void 0?r:0};G.countSpaceSequence=TU;var kU=(e,t)=>Array.from({length:t}).fill(Math.floor(e/t)).map((o,n)=>o+(n<e%t?1:0));G.distributeUnevenly=kU;var IU=(e,t)=>Array.from({length:t-e+1},(r,o)=>o+e);G.sequence=IU;var PU=e=>e.reduce((t,r)=>t+r,0);G.sumArray=PU;var NU=e=>e.columns.map(({truncate:t})=>t);G.extractTruncates=NU;var LU=e=>[].concat(...e);G.flatten=LU;var qU=(e,t)=>(0,G.flatten)(e.map((o,n)=>Array.from({length:o},()=>n)))[t];G.findOriginalRowIndex=qU;var HU=e=>{let{row:t,col:r,colSpan:o=1,rowSpan:n=1}=e;return{bottomRight:{col:r+o-1,row:t+n-1},topLeft:{col:r,row:t}}};G.calculateRangeCoordinate=HU;var jU=(e,t)=>e.row===t.row&&e.col===t.col;G.areCellEqual=jU;var BU=(e,{topLeft:t,bottomRight:r})=>t.row<=e.row&&e.row<=r.row&&t.col<=e.col&&e.col<=r.col;G.isCellInRange=BU});var Sb=q(oa=>{"use strict";var UU=oa&&oa.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oa,"__esModule",{value:!0});oa.alignString=void 0;var WU=UU(Xi()),gM=ze(),Db=(e,t)=>e+" ".repeat(t),zU=(e,t)=>" ".repeat(t)+e,KU=(e,t)=>" ".repeat(Math.floor(t/2))+e+" ".repeat(Math.ceil(t/2)),$U=(e,t)=>{let r=(0,gM.countSpaceSequence)(e);if(r===0)return Db(e,t);let o=(0,gM.distributeUnevenly)(t,r);if(Math.max(...o)>3)return Db(e,t);let n=0;return e.replace(/\s+/g,s=>s+" ".repeat(o[n++]))},GU=(e,t,r)=>{let o=(0,WU.default)(e);if(o===t)return e;if(o>t)throw new Error("Subject parameter value width cannot be greater than the container width.");if(o===0)return" ".repeat(t);let n=t-o;return r==="left"?Db(e,n):r==="right"?zU(e,n):r==="justify"?$U(e,n):KU(e,n)};oa.alignString=GU});var Eb=q(tm=>{"use strict";Object.defineProperty(tm,"__esModule",{value:!0});tm.alignTableData=void 0;var VU=Sb(),JU=(e,t)=>e.map((r,o)=>r.map((n,s)=>{var i;let{width:a,alignment:c}=t.columns[s];return((i=t.spanningCellManager)===null||i===void 0?void 0:i.getContainingRange({col:s,row:o},{mapped:!0}))?n:(0,VU.alignString)(n,a,c)}));tm.alignTableData=JU});var bM=q(na=>{"use strict";var yM=na&&na.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(na,"__esModule",{value:!0});na.wrapString=void 0;var xM=yM(Xf()),YU=yM(Xi()),ZU=(e,t)=>{let r=e,o=[];do o.push((0,xM.default)(r,0,t)),r=(0,xM.default)(r,t).trim();while((0,YU.default)(r));return o};na.wrapString=ZU});var SM=q(sa=>{"use strict";var DM=sa&&sa.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sa,"__esModule",{value:!0});sa.wrapWord=void 0;var QU=DM(Xf()),XU=DM(Jf()),eW=(e,t)=>{let r=(0,XU.default)(e),o=[],n=new RegExp("(^.{1,"+String(Math.max(t,1))+"}(\\s+|$))|(^.{1,"+String(Math.max(t-1,1))+"}(\\\\|/|_|\\.|,|;|-))");do{let s,i=n.exec(r);if(i){s=i[0],r=r.slice(s.length);let a=s.trim().length,c=s.length-a;o.push([a,c])}else s=r.slice(0,t),r=r.slice(t),o.push([s.length,0])}while(r.length);return o},tW=(e,t)=>{let r=[],o=0;return eW(e,t).forEach(([n,s])=>{r.push((0,QU.default)(e,o,o+n)),o+=n+s}),r};sa.wrapWord=tW});var om=q(rm=>{"use strict";Object.defineProperty(rm,"__esModule",{value:!0});rm.wrapCell=void 0;var rW=ze(),oW=bM(),nW=SM(),sW=(e,t,r)=>{let o=(0,rW.splitAnsi)(e);for(let n=0;n<o.length;){let s;r?s=(0,nW.wrapWord)(o[n],t):s=(0,oW.wrapString)(o[n],t),o.splice(n,1,...s),n+=s.length}return o};rm.wrapCell=sW});var EM=q(nm=>{"use strict";Object.defineProperty(nm,"__esModule",{value:!0});nm.calculateCellHeight=void 0;var iW=om(),aW=(e,t,r=!1)=>(0,iW.wrapCell)(e,t,r).length;nm.calculateCellHeight=aW});var Cb=q(sm=>{"use strict";Object.defineProperty(sm,"__esModule",{value:!0});sm.calculateRowHeights=void 0;var cW=EM(),CM=ze(),uW=(e,t)=>{let r=[];for(let[o,n]of e.entries()){let s=1;n.forEach((i,a)=>{var c;let p=(c=t.spanningCellManager)===null||c===void 0?void 0:c.getContainingRange({col:a,row:o});if(!p){let h=(0,cW.calculateCellHeight)(i,t.columns[a].width,t.columns[a].wrapWord);s=Math.max(s,h);return}let{topLeft:l,bottomRight:f,height:d}=p;if(o===f.row){let h=(0,CM.sumArray)(r.slice(l.row)),S=f.row-l.row,w=(0,CM.sequence)(l.row+1,f.row).filter(I=>{var B;return!(!((B=t.drawHorizontalLine)===null||B===void 0)&&B.call(t,I,e.length))}).length,A=d-h-S+w;s=Math.max(s,A)}}),r.push(s)}return r};sm.calculateRowHeights=uW});var am=q(im=>{"use strict";Object.defineProperty(im,"__esModule",{value:!0});im.drawContent=void 0;var pW=e=>{let{contents:t,separatorGetter:r,drawSeparator:o,spanningCellManager:n,rowIndex:s,elementType:i}=e,a=t.length,c=[];return o(0,a)&&c.push(r(0,a)),t.forEach((p,l)=>{if((!i||i==="border"||i==="row")&&c.push(p),i==="cell"&&s===void 0&&c.push(p),i==="cell"&&s!==void 0){let f=n?.getContainingRange({col:l,row:s});(!f||l===f.topLeft.col)&&c.push(p)}if(l+1<a&&o(l+1,a)){let f=r(l+1,a);if(i==="cell"&&s!==void 0){let d={col:l+1,row:s},h=n?.getContainingRange(d);(!h||h.topLeft.col===d.col)&&c.push(f)}else c.push(f)}}),o(a,a)&&c.push(r(a,a)),c.join("")};im.drawContent=pW});var _b=q(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.createTableBorderGetter=fe.drawBorderBottom=fe.drawBorderJoin=fe.drawBorderTop=fe.drawBorder=fe.createSeparatorGetter=fe.drawBorderSegments=void 0;var lW=am(),fW=(e,t)=>{let{separator:r,horizontalBorderIndex:o,spanningCellManager:n}=t;return e.map((s,i)=>{let a=r.body.repeat(s);if(o===void 0)return a;let c=n?.getContainingRange({col:i,row:o});if(!c)return a;let{topLeft:p}=c;return o===p.row?a:i!==p.col?"":c.extractBorderContent(o)})};fe.drawBorderSegments=fW;var mW=e=>{let{separator:t,spanningCellManager:r,horizontalBorderIndex:o,rowCount:n}=e;return(s,i)=>{let a=r?.inSameRange;if(o!==void 0&&a){let c={col:s,row:o-1},p={col:s-1,row:o},l={col:s-1,row:o-1},f={col:s,row:o},d=[[l,c],[c,f],[f,p],[p,l]];if(s===0)return a(f,c)&&t.bodyJoinOuter?t.bodyJoinOuter:t.left;if(s===i)return a(l,p)&&t.bodyJoinOuter?t.bodyJoinOuter:t.right;if(o===0)return a(f,p)?t.body:t.join;if(o===n)return a(c,l)?t.body:t.join;let h=d.map(S=>a(...S)).filter(Boolean).length;if(h===0)return t.join;if(h===4)return"";if(h===2)return a(...d[1])&&a(...d[3])&&t.bodyJoinInner?t.bodyJoinInner:t.body;if(h===1){if(!t.joinRight||!t.joinLeft||!t.joinUp||!t.joinDown)throw new Error(`Can not get border separator for position [${o}, ${s}]`);return a(...d[0])?t.joinDown:a(...d[1])?t.joinLeft:a(...d[2])?t.joinUp:t.joinRight}throw new Error("Invalid case")}return s===0?t.left:s===i?t.right:t.join}};fe.createSeparatorGetter=mW;var dW=(e,t)=>{let r=(0,fe.drawBorderSegments)(e,t),{drawVerticalLine:o,horizontalBorderIndex:n,spanningCellManager:s}=t;return(0,lW.drawContent)({contents:r,drawSeparator:o,elementType:"border",rowIndex:n,separatorGetter:(0,fe.createSeparatorGetter)(t),spanningCellManager:s})+`
`};fe.drawBorder=dW;var hW=(e,t)=>{let{border:r}=t,o=(0,fe.drawBorder)(e,{...t,separator:{body:r.topBody,join:r.topJoin,left:r.topLeft,right:r.topRight}});return o===`
`?"":o};fe.drawBorderTop=hW;var gW=(e,t)=>{let{border:r}=t;return(0,fe.drawBorder)(e,{...t,separator:{body:r.joinBody,bodyJoinInner:r.bodyJoin,bodyJoinOuter:r.bodyLeft,join:r.joinJoin,joinDown:r.joinMiddleDown,joinLeft:r.joinMiddleLeft,joinRight:r.joinMiddleRight,joinUp:r.joinMiddleUp,left:r.joinLeft,right:r.joinRight}})};fe.drawBorderJoin=gW;var xW=(e,t)=>{let{border:r}=t;return(0,fe.drawBorder)(e,{...t,separator:{body:r.bottomBody,join:r.bottomJoin,left:r.bottomLeft,right:r.bottomRight}})};fe.drawBorderBottom=xW;var yW=(e,t)=>(r,o)=>{let n={...t,horizontalBorderIndex:r};return r===0?(0,fe.drawBorderTop)(e,n):r===o?(0,fe.drawBorderBottom)(e,n):(0,fe.drawBorderJoin)(e,n)};fe.createTableBorderGetter=yW});var Ob=q(cm=>{"use strict";Object.defineProperty(cm,"__esModule",{value:!0});cm.drawRow=void 0;var bW=am(),DW=(e,t)=>{let{border:r,drawVerticalLine:o,rowIndex:n,spanningCellManager:s}=t;return(0,bW.drawContent)({contents:e,drawSeparator:o,elementType:"cell",rowIndex:n,separatorGetter:(i,a)=>i===0?r.bodyLeft:i===a?r.bodyRight:r.bodyJoin,spanningCellManager:s})+`
`};cm.drawRow=DW});var OM=q((eZ,_M)=>{"use strict";_M.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var o,n,s;if(Array.isArray(t)){if(o=t.length,o!=r.length)return!1;for(n=o;n--!==0;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(s=Object.keys(t),o=s.length,o!==Object.keys(r).length)return!1;for(n=o;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[n]))return!1;for(n=o;n--!==0;){var i=s[n];if(!e(t[i],r[i]))return!1}return!0}return t!==t&&r!==r}});var RM=q(wb=>{"use strict";Object.defineProperty(wb,"__esModule",{value:!0});var wM=OM();wM.code='require("ajv/dist/runtime/equal").default';wb.default=wM});var kM=q(Fb=>{"use strict";Fb["config.json"]=MM;var SW={$id:"config.json",$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{border:{$ref:"shared.json#/definitions/borders"},header:{type:"object",properties:{content:{type:"string"},alignment:{$ref:"shared.json#/definitions/alignment"},wrapWord:{type:"boolean"},truncate:{type:"integer"},paddingLeft:{type:"integer"},paddingRight:{type:"integer"}},required:["content"],additionalProperties:!1},columns:{$ref:"shared.json#/definitions/columns"},columnDefault:{$ref:"shared.json#/definitions/column"},drawVerticalLine:{typeof:"function"},drawHorizontalLine:{typeof:"function"},singleLine:{typeof:"boolean"},spanningCells:{type:"array",items:{type:"object",properties:{col:{type:"integer",minimum:0},row:{type:"integer",minimum:0},colSpan:{type:"integer",minimum:1},rowSpan:{type:"integer",minimum:1},alignment:{$ref:"shared.json#/definitions/alignment"},verticalAlignment:{$ref:"shared.json#/definitions/verticalAlignment"},wrapWord:{type:"boolean"},truncate:{type:"integer"},paddingLeft:{type:"integer"},paddingRight:{type:"integer"}},required:["row","col"],additionalProperties:!1}}},additionalProperties:!1},FM={type:"object",properties:{topBody:{$ref:"#/definitions/border"},topJoin:{$ref:"#/definitions/border"},topLeft:{$ref:"#/definitions/border"},topRight:{$ref:"#/definitions/border"},bottomBody:{$ref:"#/definitions/border"},bottomJoin:{$ref:"#/definitions/border"},bottomLeft:{$ref:"#/definitions/border"},bottomRight:{$ref:"#/definitions/border"},bodyLeft:{$ref:"#/definitions/border"},bodyRight:{$ref:"#/definitions/border"},bodyJoin:{$ref:"#/definitions/border"},headerJoin:{$ref:"#/definitions/border"},joinBody:{$ref:"#/definitions/border"},joinLeft:{$ref:"#/definitions/border"},joinRight:{$ref:"#/definitions/border"},joinJoin:{$ref:"#/definitions/border"},joinMiddleUp:{$ref:"#/definitions/border"},joinMiddleDown:{$ref:"#/definitions/border"},joinMiddleLeft:{$ref:"#/definitions/border"},joinMiddleRight:{$ref:"#/definitions/border"}},additionalProperties:!1},Rb=Object.prototype.hasOwnProperty;function b(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(typeof e!="string"){let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[a]:s.push(a),i++}return b.errors=s,i===0}function um(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let a in e)if(!Rb.call(FM.properties,a)){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}e.topBody!==void 0&&(b(e.topBody,{instancePath:t+"/topBody",parentData:e,parentDataProperty:"topBody",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.topJoin!==void 0&&(b(e.topJoin,{instancePath:t+"/topJoin",parentData:e,parentDataProperty:"topJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.topLeft!==void 0&&(b(e.topLeft,{instancePath:t+"/topLeft",parentData:e,parentDataProperty:"topLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.topRight!==void 0&&(b(e.topRight,{instancePath:t+"/topRight",parentData:e,parentDataProperty:"topRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomBody!==void 0&&(b(e.bottomBody,{instancePath:t+"/bottomBody",parentData:e,parentDataProperty:"bottomBody",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomJoin!==void 0&&(b(e.bottomJoin,{instancePath:t+"/bottomJoin",parentData:e,parentDataProperty:"bottomJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomLeft!==void 0&&(b(e.bottomLeft,{instancePath:t+"/bottomLeft",parentData:e,parentDataProperty:"bottomLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomRight!==void 0&&(b(e.bottomRight,{instancePath:t+"/bottomRight",parentData:e,parentDataProperty:"bottomRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bodyLeft!==void 0&&(b(e.bodyLeft,{instancePath:t+"/bodyLeft",parentData:e,parentDataProperty:"bodyLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bodyRight!==void 0&&(b(e.bodyRight,{instancePath:t+"/bodyRight",parentData:e,parentDataProperty:"bodyRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bodyJoin!==void 0&&(b(e.bodyJoin,{instancePath:t+"/bodyJoin",parentData:e,parentDataProperty:"bodyJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.headerJoin!==void 0&&(b(e.headerJoin,{instancePath:t+"/headerJoin",parentData:e,parentDataProperty:"headerJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinBody!==void 0&&(b(e.joinBody,{instancePath:t+"/joinBody",parentData:e,parentDataProperty:"joinBody",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinLeft!==void 0&&(b(e.joinLeft,{instancePath:t+"/joinLeft",parentData:e,parentDataProperty:"joinLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinRight!==void 0&&(b(e.joinRight,{instancePath:t+"/joinRight",parentData:e,parentDataProperty:"joinRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinJoin!==void 0&&(b(e.joinJoin,{instancePath:t+"/joinJoin",parentData:e,parentDataProperty:"joinJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleUp!==void 0&&(b(e.joinMiddleUp,{instancePath:t+"/joinMiddleUp",parentData:e,parentDataProperty:"joinMiddleUp",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleDown!==void 0&&(b(e.joinMiddleDown,{instancePath:t+"/joinMiddleDown",parentData:e,parentDataProperty:"joinMiddleDown",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleLeft!==void 0&&(b(e.joinMiddleLeft,{instancePath:t+"/joinMiddleLeft",parentData:e,parentDataProperty:"joinMiddleLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleRight!==void 0&&(b(e.joinMiddleRight,{instancePath:t+"/joinMiddleRight",parentData:e,parentDataProperty:"joinMiddleRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length))}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return um.errors=s,i===0}var AM={type:"string",enum:["left","right","center","justify"]},rZ=RM().default;function Es(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(typeof e!="string"){let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[a]:s.push(a),i++}if(!(e==="left"||e==="right"||e==="center"||e==="justify")){let a={instancePath:t,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:AM.enum},message:"must be equal to one of the allowed values"};s===null?s=[a]:s.push(a),i++}return Es.errors=s,i===0}var gm=new RegExp("^[0-9]+$","u");function uo(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(typeof e!="string"){let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[a]:s.push(a),i++}if(!(e==="left"||e==="right"||e==="center"||e==="justify")){let a={instancePath:t,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:AM.enum},message:"must be equal to one of the allowed values"};s===null?s=[a]:s.push(a),i++}return uo.errors=s,i===0}var vM={type:"string",enum:["top","middle","bottom"]};function po(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(typeof e!="string"){let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[a]:s.push(a),i++}if(!(e==="top"||e==="middle"||e==="bottom")){let a={instancePath:t,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:vM.enum},message:"must be equal to one of the allowed values"};s===null?s=[a]:s.push(a),i++}return po.errors=s,i===0}function zt(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let a in e)if(!(a==="alignment"||a==="verticalAlignment"||a==="width"||a==="wrapWord"||a==="truncate"||a==="paddingLeft"||a==="paddingRight")){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}if(e.alignment!==void 0&&(uo(e.alignment,{instancePath:t+"/alignment",parentData:e,parentDataProperty:"alignment",rootData:n})||(s=s===null?uo.errors:s.concat(uo.errors),i=s.length)),e.verticalAlignment!==void 0&&(po(e.verticalAlignment,{instancePath:t+"/verticalAlignment",parentData:e,parentDataProperty:"verticalAlignment",rootData:n})||(s=s===null?po.errors:s.concat(po.errors),i=s.length)),e.width!==void 0){let a=e.width;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/width",schemaPath:"#/properties/width/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}if(typeof a=="number"&&isFinite(a)&&(a<1||isNaN(a))){let c={instancePath:t+"/width",schemaPath:"#/properties/width/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};s===null?s=[c]:s.push(c),i++}}if(e.wrapWord!==void 0&&typeof e.wrapWord!="boolean"){let a={instancePath:t+"/wrapWord",schemaPath:"#/properties/wrapWord/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[a]:s.push(a),i++}if(e.truncate!==void 0){let a=e.truncate;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/truncate",schemaPath:"#/properties/truncate/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}if(e.paddingLeft!==void 0){let a=e.paddingLeft;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/paddingLeft",schemaPath:"#/properties/paddingLeft/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}if(e.paddingRight!==void 0){let a=e.paddingRight;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/paddingRight",schemaPath:"#/properties/paddingRight/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return zt.errors=s,i===0}function pm(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0,a=i,c=!1,p=null,l=i;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let h in e)if(!gm.test(h)){let S={instancePath:t,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties"};s===null?s=[S]:s.push(S),i++}for(let h in e)gm.test(h)&&(zt(e[h],{instancePath:t+"/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:e,parentDataProperty:h,rootData:n})||(s=s===null?zt.errors:s.concat(zt.errors),i=s.length))}else{let h={instancePath:t,schemaPath:"#/oneOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[h]:s.push(h),i++}var d=l===i;d&&(c=!0,p=0);let f=i;if(Array.isArray(e)){let h=e.length;for(let S=0;S<h;S++)zt(e[S],{instancePath:t+"/"+S,parentData:e,parentDataProperty:S,rootData:n})||(s=s===null?zt.errors:s.concat(zt.errors),i=s.length)}else{let h={instancePath:t,schemaPath:"#/oneOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[h]:s.push(h),i++}var d=f===i;if(d&&c?(c=!1,p=[p,1]):d&&(c=!0,p=1),c)i=a,s!==null&&(a?s.length=a:s=null);else{let h={instancePath:t,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:p},message:"must match exactly one schema in oneOf"};s===null?s=[h]:s.push(h),i++}return pm.errors=s,i===0}function lm(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let a in e)if(!(a==="alignment"||a==="verticalAlignment"||a==="width"||a==="wrapWord"||a==="truncate"||a==="paddingLeft"||a==="paddingRight")){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}if(e.alignment!==void 0&&(uo(e.alignment,{instancePath:t+"/alignment",parentData:e,parentDataProperty:"alignment",rootData:n})||(s=s===null?uo.errors:s.concat(uo.errors),i=s.length)),e.verticalAlignment!==void 0&&(po(e.verticalAlignment,{instancePath:t+"/verticalAlignment",parentData:e,parentDataProperty:"verticalAlignment",rootData:n})||(s=s===null?po.errors:s.concat(po.errors),i=s.length)),e.width!==void 0){let a=e.width;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/width",schemaPath:"#/properties/width/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}if(typeof a=="number"&&isFinite(a)&&(a<1||isNaN(a))){let c={instancePath:t+"/width",schemaPath:"#/properties/width/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};s===null?s=[c]:s.push(c),i++}}if(e.wrapWord!==void 0&&typeof e.wrapWord!="boolean"){let a={instancePath:t+"/wrapWord",schemaPath:"#/properties/wrapWord/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[a]:s.push(a),i++}if(e.truncate!==void 0){let a=e.truncate;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/truncate",schemaPath:"#/properties/truncate/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}if(e.paddingLeft!==void 0){let a=e.paddingLeft;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/paddingLeft",schemaPath:"#/properties/paddingLeft/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}if(e.paddingRight!==void 0){let a=e.paddingRight;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/paddingRight",schemaPath:"#/properties/paddingRight/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return lm.errors=s,i===0}function fm(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(typeof e!="string"){let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[a]:s.push(a),i++}if(!(e==="top"||e==="middle"||e==="bottom")){let a={instancePath:t,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:vM.enum},message:"must be equal to one of the allowed values"};s===null?s=[a]:s.push(a),i++}return fm.errors=s,i===0}function MM(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let a in e)if(!(a==="border"||a==="header"||a==="columns"||a==="columnDefault"||a==="drawVerticalLine"||a==="drawHorizontalLine"||a==="singleLine"||a==="spanningCells")){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}if(e.border!==void 0&&(um(e.border,{instancePath:t+"/border",parentData:e,parentDataProperty:"border",rootData:n})||(s=s===null?um.errors:s.concat(um.errors),i=s.length)),e.header!==void 0){let a=e.header;if(a&&typeof a=="object"&&!Array.isArray(a)){if(a.content===void 0){let c={instancePath:t+"/header",schemaPath:"#/properties/header/required",keyword:"required",params:{missingProperty:"content"},message:"must have required property 'content'"};s===null?s=[c]:s.push(c),i++}for(let c in a)if(!(c==="content"||c==="alignment"||c==="wrapWord"||c==="truncate"||c==="paddingLeft"||c==="paddingRight")){let p={instancePath:t+"/header",schemaPath:"#/properties/header/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties"};s===null?s=[p]:s.push(p),i++}if(a.content!==void 0&&typeof a.content!="string"){let c={instancePath:t+"/header/content",schemaPath:"#/properties/header/properties/content/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[c]:s.push(c),i++}if(a.alignment!==void 0&&(Es(a.alignment,{instancePath:t+"/header/alignment",parentData:a,parentDataProperty:"alignment",rootData:n})||(s=s===null?Es.errors:s.concat(Es.errors),i=s.length)),a.wrapWord!==void 0&&typeof a.wrapWord!="boolean"){let c={instancePath:t+"/header/wrapWord",schemaPath:"#/properties/header/properties/wrapWord/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[c]:s.push(c),i++}if(a.truncate!==void 0){let c=a.truncate;if(!(typeof c=="number"&&!(c%1)&&!isNaN(c)&&isFinite(c))){let p={instancePath:t+"/header/truncate",schemaPath:"#/properties/header/properties/truncate/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[p]:s.push(p),i++}}if(a.paddingLeft!==void 0){let c=a.paddingLeft;if(!(typeof c=="number"&&!(c%1)&&!isNaN(c)&&isFinite(c))){let p={instancePath:t+"/header/paddingLeft",schemaPath:"#/properties/header/properties/paddingLeft/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[p]:s.push(p),i++}}if(a.paddingRight!==void 0){let c=a.paddingRight;if(!(typeof c=="number"&&!(c%1)&&!isNaN(c)&&isFinite(c))){let p={instancePath:t+"/header/paddingRight",schemaPath:"#/properties/header/properties/paddingRight/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[p]:s.push(p),i++}}}else{let c={instancePath:t+"/header",schemaPath:"#/properties/header/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[c]:s.push(c),i++}}if(e.columns!==void 0&&(pm(e.columns,{instancePath:t+"/columns",parentData:e,parentDataProperty:"columns",rootData:n})||(s=s===null?pm.errors:s.concat(pm.errors),i=s.length)),e.columnDefault!==void 0&&(lm(e.columnDefault,{instancePath:t+"/columnDefault",parentData:e,parentDataProperty:"columnDefault",rootData:n})||(s=s===null?lm.errors:s.concat(lm.errors),i=s.length)),e.drawVerticalLine!==void 0&&typeof e.drawVerticalLine!="function"){let a={instancePath:t+"/drawVerticalLine",schemaPath:"#/properties/drawVerticalLine/typeof",keyword:"typeof",params:{},message:'must pass "typeof" keyword validation'};s===null?s=[a]:s.push(a),i++}if(e.drawHorizontalLine!==void 0&&typeof e.drawHorizontalLine!="function"){let a={instancePath:t+"/drawHorizontalLine",schemaPath:"#/properties/drawHorizontalLine/typeof",keyword:"typeof",params:{},message:'must pass "typeof" keyword validation'};s===null?s=[a]:s.push(a),i++}if(e.singleLine!==void 0&&typeof e.singleLine!="boolean"){let a={instancePath:t+"/singleLine",schemaPath:"#/properties/singleLine/typeof",keyword:"typeof",params:{},message:'must pass "typeof" keyword validation'};s===null?s=[a]:s.push(a),i++}if(e.spanningCells!==void 0){let a=e.spanningCells;if(Array.isArray(a)){let c=a.length;for(let p=0;p<c;p++){let l=a[p];if(l&&typeof l=="object"&&!Array.isArray(l)){if(l.row===void 0){let f={instancePath:t+"/spanningCells/"+p,schemaPath:"#/properties/spanningCells/items/required",keyword:"required",params:{missingProperty:"row"},message:"must have required property 'row'"};s===null?s=[f]:s.push(f),i++}if(l.col===void 0){let f={instancePath:t+"/spanningCells/"+p,schemaPath:"#/properties/spanningCells/items/required",keyword:"required",params:{missingProperty:"col"},message:"must have required property 'col'"};s===null?s=[f]:s.push(f),i++}for(let f in l)if(!Rb.call(SW.properties.spanningCells.items.properties,f)){let d={instancePath:t+"/spanningCells/"+p,schemaPath:"#/properties/spanningCells/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties"};s===null?s=[d]:s.push(d),i++}if(l.col!==void 0){let f=l.col;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/col",schemaPath:"#/properties/spanningCells/items/properties/col/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}if(typeof f=="number"&&isFinite(f)&&(f<0||isNaN(f))){let d={instancePath:t+"/spanningCells/"+p+"/col",schemaPath:"#/properties/spanningCells/items/properties/col/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"};s===null?s=[d]:s.push(d),i++}}if(l.row!==void 0){let f=l.row;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/row",schemaPath:"#/properties/spanningCells/items/properties/row/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}if(typeof f=="number"&&isFinite(f)&&(f<0||isNaN(f))){let d={instancePath:t+"/spanningCells/"+p+"/row",schemaPath:"#/properties/spanningCells/items/properties/row/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"};s===null?s=[d]:s.push(d),i++}}if(l.colSpan!==void 0){let f=l.colSpan;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/colSpan",schemaPath:"#/properties/spanningCells/items/properties/colSpan/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}if(typeof f=="number"&&isFinite(f)&&(f<1||isNaN(f))){let d={instancePath:t+"/spanningCells/"+p+"/colSpan",schemaPath:"#/properties/spanningCells/items/properties/colSpan/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};s===null?s=[d]:s.push(d),i++}}if(l.rowSpan!==void 0){let f=l.rowSpan;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/rowSpan",schemaPath:"#/properties/spanningCells/items/properties/rowSpan/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}if(typeof f=="number"&&isFinite(f)&&(f<1||isNaN(f))){let d={instancePath:t+"/spanningCells/"+p+"/rowSpan",schemaPath:"#/properties/spanningCells/items/properties/rowSpan/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};s===null?s=[d]:s.push(d),i++}}if(l.alignment!==void 0&&(Es(l.alignment,{instancePath:t+"/spanningCells/"+p+"/alignment",parentData:l,parentDataProperty:"alignment",rootData:n})||(s=s===null?Es.errors:s.concat(Es.errors),i=s.length)),l.verticalAlignment!==void 0&&(fm(l.verticalAlignment,{instancePath:t+"/spanningCells/"+p+"/verticalAlignment",parentData:l,parentDataProperty:"verticalAlignment",rootData:n})||(s=s===null?fm.errors:s.concat(fm.errors),i=s.length)),l.wrapWord!==void 0&&typeof l.wrapWord!="boolean"){let f={instancePath:t+"/spanningCells/"+p+"/wrapWord",schemaPath:"#/properties/spanningCells/items/properties/wrapWord/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[f]:s.push(f),i++}if(l.truncate!==void 0){let f=l.truncate;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/truncate",schemaPath:"#/properties/spanningCells/items/properties/truncate/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}}if(l.paddingLeft!==void 0){let f=l.paddingLeft;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/paddingLeft",schemaPath:"#/properties/spanningCells/items/properties/paddingLeft/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}}if(l.paddingRight!==void 0){let f=l.paddingRight;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/paddingRight",schemaPath:"#/properties/spanningCells/items/properties/paddingRight/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}}}else{let f={instancePath:t+"/spanningCells/"+p,schemaPath:"#/properties/spanningCells/items/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[f]:s.push(f),i++}}}else{let c={instancePath:t+"/spanningCells",schemaPath:"#/properties/spanningCells/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[c]:s.push(c),i++}}}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return MM.errors=s,i===0}Fb["streamConfig.json"]=TM;function mm(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let a in e)if(!Rb.call(FM.properties,a)){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}e.topBody!==void 0&&(b(e.topBody,{instancePath:t+"/topBody",parentData:e,parentDataProperty:"topBody",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.topJoin!==void 0&&(b(e.topJoin,{instancePath:t+"/topJoin",parentData:e,parentDataProperty:"topJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.topLeft!==void 0&&(b(e.topLeft,{instancePath:t+"/topLeft",parentData:e,parentDataProperty:"topLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.topRight!==void 0&&(b(e.topRight,{instancePath:t+"/topRight",parentData:e,parentDataProperty:"topRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomBody!==void 0&&(b(e.bottomBody,{instancePath:t+"/bottomBody",parentData:e,parentDataProperty:"bottomBody",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomJoin!==void 0&&(b(e.bottomJoin,{instancePath:t+"/bottomJoin",parentData:e,parentDataProperty:"bottomJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomLeft!==void 0&&(b(e.bottomLeft,{instancePath:t+"/bottomLeft",parentData:e,parentDataProperty:"bottomLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomRight!==void 0&&(b(e.bottomRight,{instancePath:t+"/bottomRight",parentData:e,parentDataProperty:"bottomRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bodyLeft!==void 0&&(b(e.bodyLeft,{instancePath:t+"/bodyLeft",parentData:e,parentDataProperty:"bodyLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bodyRight!==void 0&&(b(e.bodyRight,{instancePath:t+"/bodyRight",parentData:e,parentDataProperty:"bodyRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bodyJoin!==void 0&&(b(e.bodyJoin,{instancePath:t+"/bodyJoin",parentData:e,parentDataProperty:"bodyJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.headerJoin!==void 0&&(b(e.headerJoin,{instancePath:t+"/headerJoin",parentData:e,parentDataProperty:"headerJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinBody!==void 0&&(b(e.joinBody,{instancePath:t+"/joinBody",parentData:e,parentDataProperty:"joinBody",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinLeft!==void 0&&(b(e.joinLeft,{instancePath:t+"/joinLeft",parentData:e,parentDataProperty:"joinLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinRight!==void 0&&(b(e.joinRight,{instancePath:t+"/joinRight",parentData:e,parentDataProperty:"joinRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinJoin!==void 0&&(b(e.joinJoin,{instancePath:t+"/joinJoin",parentData:e,parentDataProperty:"joinJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleUp!==void 0&&(b(e.joinMiddleUp,{instancePath:t+"/joinMiddleUp",parentData:e,parentDataProperty:"joinMiddleUp",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleDown!==void 0&&(b(e.joinMiddleDown,{instancePath:t+"/joinMiddleDown",parentData:e,parentDataProperty:"joinMiddleDown",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleLeft!==void 0&&(b(e.joinMiddleLeft,{instancePath:t+"/joinMiddleLeft",parentData:e,parentDataProperty:"joinMiddleLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleRight!==void 0&&(b(e.joinMiddleRight,{instancePath:t+"/joinMiddleRight",parentData:e,parentDataProperty:"joinMiddleRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length))}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return mm.errors=s,i===0}function dm(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0,a=i,c=!1,p=null,l=i;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let h in e)if(!gm.test(h)){let S={instancePath:t,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties"};s===null?s=[S]:s.push(S),i++}for(let h in e)gm.test(h)&&(zt(e[h],{instancePath:t+"/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:e,parentDataProperty:h,rootData:n})||(s=s===null?zt.errors:s.concat(zt.errors),i=s.length))}else{let h={instancePath:t,schemaPath:"#/oneOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[h]:s.push(h),i++}var d=l===i;d&&(c=!0,p=0);let f=i;if(Array.isArray(e)){let h=e.length;for(let S=0;S<h;S++)zt(e[S],{instancePath:t+"/"+S,parentData:e,parentDataProperty:S,rootData:n})||(s=s===null?zt.errors:s.concat(zt.errors),i=s.length)}else{let h={instancePath:t,schemaPath:"#/oneOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[h]:s.push(h),i++}var d=f===i;if(d&&c?(c=!1,p=[p,1]):d&&(c=!0,p=1),c)i=a,s!==null&&(a?s.length=a:s=null);else{let h={instancePath:t,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:p},message:"must match exactly one schema in oneOf"};s===null?s=[h]:s.push(h),i++}return dm.errors=s,i===0}function hm(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let a in e)if(!(a==="alignment"||a==="verticalAlignment"||a==="width"||a==="wrapWord"||a==="truncate"||a==="paddingLeft"||a==="paddingRight")){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}if(e.alignment!==void 0&&(uo(e.alignment,{instancePath:t+"/alignment",parentData:e,parentDataProperty:"alignment",rootData:n})||(s=s===null?uo.errors:s.concat(uo.errors),i=s.length)),e.verticalAlignment!==void 0&&(po(e.verticalAlignment,{instancePath:t+"/verticalAlignment",parentData:e,parentDataProperty:"verticalAlignment",rootData:n})||(s=s===null?po.errors:s.concat(po.errors),i=s.length)),e.width!==void 0){let a=e.width;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/width",schemaPath:"#/properties/width/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}if(typeof a=="number"&&isFinite(a)&&(a<1||isNaN(a))){let c={instancePath:t+"/width",schemaPath:"#/properties/width/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};s===null?s=[c]:s.push(c),i++}}if(e.wrapWord!==void 0&&typeof e.wrapWord!="boolean"){let a={instancePath:t+"/wrapWord",schemaPath:"#/properties/wrapWord/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[a]:s.push(a),i++}if(e.truncate!==void 0){let a=e.truncate;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/truncate",schemaPath:"#/properties/truncate/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}if(e.paddingLeft!==void 0){let a=e.paddingLeft;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/paddingLeft",schemaPath:"#/properties/paddingLeft/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}if(e.paddingRight!==void 0){let a=e.paddingRight;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/paddingRight",schemaPath:"#/properties/paddingRight/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return hm.errors=s,i===0}function TM(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.columnDefault===void 0){let a={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"columnDefault"},message:"must have required property 'columnDefault'"};s===null?s=[a]:s.push(a),i++}if(e.columnCount===void 0){let a={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"columnCount"},message:"must have required property 'columnCount'"};s===null?s=[a]:s.push(a),i++}for(let a in e)if(!(a==="border"||a==="columns"||a==="columnDefault"||a==="columnCount"||a==="drawVerticalLine")){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}if(e.border!==void 0&&(mm(e.border,{instancePath:t+"/border",parentData:e,parentDataProperty:"border",rootData:n})||(s=s===null?mm.errors:s.concat(mm.errors),i=s.length)),e.columns!==void 0&&(dm(e.columns,{instancePath:t+"/columns",parentData:e,parentDataProperty:"columns",rootData:n})||(s=s===null?dm.errors:s.concat(dm.errors),i=s.length)),e.columnDefault!==void 0&&(hm(e.columnDefault,{instancePath:t+"/columnDefault",parentData:e,parentDataProperty:"columnDefault",rootData:n})||(s=s===null?hm.errors:s.concat(hm.errors),i=s.length)),e.columnCount!==void 0){let a=e.columnCount;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/columnCount",schemaPath:"#/properties/columnCount/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}if(typeof a=="number"&&isFinite(a)&&(a<1||isNaN(a))){let c={instancePath:t+"/columnCount",schemaPath:"#/properties/columnCount/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};s===null?s=[c]:s.push(c),i++}}if(e.drawVerticalLine!==void 0&&typeof e.drawVerticalLine!="function"){let a={instancePath:t+"/drawVerticalLine",schemaPath:"#/properties/drawVerticalLine/typeof",keyword:"typeof",params:{},message:'must pass "typeof" keyword validation'};s===null?s=[a]:s.push(a),i++}}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return TM.errors=s,i===0}});var Ab=q(ia=>{"use strict";var EW=ia&&ia.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ia,"__esModule",{value:!0});ia.validateConfig=void 0;var CW=EW(kM()),_W=(e,t)=>{let r=CW.default[e];if(!r(t)&&r.errors){let o=r.errors.map(n=>({message:n.message,params:n.params,schemaPath:n.schemaPath}));throw console.log("config",t),console.log("errors",o),new Error("Invalid config.")}};ia.validateConfig=_W});var IM=q(xm=>{"use strict";Object.defineProperty(xm,"__esModule",{value:!0});xm.makeStreamConfig=void 0;var OW=ze(),wW=Ab(),RW=(e,t={},r)=>Array.from({length:e}).map((o,n)=>({alignment:"left",paddingLeft:1,paddingRight:1,truncate:Number.POSITIVE_INFINITY,verticalAlignment:"top",wrapWord:!1,...r,...t[n]})),FW=e=>{if((0,wW.validateConfig)("streamConfig.json",e),e.columnDefault.width===void 0)throw new Error("Must provide config.columnDefault.width when creating a stream.");return{drawVerticalLine:()=>!0,...e,border:(0,OW.makeBorderConfig)(e.border),columns:RW(e.columnCount,e.columns,e.columnDefault)}};xm.makeStreamConfig=FW});var bm=q(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.mapDataUsingRowHeights=Cs.padCellVertically=void 0;var AW=ze(),vW=om(),ym=e=>new Array(e).fill(""),MW=(e,t,r)=>{let o=t-e.length;return r==="top"?[...e,...ym(o)]:r==="bottom"?[...ym(o),...e]:[...ym(Math.floor(o/2)),...e,...ym(Math.ceil(o/2))]};Cs.padCellVertically=MW;var TW=(e,t,r)=>{let o=e[0].length,n=e.map((s,i)=>{let a=t[i],c=Array.from({length:a},()=>new Array(o).fill(""));return s.forEach((p,l)=>{var f;let d=(f=r.spanningCellManager)===null||f===void 0?void 0:f.getContainingRange({col:l,row:i});if(d){d.extractCellContent(i).forEach((w,A)=>{c[A][l]=w});return}let h=(0,vW.wrapCell)(p,r.columns[l].width,r.columns[l].wrapWord);(0,Cs.padCellVertically)(h,a,r.columns[l].verticalAlignment).forEach((w,A)=>{c[A][l]=w})}),c});return(0,AW.flatten)(n)};Cs.mapDataUsingRowHeights=TW});var Dm=q(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.padTableData=_s.padString=void 0;var kW=(e,t,r)=>" ".repeat(t)+e+" ".repeat(r);_s.padString=kW;var IW=(e,t)=>e.map((r,o)=>r.map((n,s)=>{var i;if((i=t.spanningCellManager)===null||i===void 0?void 0:i.getContainingRange({col:s,row:o},{mapped:!0}))return n;let{paddingLeft:c,paddingRight:p}=t.columns[s];return(0,_s.padString)(n,c,p)}));_s.padTableData=IW});var vb=q(Sm=>{"use strict";Object.defineProperty(Sm,"__esModule",{value:!0});Sm.stringifyTableData=void 0;var PW=ze(),NW=e=>e.map(t=>t.map(r=>(0,PW.normalizeString)(String(r))));Sm.stringifyTableData=NW});var oT=q((ou,aa)=>{"use strict";var LW=30,qW="...",Mb=1/0,HW=17976931348623157e292,PM=0/0,jW="[object RegExp]",BW="[object Symbol]",UW=/^\s+|\s+$/g,WW=/\w*$/,zW=/^[-+]0x[0-9a-f]+$/i,KW=/^0b[01]+$/i,$W=/^0o[0-7]+$/i,Nb="\\ud800-\\udfff",zM="\\u0300-\\u036f\\ufe20-\\ufe23",KM="\\u20d0-\\u20f0",$M="\\ufe0e\\ufe0f",GW="["+Nb+"]",Tb="["+zM+KM+"]",kb="\\ud83c[\\udffb-\\udfff]",VW="(?:"+Tb+"|"+kb+")",GM="[^"+Nb+"]",VM="(?:\\ud83c[\\udde6-\\uddff]){2}",JM="[\\ud800-\\udbff][\\udc00-\\udfff]",YM="\\u200d",ZM=VW+"?",QM="["+$M+"]?",JW="(?:"+YM+"(?:"+[GM,VM,JM].join("|")+")"+QM+ZM+")*",YW=QM+ZM+JW,ZW="(?:"+[GM+Tb+"?",Tb,VM,JM,GW].join("|")+")",Ib=RegExp(kb+"(?="+kb+")|"+ZW+YW,"g"),QW=RegExp("["+YM+Nb+zM+KM+$M+"]"),XW=parseInt,XM=typeof global=="object"&&global&&global.Object===Object&&global,e4=typeof self=="object"&&self&&self.Object===Object&&self,t4=XM||e4||Function("return this")(),eT=typeof ou=="object"&&ou&&!ou.nodeType&&ou,NM=eT&&typeof aa=="object"&&aa&&!aa.nodeType&&aa,r4=NM&&NM.exports===eT,LM=r4&&XM.process,qM=function(){try{return LM&&LM.binding("util")}catch{}}(),HM=qM&&qM.isRegExp,o4=s4("length");function n4(e){return e.split("")}function s4(e){return function(t){return t?.[e]}}function i4(e){return function(t){return e(t)}}function Lb(e){return QW.test(e)}function a4(e){return Lb(e)?u4(e):o4(e)}function c4(e){return Lb(e)?p4(e):n4(e)}function u4(e){for(var t=Ib.lastIndex=0;Ib.test(e);)t++;return t}function p4(e){return e.match(Ib)||[]}var l4=Object.prototype,tT=l4.toString,jM=t4.Symbol,BM=jM?jM.prototype:void 0,UM=BM?BM.toString:void 0;function f4(e){return Em(e)&&tT.call(e)==jW}function m4(e,t,r){var o=-1,n=e.length;t<0&&(t=-t>n?0:n+t),r=r>n?n:r,r<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(n);++o<n;)s[o]=e[o+t];return s}function Pb(e){if(typeof e=="string")return e;if(rT(e))return UM?UM.call(e):"";var t=e+"";return t=="0"&&1/e==-Mb?"-0":t}function d4(e,t,r){var o=e.length;return r=r===void 0?o:r,!t&&r>=o?e:m4(e,t,r)}function Em(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function h4(e){return!!e&&typeof e=="object"}var g4=HM?i4(HM):f4;function rT(e){return typeof e=="symbol"||h4(e)&&tT.call(e)==BW}function x4(e){if(!e)return e===0?e:0;if(e=b4(e),e===Mb||e===-Mb){var t=e<0?-1:1;return t*HW}return e===e?e:0}function y4(e){var t=x4(e),r=t%1;return t===t?r?t-r:t:0}function b4(e){if(typeof e=="number")return e;if(rT(e))return PM;if(Em(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Em(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(UW,"");var r=KW.test(e);return r||$W.test(e)?XW(e.slice(2),r?2:8):zW.test(e)?PM:+e}function WM(e){return e==null?"":Pb(e)}function D4(e,t){var r=LW,o=qW;if(Em(t)){var n="separator"in t?t.separator:n;r="length"in t?y4(t.length):r,o="omission"in t?Pb(t.omission):o}e=WM(e);var s=e.length;if(Lb(e)){var i=c4(e);s=i.length}if(r>=s)return e;var a=r-a4(o);if(a<1)return o;var c=i?d4(i,0,a).join(""):e.slice(0,a);if(n===void 0)return c+o;if(i&&(a+=c.length-a),g4(n)){if(e.slice(a).search(n)){var p,l=c;for(n.global||(n=RegExp(n.source,WM(WW.exec(n))+"g")),n.lastIndex=0;p=n.exec(l);)var f=p.index;c=c.slice(0,f===void 0?a:f)}}else if(e.indexOf(Pb(n),a)!=a){var d=c.lastIndexOf(n);d>-1&&(c=c.slice(0,d))}return c+o}aa.exports=D4});var Cm=q(jo=>{"use strict";var S4=jo&&jo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jo,"__esModule",{value:!0});jo.truncateTableData=jo.truncateString=void 0;var E4=S4(oT()),C4=(e,t)=>(0,E4.default)(e,{length:t,omission:"\u2026"});jo.truncateString=C4;var _4=(e,t)=>e.map(r=>r.map((o,n)=>(0,jo.truncateString)(o,t[n])));jo.truncateTableData=_4});var iT=q(Om=>{"use strict";Object.defineProperty(Om,"__esModule",{value:!0});Om.createStream=void 0;var O4=Eb(),w4=Cb(),_m=_b(),nT=Ob(),R4=IM(),F4=bm(),A4=Dm(),v4=vb(),M4=Cm(),T4=ze(),sT=(e,t)=>{let r=(0,v4.stringifyTableData)(e);r=(0,M4.truncateTableData)(r,(0,T4.extractTruncates)(t));let o=(0,w4.calculateRowHeights)(r,t);return r=(0,F4.mapDataUsingRowHeights)(r,o,t),r=(0,O4.alignTableData)(r,t),r=(0,A4.padTableData)(r,t),r},k4=(e,t,r)=>{let n=sT([e],r).map(i=>(0,nT.drawRow)(i,r)).join(""),s;s="",s+=(0,_m.drawBorderTop)(t,r),s+=n,s+=(0,_m.drawBorderBottom)(t,r),s=s.trimEnd(),process.stdout.write(s)},I4=(e,t,r)=>{let n=sT([e],r).map(a=>(0,nT.drawRow)(a,r)).join(""),s="",i=(0,_m.drawBorderBottom)(t,r);i!==`
`&&(s="\r\x1B[K"),s+=(0,_m.drawBorderJoin)(t,r),s+=n,s+=i,s=s.trimEnd(),process.stdout.write(s)},P4=e=>{let t=(0,R4.makeStreamConfig)(e),r=Object.values(t.columns).map(n=>n.width+n.paddingLeft+n.paddingRight),o=!0;return{write:n=>{if(n.length!==t.columnCount)throw new Error("Row cell count does not match the config.columnCount.");o?(o=!1,k4(n,r,t)):I4(n,r,t)}}};Om.createStream=P4});var aT=q(wm=>{"use strict";Object.defineProperty(wm,"__esModule",{value:!0});wm.calculateOutputColumnWidths=void 0;var N4=e=>e.columns.map(t=>t.paddingLeft+t.width+t.paddingRight);wm.calculateOutputColumnWidths=N4});var cT=q(Rm=>{"use strict";Object.defineProperty(Rm,"__esModule",{value:!0});Rm.drawTable=void 0;var L4=_b(),q4=am(),H4=Ob(),j4=ze(),B4=(e,t,r,o)=>{let{drawHorizontalLine:n,singleLine:s}=o,i=(0,j4.groupBySizes)(e,r).map((a,c)=>a.map(p=>(0,H4.drawRow)(p,{...o,rowIndex:c})).join(""));return(0,q4.drawContent)({contents:i,drawSeparator:(a,c)=>(a===0||a===c||!s)&&n(a,c),elementType:"row",rowIndex:-1,separatorGetter:(0,L4.createTableBorderGetter)(t,{...o,rowCount:i.length}),spanningCellManager:o.spanningCellManager})};Rm.drawTable=B4});var uT=q(Fm=>{"use strict";Object.defineProperty(Fm,"__esModule",{value:!0});Fm.injectHeaderConfig=void 0;var U4=(e,t)=>{var r;let o=(r=t.spanningCells)!==null&&r!==void 0?r:[],n=t.header,s=[...e];if(n){o=o.map(({row:c,...p})=>({...p,row:c+1}));let{content:i,...a}=n;o.unshift({alignment:"center",col:0,colSpan:e[0].length,paddingLeft:1,paddingRight:1,row:0,wrapWord:!1,...a}),s.unshift([i,...Array.from({length:e[0].length-1}).fill("")])}return[s,o]};Fm.injectHeaderConfig=U4});var lT=q(Bo=>{"use strict";var W4=Bo&&Bo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bo,"__esModule",{value:!0});Bo.calculateMaximumColumnWidths=Bo.calculateMaximumCellWidth=void 0;var z4=W4(Xi()),pT=ze(),K4=e=>Math.max(...e.split(`
`).map(z4.default));Bo.calculateMaximumCellWidth=K4;var $4=(e,t=[])=>{let r=new Array(e[0].length).fill(0),o=t.map(pT.calculateRangeCoordinate),n=(s,i)=>o.some(a=>(0,pT.isCellInRange)({col:i,row:s},a));return e.forEach((s,i)=>{s.forEach((a,c)=>{n(i,c)||(r[c]=Math.max(r[c],(0,Bo.calculateMaximumCellWidth)(a)))})}),r};Bo.calculateMaximumColumnWidths=$4});var mT=q(gn=>{"use strict";var G4=gn&&gn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gn,"__esModule",{value:!0});gn.alignVerticalRangeContent=gn.wrapRangeContent=void 0;var V4=G4(Xi()),J4=Sb(),Y4=bm(),Z4=Dm(),Q4=Cm(),fT=ze(),X4=om(),e9=(e,t,r)=>{let{topLeft:o,paddingRight:n,paddingLeft:s,truncate:i,wrapWord:a,alignment:c}=e,p=r.rows[o.row][o.col],l=t-s-n;return(0,X4.wrapCell)((0,Q4.truncateString)(p,i),l,a).map(f=>{let d=(0,J4.alignString)(f,l,c);return(0,Z4.padString)(d,s,n)})};gn.wrapRangeContent=e9;var t9=(e,t,r)=>{let{rows:o,drawHorizontalLine:n,rowHeights:s}=r,{topLeft:i,bottomRight:a,verticalAlignment:c}=e;if(s.length===0)return[];let p=(0,fT.sumArray)(s.slice(i.row,a.row+1)),l=a.row-i.row,f=(0,fT.sequence)(i.row+1,a.row).filter(h=>!n(h,o.length)).length,d=p+l-f;return(0,Y4.padCellVertically)(t,d,c).map(h=>h.length===0?" ".repeat((0,V4.default)(t[0])):h)};gn.alignVerticalRangeContent=t9});var dT=q(Am=>{"use strict";Object.defineProperty(Am,"__esModule",{value:!0});Am.calculateSpanningCellWidth=void 0;var qb=ze(),r9=(e,t)=>{let{columnsConfig:r,drawVerticalLine:o}=t,{topLeft:n,bottomRight:s}=e,i=(0,qb.sumArray)(r.slice(n.col,s.col+1).map(({width:l})=>l)),a=n.col===s.col?r[n.col].paddingRight+r[s.col].paddingLeft:(0,qb.sumArray)(r.slice(n.col,s.col+1).map(({paddingLeft:l,paddingRight:f})=>l+f)),c=s.col-n.col,p=(0,qb.sequence)(n.col+1,s.col).filter(l=>!o(l,r.length)).length;return i+a+c-p};Am.calculateSpanningCellWidth=r9});var hT=q(vm=>{"use strict";Object.defineProperty(vm,"__esModule",{value:!0});vm.makeRangeConfig=void 0;var o9=ze(),n9=(e,t)=>{var r;let{topLeft:o,bottomRight:n}=(0,o9.calculateRangeCoordinate)(e);return{...{...t[o.col],...e,paddingRight:(r=e.paddingRight)!==null&&r!==void 0?r:t[n.col].paddingRight},bottomRight:n,topLeft:o}};vm.makeRangeConfig=n9});var yT=q(Mm=>{"use strict";Object.defineProperty(Mm,"__esModule",{value:!0});Mm.createSpanningCellManager=void 0;var gT=mT(),s9=dT(),i9=hT(),ca=ze(),Hb=(e,t)=>t.find(r=>(0,ca.isCellInRange)(e,r)),xT=(e,t)=>{let r=(0,s9.calculateSpanningCellWidth)(e,t),o=(0,gT.wrapRangeContent)(e,r,t),n=(0,gT.alignVerticalRangeContent)(e,o,t);return{...e,extractBorderContent:a=>{let{topLeft:c}=e,p=(0,ca.sumArray)(t.rowHeights.slice(c.row,a))+(a-c.row-1);return n[p]},extractCellContent:a=>{let{topLeft:c}=e,{drawHorizontalLine:p,rowHeights:l}=t,f=a-c.row,d=(0,ca.sequence)(c.row+1,a).filter(S=>!p?.(S,l.length)).length,h=(0,ca.sumArray)(l.slice(c.row,a))+f-d;return n.slice(h,h+l[a])},height:o.length,width:r}},a9=(e,t,r)=>{let o=Hb(e,r),n=Hb(t,r);return o&&n?(0,ca.areCellEqual)(o.topLeft,n.topLeft):!1},c9=e=>{let{row:t,col:r}=e.topLeft;return`${t}/${r}`},u9=e=>{let{spanningCellConfigs:t,columnsConfig:r}=e,o=t.map(i=>(0,i9.makeRangeConfig)(i,r)),n={},s=[];return{getContainingRange:(i,a)=>{var c;let p=a?.mapped?(0,ca.findOriginalRowIndex)(s,i.row):i.row,l=Hb({...i,row:p},o);if(!l)return;if(s.length===0)return xT(l,{...e,rowHeights:s});let f=c9(l);return(c=n[f])!==null&&c!==void 0||(n[f]=xT(l,{...e,rowHeights:s})),n[f]},inSameRange:(i,a)=>a9(i,a,o),rowHeights:s,setRowHeights:i=>{s=i}}};Mm.createSpanningCellManager=u9});var bT=q(km=>{"use strict";Object.defineProperty(km,"__esModule",{value:!0});km.validateSpanningCellConfig=void 0;var jb=ze(),Tm=(e,t,r)=>e<=r&&r<=t,p9=(e,t)=>{let[r,o]=[e.length,e[0].length];t.forEach((i,a)=>{let{colSpan:c,rowSpan:p}=i;if(c===void 0&&p===void 0)throw new Error(`Expect at least colSpan or rowSpan is provided in config.spanningCells[${a}]`);if(c!==void 0&&c<1)throw new Error(`Expect colSpan is not equal zero, instead got: ${c} in config.spanningCells[${a}]`);if(p!==void 0&&p<1)throw new Error(`Expect rowSpan is not equal zero, instead got: ${p} in config.spanningCells[${a}]`)});let n=t.map(jb.calculateRangeCoordinate);n.forEach(({topLeft:i,bottomRight:a},c)=>{if(!Tm(0,o-1,i.col)||!Tm(0,r-1,i.row)||!Tm(0,o-1,a.col)||!Tm(0,r-1,a.row))throw new Error(`Some cells in config.spanningCells[${c}] are out of the table`)});let s=Array.from({length:r},()=>Array.from({length:o}));n.forEach(({topLeft:i,bottomRight:a},c)=>{(0,jb.sequence)(i.row,a.row).forEach(p=>{(0,jb.sequence)(i.col,a.col).forEach(l=>{if(s[p][l]!==void 0)throw new Error(`Spanning cells in config.spanningCells[${s[p][l]}] and config.spanningCells[${c}] are overlap each other`);s[p][l]=c})})})};km.validateSpanningCellConfig=p9});var DT=q(Im=>{"use strict";Object.defineProperty(Im,"__esModule",{value:!0});Im.makeTableConfig=void 0;var l9=lT(),f9=yT(),m9=ze(),d9=Ab(),h9=bT(),g9=(e,t,r,o)=>{let n=(0,l9.calculateMaximumColumnWidths)(e,o);return e[0].map((s,i)=>({alignment:"left",paddingLeft:1,paddingRight:1,truncate:Number.POSITIVE_INFINITY,verticalAlignment:"top",width:n[i],wrapWord:!1,...r,...t?.[i]}))},x9=(e,t={},r)=>{var o,n,s,i,a;(0,d9.validateConfig)("config.json",t),(0,h9.validateSpanningCellConfig)(e,(o=t.spanningCells)!==null&&o!==void 0?o:[]);let c=(n=r??t.spanningCells)!==null&&n!==void 0?n:[],p=g9(e,t.columns,t.columnDefault,c),l=(s=t.drawVerticalLine)!==null&&s!==void 0?s:()=>!0,f=(i=t.drawHorizontalLine)!==null&&i!==void 0?i:()=>!0;return{...t,border:(0,m9.makeBorderConfig)(t.border),columns:p,drawHorizontalLine:f,drawVerticalLine:l,singleLine:(a=t.singleLine)!==null&&a!==void 0?a:!1,spanningCellManager:(0,f9.createSpanningCellManager)({columnsConfig:p,drawHorizontalLine:f,drawVerticalLine:l,rows:e,spanningCellConfigs:c})}};Im.makeTableConfig=x9});var ST=q(Pm=>{"use strict";Object.defineProperty(Pm,"__esModule",{value:!0});Pm.validateTableData=void 0;var y9=ze(),b9=e=>{if(!Array.isArray(e))throw new TypeError("Table data must be an array.");if(e.length===0)throw new Error("Table must define at least one row.");if(e[0].length===0)throw new Error("Table must define at least one column.");let t=e[0].length;for(let r of e){if(!Array.isArray(r))throw new TypeError("Table row data must be an array.");if(r.length!==t)throw new Error("Table must have a consistent number of cells.");for(let o of r)if(/[\u0001-\u0006\u0008\u0009\u000B-\u001A]/.test((0,y9.normalizeString)(String(o))))throw new Error("Table data must not contain control characters.")}};Pm.validateTableData=b9});var ET=q(Nm=>{"use strict";Object.defineProperty(Nm,"__esModule",{value:!0});Nm.table=void 0;var D9=Eb(),S9=aT(),E9=Cb(),C9=cT(),_9=uT(),O9=DT(),w9=bm(),R9=Dm(),F9=vb(),A9=Cm(),v9=ze(),M9=ST(),T9=(e,t={})=>{(0,M9.validateTableData)(e);let r=(0,F9.stringifyTableData)(e),[o,n]=(0,_9.injectHeaderConfig)(r,t),s=(0,O9.makeTableConfig)(o,t,n);r=(0,A9.truncateTableData)(o,(0,v9.extractTruncates)(s));let i=(0,E9.calculateRowHeights)(r,s);s.spanningCellManager.setRowHeights(i),r=(0,w9.mapDataUsingRowHeights)(r,i,s),r=(0,D9.alignTableData)(r,s),r=(0,R9.padTableData)(r,s);let a=(0,S9.calculateOutputColumnWidths)(s);return(0,C9.drawTable)(r,a,i,s)};Nm.table=T9});var _T=q(CT=>{"use strict";Object.defineProperty(CT,"__esModule",{value:!0})});var OT=q(Kt=>{"use strict";var k9=Kt&&Kt.__createBinding||(Object.create?function(e,t,r,o){o===void 0&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){o===void 0&&(o=r),e[o]=t[r]}),I9=Kt&&Kt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&k9(t,e,r)};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.getBorderCharacters=Kt.createStream=Kt.table=void 0;var P9=iT();Object.defineProperty(Kt,"createStream",{enumerable:!0,get:function(){return P9.createStream}});var N9=yb();Object.defineProperty(Kt,"getBorderCharacters",{enumerable:!0,get:function(){return N9.getBorderCharacters}});var L9=ET();Object.defineProperty(Kt,"table",{enumerable:!0,get:function(){return L9.table}});I9(_T(),Kt)});var Ub=e=>typeof e=="function",u=function(e,t){if(typeof e=="function")return function(){return e(arguments)?t.apply(this,arguments):r=>t(r,...arguments)};switch(e){case 0:return t;case 1:return function(r){return arguments.length>=1?t(r):function(){return t(r)}};case 2:return function(r,o){return arguments.length>=2?t(r,o):function(n){return t(n,r)}};case 3:return function(r,o,n){return arguments.length>=3?t(r,o,n):function(s){return t(s,r,o)}};case 4:return function(r,o,n,s){return arguments.length>=4?t(r,o,n,s):function(i){return t(i,r,o,n)}};case 5:return function(r,o,n,s,i){return arguments.length>=5?t(r,o,n,s,i):function(a){return t(a,r,o,n,s)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);let r=arguments;return function(o){return t(o,...r)}}}};var P=e=>e;var ws=e=>()=>e,Ir=ws(!0),Gt=ws(!1),qm=ws(null),iu=ws(void 0),Rs=iu;function Qe(e,t,r,o,n,s,i,a,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return r(t(e));case 4:return o(r(t(e)));case 5:return n(o(r(t(e))));case 6:return s(n(o(r(t(e)))));case 7:return i(s(n(o(r(t(e))))));case 8:return a(i(s(n(o(r(t(e)))))));case 9:return c(a(i(s(n(o(r(t(e))))))));default:{let p=arguments[0];for(let l=1;l<arguments.length;l++)p=arguments[l](p);return p}}}var Fs=e=>(t,r)=>t===r||e(t,r);var Wb=u(2,(e,t)=>Fs((r,o)=>e(t(r),t(o))));var zb=e=>Fs((t,r)=>{if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(!e(t[o],r[o]))return!1;return!0});var As=e=>(t,r)=>t===r?0:e(t,r);var Kb=As((e,t)=>e<t?-1:1);var $b=e=>As((t,r)=>e(r,t));var ua=u(2,(e,t)=>As((r,o)=>e(t(r),t(o))));var NT=e=>As((t,r)=>{let o=Math.min(t.length,r.length),n=0;for(let s of e){if(n>=o)break;let i=s(t[n],r[n]);if(i!==0)return i;n++}return 0});var Gb=(...e)=>NT(e);var Hm=e=>u(2,(t,r)=>e(t,r)===1);var jm=e=>u(2,(t,r)=>t===r||e(t,r)>-1?t:r);var pa=e=>typeof e=="string",yn=e=>typeof e=="number",uu=e=>typeof e=="boolean",vs=e=>typeof e=="bigint",Vb=e=>typeof e=="symbol",Jb=Ub,la=e=>e===void 0;var Yb=e=>e===null;var Zb=e=>!1;var de=e=>typeof e=="object"&&e!=null||Jb(e);var bn=e=>e==null,Qb=e=>e!=null;var pu=e=>e instanceof Date,Vt=e=>de(e)&&Symbol.iterator in e,fa=e=>de(e)&&!Array.isArray(e);var Xb=e=>!e;var eD,tD=Symbol.for("@effect/data/Gen/GenKind"),Bm=class{constructor(t){this.value=t,this[eD]=tD}get _F(){return P}get _R(){return t=>t}get _O(){return t=>t}get _E(){return t=>t}[(eD=tD,Symbol.iterator)](){return new Um(this)}},Um=class e{constructor(t){this.self=t,this.called=!1}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new e(this.self)}};var rD=()=>function(){let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return new Bm(e)};var HT=335903614,jT=4150755663,BT=1481765933,UT=1284865837,WT=9007199254740992,zT=134217728,Ms=class{constructor(t,r,o,n){return bn(r)&&bn(t)?(r=Math.random()*4294967295>>>0,t=0):bn(r)&&(r=t,t=0),bn(n)&&bn(o)?(n=this._state?this._state[3]:jT,o=this._state?this._state[2]:HT):bn(n)&&(n=o,o=0),this._state=new Int32Array([0,0,o>>>0,((n||0)|1)>>>0]),this._next(),oD(this._state,this._state[0],this._state[1],t>>>0,r>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(t){this._state[0]=t[0],this._state[1]=t[1],this._state[2]=t[2],this._state[3]=t[3]|1}integer(t){if(!t)return this._next();if(t=t>>>0,!(t&t-1))return this._next()&t-1;let r=0,o=(-t>>>0)%t>>>0;for(r=this._next();r<o;r=this._next());return r%t}number(){let t=(this._next()&67108863)*1,r=(this._next()&134217727)*1;return(t*zT+r)/WT}_next(){let t=this._state[0]>>>0,r=this._state[1]>>>0;KT(this._state,t,r,BT,UT),oD(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let o=t>>>18,n=(r>>>18|t<<14)>>>0;o=(o^t)>>>0,n=(n^r)>>>0;let s=(n>>>27|o<<5)>>>0,i=t>>>27,a=(-i>>>0&31)>>>0;return(s>>>i|s<<a)>>>0}};function KT(e,t,r,o,n){let s=(r>>>16)*(n&65535)>>>0,i=(r&65535)*(n>>>16)>>>0,a=(r&65535)*(n&65535)>>>0,c=(r>>>16)*(n>>>16)+((i>>>16)+(s>>>16))>>>0;i=i<<16>>>0,a=a+i>>>0,a>>>0<i>>>0&&(c=c+1>>>0),s=s<<16>>>0,a=a+s>>>0,a>>>0<s>>>0&&(c=c+1>>>0),c=c+Math.imul(r,o)>>>0,c=c+Math.imul(t,n)>>>0,e[0]=c,e[1]=a}function oD(e,t,r,o,n){let s=t+o>>>0,i=r+n>>>0;i>>>0<r>>>0&&(s=s+1|0),e[0]=s,e[1]=i}var zm=Symbol.for("@effect/data/Global/globalStoreId");zm in globalThis||(globalThis[zm]=new Map);var Wm=globalThis[zm],V=(e,t)=>(Wm.has(e)||Wm.set(e,t()),Wm.get(e));var Km=V(Symbol.for("@effect/data/Hash/randomHashCache"),()=>new WeakMap),VT=V(Symbol.for("@effect/data/Hash/pcgr"),()=>new Ms),R=Symbol.for("@effect/data/Hash"),E=e=>{switch(typeof e){case"number":return fu(e);case"bigint":return He(e.toString(10));case"boolean":return He(String(e));case"symbol":return He(String(e));case"string":return He(e);case"undefined":return He("undefined");case"function":case"object":return e===null?He("null"):JT(e)?e[R]():Uo(e);default:throw new Error("Bug in Equal.hash")}},Uo=e=>(Km.has(e)||Km.set(e,fu(VT.integer(Number.MAX_SAFE_INTEGER))),Km.get(e)),T=e=>t=>t*53^e,lu=e=>e&3221225471|e>>>1&1073741824,JT=e=>typeof e=="object"&&e!==null&&R in e,fu=e=>{if(e!==e||e===1/0)return 0;let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return lu(e)},He=e=>{let t=5381,r=e.length;for(;r;)t=t*33^e.charCodeAt(--r);return lu(t)},YT=(e,t)=>{let r=12289;for(let o=0;o<t.length;o++)r^=T(E(e[t[o]]))(He(t[o]));return lu(r)},da=e=>YT(e,Object.keys(e)),mo=e=>{let t=6151;for(let r=0;r<e.length;r++)t=T(E(e[r]))(t);return lu(t)};var F=Symbol.for("@effect/data/Equal");function O(){return arguments.length===1?e=>nD(e,arguments[0]):nD(arguments[0],arguments[1])}function nD(e,t){if(e===t)return!0;let r=typeof e;return r!==typeof t?!1:(r==="object"||r==="function")&&e!==null&&t!==null&&Ts(e)&&Ts(t)?E(e)===E(t)&&e[F](t):!1}var Ts=e=>typeof e=="object"&&e!==null&&F in e,mu=()=>(e,t)=>E(e)===E(t)&&O(e,t);var Wo=Symbol.for("@effect/io/Effect"),zo={_R:e=>e,_E:e=>e,_A:e=>e};var C=(e,t)=>{switch(t.length){case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let r=e;for(let o=0,n=t.length;o<n;o++)r=t[o](r);return r}}};var sD,iD,du=Symbol.for("@effect/data/Option"),$m=class{[(sD=Wo,F)](t){return aD(t)&&Vm(t)&&O(t.i0,this.i0)}[R](){return E(this.i0)}toString(){return`Some(${String(this.i0)})`}toJSON(){return{_tag:this._tag,value:this.i0}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}get[du](){return{_A:t=>t}}get value(){return this.i0}constructor(t){this.i0=t,this._tag="Some",this._id=du,this.i1=void 0,this.i2=void 0,this[sD]=zo}pipe(){return C(this,arguments)}},Gm=class{constructor(){this._tag="None",this._id=du,this.i0=void 0,this.i1=void 0,this.i2=void 0,this[iD]=zo}[(iD=Wo,F)](t){return aD(t)&&hu(t)}[R](){return E(this._tag)}toString(){return"None()"}toJSON(){return{_tag:this._tag}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}get[du](){return{_A:t=>t}}pipe(){return C(this,arguments)}},aD=e=>typeof e=="object"&&e!=null&&"_tag"in e&&(e._tag==="None"||e._tag==="Some")&&Ts(e),hu=e=>e._tag==="None",Vm=e=>e._tag==="Some",ks=new Gm,Is=e=>new $m(e);var uD,pD,gu=Symbol.for("@effect/data/Either"),Jm=class{[(uD=Wo,F)](t){return lD(t)&&xu(t)&&O(t.i0,this.i0)}[R](){return E(this.i0)}get right(){return this.i0}constructor(t){this.i0=t,this._tag="Right",this._id=gu,this.i1=void 0,this.i2=void 0,this[uD]=zo}get[gu](){return{_E:t=>t,_A:t=>t}}toString(){return`right(${String(this.i0)})`}toJSON(){return{_tag:this._tag,right:this.i0}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},Ym=class{[(pD=Wo,F)](t){return lD(t)&&Ps(t)&&O(t.i0,this.i0)}[R](){return E(this.i0)}get[gu](){return{_E:t=>t,_A:t=>t}}get left(){return this.i0}constructor(t){this.i0=t,this._tag="Left",this._id=gu,this.i1=void 0,this.i2=void 0,this[pD]=zo}toString(){return`left(${String(this.i0)})`}toJSON(){return{_tag:this._tag,left:this.i0}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},lD=e=>typeof e=="object"&&e!=null&&"_tag"in e&&(e._tag==="Left"||e._tag==="Right")&&Ts(e),Ps=e=>e._tag==="Left",xu=e=>e._tag==="Right",yu=e=>new Ym(e),bu=e=>new Jm(e),Zm=e=>xu(e)?ks:Is(e.left),Qm=e=>Ps(e)?ks:Is(e.right);var ZT=Symbol.for("@effect/data/Either"),H=bu,z=yu;var ha=e=>de(e)&&"_id"in e&&e._id===ZT,Re=Ps,Pr=xu;var ga=u(2,(e,{onLeft:t,onRight:r})=>Re(e)?t(e.left):r(e.right)),Du=ga({onLeft:P,onRight:P});var mD=u(2,(e,t)=>e+t),dD=u(2,(e,t)=>e*t),hD=u(2,(e,t)=>e-t),gD=u(2,(e,t)=>e/t);var vt=Kb;var xD=Symbol.for("@effect/data/Option"),g=()=>ks,x=Is,Xm=e=>de(e)&&"_id"in e&&e._id===xD,j=hu,N=Vm,je=u(2,(e,{onNone:t,onSome:r})=>j(e)?t():r(e.value)),tk=e=>t=>N(e(t)),rk=e=>{for(let t of e)return x(t);return g()},yD=Qm,ok=Zm,J=u(2,(e,t)=>j(e)?t():e.value),Dn=u(2,(e,t)=>j(e)?t():e),nk=u(2,(e,t)=>j(e)?te(t(),bu):te(e,yu)),sk=e=>{let t=g();for(t of e)if(N(t))return t;return t},Xe=e=>e==null?g():x(e),ik=e=>(...t)=>Xe(e(...t)),ed=J(qm),Ke=J(iu),ak=e=>(...t)=>{try{return x(e(...t))}catch{return g()}},bD=u(2,(e,t)=>{if(N(e))return e.value;throw t()}),td=bD(()=>new Error("getOrThrow called on a None")),te=u(2,(e,t)=>j(e)?g():x(t(e.value))),DD=u(2,(e,t)=>te(e,()=>t)),ck=DD(void 0),uk=x(void 0),mr=u(2,(e,t)=>j(e)?g():t(e.value)),pk=u(2,(e,t)=>j(e)?g():Xe(t(e.value))),rd=mr(P),lk=u(2,(e,t)=>mr(e,()=>t)),fk=u(2,(e,t)=>r=>mr(e(r),t)),mk=u(2,(e,t)=>SD(e,()=>t)),SD=u(2,(e,t)=>mr(e,r=>te(t(r),()=>r))),ED=(e,t)=>N(e)&&N(t)?x([e.value,t.value]):g(),dk=(e,t)=>{if(j(e))return g();let r=[e.value];for(let o of t){if(j(o))return g();r.push(o.value)}return x(r)},CD=e=>{if(Symbol.iterator in e){let r=[];for(let o of e){if(j(o))return g();r.push(o.value)}return x(r)}let t={};for(let r of Object.keys(e)){let o=e[r];if(j(o))return g();t[r]=o.value}return x(t)},od=u(3,(e,t,r)=>te(ED(e,t),([o,n])=>r(o,n))),hk=u(2,(e,t)=>od(e,t,(r,o)=>r(o))),gk=u(3,(e,t,r)=>{let o=t;for(let n of e)N(n)&&(o=r(o,n.value));return o}),_D=e=>j(e)?[]:[e.value],xk=u(2,(e,t)=>{if(j(e))return[g(),g()];let r=t(e.value);return Ps(r)?[x(r.left),g()]:[g(),x(r.right)]}),OD=u(2,(e,t)=>j(e)?g():t(e.value)),yk=u(2,(e,t)=>OD(e,r=>t(r)?Is(r):ks)),bk=e=>Fs((t,r)=>t===r||(j(t)?j(r):j(r)?!1:e(t.value,r.value))),Dk=e=>As((t,r)=>N(t)?N(r)?e(t.value,r.value):1:-1),ya=e=>u(2,(t,r)=>od(t,r,e)),wD=e=>t=>e(t)?x(t):g(),RD=e=>u(2,(t,r)=>j(t)?!1:e(t.value,r)),Sk=mu(),nd=RD(Sk),Ek=u(2,(e,t)=>j(e)?!1:t(e.value)),Ck=ya(mD),_k=ya(dD),Ok=ya(hD),wk=ya(gD),Rk=e=>{let t=0;for(let r of e)N(r)&&(t+=r.value);return t},Fk=e=>{let t=1;for(let r of e)if(N(r)){let o=r.value;if(o===0)return 0;t*=o}return t},Ak=u(2,(e,t)=>te(e,r=>({[t]:r}))),vk=u(3,(e,t,r)=>te(e,o=>Object.assign({},o,{[t]:r(o)})));var Mk=u(3,(e,t,r)=>mr(e,o=>te(r(o),n=>Object.assign({},o,{[t]:n})))),Tk=x({}),kk=rD(),Ik=e=>{let t=e(kk),r=t.next();if(r.done)return x(void 0);{let o=r.value.value;if(j(o))return o;for(;!r.done;)if(r=t.next(o.value),!r.done&&(o=r.value.value,j(o)))return o;return x(r.value)}};var sd=e=>e.length>0;var id=(e,t)=>{let r=Math.max(1,Math.floor(e)),o=[t(0)];for(let n=1;n<r;n++)o.push(t(n));return o};var re=e=>Array.isArray(e)?e:Array.from(e);var dr=u(2,(e,t)=>[t,...e]);var FD=u(2,(e,t)=>[...e,t]);var Nk=e=>e.length===0,ad=Nk,Su=sd,Nr=sd;var AD=(e,t)=>e<0||e>=t.length;var Lk=u(2,(e,t)=>{let r=Math.floor(t);return AD(r,e)?g():x(e[r])}),cd=u(2,(e,t)=>{let r=Math.floor(t);if(AD(r,e))throw new Error(`Index ${r} out of bounds`);return e[r]});var Eu=Lk(0),Fe=cd(0),vD=e=>Nr(e)?x(qk(e)):g(),qk=e=>e[e.length-1];var Jt=e=>e.slice(1);var ud=e=>Array.from(e).reverse();var Sn=u(2,(e,t)=>{let r=Array.from(e);return r.sort(t),r});var pd=u(2,(e,t)=>MD(e,t,(r,o)=>[r,o])),MD=u(3,(e,t,r)=>{let o=re(e),n=re(t);return Nr(o)&&Nr(n)?Hk(n,r)(o):[]});var Hk=u(3,(e,t,r)=>{let o=[r(Fe(e),Fe(t))],n=Math.min(e.length,t.length);for(let s=1;s<n;s++)o[s]=r(e[s],t[s]);return o});var jk=u(2,(e,t)=>{let r=[Fe(e)],o=Jt(e);for(let n of o)r.every(s=>!t(n,s))&&r.push(n);return r});var En=()=>[],Mt=e=>[e],ho=u(2,(e,t)=>e.map(t)),Ns=ho,Cu=u(2,(e,t)=>{if(ad(e))return[];let r=[];for(let o=0;o<e.length;o++)r.push(...t(e[o],o));return r});var _u=Cu(P);var ba=u(2,(e,t)=>{let r=re(e),o=[];for(let n=0;n<r.length;n++){let s=t(r[n],n);N(s)&&o.push(s.value)}return o});var TD=ba(P);var bt=u(3,(e,t,r)=>re(e).reduce((o,n,s)=>r(o,n,s),t)),Ou=u(3,(e,t,r)=>re(e).reduceRight((o,n,s)=>r(o,n,s),t));var ld=(e,t)=>{let r=[],o=e,n;for(;N(n=t(o));){let[s,i]=n.value;r.push(s),o=i}return r};var kD=zb;var Bk=u(2,(e,t)=>{let r=re(e);return Nr(r)?jk(t)(r):[]}),ID=Bk(mu());var go=u(2,(e,t)=>re(e).join(t));var PD,fd=Symbol.for("@effect/data/Context/Tag"),wu=class{[(PD=Wo,F)](t){return this===t}[R](){return Uo(this)}get[fd](){return{_S:t=>t,_I:t=>t}}constructor(t){this._tag="Tag",this.i0=void 0,this.i1=void 0,this.i2=void 0,this[PD]=zo;let r=Error.stackTraceLimit;if(Error.stackTraceLimit=3,this.creationError=new Error,Error.stackTraceLimit=r,typeof t<"u")return this.i0=t,V(t,()=>this)}get stack(){return this.creationError.stack}toString(){return JSON.stringify(this)}toJSON(){return{_tag:"Tag",identifier:this.i0,stack:this.stack}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}of(t){return t}context(t){return hd(this,t)}},md=Symbol.for("@effect/data/Context"),hr=class{[F](t){if(dd(t)&&this.unsafeMap.size===t.unsafeMap.size){for(let r of this.unsafeMap.keys())if(!t.unsafeMap.has(r)||!O(this.unsafeMap.get(r),t.unsafeMap.get(r)))return!1;return!0}return!1}[R](){return fu(this.unsafeMap.size)}constructor(t){this.unsafeMap=t,this._id=md,this._S=r=>r}pipe(){return C(this,arguments)}},Uk=e=>{let t=new Error(`Service not found${e.i0?`: ${String(e.i0)}`:""}`);if(e.stack){let r=e.stack.split(`
`);if(r.length>2){let o=r[3].match(/at (.*)/);o&&(t.message=t.message+` (defined at ${o[1]})`)}}if(t.stack){let r=t.stack.split(`
`);r.splice(1,3),t.stack=r.join(`
`)}return t},dd=e=>typeof e=="object"&&e!==null&&"_id"in e&&e._id===md,ND=e=>typeof e=="object"&&e!==null&&fd in e,LD=()=>new hr(new Map),hd=(e,t)=>new hr(new Map([[e,t]])),qD=u(3,(e,t,r)=>{let o=new Map(e.unsafeMap);return o.set(t,r),new hr(o)}),gd=u(2,(e,t)=>{if(!e.unsafeMap.has(t))throw Uk(t);return e.unsafeMap.get(t)}),HD=gd,jD=u(2,(e,t)=>e.unsafeMap.has(t)?x(e.unsafeMap.get(t)):g()),BD=u(2,(e,t)=>{let r=new Map(e.unsafeMap);for(let[o,n]of t.unsafeMap)r.set(o,n);return new hr(r)}),UD=(...e)=>t=>{let r=new Set(e),o=new Map;for(let[n,s]of t.unsafeMap.entries())r.has(n)&&o.set(n,s);return new hr(o)},WD=(...e)=>t=>{let r=new Map(t.unsafeMap);for(let o of e)r.delete(o);return new hr(r)};var Dt=e=>new wu(e);var zk=dd,zD=ND,Tt=LD,Ru=hd,ke=qD,Lr=HD,Ls=gd,xd=jD,Cn=BD,Kk=UD,$k=WD;var Gk=(()=>{let e={[R](){return mo(this)},[F](t){return Array.isArray(t)&&this.length===t.length?this.every((r,o)=>O(r,t[o])):!1}};return Object.setPrototypeOf(e,Array.prototype)})(),Vk=(()=>{let e={[R](){return da(this)},[F](t){let r=Object.keys(this),o=Object.keys(t);if(r.length!==o.length)return!1;for(let n of r)if(!(n in t&&O(this[n],t[n])))return!1;return!0}};return Object.setPrototypeOf(e,Object.prototype)})(),xo=e=>KD(Object.assign({},e)),KD=e=>Object.setPrototypeOf(e,Vk),Jk=(...e)=>yd(e),Yk=e=>yd(e.slice(0)),yd=e=>Object.setPrototypeOf(e,Gk),Zk=()=>e=>xo(e===void 0?{}:e);var $D=e=>t=>xo(t===void 0?{_tag:e}:{...t,_tag:e}),Qk=e=>{class t extends GD{constructor(){super(...arguments),this._tag=e}}return t},GD=(()=>{class e{constructor(r){r&&Object.assign(this,r)}[R](){return da(this)}[F](r){let o=Object.keys(this),n=Object.keys(r);if(o.length!==n.length)return!1;for(let s of o)if(!(s in r&&O(this[s],r[s])))return!1;return!0}}return e})(),Xk=()=>$D;var ZD=Symbol.for("@effect/data/Duration"),t1=BigInt(1e3),VD=BigInt(1e9),JD=/^(-?\d+(?:\.\d+)?)\s+(nanos|micros|millis|seconds|minutes|hours|days|weeks)$/,et=e=>{if(QD(e))return e;if(yn(e))return qs(e);if(vs(e))return Fu(e);{JD.lastIndex=0;let t=JD.exec(e);if(t){let[r,o,n]=t,s=Number(o);switch(n){case"nanos":return Fu(BigInt(o));case"micros":return o1(BigInt(o));case"millis":return qs(s);case"seconds":return Dd(s);case"minutes":return n1(s);case"hours":return s1(s);case"days":return i1(s);case"weeks":return a1(s)}}}throw new Error("Invalid duration input")},YD={_tag:"Millis",millis:0},r1={_tag:"Infinity"},gr=class{constructor(t){this._id=ZD,yn(t)?isNaN(t)||t<0?this.value=YD:Number.isFinite(t)?Number.isInteger(t)?this.value={_tag:"Millis",millis:t}:this.value={_tag:"Nanos",nanos:BigInt(Math.round(t*1e6))}:this.value=r1:t<BigInt(0)?this.value=YD:this.value={_tag:"Nanos",nanos:t}}[R](){return da(this.value)}[F](t){return QD(t)&&p1(this,t)}toString(){switch(this.value._tag){case"Millis":return`Duration("${this.value.millis} millis")`;case"Nanos":return`Duration("${this.value.nanos} nanos")`;case"Infinity":return"Duration(Infinity)"}}toJSON(){return this.value._tag==="Nanos"?{_tag:"Duration",value:{_tag:"Nanos",hrtime:c1(this)}}:{_tag:"Duration",value:this.value}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},QD=e=>de(e)&&"_id"in e&&e._id===ZD,bd=new gr(0);var Fu=e=>new gr(e),o1=e=>new gr(e*t1),qs=e=>new gr(e),Dd=e=>new gr(e*1e3),n1=e=>new gr(e*6e4),s1=e=>new gr(e*36e5),i1=e=>new gr(e*864e5),a1=e=>new gr(e*6048e5),qr=e=>{let t=et(e);switch(t.value._tag){case"Infinity":return 1/0;case"Nanos":return Number(t.value.nanos)/1e6;case"Millis":return t.value.millis}};var c1=e=>{let t=et(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/VD),Number(t.value.nanos%VD)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}};var XD=u(3,(e,t,r)=>{let o=et(e),n=et(t);if(o.value._tag==="Infinity"||n.value._tag==="Infinity")return r.onMillis(qr(o),qr(n));if(o.value._tag==="Nanos"||n.value._tag==="Nanos"){let s=o.value._tag==="Nanos"?o.value.nanos:BigInt(Math.round(o.value.millis*1e6)),i=n.value._tag==="Nanos"?n.value.nanos:BigInt(Math.round(n.value.millis*1e6));return r.onNanos(s,i)}return r.onMillis(o.value.millis,n.value.millis)});var u1=(e,t)=>XD(e,t,{onMillis:(r,o)=>r===o,onNanos:(r,o)=>r===o});var Sd=u(2,(e,t)=>XD(e,t,{onMillis:(r,o)=>r>=o,onNanos:(r,o)=>r>=o})),p1=u(2,(e,t)=>u1(et(e),et(t)));var Ed=Math.pow(2,5),eS=Ed-1,tS=Ed/2,rS=Ed/4;function l1(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Ko(e,t){return t>>>e&eS}function $o(e){return 1<<e}function Au(e,t){return l1(e&t-1)}function On(e,t,r,o){let n=o;if(!e){let s=o.length;n=new Array(s);for(let i=0;i<s;++i)n[i]=o[i]}return n[t]=r,n}function Cd(e,t,r){let o=r.length-1,n=0,s=0,i=r;if(e)n=s=t;else for(i=new Array(o);n<t;)i[s++]=r[n++];for(++n;n<=o;)i[s++]=r[n++];return e&&(i.length=o),i}function oS(e,t,r,o){let n=o.length;if(e){let c=n;for(;c>=t;)o[c--]=o[c];return o[t]=r,o}let s=0,i=0,a=new Array(n+1);for(;s<t;)a[i++]=o[s++];for(a[t]=r;s<n;)a[++i]=o[s++];return a}var vu=class{constructor(t,r){this.value=t,this.previous=r}};var Hr=class e{constructor(){this._tag="EmptyNode"}modify(t,r,o,n,s,i){let a=o(g());return j(a)?new e:(++i.value,new Hs(t,n,s,a))}};function Yt(e){return e instanceof Hr}function f1(e){return Yt(e)||e._tag==="LeafNode"||e._tag==="CollisionNode"}function Mu(e,t){return Yt(e)?!1:t===e.edit}var Hs=class e{constructor(t,r,o,n){this.edit=t,this.hash=r,this.key=o,this.value=n,this._tag="LeafNode"}modify(t,r,o,n,s,i){if(O(s,this.key)){let c=o(this.value);return c===this.value?this:j(c)?(--i.value,new Hr):Mu(this,t)?(this.value=c,this):new e(t,n,s,c)}let a=o(g());return j(a)?this:(++i.value,nS(t,r,this.hash,this,n,new e(t,n,s,a)))}},_d=class e{constructor(t,r,o){this.edit=t,this.hash=r,this.children=o,this._tag="CollisionNode"}modify(t,r,o,n,s,i){if(n===this.hash){let c=Mu(this,t),p=this.updateCollisionList(c,t,this.hash,this.children,o,s,i);return p===this.children?this:p.length>1?new e(t,this.hash,p):p[0]}let a=o(g());return j(a)?this:(++i.value,nS(t,r,this.hash,this,n,new Hs(t,n,s,a)))}updateCollisionList(t,r,o,n,s,i,a){let c=n.length;for(let l=0;l<c;++l){let f=n[l];if("key"in f&&O(i,f.key)){let d=f.value,h=s(d);return h===d?n:j(h)?(--a.value,Cd(t,l,n)):On(t,l,new Hs(r,o,i,h),n)}}let p=s(g());return j(p)?n:(++a.value,On(t,c,new Hs(r,o,i,p),n))}},Da=class e{constructor(t,r,o){this.edit=t,this.mask=r,this.children=o,this._tag="IndexedNode"}modify(t,r,o,n,s,i){let a=this.mask,c=this.children,p=Ko(r,n),l=$o(p),f=Au(a,l),d=a&l,h=Mu(this,t);if(!d){let B=new Hr().modify(t,r+5,o,n,s,i);return B?c.length>=tS?d1(t,p,B,a,c):new e(t,a|l,oS(h,f,B,c)):this}let S=c[f],w=S.modify(t,r+5,o,n,s,i);if(S===w)return this;let A=a,I;if(Yt(w)){if(A&=~l,!A)return new Hr;if(c.length<=2&&f1(c[f^1]))return c[f^1];I=Cd(h,f,c)}else I=On(h,f,w,c);return h?(this.mask=A,this.children=I,this):new e(t,A,I)}},Od=class e{constructor(t,r,o){this.edit=t,this.size=r,this.children=o,this._tag="ArrayNode"}modify(t,r,o,n,s,i){let a=this.size,c=this.children,p=Ko(r,n),l=c[p],f=(l||new Hr).modify(t,r+5,o,n,s,i);if(l===f)return this;let d=Mu(this,t),h;if(Yt(l)&&!Yt(f))++a,h=On(d,p,f,c);else if(!Yt(l)&&Yt(f)){if(--a,a<=rS)return m1(t,a,p,c);h=On(d,p,new Hr,c)}else h=On(d,p,f,c);return d?(this.size=a,this.children=h,this):new e(t,a,h)}};function m1(e,t,r,o){let n=new Array(t-1),s=0,i=0;for(let a=0,c=o.length;a<c;++a)if(a!==r){let p=o[a];p&&!Yt(p)&&(n[s++]=p,i|=1<<a)}return new Da(e,i,n)}function d1(e,t,r,o,n){let s=[],i=o,a=0;for(let c=0;i;++c)i&1&&(s[c]=n[a++]),i>>>=1;return s[t]=r,new Od(e,a+1,s)}function h1(e,t,r,o,n,s){if(r===n)return new _d(e,r,[s,o]);let i=Ko(t,r),a=Ko(t,n);if(i===a)return c=>new Da(e,$o(i)|$o(a),[c]);{let c=i<a?[o,s]:[s,o];return new Da(e,$o(i)|$o(a),c)}}function nS(e,t,r,o,n,s){let i,a=t;for(;;){let c=h1(e,a,r,o,n,s);if(typeof c=="function")i=new vu(c,i),a=a+5;else{let p=c;for(;i!=null;)p=i.value(p),i=i.previous;return p}}}var wd=Symbol.for("@effect/data/HashMap"),Sa=class{constructor(t,r,o,n){this._editable=t,this._edit=r,this._root=o,this._size=n,this._id=wd}[Symbol.iterator](){return new Tu(this,(t,r)=>[t,r])}[R](){let t=E("HashMap");for(let r of this)t^=T(E(r[0]))(E(r[1]));return t}[F](t){if(cS(t)){if(t._size!==this._size)return!1;for(let r of this){let o=Iu(r[0],E(r[0]))(t);if(j(o))return!1;if(!O(r[1],o.value))return!1}return!0}return!1}toString(){return`HashMap(${Array.from(this).map(([t,r])=>`[${String(t)}, ${String(r)}]`).join(", ")})`}toJSON(){return{_tag:"HashMap",values:Array.from(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},Tu=class e{constructor(t,r){this.map=t,this.f=r,this.v=sS(this.map._root,this.f,void 0)}next(){if(j(this.v))return{done:!0,value:void 0};let t=this.v.value;return this.v=ku(t.cont),{done:!1,value:t.value}}[Symbol.iterator](){return new e(this.map,this.f)}},ku=e=>e?iS(e[0],e[1],e[2],e[3],e[4]):g(),sS=(e,t,r=void 0)=>{switch(e._tag){case"LeafNode":return N(e.value)?x({value:t(e.key,e.value.value),cont:r}):ku(r);case"CollisionNode":case"ArrayNode":case"IndexedNode":{let o=e.children;return iS(o.length,o,0,t,r)}default:return ku(r)}},iS=(e,t,r,o,n)=>{for(;r<e;){let s=t[r++];if(s&&!Yt(s))return sS(s,o,[e,t,r,o,n])}return ku(n)},Bs=()=>new Sa(!1,0,new Hr,0),aS=(...e)=>Rd(e),Rd=e=>{let t=Nu(Bs());for(let r of e)wn(r[0],r[1])(t);return lS(t)},cS=e=>de(e)&&"_id"in e&&e._id===wd,uS=e=>e&&Yt(e._root),pS=u(2,(e,t)=>Iu(e,t,E(t))),Iu=u(3,(e,t,r)=>{let o=e._root,n=0;for(;;)switch(o._tag){case"LeafNode":return O(t,o.key)?o.value:g();case"CollisionNode":{if(r===o.hash){let s=o.children;for(let i=0,a=s.length;i<a;++i){let c=s[i];if("key"in c&&O(t,c.key))return c.value}}return g()}case"IndexedNode":{let s=Ko(n,r),i=$o(s);if(o.mask&i){o=o.children[Au(o.mask,i)],n+=5;break}return g()}case"ArrayNode":{if(o=o.children[Ko(n,r)],o){n+=5;break}return g()}default:return g()}});var Fd=u(2,(e,t)=>N(Iu(e,t,E(t))));var wn=u(3,(e,t,r)=>Ad(e,t,()=>x(r))),x1=u(3,(e,t,r)=>e._editable?(e._root=t,e._size=r,e):t===e._root?e:new Sa(e._editable,e._edit,t,r)),Pu=e=>new Tu(e,t=>t);var Us=e=>e._size,Nu=e=>new Sa(!0,e._edit+1,e._root,e._size),lS=e=>(e._editable=!1,e);var Ad=u(3,(e,t,r)=>fS(e,t,E(t),r)),fS=u(4,(e,t,r,o)=>{let n={value:e._size},s=e._root.modify(e._editable?e._edit:NaN,0,o,r,t,n);return x1(s,n.value)(e)});var Ea=u(2,(e,t)=>Ad(e,t,g));var mS=u(2,(e,t)=>Ws(e,Bs(),(r,o,n)=>wn(r,n,t(o,n))));var Lu=u(2,(e,t)=>Ws(e,void 0,(r,o,n)=>t(o,n))),Ws=u(3,(e,t,r)=>{let o=e._root;if(o._tag==="LeafNode")return N(o.value)?r(t,o.value.value,o.key):t;if(o._tag==="EmptyNode")return t;let n=[o.children],s;for(;s=n.pop();)for(let i=0,a=s.length;i<a;){let c=s[i++];c&&!Yt(c)&&(c._tag==="LeafNode"?N(c.value)&&(t=r(t,c.value.value,c.key)):n.push(c.children))}return t});var vd=Symbol.for("@effect/data/HashSet"),zs=class{constructor(t){this._keyMap=t,this._id=vd}[Symbol.iterator](){return Pu(this._keyMap)}[R](){return T(E(this._keyMap))(E("HashSet"))}[F](t){return hS(t)?Us(this._keyMap)===Us(t._keyMap)&&O(this._keyMap,t._keyMap):!1}toString(){return`HashSet(${Array.from(this).map(String).join(", ")})`}toJSON(){return{_tag:"HashSet",values:Array.from(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},hS=e=>de(e)&&"_id"in e&&e._id===vd,Ca=()=>new zs(Bs()),gS=e=>{let t=qu(Ca());for(let r of e)Ks(t,r);return Hu(t)},xS=(...e)=>{let t=qu(Ca());for(let r of e)Ks(t,r);return Hu(t)},yS=u(2,(e,t)=>Fd(e._keyMap,t));var bS=e=>Us(e._keyMap),qu=e=>new zs(Nu(e._keyMap)),Hu=e=>(e._keyMap._editable=!1,e),Md=u(2,(e,t)=>{let r=qu(e);return t(r),Hu(r)}),Ks=u(2,(e,t)=>e._keyMap._editable?(wn(t,!0)(e._keyMap),e):new zs(wn(t,!0)(e._keyMap))),Td=u(2,(e,t)=>e._keyMap._editable?(Ea(t)(e._keyMap),e):new zs(Ea(t)(e._keyMap))),DS=u(2,(e,t)=>Md(e,r=>{for(let o of t)Td(r,o)}));var SS=u(2,(e,t)=>Md(Ca(),r=>{ES(e,o=>Ks(r,o));for(let o of t)Ks(r,o)}));var ES=u(2,(e,t)=>Lu(e._keyMap,(r,o)=>t(o))),CS=u(3,(e,t,r)=>Ws(e._keyMap,t,(o,n,s)=>r(o,s)));var yo=Bs,_S=aS,ju=Rd,OS=uS,_a=pS;var jr=wn,kd=Pu;var Bu=Us;var wS=Ea;var RS=mS;var FS=Lu,Id=Ws;var b1=Symbol.for("@effect/data/MutableRef"),Pd=class{constructor(t){this.current=t,this._T=r=>r,this._id=b1}toString(){return`MutableRef(${String(this.current)})`}toJSON(){return{_tag:"MutableRef",current:this.current}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},St=e=>new Pd(e),Uu=u(3,(e,t,r)=>O(t,e.current)?(e.current=r,!0):!1);var It=e=>e.current;var AS=e=>S1(e,t=>t+1),Zt=u(2,(e,t)=>(e.current=t,e)),D1=u(2,(e,t)=>(e.current=t,e.current)),Nd=u(2,(e,t)=>Zt(e,t(It(e)))),S1=u(2,(e,t)=>D1(e,t(It(e))));var E1=Symbol.for("@effect/data/MutableHashMap"),Ld=class{constructor(){this._id=E1,this.backingMap=St(yo())}[Symbol.iterator](){return this.backingMap.current[Symbol.iterator]()}toString(){return`MutableHashMap(${Array.from(this).map(([t,r])=>`[${String(t)}, ${String(r)}]`).join(", ")})`}toJSON(){return{_tag:"MutableHashMap",values:Array.from(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},An=()=>new Ld;var Ce=u(2,(e,t)=>_a(e.backingMap.current,t)),xr=u(2,(e,t)=>N(Ce(e,t)));var vn=u(2,(e,t)=>(Nd(e.backingMap,wS(t)),e)),Et=u(3,(e,t,r)=>(Nd(e.backingMap,jr(t,r)),e)),Wu=e=>Bu(It(e.backingMap));var vS=Symbol.for("@effect/data/Chunk");function C1(e,t,r,o,n){for(let s=t;s<Math.min(e.length,t+n);s++)r[o+s-t]=e[s];return r}var MS=[],_1=e=>Fs((t,r)=>ct(t).every((o,n)=>e(o,Go(r,n)))),O1=_1(O),ce=class{constructor(t){switch(this.backing=t,this._id=vS,t._tag){case"IEmpty":{this.length=0,this.depth=0,this.left=this,this.right=this;break}case"IConcat":{this.length=t.left.length+t.right.length,this.depth=1+Math.max(t.left.depth,t.right.depth),this.left=t.left,this.right=t.right;break}case"IArray":{this.length=t.array.length,this.depth=0,this.left=yr,this.right=yr;break}case"ISingleton":{this.length=1,this.depth=0,this.left=yr,this.right=yr;break}case"ISlice":{this.length=t.length,this.depth=t.chunk.depth+1,this.left=yr,this.right=yr;break}}}toString(){return`Chunk(${ct(this).map(String).join(", ")})`}toJSON(){return{_tag:"Chunk",values:ct(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}[F](t){return TS(t)&&O1(this,t)}[R](){return mo(ct(this))}[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return MS[Symbol.iterator]();default:return ct(this)[Symbol.iterator]()}}pipe(){return C(this,arguments)}},TS=e=>de(e)&&"_id"in e&&e._id===vS,yr=new ce({_tag:"IEmpty"}),ut=()=>yr;var Ae=e=>new ce({_tag:"ISingleton",a:e}),Br=e=>TS(e)?e:new ce({_tag:"IArray",array:re(e)}),Hd=(e,t,r)=>{switch(e.backing._tag){case"IArray":{C1(e.backing.array,0,t,r,e.length);break}case"IConcat":{Hd(e.left,t,r),Hd(e.right,t,r+e.left.length);break}case"ISingleton":{t[r]=e.backing.a;break}case"ISlice":{let o=0,n=r;for(;o<e.length;)t[n]=Go(e,o),o+=1,n+=1;break}}},ct=e=>{switch(e.backing._tag){case"IEmpty":return MS;case"IArray":return e.backing.array;default:{let t=new Array(e.length);return Hd(e,t,0),e.backing={_tag:"IArray",array:t},e.left=yr,e.right=yr,e.depth=0,t}}},bo=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return new ce({_tag:"IArray",array:ud(e.backing.array)});case"IConcat":return new ce({_tag:"IConcat",left:bo(e.backing.right),right:bo(e.backing.left)});case"ISlice":return Pt(ud(ct(e)))}},w1=u(2,(e,t)=>t<0||t>=e.length?g():x(Go(e,t))),Pt=e=>new ce({_tag:"IArray",array:e});var Go=u(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(t!==0)throw new Error("Index out of bounds");return e.backing.a}case"IArray":{if(t>=e.length||t<0)throw new Error("Index out of bounds");return e.backing.array[t]}case"IConcat":return t<e.left.length?Go(e.left,t):Go(e.right,t-e.left.length);case"ISlice":return Go(e.backing.chunk,t+e.backing.offset)}}),zu=u(2,(e,t)=>kS(e,Ae(t))),Ie=u(2,(e,t)=>kS(Ae(t),e)),jd=u(2,(e,t)=>{if(t<=0)return yr;if(t>=e.length)return e;switch(e.backing._tag){case"ISlice":return new ce({_tag:"ISlice",chunk:e.backing.chunk,length:t,offset:e.backing.offset});case"IConcat":return t>e.left.length?new ce({_tag:"IConcat",left:e.left,right:jd(e.right,t-e.left.length)}):jd(e.left,t);default:return new ce({_tag:"ISlice",chunk:e,offset:0,length:t})}}),$s=u(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return yr;switch(e.backing._tag){case"ISlice":return new ce({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":return t>e.left.length?$s(e.right,t-e.left.length):new ce({_tag:"IConcat",left:$s(e.left,t),right:e.right});default:return new ce({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}});var br=u(2,(e,t)=>{if(e.backing._tag==="IEmpty")return t;if(t.backing._tag==="IEmpty")return e;let r=t.depth-e.depth;if(Math.abs(r)<=1)return new ce({_tag:"IConcat",left:e,right:t});if(r<-1)if(e.left.depth>=e.right.depth){let o=br(e.right,t);return new ce({_tag:"IConcat",left:e.left,right:o})}else{let o=br(e.right.right,t);if(o.depth===e.depth-3){let n=new ce({_tag:"IConcat",left:e.right.left,right:o});return new ce({_tag:"IConcat",left:e.left,right:n})}else{let n=new ce({_tag:"IConcat",left:e.left,right:e.right.left});return new ce({_tag:"IConcat",left:n,right:o})}}else if(t.right.depth>=t.left.depth){let o=br(e,t.left);return new ce({_tag:"IConcat",left:o,right:t.right})}else{let o=br(e,t.left.left);if(o.depth===t.depth-3){let n=new ce({_tag:"IConcat",left:o,right:t.left.right});return new ce({_tag:"IConcat",left:n,right:t.right})}else{let n=new ce({_tag:"IConcat",left:t.left.right,right:t.right});return new ce({_tag:"IConcat",left:o,right:n})}}}),kS=u(2,(e,t)=>br(e,t));var Gs=e=>e.length===0,tt=e=>e.length>0,Mn=w1(0),Tn=e=>Go(e,0),rt=Tn;var IS=e=>Go(e,e.length-1),Bd=u(2,(e,t)=>e.backing._tag==="ISingleton"?Ae(t(e.backing.a,0)):Pt(ho((r,o)=>t(r,o))(ct(e))));var Ku=u(2,(e,t)=>Pt(Sn(ct(e),t)));var R1=u(2,(e,t)=>[jd(e,t),$s(e,t)]);var PS=u(2,(e,t)=>{let r=0;for(let o of ct(e)){if(t(o))break;r++}return R1(e,r)});var ot=e=>$s(e,1);var NS=e=>Pt(ID(ct(e)));var F1=Symbol.for("@effect/data/MutableList"),Ud=class{constructor(){this._id=F1,this.head=void 0,this.tail=void 0,this._length=0}[Symbol.iterator](){let t=!1,r=this.head;return{next(){if(t)return this.return();if(r==null)return t=!0,this.return();let o=r.value;return r=r.next,{done:t,value:o}},return(o){return t||(t=!0),{done:!0,value:o}}}}toString(){return`MutableList(${Array.from(this).map(String).join(", ")})`}toJSON(){return{_tag:"MutableList",values:Array.from(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},Wd=class{constructor(t){this.value=t,this.removed=!1,this.prev=void 0,this.next=void 0}},LS=()=>new Ud;var qS=e=>zd(e)===0,zd=e=>e._length;var HS=u(2,(e,t)=>{let r=new Wd(t);return e.head===void 0&&(e.head=r),e.tail===void 0||(e.tail.next=r,r.prev=e.tail),e.tail=r,e._length+=1,e}),jS=e=>{let t=e.head;if(t!==void 0)return A1(e,t),t.value};var A1=(e,t)=>{t.removed||(t.removed=!0,t.prev!==void 0&&t.next!==void 0?(t.prev.next=t.next,t.next.prev=t.prev):t.prev!==void 0?(e.tail=t.prev,t.prev.next=void 0):t.next!==void 0?(e.head=t.next,t.next.prev=void 0):(e.tail=void 0,e.head=void 0),e._length>0&&(e._length-=1))};var M1=Symbol.for("@effect/data/MutableQueue"),$d=Symbol.for("@effect/data/mutable/MutableQueue/Empty"),Kd=class{constructor(t=void 0){this.capacity=t,this._tag="Bounded",this._id=M1,this.queue=LS()}[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()}toString(){return`MutableQueue(${Array.from(this).map(String).join(", ")})`}toJSON(){return{_tag:"MutableQueue",values:Array.from(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}};var BS=()=>new Kd;var US=u(2,(e,t)=>{let r=zd(e.queue);return e.capacity!==void 0&&r===e.capacity?!1:(HS(t)(e.queue),!0)});var WS=u(2,(e,t)=>qS(e.queue)?t:jS(e.queue));var Vs=Symbol.for("@effect/data/Differ/ContextPatch");function Ur(e){return e}var Gd=class{constructor(){this._tag="Empty",this._Input=Ur,this._Output=Ur,this._id=Vs}[R](){return He("ContextPatch(Empty)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id}},Vd=class{constructor(t,r){this.first=t,this.second=r,this._tag="AndThen",this._id=Vs,this._Input=Ur,this._Output=Ur}[R](){return He("ContextPatch(AndThen)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.first,t.first)&&O(this.second,t.second)}},Jd=class{constructor(t,r){this.tag=t,this.service=r,this._tag="AddService",this._id=Vs,this._Input=Ur,this._Output=Ur}[R](){return He("ContextPatch(AddService)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.tag,t.tag)&&O(this.service,t.service)}},Yd=class{constructor(t){this.tag=t,this._tag="RemoveService",this._id=Vs,this._Input=Ur,this._Output=Ur}[R](){return He("ContextPatch(RemoveService)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.tag,t.tag)}},Zd=class{constructor(t,r){this.tag=t,this.update=r,this._tag="UpdateService",this._id=Vs,this._Input=Ur,this._Output=Ur}[R](){return He("ContextPatch(AndThen)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.tag,t.tag)&&O(this.update,t.update)}},Qd=()=>new Gd,zS=(e,t)=>{let r=new Map(e.unsafeMap),o=Qd();for(let[n,s]of t.unsafeMap.entries())if(r.has(n)){let i=r.get(n);r.delete(n),O(i,s)||(o=Oa(new Zd(n,()=>s))(o))}else r.delete(n),o=Oa(new Jd(n,s))(o);for(let[n]of r.entries())o=Oa(new Yd(n))(o);return o},Oa=u(2,(e,t)=>new Vd(e,t)),KS=u(2,(e,t)=>{let r=!1,o=Ae(e),n=new Map(t.unsafeMap);for(;tt(o);){let i=rt(o),a=ot(o);switch(i._tag){case"Empty":{o=a;break}case"AddService":{n.set(i.tag,i.service),o=a;break}case"AndThen":{o=Ie(Ie(a,i.second),i.first);break}case"RemoveService":{n.delete(i.tag),o=a;break}case"UpdateService":{n.set(i.tag,i.update(n.get(i.tag))),r=!0,o=a;break}}}if(!r)return new hr(n);let s=new Map;for(let[i]of t.unsafeMap)n.has(i)&&(s.set(i,n.get(i)),n.delete(i));for(let[i,a]of n)s.set(i,a);return new hr(s)});var $u=Qd,$S=zS,GS=Oa,VS=KS;var nt=Ca,Ct=gS,Do=xS,YS=yS;var So=bS;var Wr=Ks,Xd=Td,eh=DS;var st=SS;var kn=CS;var wa=Symbol.for("@effect/data/Differ/HashSetPatch");function Vu(e){return e}var th=class{constructor(){this._tag="Empty",this._Value=Vu,this._id=wa}[R](){return He("HashSetPatch(Empty)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id}},rh=class{constructor(t,r){this.first=t,this.second=r,this._tag="AndThen",this._Value=Vu,this._id=wa}[R](){return He("HashSetPatch(AndThen)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.first,t.first)&&O(this.second,t.second)}},oh=class{constructor(t){this.value=t,this._tag="Add",this._Value=Vu,this._id=wa}[R](){return He("HashSetPatch(Add)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.value,t.value)}},nh=class{constructor(t){this.value=t,this._tag="Remove",this._Value=Vu,this._id=wa}[R](){return He("HashSetPatch(Remove)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.value,t.value)}},sh=()=>new th,ZS=(e,t)=>{let[r,o]=kn([e,sh()],([n,s],i)=>YS(i)(n)?[Xd(i)(n),s]:[n,Gu(new oh(i))(s)])(t);return kn(o,(n,s)=>Gu(new nh(s))(n))(r)},Gu=u(2,(e,t)=>new rh(e,t)),QS=u(2,(e,t)=>{let r=t,o=Ae(e);for(;tt(o);){let n=rt(o),s=ot(o);switch(n._tag){case"Empty":{o=s;break}case"AndThen":{o=Ie(n.first)(Ie(n.second)(s));break}case"Add":{r=Wr(n.value)(r),o=s;break}case"Remove":r=Xd(n.value)(r),o=s}}return r});var Ju=sh,XS=ZS,eE=Gu,tE=QS;var oE=Symbol.for("@effect/data/Differ"),ih=class{constructor(t){this._id=oE,this._P=P,this._V=P,this.empty=t.empty,this.diff=t.diff,this.combine=t.combine,this.patch=t.patch}},Ra=e=>new ih(e),nE=()=>Ra({empty:$u(),combine:(e,t)=>GS(t)(e),diff:(e,t)=>$S(e,t),patch:(e,t)=>VS(t)(e)});var sE=()=>Ra({empty:Ju(),combine:(e,t)=>eE(t)(e),diff:(e,t)=>XS(e,t),patch:(e,t)=>tE(t)(e)});var iE=()=>aE((e,t)=>t),aE=e=>Ra({empty:P,combine:(t,r)=>t===P?r:r===P?t:o=>r(t(o)),diff:(t,r)=>O(t,r)?P:ws(r),patch:(t,r)=>e(r,t(r))});var cE=u(3,(e,t,r)=>e.diff(t,r)),uE=u(3,(e,t,r)=>e.combine(t,r)),pE=u(3,(e,t,r)=>e.patch(t,r)),Yu=Ra,lE=nE;var fE=sE;var mE=iE;var uh=Symbol.for("@effect/data/List"),Fa=e=>Array.from(e),L1=e=>Wb(kD(e),Fa),q1=L1(O),Js=class{constructor(t,r){this.head=t,this.tail=r,this._tag="Cons",this._id=uh}toString(){return`List.Cons(${Fa(this).map(String).join(", ")})`}toJSON(){return{_tag:"List.Cons",values:Fa(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}[F](t){return dE(t)&&this._tag===t._tag&&q1(this,t)}[R](){return mo(Fa(this))}[Symbol.iterator](){let t=!1,r=this;return{next(){if(t)return this.return();if(r._tag==="Nil")return t=!0,this.return();let o=r.head;return r=r.tail,{done:t,value:o}},return(o){return t||(t=!0),{done:!0,value:o}}}}pipe(){return C(this,arguments)}},ch=class{constructor(){this._tag="Nil",this._id=uh}toString(){return"List.Nil"}toJSON(){return{_tag:"List.Nil"}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}[R](){return mo(Fa(this))}[F](t){return dE(t)&&this._tag===t._tag}[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}}pipe(){return C(this,arguments)}},dE=e=>de(e)&&"_id"in e&&e._id===uh,_t=e=>e._tag==="Nil",Aa=e=>e._tag==="Cons";var hE=new ch,H1=()=>hE,Eo=(e,t)=>new Js(e,t),Dr=H1,va=e=>new Js(e,hE);var gE=u(2,(e,t)=>j1(t,e));var Vo=u(2,(e,t)=>Eo(t,e)),j1=u(2,(e,t)=>{if(_t(e))return t;if(_t(t))return e;{let r=new Js(t.head,e),o=r,n=t.tail;for(;!_t(n);){let s=new Js(n.head,e);o.tail=s,o=s,n=n.tail}return r}});var xE=u(2,(e,t)=>{let r=e;for(;!_t(r);){if(t(r.head))return x(r.head);r=r.tail}return g()});var Zu=e=>_t(e)?g():x(e.head);var yE=u(3,(e,t,r)=>{let o=t,n=e;for(;!_t(n);)o=r(o,n.head),n=n.tail;return o});var bE=e=>{let t=Dr(),r=e;for(;!_t(r);)t=Vo(t,r.head),r=r.tail;return t};var DE,SE,EE,Xu="@effect/io/Fiber/Id",Jo=Symbol.for(Xu),Ma="None",ph="Runtime",lh="Composite",fh=class{constructor(){this[DE]=Jo,this._tag=Ma}[(DE=Jo,R)](){return T(E(this._tag))(E(Xu))}[F](t){return tp(t)&&t._tag===Ma}},mh=class{constructor(t,r){this.id=t,this.startTimeMillis=r,this[SE]=Jo,this._tag=ph}[(SE=Jo,R)](){return T(E(this.startTimeMillis))(T(E(this.id))(T(E(this._tag))(E(Xu))))}[F](t){return tp(t)&&t._tag===ph&&this.id===t.id&&this.startTimeMillis===t.startTimeMillis}},dh=class{constructor(t,r){this.left=t,this.right=r,this[EE]=Jo,this._tag=lh}[(EE=Jo,R)](){return T(E(this.right))(T(E(this.left))(T(E(this._tag))(E(Xu))))}[F](t){return tp(t)&&t._tag===lh&&O(this.left,t.left)&&O(this.right,t.right)}},ep=new fh;var tp=e=>typeof e=="object"&&e!=null&&Jo in e;var _E=u(2,(e,t)=>e._tag===Ma?t:t._tag===Ma?e:new dh(e,t));var Qu=e=>{switch(e._tag){case Ma:return nt();case ph:return Do(e.id);case lh:return st(Qu(e.right))(Qu(e.left))}},CE=V(Symbol.for("@effect/io/Fiber/Id/_fiberCounter"),()=>St(0));var rp=e=>Array.from(Qu(e)).map(r=>`#${r}`).join(",");var OE=()=>{let e=It(CE);return Zt(e+1)(CE),new mh(e,new Date().getTime())};var pt=ep;var hh=_E;var RE=rp;var op=OE;var In="Die",Yo="Empty",Pn="Fail",Qs="Interrupt",Nn="Annotated",Ln="Parallel",qn="Sequential";var kE="@effect/io/Cause",Dh=Symbol.for(kE),U1={_E:e=>e},jn={[Dh]:U1,[R](){return T(E(z1(this)))(E(kE))},[F](e){return ap(e)&&W1(this,e)},pipe(){return C(this,arguments)},toJSON(){return{_tag:"Cause",errors:lp(this)}},toString(){return Oo(this)},[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}},lt=(()=>{let e=Object.create(jn);return e._tag=Yo,e})(),Bn=e=>{let t=Object.create(jn);return t._tag=Pn,t.error=e,t},$e=e=>{let t=Object.create(jn);return t._tag=In,t.defect=e,t},Sr=e=>{let t=Object.create(jn);return t._tag=Qs,t.fiberId=e,t},Zo=(e,t)=>{let r=Object.create(jn);return r._tag=Nn,r.cause=e,r.annotation=t,r},Be=(e,t)=>{let r=Object.create(jn);return r._tag=Ln,r.left=e,r.right=t,r},ve=(e,t)=>{let r=Object.create(jn);return r._tag=qn,r.left=e,r.right=t,r},ap=e=>typeof e=="object"&&e!=null&&Dh in e,Sh=e=>e._tag===Yo;var cp=e=>e._tag===In;var Eh=e=>e._tag===Yo?!0:Hn(e,!0,(t,r)=>{switch(r._tag){case Yo:return x(t);case In:case Pn:case Qs:return x(!1);default:return g()}});var Qo=e=>pp(void 0,$1)(e),Ta=e=>bo(Hn(e,ut(),(t,r)=>r._tag===Pn?x(Ie(r.error)(t)):g())),up=e=>bo(Hn(e,ut(),(t,r)=>r._tag===In?x(Ie(r.defect)(t)):g())),ka=e=>Hn(e,nt(),(t,r)=>r._tag===Qs?x(Wr(r.fiberId)(t)):g()),IE=e=>Ia(e,t=>t._tag===Pn?x(t.error):g()),Co=e=>{let t=IE(e);switch(t._tag){case"None":return H(e);case"Some":return z(t.value)}};var Ch=e=>ei(e,{onEmpty:g(),onFail:()=>g(),onDie:t=>x($e(t)),onInterrupt:()=>g(),onAnnotated:(t,r)=>te(o=>Zo(o,r))(t),onSequential:(t,r)=>N(t)&&N(r)?x(ve(t.value,r.value)):N(t)&&j(r)?x(t.value):j(t)&&N(r)?x(r.value):g(),onParallel:(t,r)=>N(t)&&N(r)?x(Be(t.value,r.value)):N(t)&&j(r)?x(t.value):j(t)&&N(r)?x(r.value):g()}),PE=e=>ei(e,{onEmpty:g(),onFail:t=>x($e(t)),onDie:t=>x($e(t)),onInterrupt:()=>g(),onAnnotated:(t,r)=>te(o=>Zo(o,r))(t),onSequential:(t,r)=>N(t)&&N(r)?x(ve(t.value,r.value)):N(t)&&j(r)?x(t.value):j(t)&&N(r)?x(r.value):g(),onParallel:(t,r)=>N(t)&&N(r)?x(Be(t.value,r.value)):N(t)&&j(r)?x(t.value):j(t)&&N(r)?x(r.value):g()});var Xs=e=>ei(e,{onEmpty:lt,onFail:()=>lt,onDie:t=>$e(t),onInterrupt:t=>Sr(t),onAnnotated:(t,r)=>Sh(t)?t:Zo(t,r),onSequential:ve,onParallel:Be}),NE=e=>ei(e,{onEmpty:lt,onFail:t=>$e(t),onDie:t=>$e(t),onInterrupt:t=>Sr(t),onAnnotated:(t,r)=>Sh(t)?t:Zo(t,r),onSequential:(t,r)=>ve(t,r),onParallel:(t,r)=>Be(t,r)});var LE=u(2,(e,t)=>ei(e,{onEmpty:lt,onFail:r=>t(r),onDie:r=>$e(r),onInterrupt:r=>Sr(r),onAnnotated:(r,o)=>Zo(r,o),onSequential:(r,o)=>ve(r,o),onParallel:(r,o)=>Be(r,o)})),_h=e=>LE(e,P);var W1=(e,t)=>{let r=Ae(e),o=Ae(t);for(;tt(r)&&tt(o);){let[n,s]=Hn([nt(),ut()],([c,p],l)=>{let[f,d]=gh(l);return x([st(f)(c),br(d)(p)])})(rt(r)),[i,a]=Hn([nt(),ut()],([c,p],l)=>{let[f,d]=gh(l);return x([st(f)(c),br(d)(p)])})(rt(o));if(!O(n,i))return!1;r=s,o=a}return!0},z1=e=>K1(Ae(e),ut()),K1=(e,t)=>{for(;;){let[r,o]=bt([nt(),ut()],([s,i],a)=>{let[c,p]=gh(a);return[st(c)(s),br(p)(i)]})(e),n=So(r)>0?Ie(r)(t):t;if(Gs(o))return bo(n);e=o,t=n}throw new Error("BUG: Cause.flattenCauseLoop - please report an issue at https://github.com/Effect-TS/io/issues")};var Ia=u(2,(e,t)=>{let r=[e];for(;r.length>0;){let o=r.pop(),n=t(o);switch(n._tag){case"None":{switch(o._tag){case qn:case Ln:{r.push(o.right),r.push(o.left);break}case Nn:{r.push(o.cause);break}}break}case"Some":return n}}return g()});var gh=e=>{let t=e,r=[],o=nt(),n=ut();for(;t!==void 0;)switch(t._tag){case Yo:{if(r.length===0)return[o,n];t=r.pop();break}case Pn:{if(r.length===0)return[Wr(t.error)(o),n];o=Wr(t.error)(o),t=r.pop();break}case In:{if(r.length===0)return[Wr(t.defect)(o),n];o=Wr(t.defect)(o),t=r.pop();break}case Qs:{if(r.length===0)return[Wr(t.fiberId)(o),n];o=Wr(t.fiberId)(o),t=r.pop();break}case Nn:{t=t.cause;break}case qn:{switch(t.left._tag){case Yo:{t=t.right;break}case qn:{t=ve(t.left.left,ve(t.left.right,t.right));break}case Ln:{t=Be(ve(t.left.left,t.right),ve(t.left.right,t.right));break}case Nn:{t=ve(t.left.cause,t.right);break}default:{n=Ie(t.right)(n),t=t.left;break}}break}case Ln:{r.push(t.right),t=t.left;break}}throw new Error("BUG: Cause.evaluateCauseLoop - please report an issue at https://github.com/Effect-TS/io/issues")};var $1={emptyCase:Ir,failCase:Gt,dieCase:Gt,interruptCase:Ir,annotatedCase:(e,t)=>t,sequentialCase:(e,t,r)=>t&&r,parallelCase:(e,t,r)=>t&&r};var FE="SequentialCase",AE="ParallelCase",vE="AnnotatedCase",ei=u(2,(e,{onAnnotated:t,onDie:r,onEmpty:o,onFail:n,onInterrupt:s,onParallel:i,onSequential:a})=>pp(e,void 0,{emptyCase:()=>o,failCase:(c,p)=>n(p),dieCase:(c,p)=>r(p),interruptCase:(c,p)=>s(p),annotatedCase:(c,p,l)=>t(p,l),sequentialCase:(c,p,l)=>a(p,l),parallelCase:(c,p,l)=>i(p,l)})),Hn=u(3,(e,t,r)=>{let o=t,n=e,s=[];for(;n!==void 0;){let i=r(o,n);switch(o=N(i)?i.value:o,n._tag){case qn:{s.push(n.right),n=n.left;break}case Ln:{s.push(n.right),n=n.left;break}case Nn:{n=n.cause;break}default:{n=void 0;break}}n===void 0&&s.length>0&&(n=s.pop())}return o}),pp=u(3,(e,t,r)=>{let o=[e],n=[];for(;o.length>0;){let i=o.pop();switch(i._tag){case Yo:{n.push(H(r.emptyCase(t)));break}case Pn:{n.push(H(r.failCase(t,i.error)));break}case In:{n.push(H(r.dieCase(t,i.defect)));break}case Qs:{n.push(H(r.interruptCase(t,i.fiberId)));break}case Nn:{o.push(i.cause),n.push(z({_tag:vE,annotation:i.annotation}));break}case qn:{o.push(i.right),o.push(i.left),n.push(z({_tag:FE}));break}case Ln:{o.push(i.right),o.push(i.left),n.push(z({_tag:AE}));break}}}let s=[];for(;n.length>0;){let i=n.pop();switch(i._tag){case"Left":{switch(i.left._tag){case FE:{let a=s.pop(),c=s.pop(),p=r.sequentialCase(t,a,c);s.push(p);break}case AE:{let a=s.pop(),c=s.pop(),p=r.parallelCase(t,a,c);s.push(p);break}case vE:{let a=s.pop(),c=r.annotatedCase(t,a,i.left.annotation);s.push(c);break}}break}case"Right":{s.push(i.right);break}}}if(s.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/io/issues");return s.pop()}),Pa=(e,t)=>{let r={value:t,enumerable:!0},o={...e,toString(){return`${this._tag}: ${this.message}`}};return n=>Object.create(o,{_tag:r,message:{value:n,enumerable:!0}})},xh=Symbol.for("@effect/io/Cause/errors/RuntimeException"),Oh=Pa({[xh]:xh},"RuntimeException");var np=Symbol.for("@effect/io/Cause/errors/InterruptedException"),G1=Pa({[np]:np},"InterruptedException"),wh=e=>typeof e=="object"&&e!=null&&np in e,yh=Symbol.for("@effect/io/Cause/errors/IllegalArgument"),ti=Pa({[yh]:yh},"IllegalArgumentException");var sp=Symbol.for("@effect/io/Cause/errors/NoSuchElement"),_o=Pa({[sp]:sp},"NoSuchElementException"),Rh=e=>typeof e=="object"&&e!=null&&sp in e,bh=Symbol.for("@effect/io/Cause/errors/InvalidHubCapacityException"),Qz=Pa({[bh]:bh},"InvalidHubCapacityException");var ip=Symbol.for("@effect/io/Cause/SpanAnnotation"),V1=e=>typeof e=="object"&&e!==null&&ip in e,qE=e=>({_tag:"SpanAnnotation",[ip]:ip,span:e});var ME=e=>{if(typeof e=="object"&&e!=null&&"toString"in e&&typeof e.toString=="function"&&e.toString!==Object.prototype.toString)return e.toString();if(typeof e=="string")return`Error: ${e}`;if(typeof e=="object"&&e!==null&&"message"in e&&typeof e.message=="string"){let t=JSON.parse(JSON.stringify(e)),r=new Set(Object.keys(t));if(r.delete("name"),r.delete("message"),r.delete("_tag"),r.size===0)return`${"name"in e&&typeof e.name=="string"?e.name:"Error"}${"_tag"in e&&typeof e._tag=="string"?`(${e._tag})`:""}: ${e.message}`}return`Error: ${JSON.stringify(e)}`},TE=e=>e instanceof Error?[ME(e),e.stack?.split(`
`).filter(t=>!t.startsWith("Error")).join(`
`)]:[ME(e),void 0];var J1=e=>{let t=e.split(`
`),r=[];for(let o=0;o<t.length;o++){if(t[o].includes("EffectPrimitive")||t[o].includes("Generator.next")||t[o].includes("FiberRuntime"))return r.join(`
`);r.push(t[o])}return r.join(`
`)},Oo=e=>{if(Qo(e))return"All fibers interrupted without errors.";let t=lp(e).map(r=>{let o=r.message;if(r.stack&&(o+=`\r
${J1(r.stack)}`),r.span){let n=r.span,s=0;for(;n&&n._tag==="Span"&&s<10;)o+=`\r
    at ${n.name}`,n=Ke(n.parent),s++}return o}).join(`\r
\r
`);return t.includes(`\r
`)?`\r
${t}\r
`:t},lp=e=>pp(e,void 0,{emptyCase:()=>[],dieCase:(t,r)=>{let o=TE(r);return[{message:o[0],stack:o[1],span:void 0}]},failCase:(t,r)=>{let o=TE(r);return[{message:o[0],stack:o[1],span:void 0}]},interruptCase:()=>[],parallelCase:(t,r,o)=>[...r,...o],sequentialCase:(t,r,o)=>[...r,...o],annotatedCase:(t,r,o)=>V1(o)?r.map(n=>({...n,span:n.span??o.span})):r});var HE=Oo;var Na=255,jE=8,fp=e=>e&Na,mp=e=>e>>jE&Na,Wn=(e,t)=>(e&Na)+((t&e&Na)<<jE),dp=Wn(0,0),BE=e=>Wn(e,e),UE=e=>Wn(e,0);var WE=u(2,(e,t)=>Wn(fp(e)&~t,mp(e)));var Fh=u(2,(e,t)=>e|t);var zE=e=>~e>>>0&Na;var $E=0,Er=1,Ah=2,hp=4,La=16,gp=32;var vh=e=>qa(e,gp);var Mh=u(2,(e,t)=>e|t);var zr=e=>ri(e)&&!GE(e),ri=e=>qa(e,Er);var qa=u(2,(e,t)=>(e&t)!==0),xp=(...e)=>e.reduce((t,r)=>t|r,0),Th=xp($E);var Ha=e=>qa(e,hp);var GE=e=>qa(e,La);var zn=u(2,(e,t)=>Wn(e^t,t)),oi=u(2,(e,t)=>e&(zE(fp(t))|mp(t))|fp(t)&mp(t));var kh=Yu({empty:dp,diff:(e,t)=>zn(e,t),combine:(e,t)=>Fh(t)(e),patch:(e,t)=>oi(t,e)});var bp=dp;var Ih=BE,Ph=UE;var Nh=WE;var JE,YE,ZE,QE={_tag:"Empty"},Kn=(e,t)=>({_tag:"Par",left:e,right:t}),Dp=(e,t)=>({_tag:"Seq",left:e,right:t}),Hh=(e,t)=>({_tag:"Single",dataSource:e,blockedRequest:t});var XE=e=>{let t=va(e),r=Dr();for(;;){let[o,n]=yE(t,[e0(),Dr()],([s,i],a)=>{let[c,p]=eI(a);return[t0(s,c),gE(i,p)]});if(r=tI(r,o),_t(n))return bE(r);t=n}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/query/issues")},eI=e=>{let t=e,r=e0(),o=Dr(),n=Dr();for(;;)switch(t._tag){case"Empty":{if(_t(o))return[r,n];t=o.head,o=o.tail;break}case"Par":{o=Eo(t.right,o),t=t.left;break}case"Seq":{let s=t.left,i=t.right;switch(s._tag){case"Empty":{t=i;break}case"Par":{let a=s.left,c=s.right;t=Kn(Dp(a,i),Dp(c,i));break}case"Seq":{let a=s.left,c=s.right;t=Dp(a,Dp(c,i));break}case"Single":{t=s,n=Eo(i,n);break}}break}case"Single":{if(r=t0(r,iI(t.dataSource,t.blockedRequest)),_t(o))return[r,n];t=o.head,o=o.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/query/issues")},tI=(e,t)=>{if(_t(e))return va(Lh(t));if(aI(t))return e;let r=mI(e.head),o=cI(t);return r.length===1&&o.length===1&&O(r[0],o[0])?Eo(fI(e.head,Lh(t)),e.tail):Eo(Lh(t),e)},rI=Symbol.for("@effect/io/RequestBlock.Entry"),qh=class{constructor(t,r,o,n,s){this.request=t,this.result=r,this.listeners=o,this.ownerId=n,this.state=s,this[JE]=oI}};JE=rI;var oI={_R:e=>e};var jh=e=>new qh(e.request,e.result,e.listeners,e.ownerId,e.state),nI=Symbol.for("@effect/io/RequestBlockParallel"),sI={_R:e=>e},ja=class{constructor(t){this.map=t,this[YE]=sI}};YE=nI;var e0=()=>new ja(yo()),iI=(e,t)=>new ja(_S([e,Array.of(t)])),t0=(e,t)=>new ja(Id(e.map,t.map,(r,o,n)=>jr(r,n,je(_a(r,n),{onNone:()=>o,onSome:s=>[...s,...o]})))),aI=e=>OS(e.map),cI=e=>Array.from(kd(e.map)),Lh=e=>lI(RS(e.map,t=>Array.of(t)));var uI=Symbol.for("@effect/io/RequestBlockSequential"),pI={_R:e=>e},Sp=class{constructor(t){this.map=t,this[ZE]=pI}};ZE=uI;var lI=e=>new Sp(e),fI=(e,t)=>new Sp(Id(t.map,e.map,(r,o,n)=>jr(r,n,je(_a(r,n),{onNone:()=>[],onSome:s=>[...s,...o]}))));var mI=e=>Array.from(kd(e.map)),r0=e=>Array.from(e.map);var $n="Pending",Ba="Done";var dI="@effect/io/Deferred",s0=Symbol.for(dI),i0={_E:e=>e,_A:e=>e},Ep=e=>({_tag:$n,joiners:e}),Bh=e=>({_tag:Ba,effect:e});var ni="Async",a0="Commit",xe="Failure",si="OnFailure",ii="OnSuccess",ai="OnSuccessAndFailure",ye="Success",Cp="Sync",c0="Tag",wo="UpdateRuntimeFlags",ci="While",_p="WithRuntime",ui="Yield",Ua="RevertFlags";var wp=class{constructor(){this.buckets=[]}scheduleTask(t,r){let o,n;for(n=0;n<this.buckets.length&&this.buckets[n][0]<=r;n++)o=this.buckets[n];if(o)o[1].push(t);else{let s=[];for(let i=0;i<n;i++)s.push(this.buckets[i]);s.push([r,[t]]);for(let i=n;i<this.buckets.length;i++)s.push(this.buckets[i]);this.buckets=s}}},Uh=class{constructor(t){this.maxNextTickBeforeTimer=t,this.running=!1,this.tasks=new wp}starveInternal(t){let r=this.tasks.buckets;this.tasks.buckets=[];for(let[o,n]of r)for(let s=0;s<n.length;s++)n[s]();this.tasks.buckets.length===0?this.running=!1:this.starve(t)}starve(t=0){t>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(t+1))}scheduleTask(t,r){this.tasks.scheduleTask(t,r),this.running||(this.running=!0,this.starve())}},Wh=V(Symbol.for("@effect/io/Scheduler/defaultScheduler"),()=>new Uh(2048)),Rp=class{constructor(){this.tasks=new wp,this.deferred=!1}scheduleTask(t,r){this.deferred?Wh.scheduleTask(t,r):this.tasks.scheduleTask(t,r)}flush(){for(;this.tasks.buckets.length>0;){let t=this.tasks.buckets;this.tasks.buckets=[];for(let[r,o]of t)for(let n=0;n<o.length;n++)o[n]()}this.deferred=!0}};var p0,l0,f0,m0,gI="@effect/io/Effect/Error",zh=Symbol.for(gI),h0=e=>typeof e=="object"&&e!=null&&zh in e,g0=e=>({[zh]:zh,_tag:"EffectError",cause:e}),be=(e,t)=>{let r=new Me("Blocked");return r.i0=e,r.i1=t,r},Tp=e=>{let t=new Me("RunBlocked");return t.i0=e,t},pi=Symbol.for("@effect/io/Effect"),Ap=class{constructor(t,r){this.patch=t,this.op=r,this._tag=Ua}},Me=class{constructor(t){this._tag=t,this.i0=void 0,this.i1=void 0,this.i2=void 0,this.trace=void 0,this[p0]=Kh}[(p0=pi,F)](t){return this===t}[R](){return Uo(this)}pipe(){return C(this,arguments)}},vp=class{constructor(t){this._tag=t,this.i0=void 0,this.i1=void 0,this.i2=void 0,this.trace=void 0,this[l0]=Kh}[(l0=pi,F)](t){return this===t}[R](){return Uo(this)}get cause(){return this.i0}pipe(){return C(this,arguments)}toJSON(){return{_tag:this._tag,cause:this.cause.toJSON()}}toString(){return HE(this.cause)}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}},Mp=class{constructor(t){this._tag=t,this.i0=void 0,this.i1=void 0,this.i2=void 0,this.trace=void 0,this[f0]=Kh}[(f0=pi,F)](t){return this===t}[R](){return Uo(this)}get value(){return this.i0}pipe(){return C(this,arguments)}toJSON(){return{_tag:this._tag,value:this.value}}toString(){return`Success: ${String(this.value)}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}},Kh={_R:e=>e,_E:e=>e,_A:e=>e},De=e=>typeof e=="object"&&e!=null&&pi in e,he=e=>{let t=new Me(_p);return t.i0=e,t},er=u(3,(e,t,r)=>_e(o=>m(e,n=>m(ne(v(()=>o(t(n)))),s=>v(()=>r(n,s)).pipe(ee({onFailure:i=>{switch(s._tag){case xe:return U(Be(s.i0,i));case ye:return U(i)}},onSuccess:()=>s})))))),X=u(2,(e,t)=>m(e,()=>y(t))),oe=e=>X(e,void 0),tr=(e,t=pt)=>v(()=>{let r,o,n=new Me(ni);if(e.length!==1){let s=new AbortController;o=s,n.i0=i=>{r=e(i,s.signal)}}else n.i0=s=>{r=e(s)};return n.i1=t,on(n,()=>(o&&o.abort(),r??L))}),Gr=(e,t=pt)=>tr(r=>{let o=e(r);if(Pr(o))r(o.right);else return o.left},t),Vr=u(2,(e,t)=>{let r=new Me(si);return r.i0=e,r.i1=t,r}),Ot=u(2,(e,t)=>pe(e,{onFailure:t,onSuccess:y})),Xo=e=>(...t)=>e(...t),x0=u(2,(e,t)=>ee(e,{onFailure:Xo(r=>{let o=Co(r);switch(o._tag){case"Left":return J(()=>U(r))(t(o.left));case"Right":return U(o.right)}}),onSuccess:y})),y0=e=>he((t,r)=>e(ri(r.runtimeFlags))),$h=e=>U($e(e)),li=e=>Zr(()=>$e(Oh(e))),en=e=>Zr(()=>$e(e())),Jr=e=>pe(e,{onFailure:t=>y(z(t)),onSuccess:t=>y(H(t))}),Yr=()=>v(()=>it(Ao)),fi=e=>m(Yr(),e),ne=e=>za(e,{onFailure:Y,onSuccess:se}),W=e=>U(Bn(e)),Cr=e=>Zr(()=>Bn(e())),U=e=>{let t=new vp(xe);return t.i0=e,t},Zr=e=>m(D(e),U),tn=he(e=>y(e.id())),rr=e=>he(t=>e(t.id())),m=u(2,(e,t)=>{let r=new Me(ii);return r.i0=e,r.i1=t,r}),Kr=e=>{let t=new Me("OnStep");return t.i0=e,t.i1=se,t},mi=(e,t)=>{let r=new Me("OnStep");return r.i0=e,r.i1=t,r},wt=e=>m(e,P),rn=e=>pe(e,{onFailure:y,onSuccess:W}),za=u(2,(e,{onFailure:t,onSuccess:r})=>ee(e,{onFailure:o=>y(t(o)),onSuccess:o=>y(r(o))})),ee=u(2,(e,{onFailure:t,onSuccess:r})=>{let o=new Me(ai);return o.i0=e,o.i1=t,o.i2=r,o}),pe=u(2,(e,{onFailure:t,onSuccess:r})=>ee(e,{onFailure:o=>{let n=Ta(o);return up(o).length>0?U(NE(o)):n.length>0?t(Tn(n)):U(o)},onSuccess:r})),Ge=u(2,(e,t)=>v(()=>{let r=re(e),o=new Array(r.length),n=0;return X(Zn({while:()=>n<r.length,body:()=>t(r[n],n),step:s=>{o[n++]=s}}),o)})),Rt=u(2,(e,t)=>v(()=>{let r=re(e),o=0;return Zn({while:()=>o<r.length,body:()=>t(r[o],o),step:()=>{o++}})})),kp=u(e=>typeof e[0]=="boolean"||De(e[0]),(e,{onFalse:t,onTrue:r})=>typeof e=="boolean"?e?r:t:m(e,Xo(o=>o?r:t))),Ip=m(tn,e=>Pp(e)),Pp=e=>U(Sr(e)),Xt=e=>{let t=new Me(wo);t.i0=Ih(Er);let r=o=>o._tag==="Blocked"?be(o.i0,Xt(o.i1)):o;return t.i1=()=>mi(e,r),t},b0=e=>{let t=new Me(wo);t.i0=Ih(Er);let r=o=>o._tag==="Blocked"?be(o.i0,Xt(o.i1)):o;return t.i1=o=>ri(o)?Kr(e(Xt)):Kr(e($r)),m(t,r)},Qr=u(2,(e,t)=>_e(r=>m(ne(r(e)),o=>pg(t,o)))),_=u(2,(e,t)=>m(e,r=>D(()=>t(r)))),Np=u(2,(e,{onFailure:t,onSuccess:r})=>pe(e,{onFailure:o=>Cr(()=>t(o)),onSuccess:o=>D(()=>r(o))})),Ro=u(2,(e,t)=>ee(e,{onFailure:r=>{let o=Co(r);switch(o._tag){case"Left":return Cr(()=>t(o.left));case"Right":return U(o.right)}},onSuccess:y})),Lp=u(2,(e,t)=>_r(e,Xo(r=>Jp(r)?L:t(r.i0)))),_r=u(2,(e,t)=>_e(r=>ee(r(e),{onFailure:o=>{let n=Y(o);return ee(t(n),{onFailure:s=>Y(ve(o,s)),onSuccess:()=>n})},onSuccess:o=>{let n=se(o);return $(t(n),n)}}))),on=u(2,(e,t)=>_r(e,Qp({onFailure:r=>Qo(r)?oe(t(ka(r))):L,onSuccess:()=>L}))),Vn=u(2,(e,t)=>xI(e,t,y)),Jn=e=>Gh(e,P),Gh=u(2,(e,t)=>pe(e,{onFailure:r=>$h(t(r)),onSuccess:y})),D0=(e,t)=>re(e).reduceRight(([r,o],n)=>{let s=t(n);switch(s._tag){case"Left":return[[s.left,...r],o];case"Right":return[r,[s.right,...o]]}},[new Array,new Array]),Lt=u(2,(e,t)=>we(Ao,t)(e)),S0=u(2,(e,t)=>Ve(Ao,r=>Cn(r,t))(e)),Yn=u(2,(e,t)=>fi(r=>Lt(e,t(r)))),qp=he((e,t)=>y(t.runtimeFlags)),y=e=>{let t=new Mp(ye);return t.i0=e,t},v=e=>m(D(e),P),D=e=>{let t=new Me(Cp);return t.i0=e,t},qt=u(2,(e,t)=>m(e,r=>X(t(r),r))),Hp=e=>he(t=>{let r=t.getFiberRef(Wa),o=J(()=>t.scope())(r);return e(we(Wa,x(o)))}),xI=u(3,(e,t,r)=>ee(e,{onFailure:o=>up(o).length>0?U(td(PE(o))):t(),onSuccess:r})),$r=e=>{let t=new Me(wo);t.i0=Ph(Er),t.i1=()=>mi(e,r);let r=o=>o._tag==="Blocked"?be(o.i0,$r(o.i1)):o;return t},_e=e=>{let t=new Me(wo);t.i0=Ph(Er);let r=o=>o._tag==="Blocked"?be(o.i0,$r(o.i1)):o;return t.i1=o=>ri(o)?Kr(e(Xt)):Kr(e($r)),m(t,r)},L=y(void 0),di=e=>{let t=new Me(wo);return t.i0=e,t.i1=void 0,t},hi=u(2,(e,t)=>m(t,r=>r?_(x)(e):y(g()))),Zn=e=>{let t=new Me(ci);return t.i0=e.while,t.i1=e.body,t.i2=e.step,t},E0=u(2,(e,t)=>we(e,Kp,t)),C0=u(2,(e,t)=>we(e,Ga,t)),_0=u(2,(e,t)=>{let r=new Me(wo);return r.i0=t,r.i1=()=>e,r}),O0=u(2,(e,t)=>we(e,Ja,t)),Ht=e=>{let t=new Me(ui);return typeof e?.priority<"u"?ng(e.priority)(t):t},jp=u(2,(e,t)=>m(e,r=>_(t,o=>[r,o])));var gi=u(2,(e,t)=>m(e,r=>X(t,r))),$=u(2,(e,t)=>m(e,()=>t)),Fo=u(3,(e,t,r)=>m(e,o=>_(t,n=>r(o,n)))),Qn=Gr(()=>{let e=setInterval(()=>{},2147483647);return z(D(()=>clearInterval(e)))}),nn=e=>m(tn,t=>or(t)(e)),or=u(2,(e,t)=>m(e.interruptAsFork(t),()=>e.await())),Vh={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return C(this,arguments)}},Jh={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return C(this,arguments)}},Yh={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return C(this,arguments)}},Zh={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return C(this,arguments)}},Bp={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return C(this,arguments)}},Up={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return C(this,arguments)}},Qh={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return C(this,arguments)}},Xh={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return C(this,arguments)}},eg=[Vh,Qh,Up,Bp,Zh,Yh,Jh,Xh],yI="@effect/io/FiberRef",bI=Symbol.for(yI),DI={_A:e=>e},it=e=>w0(e,t=>[t,t]);var Oe=u(2,(e,t)=>m(it(e),t)),Gn=u(2,(e,t)=>w0(e,()=>[void 0,t]));var w0=u(2,(e,t)=>he(r=>{let[o,n]=t(r.getFiberRef(e));return r.setFiberRef(e,n),y(o)}));var SI="@effect/io/RequestResolver",R0=Symbol.for(SI),EI={_R:e=>e,_A:e=>e},d0=class e{constructor(t,r){this.runAll=t,this.target=r,this[m0]=EI,this.runAll=t}[(m0=R0,R)](){return this.target?E(this.target):Uo(this)}[F](t){return this.target?CI(t)&&O(this.target,t.target):this===t}identified(...t){return new e(this.runAll,Br(t))}pipe(){return C(this,arguments)}},CI=e=>typeof e=="object"&&e!=null&&R0 in e;var we=u(3,(e,t,r)=>m(er(gi(it(t),Gn(t,r)),()=>Kr(e),o=>Gn(t,o)),o=>o._tag==="Blocked"?be(o.i0,we(o.i1,t,r)):o)),Ve=u(3,(e,t,r)=>Oe(t,o=>we(e,t,r(o)))),Se=(e,t)=>xi(e,{differ:mE(),fork:t?.fork??P,join:t?.join}),tg=e=>xi(e,{differ:fE(),fork:Ju()}),Wp=e=>xi(e,{differ:lE(),fork:$u()}),xi=(e,t)=>({[bI]:DI,initial:e,diff:(r,o)=>cE(r,o)(t.differ),combine:(r,o)=>uE(r,o)(t.differ),patch:r=>o=>pE(r,o)(t.differ),fork:t.fork,join:t.join??((r,o)=>o),pipe(){return C(this,arguments)}}),F0=e=>xi(e,{differ:kh,fork:bp}),Ao=Wp(Tt()),Ka=Se(0),rg=Se(2048),$a=V(Symbol.for("@effect/io/FiberRef/currentLogAnnotation"),()=>Se(yo())),og=Se(Bp),zp=V(Symbol.for("@effect/io/FiberRef/currentLogSpan"),()=>Se(Dr())),vo=V(Symbol.for("@effect/io/FiberRef/currentScheduler"),()=>Se(Wh)),A0=u(2,(e,t)=>we(e,vo,t)),ng=u(2,(e,t)=>we(e,Ka,t)),v0=u(2,(e,t)=>we(e,rg,t)),Kp=V(Symbol.for("@effect/io/FiberRef/currentConcurrency"),()=>Se("unbounded")),Ga=V(Symbol.for("@effect/io/FiberRef/currentRequestBatching"),()=>Se(!0)),Va=V(Symbol.for("@effect/io/FiberRef/currentUnhandledErrorLogLevel"),()=>Se(x(Up))),M0=u(2,(e,t)=>we(e,Va,t)),Mo=tg(nt()),T0=it(Mo),Wa=V(Symbol.for("@effect/io/FiberRef/currentForkScopeOverride"),()=>Se(g(),{fork:()=>g(),join:(e,t)=>e})),Xn=V(Symbol.for("@effect/io/FiberRef/currentInterruptedCause"),()=>Se(lt,{fork:()=>lt,join:(e,t)=>e})),To=V(Symbol.for("@effect/io/FiberRef/currentTracerSpan"),()=>Se(Dr())),Ja=V(Symbol.for("@effect/io/FiberRef/currentTracerTiming"),()=>Se(!0)),$p=V(Symbol.for("@effect/io/FiberRef/currentTracerSpanAnnotations"),()=>Se(yo())),Gp=V(Symbol.for("@effect/io/FiberRef/currentTracerSpanLinks"),()=>Se(ut())),Vp=Symbol.for("@effect/io/Scope"),sg=Symbol.for("@effect/io/CloseableScope");var yi=(e,t)=>e.addFinalizer(t),sn=(e,t)=>e.close(t),ig=(e,t)=>e.fork(t),ag=u(2,(e,t)=>_(OI(e,t),je({onNone:()=>()=>L,onSome:r=>o=>_I(r,o)(e)}))),_I=u(3,(e,t,r)=>v(()=>{switch(e.state._tag){case"Exited":return L;case"Running":{let o=e.state.finalizers.get(t);return e.state.finalizers.delete(t),o!=null?e.state.update(o)(r):L}}})),OI=u(2,(e,t)=>v(()=>{switch(e.state._tag){case"Exited":return e.state.nextKey+=1,X(t(e.state.exit),g());case"Running":{let r=e.state.nextKey;return e.state.finalizers.set(r,t),e.state.nextKey+=1,y(x(r))}}}));var k0=D(()=>({state:{_tag:"Running",nextKey:0,finalizers:new Map,update:P}}));var cg=e=>e._tag==="Failure",Jp=e=>e._tag==="Success";var I0=u(2,(e,t)=>{switch(e._tag){case xe:return Y(e.i0);case ye:return se(t)}}),Ya=e=>I0(e,void 0);var bi=(e,t)=>wI(e,t?.parallel?Be:ve),Yp=e=>Y($e(e));var Or=e=>Y(Bn(e)),Y=e=>{let t=new vp(xe);return t.i0=e,t},P0=u(2,(e,t)=>{switch(e._tag){case xe:return Y(e.i0);case ye:return t(e.i0)}});var N0=e=>P0(P)(e);var Zp=e=>Y(Sr(e)),Fp=u(2,(e,t)=>{switch(e._tag){case xe:return Y(e.i0);case ye:return se(t(e.i0))}});var Qp=u(2,(e,{onFailure:t,onSuccess:r})=>{switch(e._tag){case xe:return t(e.i0);case ye:return r(e.i0)}}),es=u(2,(e,{onFailure:t,onSuccess:r})=>{switch(e._tag){case xe:return t(e.i0);case ye:return r(e.i0)}}),se=e=>{let t=new Mp(ye);return t.i0=e,t};var Xr=se(void 0);var Za=u(3,(e,t,{onFailure:r,onSuccess:o})=>{switch(e._tag){case xe:switch(t._tag){case ye:return Y(e.i0);case xe:return Y(r(e.i0,t.i0))}case ye:switch(t._tag){case ye:return se(o(e.i0,t.i0));case xe:return Y(t.i0)}}}),wI=(e,t)=>{let r=Br(e);return tt(r)?x(Fp(o=>Array.from(o))(Fp(bo)(bt(Fp(Ae)(rt(r)),(o,n)=>Za(n,{onSuccess:(s,i)=>Ie(i)(s),onFailure:t})(o))(ot(r))))):g()},Di=e=>({[s0]:i0,state:St(Ep([])),blockingOn:e,pipe(){return C(this,arguments)}}),ft=()=>m(tn,e=>L0(e)),L0=e=>D(()=>Di(e)),Pe=e=>Gr(t=>{let r=It(e.state);switch(r._tag){case Ba:return H(r.effect);case $n:return Zt(Ep([t,...r.joiners]))(e.state),z(RI(e,t))}},e.blockingOn),ug=u(2,(e,t)=>Qr(t,e)),Si=u(2,(e,t)=>D(()=>{let r=It(e.state);switch(r._tag){case Ba:return!1;case $n:{Zt(Bh(t))(e.state);for(let o=0;o<r.joiners.length;o++)r.joiners[o](t);return!0}}})),pg=u(2,(e,t)=>Si(e,t)),Qa=u(2,(e,t)=>Si(e,W(t)));var ts=u(2,(e,t)=>Si(e,U(t)));var q0=e=>m(tn,t=>Si(e,Pp(t)));var Ei=u(2,(e,t)=>Si(e,y(t)));var Ci=(e,t)=>{let r=It(e.state);if(r._tag===$n){Zt(Bh(t))(e.state);for(let o=r.joiners.length-1;o>=0;o--)r.joiners[o](t)}},RI=(e,t)=>D(()=>{let r=It(e.state);r._tag===$n&&Zt(Ep(r.joiners.filter(o=>o!==t)))(e.state)});var rs=Pe;var H0=pg;var j0=q0;var lg=Di;var U0=N0;var W0=se;var G0,FI="@effect/io/Clock",mg=Symbol.for(FI),eo=Dt(mg),AI=2**31-1,K0={unsafeSchedule(e,t){let r=qr(t);if(r>AI)return Gt;let o=!1,n=setTimeout(()=>{o=!0,e()},r);return()=>(clearTimeout(n),!o)}},$0=function(){let e=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*e;let t="timeOrigin"in performance&&typeof performance.timeOrigin=="number"?BigInt(Math.round(performance.timeOrigin*1e6)):BigInt(Date.now())*e;return()=>t+BigInt(Math.round(performance.now()*1e6))}(),vI=function(){let e=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!e)return $0;let t=$0()-e.bigint();return()=>t+e.bigint()}(),fg=class{constructor(){this[G0]=mg,this.currentTimeMillis=D(()=>this.unsafeCurrentTimeMillis()),this.currentTimeNanos=D(()=>this.unsafeCurrentTimeNanos())}unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return vI()}scheduler(){return y(K0)}sleep(t){return Gr(r=>{let o=K0.unsafeSchedule(()=>r(L),t);return z(oe(D(o)))})}};G0=mg;var V0=()=>new fg;var Xp="And",el="Or",tl="InvalidData",rl="MissingData",ol="SourceUnavailable",nl="Unsupported";var TI="@effect/io/Config/Error",dg=Symbol.for(TI),_i={[dg]:dg},sl=(e,t)=>{let r=Object.create(_i);return r._tag=Xp,r.left=e,r.right=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),r},il=(e,t)=>{let r=Object.create(_i);return r._tag=el,r.left=e,r.right=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),r},to=(e,t,r={pathDelim:"."})=>{let o=Object.create(_i);return o._tag=tl,o.path=e,o.message=t,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Invalid data at ${go(r.pathDelim)(this.path)}: "${this.message}")`}}),o},wr=(e,t,r={pathDelim:"."})=>{let o=Object.create(_i);return o._tag=rl,o.path=e,o.message=t,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Missing data at ${go(r.pathDelim)(this.path)}: "${this.message}")`}}),o},Y0=(e,t,r,o={pathDelim:"."})=>{let n=Object.create(_i);return n._tag=ol,n.path=e,n.message=t,n.cause=r,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Source unavailable at ${go(o.pathDelim)(this.path)}: "${this.message}")`}}),n},al=(e,t,r={pathDelim:"."})=>{let o=Object.create(_i);return o._tag=nl,o.path=e,o.message=t,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${go(r.pathDelim)(this.path)}: "${this.message}")`}}),o};var ko=u(2,(e,t)=>{switch(e._tag){case Xp:return sl(ko(t)(e.left),ko(t)(e.right));case el:return il(ko(t)(e.left),ko(t)(e.right));case tl:return to([...t,...e.path],e.message);case rl:return wr([...t,...e.path],e.message);case ol:return Y0([...t,...e.path],e.message,e.cause);case nl:return al([...t,...e.path],e.message)}}),kI={andCase:(e,t,r)=>t&&r,orCase:(e,t,r)=>t&&r,invalidDataCase:Gt,missingDataCase:Ir,sourceUnavailableCase:Gt,unsupportedCase:Gt},Z0=u(3,(e,t,r)=>{let o=[e],n=[];for(;o.length>0;){let i=o.pop();switch(i._tag){case Xp:{o.push(i.right),o.push(i.left),n.push(z({_tag:"AndCase"}));break}case el:{o.push(i.right),o.push(i.left),n.push(z({_tag:"OrCase"}));break}case tl:{n.push(H(r.invalidDataCase(t,i.path,i.message)));break}case rl:{n.push(H(r.missingDataCase(t,i.path,i.message)));break}case ol:{n.push(H(r.sourceUnavailableCase(t,i.path,i.message,i.cause)));break}case nl:{n.push(H(r.unsupportedCase(t,i.path,i.message)));break}}}let s=[];for(;n.length>0;){let i=n.pop();switch(i._tag){case"Left":{switch(i.left._tag){case"AndCase":{let a=s.pop(),c=s.pop(),p=r.andCase(t,a,c);s.push(p);break}case"OrCase":{let a=s.pop(),c=s.pop(),p=r.orCase(t,a,c);s.push(p);break}}break}case"Right":{s.push(i.right);break}}}if(s.length===0)throw new Error("BUG: ConfigError.reduceWithContext - please report an issue at https://github.com/Effect-TS/io/issues");return s.pop()}),Q0=e=>Z0(e,void 0,kI);var hg=Q0;var X0="@effect/io/Config/Secret",gg=Symbol.for(X0),PI={[gg]:gg,[R](){return T(mo(this.raw))(E(X0))},[F](e){return NI(e)&&this.raw.length===e.raw.length&&this.raw.every((t,r)=>O(t,e.raw[r]))}},NI=e=>typeof e=="object"&&e!=null&&gg in e,LI=e=>{let t=Object.create(PI);return Object.defineProperty(t,"toString",{enumerable:!1,value(){return"ConfigSecret(<redacted>)"}}),Object.defineProperty(t,"raw",{enumerable:!1,value:e}),t};var eC=e=>LI(e.split("").map(t=>t.charCodeAt(0)));var ul="Constant",pl="Fail",Xa="Fallback",ll="Described",fl="Lazy",ml="MapOrFail",dl="Nested",hl="Primitive",gl="Sequence",xl="HashMap",yl="ZipWith";var HI="@effect/io/Config",Dl=Symbol.for(HI),jI={_A:e=>e},nr={[Dl]:jI,pipe(){return C(this,arguments)}},oC=e=>{let t=an("a boolean property",r=>{switch(r){case"true":case"yes":case"on":case"1":return H(!0);case"false":case"no":case"off":case"0":return H(!1);default:{let o=to([],`Expected a boolean value, but received ${r}`);return z(o)}}});return e===void 0?t:sr(e)(t)},nC=(e,t)=>Io(ct)(Sl(e,t)),Sl=(e,t)=>Io(t===void 0?bl(e):sr(t)(bl(e)),Pt),sC=e=>{let t=an("a date property",r=>{let o=Date.parse(r);return Number.isNaN(o)?z(to([],`Expected a date value but received ${r}`)):H(new Date(o))});return e===void 0?t:sr(e)(t)},iC=e=>{let t=Object.create(nr);return t._tag=pl,t.message=e,t.parse=()=>z(al([],e)),t},aC=e=>{let t=an("a number property",r=>{let o=Number.parseFloat(r);return Number.isNaN(o)?z(to([],`Expected an number value but received ${r}`)):H(o)});return e===void 0?t:sr(e)(t)},cC=e=>{let t=an("an integer property",r=>{let o=Number.parseInt(r,10);return Number.isNaN(o)?z(to([],`Expected an integer value but received ${r}`)):H(o)});return e===void 0?t:sr(e)(t)},uC=e=>{let t=Oi(xg(),r=>{let o=r.toUpperCase(),n=eg.find(s=>s.label===o);return n===void 0?z(to([],`Expected a log level, but found: ${r}`)):H(n)});return e===void 0?t:sr(t,e)},Io=u(2,(e,t)=>Oi(e,r=>H(t(r)))),pC=u(2,(e,t)=>Oi(e,r=>{try{return H(t(r))}catch(o){return z(to([],o instanceof Error?o.message:`${o}`))}})),Oi=u(2,(e,t)=>{let r=Object.create(nr);return r._tag=ml,r.original=e,r.mapOrFail=t,r}),lC=e=>t=>wr([],`Expected ${t.description} with name ${e}`),sr=u(2,(e,t)=>{let r=Object.create(nr);return r._tag=dl,r.name=t,r.config=e,r}),fC=u(2,(e,t)=>{let r=Object.create(nr);return r._tag=Xa,r.first=e,r.second=ec(t),r.condition=Ir,r}),El=u(2,(e,t)=>{let r=Object.create(nr);return r._tag=Xa,r.first=e,r.second=ec(t.orElse),r.condition=t.if,r}),mC=e=>El({orElse:()=>wi(g()),if:hg})(Io(x)(e)),an=(e,t)=>{let r=Object.create(nr);return r._tag=hl,r.description=e,r.parse=t,r},bl=e=>{let t=Object.create(nr);return t._tag=gl,t.config=e,t},dC=e=>{let t=an("a secret property",r=>H(eC(r)));return e===void 0?t:sr(e)(t)},hC=(e,t)=>{let r=Io(Sl(e),Ct);return t===void 0?r:sr(t)(r)},xg=e=>{let t=an("a text property",H);return e===void 0?t:sr(e)(t)},gC=e=>Array.isArray(e)?rC(e):Symbol.iterator in e?rC([...e]):xC(e),xC=e=>{let t=Object.entries(e),r=Io(n=>({[t[0][0]]:n}))(t[0][1]);if(t.length===1)return r;let o=t.slice(1);for(let[n,s]of o)r=tc(s,(i,a)=>({...i,[n]:a}))(r);return r},wi=e=>{let t=Object.create(nr);return t._tag=ul,t.value=e,t.parse=()=>H(e),t},ec=e=>{let t=Object.create(nr);return t._tag=fl,t.config=e,t},yC=e=>ec(()=>wi(e())),bC=(e,t)=>{let r=Object.create(nr);return r._tag=xl,r.valueConfig=e,t===void 0?r:sr(t)(r)},yg=e=>typeof e=="object"&&e!=null&&Dl in e,rC=e=>{if(e.length===0)return wi([]);if(e.length===1)return Io(e[0],r=>[r]);let t=Io(e[0],r=>[r]);for(let r=1;r<e.length;r++){let o=e[r];t=tc(o,(n,s)=>[...n,s])(t)}return t},bg=e=>yg(e)?e:xC(Object.fromEntries(Object.entries(e).map(([t,r])=>[t,bg(r)]))),DC=u(2,(e,{message:t,validation:r})=>Oi(e,o=>r(o)?H(o):z(to([],t)))),SC=u(2,(e,t)=>El(e,{orElse:()=>wi(t),if:hg})),EC=u(2,(e,t)=>{let r=Object.create(nr);return r._tag=ll,r.config=e,r.description=t,r}),CC=u(2,(e,t)=>tc(e,t,(r,o)=>[r,o])),tc=u(3,(e,t,r)=>{let o=Object.create(nr);return o._tag=yl,o.left=e,o.right=t,o.zip=r,o});var OC={_tag:"Empty"};var Cl=u(2,(e,t)=>{let r=va(t),o=e;for(;Aa(r);){let n=r.head;switch(n._tag){case"Empty":{r=r.tail;break}case"AndThen":{r=Eo(n.first,Eo(n.second,r.tail));break}case"MapName":{o=ho(o,n.f),r=r.tail;break}case"Nested":{o=dr(o,n.name),r=r.tail;break}case"Unnested":{if(nd(n.name)(Eu(o)))o=Jt(o),r=r.tail;else return z(wr(o,`Expected ${n.name} to be in path in ConfigProvider#unnested`));break}}}return H(o)});var _l=(e,t)=>[...e,...t],UI="@effect/io/Config/Provider",Dg=Symbol.for(UI),Ri=Dt(Dg),WI="@effect/io/Config/Provider/Flat",wC=Symbol.for(WI),zI=e=>({[Dg]:Dg,pipe(){return C(this,arguments)},...e}),KI=e=>({[wC]:wC,patch:e.patch,load:(t,r,o=!0)=>e.load(t,r,o),enumerateChildren:e.enumerateChildren}),$I=e=>zI({load:t=>m(ir(e,En(),t,!1),r=>je(Eu(r),{onNone:()=>W(wr(En(),`Expected a single value having structure: ${t}`)),onSome:y})),flattened:e}),RC=(e={})=>{let{pathDelim:t,seqDelim:r}=Object.assign({},{pathDelim:"_",seqDelim:","},e),o=c=>go(t)(c),n=c=>c.split(t),s=()=>typeof process<"u"&&"env"in process&&typeof process.env=="object"?process.env:{};return $I(KI({load:(c,p,l=!0)=>{let f=o(c),d=s(),h=f in d?x(d[f]):g();return m(S=>YI(S,c,p,r,l))(Ro(()=>wr(c,`Expected ${f} to exist in the process context`))(h))},enumerateChildren:c=>D(()=>{let p=s(),l=Object.keys(p),d=Array.from(l).map(h=>n(h.toUpperCase())).filter(h=>{for(let S=0;S<c.length;S++){let w=cd(S)(c),A=h[S];if(A===void 0||w!==A)return!1}return!0}).flatMap(h=>h.slice(c.length,c.length+1));return Ct(d)}),patch:OC}))};var GI=(e,t,r,o)=>{let n=ld(r.length,c=>c>=o.length?g():x([e(c),c+1])),s=ld(o.length,c=>c>=r.length?g():x([t(c),c+1])),i=_l(r,n),a=_l(o,s);return[i,a]},ir=(e,t,r,o)=>{let n=r;switch(n._tag){case ul:return y(Mt(n.value));case ll:return v(()=>ir(e,t,n.config,o));case pl:return W(wr(t,n.message));case Xa:return Ot(s=>n.condition(s)?Ot(i=>W(il(s,i)))(ir(e,t,n.second,o)):W(s))(v(()=>ir(e,t,n.first,o)));case fl:return v(()=>ir(e,t,n.config(),o));case ml:return v(()=>m(Ge(s=>Ro(ko(t))(n.mapOrFail(s))))(ir(e,t,n.original,o)));case dl:return v(()=>ir(e,_l(t,Mt(n.name)),n.config,o));case hl:return m(s=>m(i=>{if(i.length===0){let a=J(()=>"<n/a>")(vD(s));return W(lC(a))}return y(i)})(e.load(s,n,o)))(Cl(t,e.patch));case gl:return m(s=>m(i=>i.length===0?v(()=>_(ir(e,s,n.config,!0),Mt)):_(a=>{let c=_u(a);return c.length===0?Mt(En()):Mt(c)})(Ge(i,a=>ir(e,FD(t,`[${a}]`),n.config,!0))))(m(XI)(e.enumerateChildren(s))))(Cl(t,e.patch));case xl:return v(()=>m(s=>m(i=>_(a=>{if(a.length===0)return Mt(yo());let c=a.map(p=>Array.from(p));return ho(p=>ju(pd(re(i),p)))(ZI(c))})(Ge(a=>ir(e,_l(s,Mt(a)),n.valueConfig,o))(i)))(e.enumerateChildren(s)))(Cl(t,e.patch)));case yl:return v(()=>m(s=>m(i=>{if(Re(s)&&Re(i))return W(sl(s.left,i.left));if(Re(s)&&Pr(i))return W(s.left);if(Pr(s)&&Re(i))return W(i.left);if(Pr(s)&&Pr(i)){let a=go(".")(t),c=VI(t,a),[p,l]=GI(c,c,ho(H)(s.right),ho(H)(i.right));return Ge(([f,d])=>_(([h,S])=>n.zip(h,S))(jp(f,d)))(pd(l)(p))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/io/issues")})(Jr(ir(e,t,n.right,o))))(Jr(ir(e,t,n.left,o))))}},VI=(e,t)=>r=>z(wr(e,`The element at index ${r} in a sequence at path "${t}" was missing`));var JI=(e,t)=>e.split(new RegExp(`\\s*${QI(t)}\\s*`)),YI=(e,t,r,o,n)=>n?Ro(ko(t))(Ge(s=>r.parse(s.trim()))(JI(e,o))):Ro(ko(t))(_(Mt)(r.parse(e))),ZI=e=>Object.keys(e[0]).map(t=>e.map(r=>r[t])),QI=e=>e.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&"),XI=e=>_(Du)(Jr(Np({onFailure:()=>En(),onSuccess:Sn(vt)})(Ge(e,tP))));var eP=/^(\[(\d+)\])$/,tP=e=>{let t=e.match(eP);if(t!==null){let r=t[2];return mr(rP)(r!==void 0&&r.length>0?x(r):g())}return g()};var rP=e=>{let t=Number.parseInt(e);return Number.isNaN(t)?g():x(t)};var Sg=Symbol("@effect/io/Console"),FC=Dt(Sg),AC={[Sg]:Sg,assert(e,...t){return D(()=>{console.assert(e,...t)})},clear:D(()=>{console.clear()}),count(e){return D(()=>{console.count(e)})},countReset(e){return D(()=>{console.countReset(e)})},debug(...e){return D(()=>{console.debug(...e)})},dir(e,t){return D(()=>{console.dir(e,t)})},dirxml(...e){return D(()=>{console.dirxml(...e)})},error(...e){return D(()=>{console.error(...e)})},group(e){return e?.collapsed?D(()=>console.groupCollapsed(e?.label)):D(()=>console.group(e?.label))},groupEnd:D(()=>{console.groupEnd()}),info(...e){return D(()=>{console.info(...e)})},log(...e){return D(()=>{console.log(...e)})},table(e,t){return D(()=>{console.table(e,t)})},time(e){return D(()=>console.time(e))},timeEnd(e){return D(()=>console.timeEnd(e))},timeLog(e,...t){return D(()=>{console.timeLog(e,...t)})},trace(...e){return D(()=>{console.trace(...e)})},warn(...e){return D(()=>{console.warn(...e)})},withGroup(e,t){return er(t?.collapsed?D(()=>console.groupCollapsed(t?.label)):D(()=>console.group(t?.label)),()=>e,()=>D(()=>console.groupEnd()))},withTime(e,t){return er(D(()=>console.time(t)),()=>e,()=>D(()=>console.timeEnd(t)))}};var vC,sP="@effect/io/Random",Cg=Symbol.for(sP),_g=Dt(Cg),Eg=class{constructor(t){this.seed=t,this[vC]=Cg,this.PRNG=new Ms(t)}next(){return D(()=>this.PRNG.number())}nextBoolean(){return _(this.next(),t=>t>.5)}nextInt(){return D(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(t,r){return _(this.next(),o=>(r-t)*o+t)}nextIntBetween(t,r){return D(()=>this.PRNG.integer(r-t)+t)}shuffle(t){return iP(t,r=>this.nextIntBetween(0,r+1))}};vC=Cg;var iP=(e,t)=>v(()=>m(r=>{let o=[];for(let n=r.length;n>=2;n=n-1)o.push(n);return X(Br(r))(Rt(n=>_(s=>aP(r,n-1,s))(t(n)))(o))})(D(()=>Array.from(e)))),aP=(e,t,r)=>{let o=e[t];return e[t]=e[r],e[r]=o,e},MC=e=>new Eg(e);var TC=Symbol.for("@effect/io/Tracer"),uP=e=>({[TC]:TC,...e}),Fi=Dt(Symbol.for("@effect/io/Tracer")),pP=V("@effect/io/Tracer/SpanId.ids",()=>St(0)),Og=class{constructor(t,r,o,n,s){this.name=t,this.parent=r,this.context=o,this.links=n,this.startTime=s,this._tag="Span",this.traceId="native",this.events=[],this.end=(i,a)=>{this.status={_tag:"Ended",endTime:i,exit:a,startTime:this.status.startTime}},this.attribute=(i,a)=>{this.attributes.set(i,a)},this.event=(i,a,c)=>{this.events.push([i,a,c??{}])},this.status={_tag:"Started",startTime:s},this.attributes=new Map,this.spanId=`span${AS(pP)}`}},kC=uP({span:(e,t,r,o,n)=>new Og(e,t,r,o,n)});var lP=ke(Fi,kC)(ke(Ri,RC())(ke(_g,MC(Math.random()*4294967296>>>0))(ke(FC,AC)(ke(eo,V0())(Tt()))))),mt=Wp(lP),PC=e=>{let t=et(e);return rc(r=>r.sleep(t))},rc=e=>Oe(mt,t=>e(Lr(t,eo))),NC=rc(e=>e.currentTimeMillis),LC=rc(e=>e.currentTimeNanos),qC=u(2,(e,t)=>Ve(mt,ke(eo,t))(e)),HC=u(2,(e,t)=>Ve(mt,ke(Ri,t))(e)),wg=e=>Oe(mt,t=>e(Lr(t,Ri))),jC=e=>wg(t=>t.load(e));var Ol=e=>Oe(mt,t=>e(Lr(t,_g)));var wl=e=>Oe(mt,t=>e(Lr(t,Fi))),BC=u(2,(e,t)=>Ve(mt,ke(Fi,t))(e));var Rg=PC,Rl=NC,Fg=LC,UC=rc;var zC;function KC(e){return new os(e)}var Ag=Symbol.for("@effect/io/FiberRefs"),os=class{constructor(t){this.locals=t,this[zC]=Ag}pipe(){return C(this,arguments)}};zC=Ag;var fP=(e,t,r,o=!1)=>{let n=e,s=t,i=r,a=o,c;for(;c===void 0;)if(Nr(s)&&Nr(i)){let p=Fe(s)[0],l=Jt(s),f=Fe(i)[0],d=Fe(i)[1],h=Jt(i);p.startTimeMillis<f.startTimeMillis?(i=h,a=!0):p.startTimeMillis>f.startTimeMillis?s=l:p.id<f.id?(i=h,a=!0):p.id>f.id?s=l:c=[d,a]}else c=[n.initial,!0];return c},Fl=u(3,(e,t,r)=>{let o=new Map(e.locals);for(let[n,s]of r.locals){let i=Fe(s)[1];if(!O(Fe(s)[0],t)){if(!o.has(n)){if(O(i,n.initial))continue;o.set(n,[[t,n.join(n.initial,i)]]);continue}let a=o.get(n),[c,p]=fP(n,a,s);if(p){let l=n.diff(c,i),f=Fe(a)[1],d=n.join(f,n.patch(l)(f));if(!O(f,d)){let h,S=Fe(a)[0];O(S,t)?h=dr([S,d])(Jt(a)):h=dr([t,d])(a),o.set(n,h)}}}}return new os(new Map(o))}),Al=u(2,(e,t)=>{let r=new Map;for(let[o,n]of e.locals.entries()){let s=Fe(n)[1],i=o.patch(o.fork)(s);O(s,i)?r.set(o,n):r.set(o,dr([t,i])(n))}return new os(r)}),$C=e=>Ct(e.locals.keys()),GC=e=>Rt($C(e),t=>Gn(t,Ai(e,t))),nc=u(2,(e,t)=>{let r=new Map(e.locals);return r.delete(t),new os(r)}),sc=u(2,(e,t)=>e.locals.has(t)?x(Fe(e.locals.get(t))[1]):g()),Ai=u(2,(e,t)=>J(()=>t.initial)(sc(e,t))),ns=u(2,(e,{fiberId:t,fiberRef:r,value:o})=>{let n=e.locals.has(r)?e.locals.get(r):En(),s;if(ad(n))s=Mt([t,o]);else{let[a,c]=Fe(n);if(O(a,t)){if(O(c,o))return e;s=dr([t,o])(Jt(n))}else s=dr([t,o])(n)}let i=new Map(e.locals);return new os(i.set(r,s))});var VC=Al;var JC=Fl,YC=GC,Mg=ns,ZC=KC;var XC="Empty",e_="Add",t_="Remove",r_="Update",o_="AndThen",n_={_tag:XC},Ml=(e,t)=>{let r=new Map(e.locals),o=n_;for(let[n,s]of t.locals.entries()){let i=Fe(s)[1],a=r.get(n);if(a!==void 0){let c=Fe(a)[1];O(c,i)||(o=vl({_tag:r_,fiberRef:n,patch:n.diff(c,i)})(o))}else o=vl({_tag:e_,fiberRef:n,value:i})(o);r.delete(n)}for(let[n]of r.entries())o=vl({_tag:t_,fiberRef:n})(o);return o},vl=u(2,(e,t)=>({_tag:o_,first:e,second:t})),Tl=u(3,(e,t,r)=>{let o=r,n=Mt(e);for(;Nr(n);){let s=Fe(n),i=Jt(n);switch(s._tag){case XC:{n=i;break}case e_:{o=ns(o,{fiberId:t,fiberRef:s.fiberRef,value:s.value}),n=i;break}case t_:{o=nc(o,s.fiberRef),n=i;break}case r_:{let a=Ai(o,s.fiberRef);o=ns(o,{fiberId:t,fiberRef:s.fiberRef,value:s.fiberRef.patch(s.patch)(a)}),n=i;break}case o_:{n=dr(s.first)(dr(s.second)(i));break}}}return o});var i_,a_="@effect/io/Metric/Label",Tg=Symbol.for(a_),kg=class{constructor(t,r){this.key=t,this.value=r,this[i_]=Tg}[(i_=Tg,R)](){return T(E(this.value))(T(E(this.key))(E(a_)))}[F](t){return mP(t)&&this.key===t.key&&this.value===t.value}pipe(){return C(this,arguments)}},kl=(e,t)=>new kg(e,t),mP=e=>typeof e=="object"&&e!=null&&Tg in e;var Il=class e{constructor(t){this.self=t,this.called=!1}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new e(this.self)}};var hP=Vh,Ig=Jh,Pg=Yh,Ng=Zh,Lg=Bp,qg=Up,Hg=Qh,gP=Xh;var xP=ua(e=>e.ordinal)(vt);var u_=Hm(xP);var p_=e=>{switch(e){case"All":return hP;case"Debug":return qg;case"Error":return Pg;case"Fatal":return Ig;case"Info":return Lg;case"Trace":return Hg;case"None":return gP;case"Warning":return Ng}};var f_=(e,t)=>({label:e,startTime:t}),m_=e=>t=>`${t.label.replace(/[\s="]/g,"_")}=${e-t.startTime}ms`;var d_=f_,h_=m_;var x_,Pl=Symbol.for("@effect/io/Ref"),Bg={_A:e=>e},jg=class{constructor(t){this.ref=t,this[x_]=Bg}modify(t){return D(()=>{let r=It(this.ref),[o,n]=t(r);return r!==n&&Zt(n)(this.ref),o})}pipe(){return C(this,arguments)}};x_=Pl;var Nl=e=>new jg(St(e)),ss=e=>D(()=>Nl(e)),Rr=e=>e.modify(t=>[t,t]),ro=u(2,(e,t)=>e.modify(()=>[void 0,t])),y_=u(2,(e,t)=>e.modify(r=>[r,t]));var Ll=u(2,(e,t)=>e.modify(t));var ic=u(2,(e,t)=>e.modify(r=>[void 0,t(r)]));var ac=ss,Hl=Rr,b_=y_;var D_=Ll;var S_=ic;var C_=wl;var __=u(e=>De(e[0]),function(){let e=arguments;return Ve(e[0],$a,typeof e[1]=="string"?jr(e[1],e[2]):t=>Object.entries(e[1]).reduce((r,[o,n])=>jr(r,o,n),t))}),jl=e=>_(e,x),O_=e=>Ro(e,x),w_=(e,t=pt)=>Gr(r=>{let o=e(r);switch(o._tag){case"None":return z(L);case"Some":return H(o.value)}},t),cc=e=>{let t,r;return typeof e=="function"?t=e:(t=e.try,r=e.catch),D(()=>{try{return t()}catch(o){throw g0(Bn(r?r(o):o))}})},R_=u(3,(e,t,r)=>Ot(e,o=>typeof o=="object"&&o!=null&&t in o&&o[t]===r.failure?r.onFailure(o):W(o))),F_=u(2,(e,t)=>Vr(e,Xo(r=>{let o=Ia(r,n=>cp(n)?x(n):g());switch(o._tag){case"None":return U(r);case"Some":return t(o.value.defect)}}))),A_=u(2,(e,t)=>ee(e,{onFailure:r=>{let o=t(r);switch(o._tag){case"None":return U(r);case"Some":return o.value}},onSuccess:y})),v_=u(2,(e,t)=>Vr(e,Xo(r=>{let o=Ia(r,n=>cp(n)?x(n):g());switch(o._tag){case"None":return U(r);case"Some":{let n=t(o.value.defect);return n._tag==="Some"?n.value:U(r)}}}))),M_=u(3,(e,t,r)=>Ot(e,o=>de(o)&&"_tag"in o&&o._tag===t?r(o):W(o))),T_=u(2,(e,t)=>Ot(e,r=>{let o=Object.keys(t);return de(r)&&"_tag"in r&&o.includes(r._tag)?t[r._tag](r):W(r)})),k_=e=>za(e,{onFailure:P,onSuccess:()=>lt}),oo=UC,I_=oo(y),P_=u(2,(e,t)=>$(Rg(t),e)),Bl=e=>he((t,r)=>e({id:t.id(),status:r,interruptors:ka(t.getFiberRef(Xn))})),N_=Bl(e=>So(e.interruptors)>0?Ip:L),L_=Bl(y),is=e=>Ul(e,zg,Ml),q_=y({}),H_=u(3,(e,t,r)=>m(e,o=>_(r(o),n=>({...o,[t]:n})))),j_=u(2,(e,t)=>_(e,r=>({[t]:r}))),B_=u(3,(e,t,r)=>_(e,o=>({...o,[t]:r(o)}))),U_=u(2,(e,t)=>v(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!1),i=0;for(;(n=r.next())&&!n.done;){let a=n.value,c=i++;s=m(s,p=>p?(o.push(a),y(!0)):t(a,c))}return _(s,()=>o)})),W_=u(2,(e,t)=>v(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!0),i=0;for(;(n=r.next())&&!n.done;){let a=n.value,c=i++;s=m(s,p=>_(p?t(a,c):y(!1),l=>(l||o.push(a),l)))}return _(s,()=>o)})),z_=e=>_(Yr(),e),Wg=e=>Vn(e,()=>m(Ht(),()=>Wg(e)));var K_=u(3,(e,t,r)=>uc(e,t,()=>en(r))),$_=u(3,(e,t,r)=>uc(e,t,()=>li(r))),uc=u(3,(e,t,r)=>m(e,o=>t(o)?y(o):r(o))),G_=u(3,(e,t,r)=>uc(e,t,o=>Cr(()=>r(o)))),V_=u(2,(e,t)=>v(()=>{let r=e[Symbol.iterator](),o=r.next();return o.done?y(g()):J_(r,0,t,o.value)})),J_=(e,t,r,o)=>m(r(o,t),n=>{if(n)return y(x(o));let s=e.next();return s.done?y(g()):J_(e,t+1,r,s.value)}),Y_=e=>v(()=>{let t=Br(e);return tt(t)?bt(rt(t),(r,o)=>Vn(r,()=>o))(ot(t)):en(()=>ti("Received an empty collection of effects"))}),Z_=u(2,(e,t)=>rn(t(rn(e)))),pc=u(2,(e,{onFailure:t,onSuccess:r})=>pe(e,{onFailure:o=>y(t(o)),onSuccess:o=>y(r(o))})),Q_=u(2,(e,t)=>v(()=>X_(e[Symbol.iterator](),0,t))),X_=(e,t,r)=>{let o=e.next();return o.done?y(!0):m(r(o.value,t),n=>n?X_(e,t+1,r):y(n))},eO=e=>{let t=m(m(e,()=>Ht()),()=>t);return t},Ug=class{constructor(t){this.value=t}[Symbol.iterator](){return new Il(this)}},DP=function(){let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return new Ug(e)},tO=e=>v(()=>{let t=e(DP),r=t.next(),o=n=>n.done?y(n.value):m(s=>o(t.next(s)))(n.value.value);return o(r)}),zg=he(e=>y(e.unsafeGetFiberRefs())),rO=e=>pe(e,{onFailure:t=>W(x(t)),onSuccess:t=>{let o=t[Symbol.iterator]().next();return o.done?W(g()):y(o.value)}}),oO=e=>pc(e,{onFailure:Rs,onSuccess:Rs}),nO=e=>ee(e,{onFailure:t=>$g(t,"An error was silently ignored because it is not anticipated to be useful"),onSuccess:()=>L}),sO=e=>Wl((t,r)=>JC(r,t,e)),iO=e=>pc(e,{onFailure:Ir,onSuccess:Gt}),aO=e=>pc(e,{onFailure:Gt,onSuccess:Ir}),Kg=(e,t)=>v(()=>t.while(e)?m(t.body(e),r=>Kg(r,t)):y(e)),as=e=>(t,r)=>{let o=Xe(e),n,s;return ap(t)?(s=t,n=r??""):(n=t,s=r??lt),he(i=>(i.log(n,s,o),L))},cO=as(),uO=as(Hg),$g=as(qg),pO=as(Lg),lO=as(Ng),fO=as(Pg),mO=as(Ig),dO=u(2,(e,t)=>m(Rl,r=>Ve(e,zp,Vo(d_(t,r))))),hO=it($a),gO=(e,t)=>t.discard?yO(e,t.while,t.step,t.body):_(xO(e,t.while,t.step,t.body),r=>Array.from(r)),xO=(e,t,r,o)=>v(()=>t(e)?m(o(e),n=>_(xO(r(e),t,r,o),Vo(n))):D(()=>Dr())),yO=(e,t,r,o)=>v(()=>t(e)?m(o(e),()=>yO(r(e),t,r,o)):L),bO=u(3,(e,t,r)=>v(()=>{let o=e[Symbol.iterator](),n=[],s=y(t),i,a=0;for(;!(i=o.next()).done;){let c=a++;s=m(s,p=>_(r(p,i.value,c),([l,f])=>(n.push(f),l)))}return _(s,c=>[c,n])})),vi=u(2,(e,t)=>ee(e,{onFailure:r=>Zr(()=>t(r)),onSuccess:y})),Gg=e=>m(t=>_(r=>$(r,m(([o,n])=>X(cs(o),n))(Pe(t))))(Vg(Qr(t)(is(e)))))(ft()),DO=e=>pe(e,{onFailure:t=>y(t),onSuccess:y}),lc=e=>_(e,t=>!t),SO=e=>pe(e,{onFailure:t=>W(x(t)),onSuccess:t=>{switch(t._tag){case"None":return L;case"Some":return W(g())}}}),Vg=e=>_(ac(!0),t=>oe(hi(e,b_(t,!1)))),EO=e=>pe(e,{onFailure:()=>y(g()),onSuccess:t=>y(x(t))}),CO=u(2,(e,t)=>Vn(e,()=>Cr(t))),_O=u(2,(e,t)=>Vn(e,()=>D(t))),OO=e=>ee(e,{onFailure:t=>{let r=Array.from(Ta(t));return r.length===0?U(t):W(r)},onSuccess:y}),cs=e=>Wl((t,r)=>Tl(t,r)(e)),wO=e=>e.length>=1?tr((t,r)=>{e(r).then(o=>t(se(o))).catch(o=>t(Yp(o)))}):tr(t=>{e().then(r=>t(se(r))).catch(r=>t(Yp(r)))}),RO=u(3,(e,t,r)=>Jg(e,t,y(r))),Jg=u(3,(e,t,r)=>fi(o=>m(r,n=>Lt(e,ke(t,n)(o))))),FO=Ol(y),AO=u(3,(e,t,r)=>re(e).reduce((o,n,s)=>m(o,i=>r(i,n,s)),y(t))),vO=u(3,(e,t,r)=>re(e).reduceRight((o,n,s)=>m(o,i=>r(n,i,s)),y(t))),MO=u(3,(e,t,r)=>m(D(()=>e[Symbol.iterator]()),o=>TO(o,0,t,r.while,r.body))),TO=(e,t,r,o,n)=>{let s=e.next();return!s.done&&o(r)?m(n(r,s.value,t),i=>TO(e,t+1,i,o,n)):y(r)},kO=u(2,(e,t)=>v(()=>IO(e,t))),IO=(e,t)=>m(e,r=>t<=0?y(r):$(Ht(),IO(e,t-1))),PO=e=>ee(e,{onFailure:W,onSuccess:y}),NO=e=>v(()=>YC(e)),Mi=Rg,LO=e=>pe(e,{onFailure:t=>W(x(t)),onSuccess:t=>{switch(t._tag){case"None":return W(g());case"Some":return y(t.value)}}}),Ti=y(g()),Yg=e=>y(x(e)),Ul=u(3,(e,t,r)=>m(t,o=>m(e,n=>_(t,s=>[r(o,s),n])))),qO=u(3,(e,t,r)=>Zg(e,[kl(t,r)])),Zg=u(2,(e,t)=>Qg(e,Ct(t))),Qg=u(2,(e,t)=>Ve(Mo,r=>st(t)(r))(e)),HO=u(2,(e,t)=>v(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!1),i=0;for(;(n=r.next())&&!n.done;){let a=n.value,c=i++;s=m(s,p=>p?y(!0):(o.push(a),t(a,c)))}return _(s,()=>o)})),jO=u(2,(e,t)=>v(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!0),i=0;for(;(n=r.next())&&!n.done;){let a=n.value,c=i++;s=m(s,p=>_(l=>(l&&o.push(a),l))(p?t(a,c):y(!1)))}return _(s,()=>o)})),BO=u(2,(e,{onFailure:t,onSuccess:r})=>ee(e,{onFailure:o=>{let n=Co(o);switch(n._tag){case"Left":return $(t(n.left),U(o));case"Right":return U(o)}},onSuccess:o=>X(r(o),o)})),UO=u(2,(e,t)=>Vr(e,r=>je(Ch(r),{onNone:()=>U(r),onSome:o=>$(t(o),U(r))}))),Xg=u(2,(e,t)=>ee(e,{onFailure:r=>{let o=Co(r);switch(o._tag){case"Left":return $(t(o.left),U(r));case"Right":return U(r)}},onSuccess:y})),WO=u(3,(e,t,r)=>Xg(e,o=>de(o)&&"_tag"in o&&o._tag===t?r(o):L)),zO=u(2,(e,t)=>ee(e,{onFailure:r=>$(t(r),U(r)),onSuccess:y})),KO=e=>ex(e,Fg),ex=u(2,(e,t)=>Ul(e,t,(r,o)=>Fu(o-r))),$O=C_,GO=$O(y),tx=e=>{let t,r;return typeof e=="function"?t=e:(t=e.try,r=e.catch),t.length>=1?v(()=>{let o=new AbortController;return m(cc(()=>t(o.signal)),n=>tr(s=>(n.then(i=>s(se(i))).catch(i=>s(Or(r?r(i):i))),D(()=>o.abort()))))}):m(cc(e),o=>tr(n=>{o.then(s=>n(se(s))).catch(s=>n(Or(r?r(s):s)))}))},VO=u(2,(e,t)=>m(e,r=>cc({try:()=>t.try(r),catch:t.catch}))),JO=u(2,(e,t)=>m(e,r=>tx({try:t.try.length>=1?o=>t.try(r,o):()=>t.try(r),catch:t.catch}))),YO=u(2,(e,t)=>v(()=>t()?Ti:jl(e))),ZO=u(2,(e,t)=>m(t,r=>r?Ti:jl(e))),QO=e=>vi(e,_h),Wl=e=>he(t=>(t.setFiberRefs(e(t.id(),t.unsafeGetFiberRefs())),L)),XO=u(3,(e,t,r)=>Yn(e,o=>ke(o,t,r(Ls(o,t))))),zl=u(2,(e,t)=>v(()=>t()?_(e,x):y(g()))),ew=u(3,(e,t,r)=>m(it(t),o=>r(o)?_(e,n=>[o,x(n)]):y([o,g()]))),tw=u(3,(e,t,r)=>m(Hl(t),o=>r(o)?_(e,n=>[o,x(n)]):y([o,g()]))),rw=u(2,(e,t)=>t(e)),ow=(e,t)=>(...r)=>m(e,o=>t(o)(...r)),nw=(e,t)=>(...r)=>_(e,o=>t(o)(...r)),rx=e=>new Proxy({},{get(t,r,o){return(...n)=>m(e,s=>s[r](...n))}}),ox=e=>new Proxy({},{get(t,r,o){return m(e,n=>n[r])}}),sw=e=>({functions:rx(e),constants:ox(e)}),iw=function(){let e=arguments;return m(sx,t=>t._tag==="Some"?D(()=>{if(typeof e[0]=="string")t.value.attribute(e[0],e[1]);else for(let r in e[0])t.value.attribute(r,e[0][r])}):L)},aw=u(e=>De(e[0]),function(){let e=arguments;return Ve(e[0],$p,typeof e[1]=="string"?jr(e[1],e[2]):t=>Object.entries(e[1]).reduce((r,[o,n])=>jr(r,o,n),t))}),nx=_(it(To),Zu),sx=_(it(To),xE(e=>e._tag==="Span")),SP=BigInt(0),Kl=Oe(Ja,e=>e?Fg:y(SP)),cw=u(e=>De(e[0]),(e,t,r)=>Ve(e,Gp,zu({_tag:"SpanLink",span:t,attributes:r??{}}))),ki=(e,t)=>$O(r=>m(t?.parent?Yg(t.parent):t?.root?Ti:nx,o=>m(it($p),n=>m(it(Gp),s=>m(Kl,i=>D(()=>{let a=t?.links?[...ct(s),...t.links]:ct(s),c=r.span(e,o,t?.context??Tt(),a,i);return FS(n,(p,l)=>c.attribute(l,p)),Object.entries(t?.attributes??{}).forEach(([p,l])=>c.attribute(p,l)),c})))))),uw=it($p),pw=it(Gp),ix=(e,...t)=>{let r=t.length===1?void 0:t[0],o=t[t.length-1];return er(ki(e,r),o,(n,s)=>m(Kl,i=>D(()=>n.end(i,s))))},ax=u(2,(e,t)=>Ve(e,To,Vo(t))),lw=u(e=>typeof e[0]!="string",(e,t,r)=>ix(t,r??{},o=>ax(e,o))),fw=e=>v(()=>{let t=e();return t==null?W(_o()):y(t)}),mw=e=>Ot(_(e,x),t=>Rh(t)?Ti:W(t));var dw,hw,gw,$l="@effect/io/Fiber/Status",cn=Symbol.for($l),cx="Done",xw="Running",yw="Suspended",ux=class{constructor(){this[dw]=cn,this._tag=cx}[(dw=cn,R)](){return T(E(this._tag))(E($l))}[F](t){return Gl(t)&&t._tag===cx}},px=class{constructor(t){this.runtimeFlags=t,this[hw]=cn,this._tag=xw}[(hw=cn,R)](){return T(E(this.runtimeFlags))(T(E(this._tag))(E($l)))}[F](t){return Gl(t)&&t._tag===xw&&this.runtimeFlags===t.runtimeFlags}},lx=class{constructor(t,r){this.runtimeFlags=t,this.blockingOn=r,this[gw]=cn,this._tag=yw}[(gw=cn,R)](){return T(E(this.blockingOn))(T(E(this.runtimeFlags))(T(E(this._tag))(E($l))))}[F](t){return Gl(t)&&t._tag===yw&&this.runtimeFlags===t.runtimeFlags&&O(this.blockingOn,t.blockingOn)}},bw=new ux,Dw=e=>new px(e),Sw=(e,t)=>new lx(e,t),Gl=e=>typeof e=="object"&&e!=null&&cn in e,Ew=e=>e._tag===cx;var Cw=bw,fx=Dw,_w=Sw;var Ow=Ew;var Pi=Ml;var mx=Tl;var Vl=V(Symbol.for("@effect/io/FiberRef/currentRequestMap"),()=>Se(new Map));var dx=(e,t,r,o)=>{switch(e?.concurrency){case void 0:return t();case"unbounded":return r();case"inherit":return Oe(Kp,n=>n==="unbounded"?r():n>1?o(n):t());default:return e.concurrency>1?o(e.concurrency):t()}},fc=(e,t,r)=>{switch(e?.concurrency){case void 0:return t();case"unbounded":return r();case"inherit":return Oe(Kp,o=>o==="unbounded"||o>1?r():t());default:return e.concurrency>1?r():t()}};var Rw="Sequential",Fw="Parallel";var Ni={_tag:Rw},Aw={_tag:Fw};var vw=e=>e._tag===Rw,Mw=e=>e._tag===Fw;var Jl="InterruptSignal",Yl="Stateful",Zl="Resume",Ql="YieldNow",hx=e=>({_tag:Jl,cause:e}),Li=e=>({_tag:Yl,onFiber:e}),us=e=>({_tag:Zl,effect:e}),kw=()=>({_tag:Ql});var Pw,Nw,wP="@effect/io/Fiber/Scope",Xl=Symbol.for(wP),gx=class{constructor(){this[Pw]=Xl,this.fiberId=pt,this.roots=new Set}add(t,r){this.roots.add(r),r.unsafeAddObserver(()=>{this.roots.delete(r)})}};Pw=Xl;var xx=class{constructor(t,r){this.fiberId=t,this.parent=r,this[Nw]=Xl}add(t,r){this.parent.tell(Li(o=>{o.addChild(r),r.unsafeAddObserver(()=>{o.removeChild(r)})}))}};Nw=Xl;var Lw=e=>new xx(e.id(),e),ps=V(Symbol.for("@effect/io/FiberScope/Global"),()=>new gx);var RP="@effect/io/Fiber",mc=Symbol.for(RP),dc={_E:e=>e,_A:e=>e},FP={[mc]:dc,pipe(){return C(this,arguments)}},AP="@effect/io/Fiber",Hw=Symbol.for(AP);var yx=e=>e.await();var jw=e=>e.inheritAll();var Bw=u(2,(e,t)=>e.interruptAsFork(t)),ls=e=>gi(wt(e.await()),e.inheritAll());var Q$={...FP,id:()=>pt,await:()=>Qn,children:()=>y([]),inheritAll:()=>Qn,poll:()=>y(g()),interruptAsFork:()=>Qn};var un="@effect/io/Fiber/Current";var vP="@effect/io/Logger",Ww=Symbol.for(vP),zw={_Message:e=>e,_Output:e=>e},ef=e=>({[Ww]:zw,log:e,pipe(){return C(this,arguments)}});var tG={[Ww]:zw,log:Rs,pipe(){return C(this,arguments)}};var Kw=ef(({annotations:e,cause:t,date:r,fiberId:o,logLevel:n,message:s,spans:i})=>{let a=r.getTime(),p=[`timestamp=${r.toISOString()}`,`level=${n.label}`,`fiber=${rp(o)}`].join(" "),l=MP(s);if(l.length>0&&(p=p+" message=",p=bx(l,p)),t!=null&&t!=lt&&(p=p+" cause=",p=bx(Oo(t),p)),Aa(i)){p=p+" ";let f=!0;for(let d of i)f?f=!1:p=p+" ",p=p+h_(a)(d)}if(Bu(e)>0){p=p+" ";let f=!0;for(let[d,h]of e)f?f=!1:p=p+" ",p=p+IP(d),p=p+"=",p=bx(String(h),p)}return p}),MP=e=>{try{return typeof e=="object"?JSON.stringify(e):String(e)}catch{return String(e)}},TP=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,kP=/^[^\s"=]+$/,bx=(e,t)=>t+(e.match(kP)?e:TP(e));var IP=e=>e.replace(/[\s="]/g,"_");var $w,Gw="@effect/io/Metric/Boundaries",Dx=Symbol.for(Gw),Sx=class{constructor(t){this.values=t,this[$w]=Dx}[($w=Dx,R)](){return T(E(this.values))(E(Gw))}[F](t){return NP(t)&&O(this.values,t.values)}pipe(){return C(this,arguments)}},NP=e=>typeof e=="object"&&e!=null&&Dx in e,LP=e=>{let t=NS(br(Ae(Number.POSITIVE_INFINITY))(e));return new Sx(t)};var Vw=e=>LP(Pt(id(e.count-1,t=>e.start*Math.pow(e.factor,t))));var Jw,Yw,Zw,Qw,Xw,eR,tR,rR,oR,nR,HP="@effect/io/Metric/KeyType",hc=Symbol.for(HP),cR="effect/io/Metric/KeyType/Counter",Ex=Symbol.for(cR),uR="effect/io/Metric/KeyType/Frequency",Cx=Symbol.for(uR),pR="effect/io/Metric/KeyType/Gauge",_x=Symbol.for(pR),lR="effect/io/Metric/KeyType/Histogram",Ox=Symbol.for(lR),fR="effect/io/Metric/KeyType/Summary",wx=Symbol.for(fR),gc={_In:e=>e,_Out:e=>e},Rx=class{constructor(){this[Jw]=gc,this[Yw]=Ex}[(Jw=hc,Yw=Ex,R)](){return E(cR)}[F](t){return Ax(t)}pipe(){return C(this,arguments)}},sR=class{constructor(){this[Zw]=gc,this[Qw]=Cx}[(Zw=hc,Qw=Cx,R)](){return E(uR)}[F](t){return vx(t)}pipe(){return C(this,arguments)}},iR=class{constructor(){this[Xw]=gc,this[eR]=_x}[(Xw=hc,eR=_x,R)](){return E(pR)}[F](t){return Mx(t)}pipe(){return C(this,arguments)}},Fx=class{constructor(t){this.boundaries=t,this[tR]=gc,this[rR]=Ox}[(tR=hc,rR=Ox,R)](){return T(E(this.boundaries))(E(lR))}[F](t){return Tx(t)&&O(this.boundaries,t.boundaries)}pipe(){return C(this,arguments)}},aR=class{constructor(t,r,o,n){this.maxAge=t,this.maxSize=r,this.error=o,this.quantiles=n,this[oR]=gc,this[nR]=wx}[(oR=hc,nR=wx,R)](){return T(E(this.quantiles))(T(E(this.error))(T(E(this.maxSize))(T(E(this.maxAge))(E(fR)))))}[F](t){return kx(t)&&O(this.maxAge,t.maxAge)&&this.maxSize===t.maxSize&&this.error===t.error&&O(this.quantiles,t.quantiles)}pipe(){return C(this,arguments)}},mR=new Rx;var dR=e=>new Fx(e);var Ax=e=>typeof e=="object"&&e!=null&&Ex in e,vx=e=>typeof e=="object"&&e!=null&&Cx in e,Mx=e=>typeof e=="object"&&e!=null&&_x in e,Tx=e=>typeof e=="object"&&e!=null&&Ox in e,kx=e=>typeof e=="object"&&e!=null&&wx in e;var gR,jP="@effect/io/Metric/Key",xR=Symbol.for(jP),BP={_Type:e=>e},xc=class{constructor(t,r,o,n=nt()){this.name=t,this.keyType=r,this.description=o,this.tags=n,this[gR]=BP}[(gR=xR,R)](){return T(E(this.tags))(T(E(this.description))(T(E(this.keyType))(E(this.name))))}[F](t){return UP(t)&&this.name===t.name&&O(this.keyType,t.keyType)&&O(this.description,t.description)&&O(this.tags,t.tags)}pipe(){return C(this,arguments)}},UP=e=>typeof e=="object"&&e!=null&&xR in e,yR=(e,t)=>new xc(e,mR,Xe(t));var bR=(e,t,r)=>new xc(e,dR(t),Xe(r));var DR=u(2,(e,t)=>So(t)===0?e:new xc(e.name,e.keyType,e.description,st(t)(e.tags)));var SR,ER,CR,_R,OR,wR,RR,FR,AR,vR,zP="@effect/io/Metric/State",yc=Symbol.for(zP),MR="effect/io/Metric/State/Counter",Ix=Symbol.for(MR),TR="effect/io/Metric/State/Frequency",Px=Symbol.for(TR),kR="effect/io/Metric/State/Gauge",Nx=Symbol.for(kR),IR="effect/io/Metric/State/Histogram",Lx=Symbol.for(IR),PR="effect/io/Metric/State/Summary",qx=Symbol.for(PR),bc={_A:e=>e},Hx=class{constructor(t){this.count=t,this[SR]=bc,this[ER]=Ix}[(SR=yc,ER=Ix,R)](){return T(E(this.count))(E(MR))}[F](t){return KP(t)&&this.count===t.count}pipe(){return C(this,arguments)}},jx=class{constructor(t){this.occurrences=t,this[CR]=bc,this[_R]=Px}[(CR=yc,_R=Px,R)](){return T(E(this.occurrences))(E(TR))}[F](t){return $P(t)&&O(this.occurrences,t.occurrences)}pipe(){return C(this,arguments)}},Bx=class{constructor(t){this.value=t,this[OR]=bc,this[wR]=Nx}[(OR=yc,wR=Nx,R)](){return T(E(this.value))(E(kR))}[F](t){return GP(t)&&this.value===t.value}pipe(){return C(this,arguments)}},Ux=class{constructor(t,r,o,n,s){this.buckets=t,this.count=r,this.min=o,this.max=n,this.sum=s,this[RR]=bc,this[FR]=Lx}[(RR=yc,FR=Lx,R)](){return T(E(this.sum))(T(E(this.max))(T(E(this.min))(T(E(this.count))(T(E(this.buckets))(E(IR))))))}[F](t){return VP(t)&&O(this.buckets,t.buckets)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return C(this,arguments)}},Wx=class{constructor(t,r,o,n,s,i){this.error=t,this.quantiles=r,this.count=o,this.min=n,this.max=s,this.sum=i,this[AR]=bc,this[vR]=qx}[(AR=yc,vR=qx,R)](){return T(E(this.sum))(T(E(this.max))(T(E(this.min))(T(E(this.count))(T(E(this.quantiles))(T(E(this.error))(E(PR)))))))}[F](t){return JP(t)&&this.error===t.error&&O(this.quantiles,t.quantiles)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return C(this,arguments)}},NR=e=>new Hx(e),LR=e=>new jx(e),qR=e=>new Bx(e),HR=e=>new Ux(e.buckets,e.count,e.min,e.max,e.sum),jR=e=>new Wx(e.error,e.quantiles,e.count,e.min,e.max,e.sum);var KP=e=>typeof e=="object"&&e!=null&&Ix in e,$P=e=>typeof e=="object"&&e!=null&&Px in e,GP=e=>typeof e=="object"&&e!=null&&Nx in e,VP=e=>typeof e=="object"&&e!=null&&Lx in e,JP=e=>typeof e=="object"&&e!=null&&qx in e;var ZP="@effect/io/Metric/Hook",QP=Symbol.for(ZP),XP={_In:e=>e,_Out:e=>e},Dc=e=>({[QP]:XP,pipe(){return C(this,arguments)},...e});var UR=e=>{let t=0;return Dc({get:()=>NR(t),update:r=>{t=t+r}})},WR=e=>{let t=0,r=new Map,o=s=>{t=t+1;let i=r.get(s)??0;r.set(s,i+1)},n=()=>ju(r.entries());return Dc({get:()=>LR(n()),update:o})},zR=(e,t)=>{let r=t;return Dc({get:()=>qR(r),update:o=>{r=o}})},KR=e=>{let t=e.keyType.boundaries.values,r=t.length,o=new Uint32Array(r+1),n=new Float32Array(r),s=0,i=0,a=Number.MAX_VALUE,c=Number.MIN_VALUE;Bd((f,d)=>{n[d]=f})(Ku(vt)(t));let p=f=>{let d=0,h=r;for(;d!==h;){let S=Math.floor(d+(h-d)/2),w=n[S];f<=w?h=S:d=S,h===d+1&&(f<=n[d]?h=d:d=h)}o[d]=o[d]+1,s=s+1,i=i+f,f<a&&(a=f),f>c&&(c=f)},l=()=>{let f=Array(r),d=0;for(let h=0;h<r;h++){let S=n[h],w=o[h];d=d+w,f[h]=[S,d]}return Pt(f)};return Dc({get:()=>HR({buckets:l(),count:s,min:a,max:c,sum:i}),update:p})},$R=e=>{let{error:t,maxAge:r,maxSize:o,quantiles:n}=e.keyType,s=Ku(vt)(n),i=Array(o),a=0,c=0,p=0,l=Number.MAX_VALUE,f=Number.MIN_VALUE,d=S=>{let w=[],A=0;for(;A!==o-1;){let I=i[A];if(I!=null){let[B,K]=I,ae=qs(S-B);Sd(ae,bd)&&ae<=r&&w.push(K)}A=A+1}return eN(t,s,Ku(vt)(Pt(w)))},h=(S,w)=>{if(o>0){a=a+1;let A=a%o;i[A]=[w,S]}c=c+1,p=p+S,S<l&&(l=S),S>f&&(f=S)};return Dc({get:()=>jR({error:t,quantiles:d(Date.now()),count:c,min:l,max:f,sum:p}),update:([S,w])=>h(S,w)})},eN=(e,t,r)=>{let o=r.length;if(Gs(t))return ut();let n=Tn(t),s=$s(1)(t),i=bt(Ae(BR(e,o,g(),0,n,r)),(a,c)=>{let p=Tn(a);return zu(BR(e,o,p.value,p.consumed,c,p.rest))(a)})(s);return Bd(a=>[a.quantile,a.value])(i)},BR=(e,t,r,o,n,s)=>{let i=e,a=t,c=r,p=o,l=n,f=s,d=e,h=t,S=r,w=o,A=n,I=s;for(;;){if(Gs(f))return{quantile:l,value:g(),consumed:p,rest:ut()};if(l===1)return{quantile:l,value:x(IS(f)),consumed:p+f.length,rest:ut()};let B=PS(me=>me>Tn(f))(f),K=l*a,ae=i/2*K,Ee=p+B[0].length,qe=Math.abs(Ee-K);if(Ee<K-ae){d=i,h=a,S=Mn(f),w=Ee,A=l,I=B[1],i=d,a=h,c=S,p=w,l=A,f=I;continue}if(Ee>K+ae)return{quantile:l,value:c,consumed:p,rest:f};switch(c._tag){case"None":{d=i,h=a,S=Mn(f),w=Ee,A=l,I=B[1],i=d,a=h,c=S,p=w,l=A,f=I;continue}case"Some":{let me=Math.abs(K-c.value);if(qe<me){d=i,h=a,S=Mn(f),w=Ee,A=l,I=B[1],i=d,a=h,c=S,p=w,l=A,f=I;continue}return{quantile:l,value:x(c.value),consumed:p,rest:f}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/io/issues")};var rN="@effect/io/Metric/Pair",oN=Symbol.for(rN),nN={_Type:e=>e};var GR=(e,t)=>({[oN]:nN,metricKey:e,metricState:t,pipe(){return C(this,arguments)}});var VR,iN="@effect/io/Metric/Registry",JR=Symbol.for(iN),zx=class{constructor(){this[VR]=JR,this.map=An()}snapshot(){let t=[];for(let[r,o]of this.map)t.push(GR(r,o.get()));return Ct(t)}get(t){let r=Ke(Ce(t)(this.map));if(r==null){if(Ax(t.keyType))return this.getCounter(t);if(Mx(t.keyType))return this.getGauge(t);if(vx(t.keyType))return this.getFrequency(t);if(Tx(t.keyType))return this.getHistogram(t);if(kx(t.keyType))return this.getSummary(t);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/io/issues")}else return r}getCounter(t){let r=Ke(Ce(t)(this.map));if(r==null){let o=UR(t);xr(t)(this.map)||Et(t,o)(this.map),r=o}return r}getFrequency(t){let r=Ke(Ce(t)(this.map));if(r==null){let o=WR(t);xr(t)(this.map)||Et(t,o)(this.map),r=o}return r}getGauge(t){let r=Ke(Ce(t)(this.map));if(r==null){let o=zR(t,0);xr(t)(this.map)||Et(t,o)(this.map),r=o}return r}getHistogram(t){let r=Ke(Ce(t)(this.map));if(r==null){let o=KR(t);xr(t)(this.map)||Et(t,o)(this.map),r=o}return r}getSummary(t){let r=Ke(Ce(t)(this.map));if(r==null){let o=$R(t);xr(t)(this.map)||Et(t,o)(this.map),r=o}return r}};VR=JR;var YR=()=>new zx;var cN="@effect/io/Metric",uN=Symbol.for(cN),pN={_Type:e=>e,_In:e=>e,_Out:e=>e},lN=V(Symbol.for("@effect/io/Metric/globalMetricRegistry"),()=>YR()),fN=function(e,t,r){return Object.assign(n=>qt(n,s=>D(()=>t(s,nt()))),{[uN]:pN,keyType:e,unsafeUpdate:t,unsafeValue:r,pipe(){return C(this,arguments)}})};var Sc=(e,t)=>ZR(yR(e,t));var ZR=e=>{let t=r=>{let o=DR(r)(e);return lN.get(o)};return fN(e.keyType,(r,o)=>t(o).update(r),r=>t(r).get())};var QR=(e,t,r)=>ZR(bR(e,t,r));var XR=u(2,(e,t)=>Oe(Vl,r=>D(()=>{if(r.has(e)){let o=r.get(e);o.state.completed||(o.state.completed=!0,Ci(o.result,t))}})));var Ec=class{constructor(){this.count=0,this.observers=new Set}addObserver(t){this.observers.add(t)}removeObserver(t){this.observers.delete(t)}increment(){this.count++,this.observers.forEach(t=>t(this.count))}decrement(){this.count--,this.observers.forEach(t=>t(this.count))}};var eF,tF,rF,oF,dN,hN="@effect/io/Supervisor",_c=Symbol.for(hN),tf={_T:e=>e},Cc=class e{constructor(t,r){this.underlying=t,this.value0=r,this[eF]=tf}value(){return this.value0()}onStart(t,r,o,n){this.underlying.onStart(t,r,o,n)}onEnd(t,r){this.underlying.onEnd(t,r)}onEffect(t,r){this.underlying.onEffect(t,r)}onSuspend(t){this.underlying.onSuspend(t)}onResume(t){this.underlying.onResume(t)}map(t){return new e(this,()=>_(t)(this.value()))}zip(t){return new pn(this,t)}onRun(t,r){return this.underlying.onRun(t,r)}};eF=_c;var pn=class e{constructor(t,r){this.left=t,this.right=r,this[tF]=tf}value(){return jp(this.left.value(),this.right.value())}onStart(t,r,o,n){this.left.onStart(t,r,o,n),this.right.onStart(t,r,o,n)}onEnd(t,r){this.left.onEnd(t,r),this.right.onEnd(t,r)}onEffect(t,r){this.left.onEffect(t,r),this.right.onEffect(t,r)}onSuspend(t){this.left.onSuspend(t),this.right.onSuspend(t)}onResume(t){this.left.onResume(t),this.right.onResume(t)}map(t){return new Cc(this,()=>_(t)(this.value()))}zip(t){return new e(this,t)}onRun(t,r){return this.right.onRun(()=>this.left.onRun(t,r),r)}};tF=_c;var Kx=class{constructor(){this[rF]=tf,this.fibers=new Set}value(){return D(()=>Array.from(this.fibers))}onStart(t,r,o,n){this.fibers.add(n)}onEnd(t,r){this.fibers.delete(r)}onEffect(t,r){}onSuspend(t){}onResume(t){}map(t){return new Cc(this,()=>_(t)(this.value()))}zip(t){return new pn(this,t)}onRun(t,r){return t()}};rF=_c;var $x=class{constructor(t){this.effect=t,this[oF]=tf}value(){return this.effect}onStart(t,r,o,n){}onEnd(t,r){}onEffect(t,r){}onSuspend(t){}onResume(t){}map(t){return new Cc(this,()=>_(t)(this.value()))}zip(t){return new pn(this,t)}onRun(t,r){return t()}};oF=_c;dN=_c;var gN=()=>new Kx,nF=D(gN),xN=e=>new $x(e),fs=xN(L);var sF="Empty",iF="AddSupervisor",aF="RemoveSupervisor",cF="AndThen",qi={_tag:sF},of=(e,t)=>({_tag:cF,first:e,second:t}),yN=(e,t)=>bN(t,Ae(e)),bN=(e,t)=>{let r=e,o=t;for(;tt(o);){let n=rt(o);switch(n._tag){case sF:{o=ot(o);break}case iF:{r=r.zip(n.supervisor),o=ot(o);break}case aF:{r=Gx(r,n.supervisor),o=ot(o);break}case cF:{o=Ie(n.first)(Ie(n.second)(ot(o)));break}}}return r},Gx=(e,t)=>O(e,t)?fs:e instanceof pn?Gx(e.left,t).zip(Gx(e.right,t)):e,nf=e=>O(e,fs)?nt():e instanceof pn?st(nf(e.right))(nf(e.left)):Do(e),DN=(e,t)=>{if(O(e,t))return qi;let r=nf(e),o=nf(t),n=kn(qi,(i,a)=>of(i,{_tag:iF,supervisor:a}))(eh(r)(o)),s=kn(qi,(i,a)=>of(i,{_tag:aF,supervisor:a}))(eh(o)(r));return of(n,s)},uF=Yu({empty:qi,patch:yN,combine:of,diff:DN});var pF,lF,EN=Sc("effect_fiber_started"),fF=Sc("effect_fiber_active"),CN=Sc("effect_fiber_successes"),_N=Sc("effect_fiber_failures"),ON=QR("effect_fiber_lifetimes",Vw({start:1,factor:2,count:100})),Oc="Continue",wN="Done",mF="Yield",RN={_E:e=>e,_A:e=>e},wc=e=>{throw new Error(`BUG: FiberRuntime - ${JSON.stringify(e)} - please report an issue at https://github.com/Effect-TS/io/issues`)},sf={[ii]:(e,t,r)=>t.i1(r),OnStep:(e,t,r)=>t.i1(se(r)),[ai]:(e,t,r)=>t.i2(r),[Ua]:(e,t,r)=>(e.patchRuntimeFlags(e._runtimeFlags,t.patch),zr(e._runtimeFlags)&&e.isInterrupted()?Y(e.getInterruptedCause()):se(r)),[ci]:(e,t,r)=>(t.i2(r),t.i0()?(e.pushStack(t),t.i1()):L)},FN={[Jl]:(e,t,r,o)=>(e.processNewInterruptSignal(o.cause),zr(t)?Y(o.cause):r),[Zl]:(e,t,r,o)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[Yl]:(e,t,r,o)=>(o.onFiber(e,fx(t)),r),[Ql]:(e,t,r,o)=>m(Ht(),()=>r)},AN=e=>Rt(XE(e),t=>ji(r0(t),([r,o])=>{let n=new Map;for(let s of o)for(let i of s)n.set(i.request,i);return we(jN(r.runAll(o),o.flat()),Vl,n)},!1)),Rc=class{pipe(){return C(this,arguments)}constructor(t,r,o){if(this[pF]=dc,this[lF]=RN,this._queue=new Array,this._children=null,this._observers=new Array,this._running=!1,this._stack=[],this._asyncInterruptor=null,this._asyncBlockingOn=null,this._exitValue=null,this._steps=[!1],this.run=()=>{this.drainQueueOnCurrentThread()},this._runtimeFlags=o,this._fiberId=t,this._fiberRefs=r,this._supervisor=this.getFiberRef(Hi),Ha(o)){let n=this.getFiberRef(Mo);EN.unsafeUpdate(1,n),fF.unsafeUpdate(1,n)}}id(){return this._fiberId}resume(t){this.tell(us(t))}status(){return this.ask((t,r)=>r)}runtimeFlags(){return this.ask((t,r)=>Ow(r)?t._runtimeFlags:r.runtimeFlags)}scope(){return Lw(this)}children(){return this.ask(t=>Array.from(t.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(Xn)}fiberRefs(){return this.ask(t=>t.unsafeGetFiberRefs())}ask(t){return v(()=>{let r=Di(this._fiberId);return this.tell(Li((o,n)=>{Ci(r,D(()=>t(o,n)))})),Pe(r)})}tell(t){this._queue.push(t),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}await(){return tr(t=>{let r=o=>t(y(o));return this.tell(Li((o,n)=>{o._exitValue!==null?r(this._exitValue):o.unsafeAddObserver(r)})),D(()=>this.tell(Li((o,n)=>{o.unsafeRemoveObserver(r)})))},this.id())}inheritAll(){return he((t,r)=>{let o=t.id(),n=t.unsafeGetFiberRefs(),s=r.runtimeFlags,i=this.unsafeGetFiberRefs(),a=Fl(n,o,i);t.setFiberRefs(a);let c=t.getFiberRef(hF),p=Nh(La)(Nh(Er)(zn(s,c)));return di(p)})}poll(){return D(()=>Xe(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(t){return D(()=>this.tell(hx(Sr(t))))}unsafeAddObserver(t){this._exitValue!==null?t(this._exitValue):this._observers.push(t)}unsafeRemoveObserver(t){this._observers=this._observers.filter(r=>r!==t)}unsafeGetFiberRefs(){return this.setFiberRef(hF,this._runtimeFlags),this._fiberRefs}unsafeDeleteFiberRef(t){this._fiberRefs=nc(this._fiberRefs,t)}getFiberRef(t){return this._fiberRefs.locals.has(t)?this._fiberRefs.locals.get(t)[0][1]:t.initial}setFiberRef(t,r){this._fiberRefs=ns(this._fiberRefs,{fiberId:this._fiberId,fiberRef:t,value:r}),t===Hi&&(this._supervisor=r)}setFiberRefs(t){this._fiberRefs=t,this._supervisor=this.getFiberRef(Hi)}addChild(t){this.getChildren().add(t)}removeChild(t){this.getChildren().delete(t)}drainQueueOnCurrentThread(){let t=!0;for(;t;){let r=Oc,o=globalThis[un];globalThis[un]=this;try{for(;r===Oc;)r=this._queue.length===0?wN:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[un]=o}this._queue.length>0&&!this._running?(this._running=!0,r===mF?(this.drainQueueLaterOnExecutor(),t=!1):t=!0):t=!1}}drainQueueLaterOnExecutor(){this.getFiberRef(vo).scheduleTask(this.run,this.getFiberRef(Ka))}drainQueueWhileRunning(t,r){let o=r;for(;this._queue.length>0;){let n=this._queue.splice(0,1)[0];o=FN[n._tag](this,t,o,n)}return o}isInterrupted(){return!Eh(this.getFiberRef(Xn))}addInterruptedCause(t){let r=this.getFiberRef(Xn);this.setFiberRef(Xn,ve(r,t))}processNewInterruptSignal(t){this.addInterruptedCause(t),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let t=!1;for(let r of this._children)r.tell(hx(Sr(this.id()))),t=!0;return t}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){let t=this._children.values();this._children=null;let r=!1;return Zn({while:()=>!r,body:()=>{let n=t.next();return n.done?D(()=>{r=!0}):oe(n.value.await())},step:()=>{}})}return null}reportExitValue(t){if(Ha(this._runtimeFlags)){let r=this.getFiberRef(Mo);switch(fF.unsafeUpdate(-1,r),t._tag){case ye:{CN.unsafeUpdate(1,r);break}case xe:{_N.unsafeUpdate(1,r);break}}}if(t._tag==="Failure"){let r=this.getFiberRef(Va);!Qo(t.cause)&&r._tag==="Some"&&this.log("Fiber terminated with a non handled error",t.cause,r)}}setExitValue(t){if(this._exitValue=t,Ha(this._runtimeFlags)){let r=this.getFiberRef(Mo),o=this.id().startTimeMillis,n=new Date().getTime();ON.unsafeUpdate((n-o)/1e3,r)}this.reportExitValue(t);for(let r=this._observers.length-1;r>=0;r--)this._observers[r](t)}getLoggers(){return this.getFiberRef(yF)}log(t,r,o){let n=N(o)?o.value:this.getFiberRef(og),s=this.getFiberRef(xF);if(u_(s,n))return;let i=this.getFiberRef(zp),a=this.getFiberRef($a),c=this.getLoggers(),p=this.unsafeGetFiberRefs();if(So(c)>0){let l=Lr(this.getFiberRef(mt),eo),f=new Date(l.unsafeCurrentTimeMillis());for(let d of c)d.log({fiberId:this.id(),logLevel:n,message:t,cause:r,context:p,spans:i,annotations:a,date:f})}}evaluateMessageWhileSuspended(t){switch(t._tag){case Ql:return mF;case Jl:return this.processNewInterruptSignal(t.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(Y(t.cause)),this._asyncInterruptor=null),Oc;case Zl:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(t.effect),Oc;case Yl:return t.onFiber(this,this._exitValue!==null?Cw:_w(this._runtimeFlags,this._asyncBlockingOn)),Oc;default:return wc(t)}}evaluateEffect(t){this._supervisor.onResume(this);try{let r=zr(this._runtimeFlags)&&this.isInterrupted()?Y(this.getInterruptedCause()):t;for(;r!==null;)try{let o=r,n=this.runLoop(o);this._runtimeFlags=Mh(La)(this._runtimeFlags);let s=this.interruptAllChildren();s!==null?r=m(s,()=>n):(this._queue.length===0?this.setExitValue(n):this.tell(us(n)),r=null)}catch(o){if(De(o))o._tag===ui?vh(this._runtimeFlags)?(this.tell(kw()),this.tell(us(Xr)),r=null):r=Xr:o._tag===ni&&(r=null);else throw o}}finally{this._supervisor.onSuspend(this)}}start(t){if(this._running)this.tell(us(t));else{this._running=!0;let r=globalThis[un];globalThis[un]=this;try{this.evaluateEffect(t)}finally{this._running=!1,globalThis[un]=r,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(t){this.tell(us(t))}patchRuntimeFlags(t,r){let o=oi(t,r);return globalThis[un]=this,this._runtimeFlags=o,o}initiateAsync(t,r){let o=!1,n=s=>{o||(o=!0,this.tell(us(s)))};zr(t)&&(this._asyncInterruptor=n);try{r(n)}catch(s){n(U($e(s)))}}pushStack(t){this._stack.push(t),t._tag==="OnStep"&&this._steps.push(!0),t._tag==="RevertFlags"&&this._steps.push(!1)}popStack(){let t=this._stack.pop();if(t)return(t._tag==="OnStep"||t._tag==="RevertFlags")&&this._steps.pop(),t}getNextSuccessCont(){let t=this.popStack();for(;t;){if(t._tag!==si)return t;t=this.popStack()}}getNextFailCont(){let t=this.popStack();for(;t;){if(t._tag!==ii&&t._tag!==ci)return t;t=this.popStack()}}[(pF=mc,lF=Hw,c0)](t){return _(it(Ao),r=>{try{return Ls(r,t)}catch(o){throw console.log(o),o}})}Left(t){return Or(t.i0)}None(t){return Or(_o())}Right(t){return se(t.i0)}Some(t){return se(t.i0)}[Cp](t){let r=t.i0(),o=this.getNextSuccessCont();if(o!==void 0)return o._tag in sf||wc(o),sf[o._tag](this,o,r);throw se(r)}[ye](t){let r=t,o=this.getNextSuccessCont();if(o!==void 0)return o._tag in sf||wc(o),sf[o._tag](this,o,r.i0);throw r}[xe](t){let r=this.getFiberRef(To),o=_t(r)||r.head._tag==="ExternalSpan"?t.i0:Zo(t.i0,qE(r.head)),n=this.getNextFailCont();if(n!==void 0)switch(n._tag){case si:case ai:return zr(this._runtimeFlags)&&this.isInterrupted()?Y(Xs(o)):n.i1(o);case"OnStep":return zr(this._runtimeFlags)&&this.isInterrupted()?Y(Xs(o)):n.i1(Y(o));case Ua:return this.patchRuntimeFlags(this._runtimeFlags,n.patch),zr(this._runtimeFlags)&&this.isInterrupted()?Y(ve(o,this.getInterruptedCause())):Y(o);default:wc(n)}else throw Y(o)}[_p](t){return t.i0(this,fx(this._runtimeFlags))}Blocked(t){if(this._steps[this._steps.length-1]){let r=this.popStack();if(r)switch(r._tag){case"OnStep":return r.i1(t);case"OnSuccess":return be(t.i0,m(t.i1,r.i1));case"OnSuccessAndFailure":return be(t.i0,ee(t.i1,{onFailure:r.i1,onSuccess:r.i2}));case"OnFailure":return be(t.i0,Vr(t.i1,r.i1));case"While":return be(t.i0,m(t.i1,o=>(r.i2(o),r.i0()?Zn({while:r.i0,body:r.i1,step:r.i2}):L)));case"RevertFlags":{this.pushStack(r);break}}}return _e(r=>m(jt(Tp(t.i0)),()=>r(t.i1)))}RunBlocked(t){return AN(t.i0)}[wo](t){let r=t.i0,o=this._runtimeFlags,n=oi(o,r);if(zr(n)&&this.isInterrupted())return Y(this.getInterruptedCause());if(this.patchRuntimeFlags(this._runtimeFlags,r),t.i1){let s=zn(n,o);return this.pushStack(new Ap(s,t)),t.i1(o)}else return Xr}[ii](t){return this.pushStack(t),t.i0}OnStep(t){return this.pushStack(t),t.i0}[si](t){return this.pushStack(t),t.i0}[ai](t){return this.pushStack(t),t.i0}[ni](t){throw this._asyncBlockingOn=t.i1,this.initiateAsync(this._runtimeFlags,t.i0),t}[ui](t){throw t}[ci](t){let r=t.i0,o=t.i1;return r()?(this.pushStack(t),o()):Xr}[a0](t){return t.commit()}runLoop(t){let r=t,o=0;for(;;){if(this._runtimeFlags&Ah&&this._supervisor.onEffect(this,r),this._queue.length>0&&(r=this.drainQueueWhileRunning(this._runtimeFlags,r)),o+=1,o>=this.getFiberRef(rg)){o=0;let n=r;r=m(Ht(),()=>n)}try{r._tag in this||(typeof r=="function"&&console.log(r()),wc(r)),r=this._supervisor.onRun(()=>this[r._tag](r),this)}catch(n){if(De(n)){if(n._tag===ui||n._tag===ni)throw n;if(n._tag===ye||n._tag===xe)return n}else h0(n)?r=Y(n.cause):wh(n)?r=Y(ve($e(n),Sr(pt))):r=Y($e(n))}}}},xF=Se(p_("Info")),vN=ef(e=>{let t=Kw.log(e);globalThis.console.log(t)});var MN=ef(({annotations:e,cause:t,context:r,fiberId:o,logLevel:n,message:s})=>{let i=mr(sc(r,To),Zu),a=te(sc(r,mt),p=>Lr(p,eo));if(i._tag==="None"||i.value._tag==="ExternalSpan"||a._tag==="None")return;let c=Object.fromEntries(e);c["effect.fiberId"]=RE(o),c["effect.logLevel"]=n.label,t!==null&&t!==lt&&(c["effect.cause"]=Oo(t)),i.value.event(String(s),a.value.unsafeCurrentTimeNanos(),c)}),yF=tg(Do(vN,MN)),Ac=u(e=>De(e[0]),(e,t)=>$r(qt(e,r=>vc(o=>t(r,o))))),bF=u(e=>De(e[0]),(e,t)=>no(e,vc(r=>t(r)))),vc=e=>he(t=>{let r=t.unsafeGetFiberRefs();return m(cf,o=>yi(o,n=>he(s=>{let i=s.unsafeGetFiberRefs(),a=Pi(i,r),c=Pi(r,i);return s.setFiberRefs(mx(a,s.id(),r)),no(e(n),D(()=>{s.setFiberRefs(mx(c,s.id(),s.unsafeGetFiberRefs()))}))})))}),DF=e=>we(Wa,x(ps))(e),dF=Symbol("@effect/io/Effect/existsPar/found"),SF=u(e=>Vt(e[0]),(e,t,r)=>fc(r,()=>v(()=>EF(e[Symbol.iterator](),0,t)),()=>pe(ar(e,(o,n)=>kp(t(o,n),{onTrue:W(dF),onFalse:L}),r),{onFailure:o=>o===dF?y(!0):W(o),onSuccess:()=>y(!1)}))),EF=(e,t,r)=>{let o=e.next();return o.done?y(!1):m(r(o.value,t),n=>n?y(n):EF(e,t+1,r))},CF=u(e=>Vt(e[0]),(e,t,r)=>{let o=r?.negate?(n,s)=>_(t(n,s),Xb):t;return fc(r,()=>v(()=>re(e).reduceRight((n,s,i)=>Fo(n,v(()=>o(s,i)),(a,c)=>c?[s,...a]:a),D(()=>new Array))),()=>_(ar(e,(n,s)=>_(o(n,s),i=>i?x(n):g()),r),TD))}),TN=e=>{if(Array.isArray(e)||Vt(e))return[e,g()];let t=Object.keys(e),r=t.length;return[t.map(o=>e[o]),x(o=>{let n={};for(let s=0;s<r;s++)n[t[s]]=o[s];return n})]},kN=(e,t,r)=>{let o=[];for(let n of e)o.push(Jr(n));return m(ar(o,P,{concurrency:r?.concurrency,batching:r?.batching}),n=>{let s=g(),i=n.length,a=new Array(i),c=new Array(i),p=!1;for(let l=0;l<i;l++){let f=n[l];f._tag==="Left"?(a[l]=x(f.left),p=!0):(c[l]=f.right,a[l]=s)}return p?t._tag==="Some"?W(t.value(a)):W(a):r?.discard?L:t._tag==="Some"?y(t.value(c)):y(c)})},IN=(e,t,r)=>{let o=[];for(let n of e)o.push(Jr(n));return r?.discard?ar(o,P,{concurrency:r?.concurrency,batching:r?.batching,discard:!0}):_(ar(o,P,{concurrency:r?.concurrency,batching:r?.batching}),n=>t._tag==="Some"?t.value(n):n)},Bi=(e,t)=>{let[r,o]=TN(e);return t?.mode==="validate"?kN(r,o,t):t?.mode==="either"?IN(r,o,t):o._tag==="Some"?_(ar(r,P,t),o.value):ar(r,P,t)},_F=e=>t=>Bi(t,e),OF=(e,t)=>_(Bi(re(e).map(ne),t),ba(r=>Jp(r)?x(r.i0):g())),Zx=u(2,(e,t)=>Array.from({length:t},()=>e)),wF=u(e=>De(e[0]),(e,t,r)=>Bi(Zx(t)(e),r)),ar=u(e=>Vt(e[0]),(e,t,r)=>he(o=>{let n=r?.batching===!0||r?.batching==="inherit"&&o.getFiberRef(Ga);return r?.discard?dx(r,()=>n?Vx(e,t):Rt(e,t),()=>ji(e,t,n),s=>Qx(e,s,t,n)):dx(r,()=>n?Jx(e,1,t,!0):Ge(e,t),()=>Fc(e,t,n),s=>Jx(e,s,t,n))})),Fc=(e,t,r)=>v(()=>{let o=re(e),n=new Array(o.length);return $(ji(o,(i,a)=>m(t(i,a),c=>D(()=>n[a]=c)),r),y(n))}),Vx=(e,t)=>v(()=>{let r=re(e),o=r.length;if(o===0)return L;if(o===1)return oe(t(r[0],0));let n=r.map(t),s=new Array,i=a=>a===n.length?v(()=>{if(s.length>0){let c=s.map(p=>p.i0).reduce(Kn);return be(c,Vx(s.map(p=>p.i1),P))}return L}):mi(n[a],c=>c._tag==="Blocked"?(s.push(c),i(a+1)):c._tag==="Failure"?v(()=>{if(s.length>0){let p=s.map(l=>l.i0).reduce(Kn);return be(p,m(Vx(s.map(l=>l.i1),P),()=>c))}return L}):i(a+1));return i(0)}),ji=(e,t,r)=>v(()=>{let o=re(e),n=o.length;return n===0?L:n===1?oe(t(o[0],0)):_e(s=>{let i=Di(pt),a=0,c=[],p=[],l=Hp(f=>Ge(o,(d,h)=>_(S=>(S.unsafeAddObserver(()=>{p.push(S)}),S))(ms(f(m(S=>{switch(S._tag){case"Failure":{if(c.length>0){let w=c.map(I=>I.i0).reduce(Kn),A=ji(c,I=>I.i1,r);return be(w,ee(A,{onFailure:I=>$(Qa(i,void 0),U(Be(I,S.cause))),onSuccess:()=>$(Qa(i,void 0),U(S.cause))}))}return $(Qa(i,void 0),U(S.cause))}default:{if(S._tag==="Blocked"&&c.push(S),a+1===n)if(c.length>0){let w=c.map(I=>I.i0).reduce(Kn),A=ji(c,I=>I.i1,r);return Ei(i,be(w,A))}else Ci(i,se(Xr));else a=a+1;return L}}})(v(()=>s((r?Kr:ne)(t(d,h))))))))));return m(l,f=>ee(s(Pe(i)),{onFailure:d=>m(Fc(f,nn,r),h=>{let S=bi(h,{parallel:!0});return S._tag==="Some"&&cg(S.value)?U(Be(Xs(d),S.value.i0)):U(Xs(d))}),onSuccess:d=>m(d,()=>Rt(p,h=>h.inheritAll()))}))})}),Jx=(e,t,r,o)=>v(()=>{let n=re(e),s=new Array(n.length);return $(Qx(n,t,(a,c)=>_(r(a,c),p=>s[c]=p),o),y(s))}),Qx=(e,t,r,o)=>v(()=>{let n=0,s=e[Symbol.iterator](),i=[],a=m(D(()=>s.next()),p=>p.done?L:m((o?Kr:ne)(oe(r(p.value,n++))),l=>{switch(l._tag){case"Blocked":return i.push(l),a;case"Failure":return l;case"Success":return a}})),c=[];for(let p=0;p<t;p++)c.push(a);return m(ne(ji(c,P,o)),p=>{if(i.length===0)return p;let l=i.map(d=>d.i0).reduce(Kn),f=Qx(i,t,d=>d.i1,o);return p._tag==="Failure"?be(l,ee(f,{onFailure:d=>Y(Be(p.cause,d)),onSuccess:()=>p})):be(l,f)})}),jt=e=>he((t,r)=>y(FF(e,t,r.runtimeFlags))),ms=e=>PN(e,ps),RF=u(2,(e,t)=>jt(Lp(e,r=>{let o=Co(r);switch(o._tag){case"Left":return t(o.left);case"Right":return U(o.right)}}))),FF=(e,t,r,o=null)=>{let n=Yx(e,t,r,o);return n.resume(e),n},Yx=(e,t,r,o=null)=>{let n=op(),s=t.unsafeGetFiberRefs(),i=Al(s,n),a=new Rc(n,i,r),c=Ai(i,Ao),p=a._supervisor;return p.onStart(c,e,x(t),a),a.unsafeAddObserver(f=>p.onEnd(f,a)),(o!==null?o:J(()=>t.scope())(t.getFiberRef(Wa))).add(r,a),a},PN=(e,t)=>he((r,o)=>y(FF(e,r,o.runtimeFlags,t))),Xx=u(e=>Vt(e[0]),(e,t,r,o)=>fc(o,()=>re(e).reduce((n,s,i)=>Fo(n,s,(a,c)=>r(a,c,i)),y(t)),()=>m(ac(t),n=>m(ar(e,(s,i)=>m(s,a=>S_(n,c=>r(c,a,i))),o),()=>Hl(n))))),ey=u(e=>Vt(e[0]),(e,t,r)=>_(o=>D0(o,P))(ar(e,(o,n)=>Jr(t(o,n)),r))),AF=u(e=>Vt(e[0]),(e,t,r)=>m(ey(e,t,{concurrency:r?.concurrency,batching:r?.batching}),([o,n])=>o.length===0?r?.discard?L:y(n):W(o))),vF=e=>{let t=Br(e);if(!tt(t))return en(()=>ti("Received an empty collection of effects"));let r=rt(t),o=ot(t),n=s=>X(s[0])(jw(s[1]));return m(s=>m(i=>_e(a=>m(c=>m(p=>on(()=>bt(L,(l,f)=>gi(nn(f))(l))(p))(a(m(n)(rs(s)))))(qt(p=>bt(L,(l,f)=>$(oe(jt(m(NN(p,f,s,i))(yx(f)))))(l))(p))(_(p=>Ie(c)(p))(_(Pt)(Ge(p=>jt(Xt(p)))(o))))))(jt(Xt(r)))))(ac(o.length)))(ft())},NN=(e,t,r,o)=>n=>es(n,{onFailure:s=>wt(D_(o,i=>[i===0?oe(ts(r,s)):L,i-1])),onSuccess:s=>m(i=>i?bt(L,(a,c)=>c===t?a:gi(nn(c))(a))(Br(e)):L)(Ei(r,[s,t]))}),MF=u(e=>Vt(e[0]),(e,t,r,o)=>fc(o,()=>re(e).reduce((n,s,i)=>Fo(n,s,(a,c)=>r(a,c,i)),t),()=>v(()=>_(n=>{switch(n._tag){case"None":throw new Error("BUG: Effect.reduceEffect - please report an issue at https://github.com/Effect-TS/io/issues");case"Some":return n.value}})(Xx([t,...e],g(),(n,s,i)=>{switch(n._tag){case"None":return x(s);case"Some":return x(r(n.value,s,i))}},o))))),TF=e=>m(cf,t=>m(ds(Aw),r=>$(hs(e,r))(t.addFinalizer(o=>r.close(o))))),ln=e=>m(iy,e),ty=e=>m(ds(),t=>qN(t)(e)),kF=e=>ln(t=>m(r=>hs(r)(e))(ig(t,Ni))),IF=(e,t)=>ry([kl(e,t)]),ry=e=>oy(Ct(e)),oy=e=>Fr(Mo,t=>st(e)(t)),PF=u(2,(e,t)=>er(ds(),r=>m(hs(e,r),t),(r,o)=>sn(r,o))),NF=e=>pe(e,{onFailure:t=>{switch(t._tag){case"None":return y(g());case"Some":return W(t.value)}},onSuccess:t=>y(x(t))}),LF=u(e=>De(e[1]),(e,t,r)=>ny(e,t,(o,n)=>[o,n],r)),ny=u(e=>De(e[1]),(e,t,r,o)=>wt(Po(ne(e),ne(t),(n,s)=>Za(n,s,{onSuccess:r,onFailure:(i,a)=>o?.concurrent?Be(i,a):ve(i,a)}),o)));var qF=u(e=>Vt(e[0]),(e,t,r)=>rn(ar(e,(o,n)=>rn(t(o,n)),r))),HF=e=>Fr(mt,ke(eo,e)),af=e=>Fr(mt,ke(Ri,e)),jF=e=>ln(t=>m(ig(t,Ni),r=>_(o=>[rr(n=>sn(r,Zp(n))),o])(hs(r)(e)))),BF=u(e=>De(e[1]),(e,t,r)=>Po(e,t,(o,n)=>[o,n],r)),UF=u(e=>De(e[1]),(e,t,r)=>Po(e,t,(o,n)=>o,r)),WF=u(e=>De(e[1]),(e,t,r)=>Po(e,t,(o,n)=>n,r)),Po=u(e=>De(e[1]),(e,t,r,o)=>_(Bi([e,t],{concurrency:o?.concurrent?2:1,batching:o?.batching}),([n,s])=>r(n,s))),sy=e=>e===bp?L:$r(m(t=>{let r=oi(t,e),o=zn(r,t);return oe($(vc(()=>di(o)))(di(e)))})(qp)),LN=(e,t)=>r=>v(()=>{switch(r.state._tag){case"Exited":return L;case"Running":{let o=r.state.finalizers,n=r.state.update,s=Array.from(o.keys()).sort((i,a)=>a-i).map(i=>o.get(i));return r.state={_tag:"Exited",nextKey:r.state.nextKey,exit:t,update:n},vw(e)?m(i=>J(()=>Xr)(te(Ya)(bi(i))))(Ge(i=>ne(n(i)(t)))(s)):Mw(e)?m(i=>J(()=>Xr)(te(Ya)(bi(i,{parallel:!0}))))(Fc(s,i=>ne(n(i)(t)),!1)):m(i=>J(()=>Xr)(te(Ya)(bi(i,{parallel:!0}))))(Jx(s,e.parallelism,i=>ne(n(i)(t)),!1))}}}),iy=Dt(Vp),cf=iy,ds=(e=Ni)=>_(k0,t=>({[Vp]:Vp,[sg]:sg,pipe(){return C(this,arguments)},fork:r=>$r(m(o=>X(o)(qt(n=>yi(o,n))(ag(t,n=>sn(o,n)))))(ds(r))),close:r=>oe(LN(e,r)(t)),addFinalizer:r=>oe(ag(r)(t))})),hs=u(2,(e,t)=>Yn(e,Cn(Ru(iy,t)))),qN=u(2,(e,t)=>_r(r=>t.close(r))(hs(t)(e))),HN=e=>xi(e,{differ:uF,fork:qi}),cr=u(2,(e,t)=>oe(Ac(m(it(e),r=>X(Gn(e,t),r)),r=>Gn(e,r)))),Fr=u(2,(e,t)=>Oe(e,r=>cr(e,t(r))));var hF=F0(Th),Hi=HN(fs),zF=e=>oe(yx(uf(e))),uf=e=>({[mc]:dc,id:()=>re(e).reduce((t,r)=>hh(t,r.id()),pt),await:()=>ne(Fc(e,t=>wt(t.await()),!1)),children:()=>_(Fc(e,t=>t.children(),!1),_u),inheritAll:()=>Rt(e,t=>t.inheritAll()),poll:()=>_(Ge(e,t=>t.poll()),Ou(x(se(new Array)),(t,r)=>{switch(r._tag){case"None":return g();case"Some":switch(t._tag){case"None":return g();case"Some":return x(Za(r.value,t.value,{onSuccess:(o,n)=>[o,...n],onFailure:Be}))}}})),interruptAsFork:t=>Rt(e,r=>r.interruptAsFork(t)),pipe(){return C(this,arguments)}});var ay=u(3,(e,t,r)=>cy(e,t,{onSelfWin:(o,n)=>m(o.await(),s=>{switch(s._tag){case ye:return m(o.inheritAll(),()=>r.onSelfDone(s,n));case xe:return r.onSelfDone(s,n)}}),onOtherWin:(o,n)=>m(o.await(),s=>{switch(s._tag){case ye:return m(o.inheritAll(),()=>r.onOtherDone(s,n));case xe:return r.onOtherDone(s,n)}})})),KF=e=>_e(t=>rr(r=>m(ms(t(e)),o=>on(()=>Bw(r)(o))(t(ls(o)))))),pf=u(2,(e,t)=>rr(r=>ay(e,t,{onSelfDone:(o,n)=>es(o,{onFailure:s=>vi(i=>Be(s,i))(ls(n)),onSuccess:s=>X(s)(or(r)(n))}),onOtherDone:(o,n)=>es(o,{onFailure:s=>vi(i=>Be(i,s))(ls(n)),onSuccess:s=>X(s)(or(r)(n))})}))),cy=u(3,(e,t,r)=>he((o,n)=>{let s=n.runtimeFlags,i=St(!0),a=Yx(e,o,s,r.selfScope),c=Yx(t,o,s,r.otherScope);return tr(p=>{a.unsafeAddObserver(()=>gF(a,c,r.onSelfWin,i,p)),c.unsafeAddObserver(()=>gF(c,a,r.onOtherWin,i,p)),a.startFork(e),c.startFork(t)},hh(a.id(),c.id()))})),gF=(e,t,r,o,n)=>{Uu(!0,!1)(o)&&n(r(e,t))},no=u(2,(e,t)=>_e(r=>ee(r(e),{onFailure:o=>ee(t,{onFailure:n=>U(ve(o,n)),onSuccess:()=>U(o)}),onSuccess:o=>X(t,o)}))),jN=(e,t)=>rr(r=>m(m(ms(Xt(e)),o=>tr(n=>{let s=t.map(c=>c.listeners.count),i=()=>{s.every(c=>c===0)&&(a.forEach(c=>c()),n(nn(o)))};o.unsafeAddObserver(c=>{a.forEach(p=>p()),n(c)});let a=t.map((c,p)=>{let l=f=>{s[p]=f,i()};return c.listeners.addObserver(l),()=>c.listeners.removeObserver(l)});return i(),D(()=>{a.forEach(c=>c())})})),()=>v(()=>{let o=t.flatMap(n=>n.state.completed?[]:[n]);return Rt(o,n=>XR(n.request,Zp(r)))})));var $F=(e,t)=>Ac(ki(e,t),(r,o)=>m(Kl,n=>D(()=>r.end(n,o)))),lf=(e,t)=>m(ki(e,t),r=>Fr(To,Vo(r))),ff=e=>Fr(mt,ke(Fi,e)),mf=e=>Fr(To,Vo(e));var GF,YF,VF=(e,t,r,o)=>xo({_tag:"Complete",key:e,exit:t,entryStats:r,timeToLiveMillis:o}),JF=(e,t)=>xo({_tag:"Pending",key:e,deferred:t}),BN=(e,t)=>xo({_tag:"Refreshing",deferred:e,complete:t}),uy=Symbol.for("@effect/cache/Cache/MapKey"),py=class{constructor(t){this.current=t,this[GF]=uy,this.previous=void 0,this.next=void 0}[(GF=uy,R)](){return T(E(this.next))(T(E(this.previous))(E(this.current)))}[F](t){return this===t?!0:UN(t)&&O(this.current,t.current)&&O(this.previous,t.previous)&&O(this.next,t.next)}},Ui=e=>new py(e),UN=e=>typeof e=="object"&&e!=null&&uy in e,ly=class{constructor(){this.head=void 0,this.tail=void 0}add(t){if(t!==this.tail)if(this.tail===void 0)this.head=t,this.tail=t;else{let r=t.previous,o=t.next;o!==void 0&&(t.next=void 0,r!==void 0?(r.next=o,o.previous=r):(this.head=o,this.head.previous=void 0)),this.tail.next=t,t.previous=this.tail,this.tail=t}}remove(){let t=this.head;if(t!==void 0){let r=t.next;r!==void 0?(t.next=void 0,this.head=r,this.head.previous=void 0):(this.head=void 0,this.tail=void 0)}return t}},WN=()=>new ly,zN=(e,t,r,o,n,s)=>({map:e,keys:t,accesses:r,updating:o,hits:n,misses:s}),KN=()=>zN(An(),WN(),BS(),St(!1),0,0),$N="@effect/cache/Cache",GN=Symbol.for($N),VN={_Key:e=>e,_Error:e=>e,_Value:e=>e},JN=e=>e,df=e=>({loadedMillis:e}),fy=class{constructor(t,r,o,n,s){this.capacity=t,this.context=r,this.fiberId=o,this.lookup=n,this.timeToLive=s,this[YF]=VN,this.cacheState=KN()}get(t){return _(this.getEither(t),Du)}cacheStats(){return D(()=>JN({hits:this.cacheState.hits,misses:this.cacheState.misses,size:Wu(this.cacheState.map)}))}getOption(t){return v(()=>je(Ce(this.cacheState.map,t),{onNone:()=>{let r=Ui(t);return this.trackAccess(r),this.trackMiss(),y(g())},onSome:r=>this.resolveMapValue(r)}))}getOptionComplete(t){return v(()=>je(Ce(this.cacheState.map,t),{onNone:()=>{let r=Ui(t);return this.trackAccess(r),this.trackMiss(),y(g())},onSome:r=>this.resolveMapValue(r,!0)}))}contains(t){return D(()=>xr(this.cacheState.map,t))}entryStats(t){return D(()=>{let r=Ce(this.cacheState.map,t);if(N(r))switch(r.value._tag){case"Complete":{let o=r.value.entryStats.loadedMillis;return x(df(o))}case"Pending":return g();case"Refreshing":{let o=r.value.complete.entryStats.loadedMillis;return x(df(o))}}return g()})}getEither(t){return v(()=>{let r=t,o,n,s=Ke(Ce(this.cacheState.map,r));return s===void 0&&(n=lg(this.fiberId),o=Ui(r),xr(this.cacheState.map,r)?s=Ke(Ce(this.cacheState.map,r)):Et(this.cacheState.map,r,JF(o,n))),s===void 0?(this.trackAccess(o),this.trackMiss(),_(this.lookupValueOf(t,n),H)):m(this.resolveMapValue(s),je({onNone:()=>this.getEither(t),onSome:i=>y(z(i))}))})}invalidate(t){return D(()=>{vn(this.cacheState.map,t)})}invalidateWhen(t,r){return D(()=>{let o=Ce(this.cacheState.map,t);N(o)&&o.value._tag==="Complete"&&o.value.exit._tag==="Success"&&r(o.value.exit.value)&&vn(this.cacheState.map,t)})}invalidateAll(){return D(()=>{this.cacheState.map=An()})}refresh(t){return oo(r=>v(()=>{let o=t,n=lg(this.fiberId),s=Ke(Ce(this.cacheState.map,o));if(s===void 0&&(xr(this.cacheState.map,o)?s=Ke(Ce(this.cacheState.map,o)):Et(this.cacheState.map,o,JF(Ui(o),n))),s===void 0)return oe(this.lookupValueOf(t,n));switch(s._tag){case"Complete":{if(this.hasExpired(r,s.timeToLiveMillis)){let i=Ke(Ce(this.cacheState.map,o));return O(i,s)&&vn(this.cacheState.map,o),oe(this.get(t))}return oe(zl(()=>{let i=Ke(Ce(this.cacheState.map,o));if(O(i,s)){let a=BN(n,s);return Et(this.cacheState.map,o,a),!0}return!1})(this.lookupValueOf(t,n)))}case"Pending":return rs(s.deferred);case"Refreshing":return rs(s.deferred)}}))}set(t,r){return oo(o=>D(()=>{let n=o.unsafeCurrentTimeMillis(),s=t,i=W0(r),a=VF(Ui(s),i,df(n),n+qr(et(this.timeToLive(i))));Et(this.cacheState.map,s,a)}))}size(){return D(()=>Wu(this.cacheState.map))}values(){return D(()=>{let t=[];for(let r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&t.push(r[1].exit.value);return t})}entries(){return D(()=>{let t=[];for(let r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&t.push([r[0],r[1].exit.value]);return t})}keys(){return D(()=>{let t=[];for(let r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&t.push(r[0]);return t})}resolveMapValue(t,r=!1){return oo(o=>{switch(t._tag){case"Complete":return this.trackAccess(t.key),this.trackHit(),this.hasExpired(o,t.timeToLiveMillis)?(vn(this.cacheState.map,t.key.current),y(g())):_(t.exit,x);case"Pending":return this.trackAccess(t.key),this.trackHit(),r?y(g()):_(rs(t.deferred),x);case"Refreshing":return this.trackAccess(t.complete.key),this.trackHit(),this.hasExpired(o,t.complete.timeToLiveMillis)?r?y(g()):_(rs(t.deferred),x):_(t.complete.exit,x)}})}trackHit(){this.cacheState.hits=this.cacheState.hits+1}trackMiss(){this.cacheState.misses=this.cacheState.misses+1}trackAccess(t){if(US(this.cacheState.accesses,t),Uu(this.cacheState.updating,!1,!0)){let r=!0;for(;r;){let n=WS(this.cacheState.accesses,$d);n===$d?r=!1:this.cacheState.keys.add(n)}let o=Wu(this.cacheState.map);for(r=o>this.capacity;r;){let n=this.cacheState.keys.remove();n!==void 0?xr(this.cacheState.map,n.current)&&(vn(this.cacheState.map,n.current),o=o-1,r=o>this.capacity):r=!1}Zt(this.cacheState.updating,!1)}}hasExpired(t,r){return t.unsafeCurrentTimeMillis()>r}lookupValueOf(t,r){return oo(o=>v(()=>{let n=t;return on(()=>$(j0(r),D(()=>{vn(this.cacheState.map,n)})))(m(s=>{let i=o.unsafeCurrentTimeMillis(),a=df(i),c=VF(Ui(n),s,a,i+qr(et(this.timeToLive(s))));return Et(this.cacheState.map,n,c),$(H0(r,s),s)})(ne(Lt(this.context)(this.lookup(t)))))}))}};YF=GN;var ZF=(e,t,r)=>new fy(e,Tt(),ep,t,o=>et(r(o)));var YN="@effect/io/Schedule/Interval",my=Symbol.for(YN),QF={[my]:my,startMillis:0,endMillis:0};var XF=QF;var eA=e=>J(()=>XF)(Mn(e.intervals)).startMillis;var tA=eA;var tL="Done";var rA=e=>e._tag===tL;var oA=rA;var nL,nA,sL="@effect/io/Schedule",iL=Symbol.for(sL),aL="@effect/io/Schedule/Driver",cL=Symbol.for(aL);var uL={_Env:e=>e,_In:e=>e,_Out:e=>e};nL=iL;var dy=class{constructor(t,r){this.schedule=t,this.ref=r,this[nA]=uL}state(){return _(Rr(this.ref),t=>t[1])}last(){return m(Rr(this.ref),([t,r])=>{switch(t._tag){case"None":return Cr(()=>_o());case"Some":return y(t.value)}})}reset(){return ro(this.ref,[g(),this.schedule.initial])}next(t){return m(r=>m(o=>m(([n,s,i])=>oA(i)?$(W(g()))(ro(this.ref,[x(s),n])):X(s)($(Mi(qs(tA(i.intervals)-o)))(ro(this.ref,[x(s),n]))))(v(()=>this.schedule.step(o,t,r))))(Rl))(_(Rr(this.ref),r=>r[1]))}};nA=cL;var hy=e=>_(t=>new dy(e,t))(ss([g(),e.initial]));var sA=u(2,(e,t)=>gy(e,t,(r,o)=>W(r))),gy=u(3,(e,t,r)=>m(hy(t),o=>pe(e,{onFailure:n=>r(n,g()),onSuccess:n=>iA(e,o,r,n)}))),iA=(e,t,r,o)=>pe(t.next(o),{onFailure:()=>Jn(t.last()),onSuccess:n=>pe(e,{onFailure:s=>r(s,x(n)),onSuccess:s=>iA(e,t,r,s)})}),aA=u(2,(e,t)=>Tc(e,r=>D(()=>t(r)))),Tc=u(2,(e,t)=>m(e,r=>m(t(r),o=>o?y(r):m(Ht(),()=>Tc(e,t))))),cA=u(2,(e,t)=>xy(e,r=>D(()=>t(r)))),xy=u(2,(e,t)=>Tc(e,r=>lc(t(r)))),uA=u(2,(e,t)=>yy(e,t,(r,o)=>W(r))),pA=u(2,(e,t)=>lA(e,t)),lA=(e,t)=>Ot(e,r=>t<0?W(r):m(Ht(),()=>lA(e,t-1))),yy=u(3,(e,t,r)=>m(hy(t),o=>fA(e,o,r))),fA=(e,t,r)=>Ot(e,o=>pe(t.next(o),{onFailure:()=>m(n=>r(o,n))(Jn(t.last())),onSuccess:()=>fA(e,t,r)})),mA=u(2,(e,t)=>kc(e,r=>D(()=>t(r)))),kc=u(2,(e,t)=>Ot(e,r=>m(t(r),o=>o?W(r):m(Ht(),()=>kc(e,t))))),dA=u(2,(e,t)=>by(e,r=>D(()=>t(r)))),by=u(2,(e,t)=>kc(e,r=>lc(t(r)))),hf=u(2,(e,t)=>Dy(e,void 0,t)),Dy=u(3,(e,t,r)=>m(hy(r),o=>hA(e,t,o))),hA=(e,t,r)=>pe(r.next(t),{onFailure:()=>Jn(r.last()),onSuccess:()=>m(e,o=>hA(e,o,r))});var xA,bA,DA,Ey=class{constructor(t){this.permits=t,this.waiters=new Array,this.taken=0,this.take=r=>Gr(o=>{if(this.free<r){let n=()=>{if(this.free>=r){let s=this.waiters.findIndex(i=>i===n);s!==-1&&this.waiters.splice(s,1),this.taken+=r,o(y(r))}};return this.waiters.push(n),z(D(()=>{let s=this.waiters.findIndex(i=>i===n);s!==-1&&this.waiters.splice(s,1)}))}return this.taken+=r,H(y(r))}),this.release=r=>he(o=>(this.taken-=r,o.getFiberRef(vo).scheduleTask(()=>{this.waiters.forEach(n=>n())},o.getFiberRef(Ka)),L)),this.withPermits=r=>o=>_e(n=>m(n(this.take(r)),s=>no(n(o),this.release(s))))}get free(){return this.permits-this.taken}},xf=e=>new Ey(e),SA=e=>D(()=>xf(e)),EA=e=>yf(e,zF),CA=u(2,(e,t)=>_(_y(e,t),r=>r[0])),_y=u(2,(e,t)=>{let r=et(t);return m(Yr(),o=>_(bf(g()),n=>[Lt(pL(e,r,n),o),lL(n)]))}),yA=(e,t,r)=>{let o=qr(et(t));return _(n=>x([r+o,n]))(qt(n=>Qr(e,n))(ft()))},pL=(e,t,r)=>_e(o=>m(n=>j(n)?li("BUG: Effect.cachedInvalidate - please report an issue at https://github.com/Effect-TS/io/issues"):o(Pe(n.value[1])))(m(n=>gL(r,s=>{switch(s._tag){case"None":return x(yA(e,t,n));case"Some":{let[i]=s.value;return i-n<=0?x(yA(e,t,n)):g()}}}))(oo(n=>n.currentTimeMillis)))),lL=e=>ro(e,g()),_A=u(2,(e,t)=>yf(e,r=>t(uf(r)))),yf=u(2,(e,t)=>m(nF,r=>no(m(r.value(),t))(Ry(e,r)))),OA=u(e=>Vt(e[0]),(e,t)=>t?.discard?Rt(e,jt):_(Ge(e,jt),uf)),Oy=u(2,(e,t)=>_e(r=>m(t.fork(Ni),o=>qt(n=>o.addFinalizer(()=>rr(s=>O(s,n.id())?L:oe(nn(n)))))(ms(_r(n=>o.close(n))(r(e))))))),wy=e=>ln(t=>Oy(e,t)),wA=e=>ls(e),RA=e=>v(()=>m(e,ls)),Sy=Symbol.for("@effect/io/Effect/memoizeFunction.key"),gf=class{constructor(t,r){this.a=t,this.eq=r,this[xA]=Sy}[(xA=Sy,F)](t){return typeof t=="object"&&t!==null&&Sy in t?this.eq?this.eq(this.a,t.a):O(this.a,t.a):!1}[R](){return this.eq?0:E(this.a)}},FA=(e,t)=>_(r=>o=>m(([n,s])=>X(s)(cs(n)))(m(Pe)(r.modifyEffect(n=>{let s=Ce(new gf(o,t))(n);return j(s)?_(i=>[i,Et(new gf(o,t),i)(n)])(qt(i=>jt(Qr(i)(is(e(o)))))(ft())):y([s.value,n])}))))(m(bf)(D(()=>An()))),AA=u(2,(e,t)=>(r=>wt(r))(pf(ne(t))(ne(e)))),vA=u(2,(e,t)=>wy(hf(t)(e))),Ry=u(2,(e,t)=>Ve(Hi,o=>o.zip(t))(e)),MA=u(2,(e,t)=>Ic(e,{onTimeout:g,onSuccess:x,duration:t})),TA=u(2,(e,{duration:t,onTimeout:r})=>wt(Ic(e,{onTimeout:()=>Cr(r),onSuccess:y,duration:t}))),kA=u(2,(e,{duration:t,onTimeout:r})=>wt(Ic(e,{onTimeout:()=>Zr(r),onSuccess:y,duration:t}))),Ic=u(2,(e,{duration:t,onSuccess:r,onTimeout:o})=>rr(n=>cy(e,Xt(Mi(t)),{onSelfWin:(s,i)=>m(s.await(),a=>a._tag==="Success"?m(s.inheritAll(),()=>X(or(i,n),r(a.value))):m(or(i,n),()=>Y(a.cause))),onOtherWin:(s,i)=>m(s.await(),a=>a._tag==="Success"?m(s.inheritAll(),()=>X(or(i,n),o())):m(or(i,n),()=>Y(a.cause))),otherScope:ps}))),fL="@effect/io/Ref/Synchronized",mL=Symbol.for(fL),dL={_A:e=>e},Cy=class{constructor(t,r){this.ref=t,this.withLock=r,this[bA]=dL,this[DA]=Bg}modify(t){return this.modifyEffect(r=>y(t(r)))}modifyEffect(t){return this.withLock(m(([r,o])=>X(ro(this.ref,o),r))(m(Rr(this.ref),t)))}pipe(){return C(this,arguments)}};bA=mL,DA=Pl;var bf=e=>D(()=>hL(e)),hL=e=>{let t=Nl(e),r=xf(1);return new Cy(t,r.withPermits(1))},gL=u(2,(e,t)=>e.modifyEffect(r=>{let o=t(r);switch(o._tag){case"None":return y([r,r]);case"Some":return _(o.value,n=>[n,n])}}));var PA="Fresh",NA="FromEffect",LA="Scoped",qA="Suspend";var HA="ZipWithPar";var jA=or;var Sf=e=>(t,r)=>{let o=op(),n=t,s=Mg(e.fiberRefs,{fiberId:o,fiberRef:Ao,value:e.context});r?.scheduler&&(s=Mg(s,{fiberId:o,fiberRef:vo,value:r.scheduler})),r?.updateRefs&&(s=r.updateRefs(s,o));let i=new Rc(o,VC(s,o),e.runtimeFlags),a=i._supervisor;return a!==fs&&(a.onStart(e.context,n,g(),i),i.unsafeAddObserver(c=>a.onEnd(c,i))),ps.add(e.runtimeFlags,i),i.start(n),i},Fy=e=>(t,r)=>{let o=Sf(e)(t);return r&&o.unsafeAddObserver(n=>{r(n)}),(n,s)=>Fy(e)(jA(n??pt)(o),s?i=>s(U0(i)):void 0)},bL=e=>t=>{let r=KA(e)(t);if(r._tag==="Failure")throw WA(r.i0);return r.i0},DL=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let r=new Error;Error.stackTraceLimit=t;let o=`Fiber #${e.id().id} cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work`,n="AsyncFiberException";return Object.defineProperties(r,{_tag:{value:n},message:{value:o},name:{value:n},toString:{get(){return()=>o}},[UA]:{get(){return()=>o}}}),r};var BA=Symbol.for("@effect/io/Runtime/FiberFailure"),SL=Symbol.for("@effect/io/Runtime/FiberFailure/Cause"),UA=Symbol.for("nodejs.util.inspect.custom"),WA=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let r=new Error;Error.stackTraceLimit=t;let o=lp(e);return o.length>0&&(r.name=o[0].message.split(":")[0],r.message=o[0].message.substring(r.name.length+2),r.stack=`${r.name}: ${r.message}
${o[0].stack}`),r[BA]=BA,r[SL]=e,r.toString=()=>Oo(e),r[UA]=()=>r.toString(),r};var zA=e=>{let t=e;switch(t._tag){case"Failure":case"Success":return t;case"Left":return Or(t.left);case"Right":return se(t.right);case"Some":return se(t.value);case"None":return Or(_o())}},KA=e=>t=>{let r=zA(t);if(r)return r;let o=new Rp,n=Sf(e)(t,{scheduler:o});o.flush();let s=n.unsafePoll();if(s)return s;throw DL(n)},EL=e=>t=>$A(e)(t).then(r=>{switch(r._tag){case ye:return r.i0;case xe:throw WA(r.i0)}}),$A=e=>t=>new Promise(r=>{let o=zA(t);o&&r(o),Sf(e)(t).unsafeAddObserver(n=>{r(n)})}),Df=class{constructor(t,r,o){this.context=t,this.runtimeFlags=r,this.fiberRefs=o}pipe(){return C(this,arguments)}},CL=e=>new Df(e.context,e.flags,e.fiberRefs),Ay=()=>he((e,t)=>y(new Df(e.getFiberRef(Ao),t.runtimeFlags,e.unsafeGetFiberRefs()))),_L=xp(Er,gp,hp),Ar=CL({context:Tt(),flags:_L,fiberRefs:ZC(new Map)}),GA=Fy(Ar),VA=Sf(Ar),JA=EL(Ar),YA=$A(Ar),ZA=bL(Ar),QA=KA(Ar),XA=e=>m(ft(),t=>m(Ay(),r=>_e(o=>$(jt(o(Vr(e(n=>Fy(r)(Qr(n,t))),n=>ts(t,n)))),o(Pe(t))))));var e2=u(2,(e,t)=>e.modifyEffect(t));var RL="@effect/io/Layer",FL=Symbol.for(RL),AL={_RIn:e=>e,_E:e=>e,_ROut:e=>e},Ef={[FL]:AL,pipe(){return C(this,arguments)}};var vL=e=>e._tag===PA,vy=class{constructor(t){this.ref=t}getOrElseMemoize(t,r){return wt(e2(this.ref,o=>{let n=o.get(t);if(n!==void 0){let[s,i]=n,a=_r(Qp({onFailure:()=>L,onSuccess:()=>yi(r,i)}))(m(([c,p])=>X(p)(cs(c)))(s));return y([a,o])}return m(s=>m(i=>_(a=>{let c=_e(l=>m(f=>m(d=>{switch(d._tag){case xe:return $(U(d.i0))($(sn(f,d))(ts(i,d.i0)));case ye:return X(d.i0[1])($(Ei(i,d.i0))($(yi(r,h=>m(S=>S(h))(Rr(a))))($(ic(s,h=>h+1))(ro(a,h=>oe(hi(Ll(s,S=>[S===1,S-1]))(sn(f,h))))))))}})(ne(l(m(r2(t,f),d=>is(d(this)))))))(ds())),p=[_r(es({onFailure:()=>L,onSuccess:()=>ic(s,l=>l+1)}))(Pe(i)),l=>m(f=>f(l))(Rr(a))];return[c,vL(t)?o:o.set(t,p)]})(ss(()=>L)))(ft()))(ss(0))}))}},ML=()=>_(bf(new Map),e=>new vy(e));var t2=u(2,(e,t)=>m(ML(),r=>m(r2(e,t),o=>o(r)))),r2=(e,t)=>{let r=e;switch(r._tag){case"Locally":return D(()=>o=>r.f(o.getOrElseMemoize(r.self,t)));case"ExtendScope":return D(()=>o=>ln(n=>o.getOrElseMemoize(r.layer,n)));case"Fold":return D(()=>o=>ee({onFailure:n=>o.getOrElseMemoize(r.failureK(n),t),onSuccess:n=>o.getOrElseMemoize(r.successK(n),t)})(o.getOrElseMemoize(r.layer,t)));case"Fresh":return D(()=>o=>t2(t)(r.layer));case"FromEffect":return D(()=>o=>r.effect);case"ProvideTo":return D(()=>o=>m(n=>Lt(n)(o.getOrElseMemoize(r.second,t)))(o.getOrElseMemoize(r.first,t)));case"Scoped":return D(()=>o=>hs(r.effect,t));case"Suspend":return D(()=>o=>o.getOrElseMemoize(r.evaluate(),t));case"ZipWith":return D(()=>o=>Fo(o.getOrElseMemoize(r.second,t),r.zipK)(o.getOrElseMemoize(r.first,t)));case"ZipWithPar":return D(()=>o=>Po(o.getOrElseMemoize(r.second,t),r.zipK,{concurrent:!0})(o.getOrElseMemoize(r.first,t)))}};var TL=()=>kL(Yr());function kL(e){let t=Object.create(Ef);return t._tag=NA,t.effect=e,t}var IL=u(2,(e,t)=>LL(e,t,(r,o)=>Cn(o)(r)));var Bt=e=>PL(X(Tt())(e)),PL=e=>{let t=Object.create(Ef);return t._tag=LA,t.effect=e,t};var NL=e=>{let t=Object.create(Ef);return t._tag=qA,t.evaluate=e,t};var LL=u(3,(e,t,r)=>NL(()=>{let o=Object.create(Ef);return o._tag=HA,o.first=e,o.second=t,o.zipK=r,o})),My=u(2,(e,t)=>er(ds(),r=>m(t2(t,r),o=>Lt(e,o)),(r,o)=>sn(r,o))),o2=u(2,(e,t)=>My(e,IL(TL(),t)));var s2=e=>Bt(af(e)),i2=e=>Bt(mf(e)),a2=(e,t)=>Bt(lf(e,t)),c2=e=>Bt(ff(e));var Ty=zn;var Wi=Se(ZF(65536,()=>_(ft(),e=>({listeners:new Ec,handle:e})),()=>Dd(60))),Pc=V(Symbol.for("@effect/io/FiberRef/currentCacheEnabled"),()=>Se(!1)),ky=(e,t)=>m(De(t)?t:y(t),r=>rr(o=>{let n=new Proxy(e,{});return Oe(Pc,s=>{if(s)return Oe(Wi,a=>m(a.getEither(n),c=>{switch(c._tag){case"Left":return c.left.listeners.increment(),be(QE,m(ne(Pe(c.left.handle)),p=>p._tag==="Failure"&&Qo(p.cause)?(c.left.listeners.decrement(),m(a.invalidateWhen(n,l=>l.handle===c.left.handle),()=>ky(n,t))):no(Pe(c.left.handle),D(()=>c.left.listeners.decrement()))));case"Right":return c.right.listeners.increment(),be(Hh(r,jh({request:n,result:c.right.handle,listeners:c.right.listeners,ownerId:o,state:{completed:!1}})),_e(p=>m(ne(p(Pe(c.right.handle))),l=>(c.right.listeners.decrement(),l))))}}));let i=new Ec;return i.increment(),m(ft(),a=>be(Hh(r,jh({request:n,result:a,listeners:i,ownerId:o,state:{completed:!1}})),no(Pe(a),D(()=>i.decrement()))))})})),u2=(e,t)=>Oe(Pc,r=>r?Oe(Wi,o=>m(o.getEither(e),n=>{switch(n._tag){case"Left":return L;case"Right":return ug(n.right.handle,t)}})):L),p2=u(2,(e,t)=>we(e,Pc,t)),l2=u(2,(e,t)=>we(e,Wi,t));var BL=pi,UL=De,WL=CA,zL=_y,KL=Gg,$L=FA,GL=Vg,VL=Bi,JL=_F,YL=OF,ZL=U_,QL=W_,XL=Q_,e3=SF,t3=CF,r3=V_,o3=Y_,Nc=ar,n3=rO,s3=Xx,i3=ey,a3=AO,c3=MF,u3=vO,p3=MO,l3=Zx,f3=wF,m3=HO,d3=jO,h3=AF,g3=qF,x3=tr,y3=XA,b3=w_,D3=Gr,S3=W,E3=Cr,C3=U,_3=Zr,O3=$h,w3=li,R3=en,F3=tO,A3=Qn,v3=SO,M3=wO,T3=y,k3=Ti,I3=Yg,zi=v,P3=D,Ft=L,N3=Ht,L3=R_;var q3=Ot,H3=Vr,j3=F_,B3=x0,U3=A_,W3=v_,z3=M_,K3=T_,$3=k_,G3=Wg,V3=oO,J3=nO,Y3=OO,Z3=PO,Q3=uA,X3=pA,eq=yy,tq=mA,rq=kc,oq=dA,nq=by,sq=cc;var iq=VO,aq=JO,cq=tx,uq=QO,pq=N_,lq=y0,fq=KF,mq=Ip,dq=Pp,hq=Xt,gq=b0,xq=on,yq=$r,bq=_e,Dq=X,Sq=jl,Eq=O_,Cq=oe,_q=rn,Oq=Z_,Ny=_,wq=bO,Rq=Np,Fq=Ro,Aq=vi,vq=DO,Mq=lc,Tq=Ac,kq=bF,f2=er,Iq=vc,Pq=no,Nq=Lp,Lq=_r,qq=TF,Hq=kF,jq=cf,Bq=ln,Uq=ty,Wq=PF,zq=jF,Kq=EA,$q=DF,Gq=L_,Vq=Bl,Jq=is,Yq=_A,Zq=yf,Qq=tn,Xq=rr,eH=jt,tH=ms,rH=OA,oH=Oy,nH=wy,sH=RF,iH=wA,aH=RA,cH=Ry,uH=Hp,pH=E0,lH=e=>Bt(cr(vo,e)),fH=v0,mH=A0,dH=ng,hH=I_,gH=oo,xH=e=>Bt(Fr(mt,ke(eo,e))),yH=HF,bH=qC,DH=P_,SH=Mi,EH=KO,CH=ex,_H=MA,OH=TA,wH=kA,RH=Ic,FH=jC,AH=wg,vH=s2,MH=HC,TH=af,kH=Yr,m2=z_,IH=fi,PH=Yn,NH=Lt,d2=S0,LH=u(2,(e,t)=>{let r=Ty(Ar.runtimeFlags,t.runtimeFlags),o=Ty(t.runtimeFlags,Ar.runtimeFlags),n=Pi(Ar.fiberRefs,t.fiberRefs),s=Pi(t.fiberRefs,Ar.fiberRefs);return f2(m(Py(r),()=>Iy(n)),()=>d2(e,t.context),()=>m(Py(o),()=>Iy(s)))}),qH=My,HH=RO,jH=Jg,BH=o2,UH=nw,WH=ow,zH=rx,KH=ox,$H=sw,GH=e=>m2(t=>xd(t,e)),VH=XO,JH=q_,YH=H_,ZH=j_,QH=B_;var fn=Jr,XH=ne,ej=Qr,tj=EO,rj=LO,oj=NF,nj=kp;var sj=K_,ij=$_,aj=uc,cj=G_,uj=YO,pj=ZO,lj=zl,fj=hi,mj=ew,dj=tw,Ut=m,hj=wt,gj=vF,xj=pf,yj=AA,bj=ay,Dj=Ul,Sj=qt,Ej=BO,Cj=UO,_j=Xg,Oj=WO,wj=zO,Rj=eO,Fj=Kg,Aj=gO,vj=sA,Mj=kO,Tj=gy,kj=aA,Ij=Tc,Pj=cA,Nj=xy,Lj=hf,qj=vA,Hj=Dy,jj=Zn,Bj=zg,Uj=sO,Wj=we,zj=Ve,Kj=cr,$j=Fr,Iy=cs,Gj=NO,Vj=Wl,Jj=iO,Yj=aO,Zj=pc,Qj=za,Xj=ee,eB=pe,tB=cO,rB=uO,oB=$g,nB=pO,sB=lO,iB=fO,aB=mO,cB=dO,uB=__,pB=hO,lB=M0,fB=e=>Bt(cr(Va,e)),mB=Jn,dB=Gh,hB=Vn,gB=CO,xB=_O,yB=FO,bB=Ol,DB=Ay,SB=qp,Py=di,EB=_0,CB=sy,_B=qO,OB=Zg,wB=Qg,RB=IF,FB=ry,AB=oy,vB=T0,MB=rw,TB=Xo,kB=P,IB=xf,PB=SA,NB=VA,LB=GA,h2=JA,qB=YA,HB=ZA,jB=QA,BB=LF,UB=ny,WB=BF,zB=UF,KB=WF,$B=Po,GB=be,VB=Tp,JB=Kr,YB=mi,ZB=ky,QB=u2,XB=C0,e5=e=>Bt(cr(Ga,e)),t5=e=>Bt(cr(Pc,e)),r5=e=>Bt(De(e)?m(e,t=>cr(Wi,t)):cr(Wi,e)),o5=p2,n5=l2,s5=c2,i5=GO,a5=wl,c5=BC,u5=ff,p5=O0,l5=e=>Bt(cr(Ja,e)),f5=aw,m5=iw,d5=sx,h5=nx,g5=uw,x5=pw,y5=cw,b5=ki,D5=i2,S5=a2,E5=ix,C5=$F,_5=lw,O5=lf,w5=ax,R5=mf,F5=fw,A5=mw;var Je={};Os(Je,{ConfigTypeId:()=>v5,all:()=>M5,array:()=>T5,boolean:()=>k5,chunk:()=>I5,date:()=>P5,fail:()=>N5,hashMap:()=>r6,hashSet:()=>Z5,integer:()=>q5,isConfig:()=>j5,logLevel:()=>H5,map:()=>B5,mapAttempt:()=>U5,mapOrFail:()=>W5,nested:()=>z5,number:()=>L5,option:()=>G5,orElse:()=>K5,orElseIf:()=>$5,primitive:()=>V5,repeat:()=>J5,secret:()=>Y5,string:()=>Q5,succeed:()=>X5,suspend:()=>e6,sync:()=>t6,unwrap:()=>o6,validate:()=>n6,withDefault:()=>s6,withDescription:()=>i6,zip:()=>a6,zipWith:()=>c6});var v5=Dl,M5=gC,T5=nC,k5=oC,I5=Sl,P5=sC,N5=iC,L5=aC,q5=cC,H5=uC,j5=yg,B5=Io,U5=pC,W5=Oi,z5=sr,K5=fC,$5=El,G5=mC,V5=an,J5=bl,Y5=dC,Z5=hC,Q5=xg,X5=wi,e6=ec,t6=yC,r6=bC,o6=bg,n6=DC,s6=SC,i6=EC,a6=CC,c6=tc;var Cf={};Os(Cf,{Tag:()=>Dt,add:()=>ke,empty:()=>Tt,get:()=>Lr,getOption:()=>xd,isContext:()=>zk,isTag:()=>zD,make:()=>Ru,merge:()=>Cn,omit:()=>$k,pick:()=>Kk,unsafeGet:()=>Ls});var Ki={};Os(Ki,{Class:()=>GD,TaggedClass:()=>Qk,array:()=>Yk,case:()=>Zk,struct:()=>xo,tagged:()=>$D,taggedEnum:()=>Xk,tuple:()=>Jk,unsafeArray:()=>yd,unsafeStruct:()=>KD});var k={};Os(k,{Do:()=>JH,EffectTypeId:()=>BL,acquireRelease:()=>Tq,acquireReleaseInterruptible:()=>kq,acquireUseRelease:()=>f2,addFinalizer:()=>Iq,all:()=>VL,allSuccesses:()=>YL,allWith:()=>JL,allowInterrupt:()=>pq,annotateCurrentSpan:()=>m5,annotateLogs:()=>uB,annotateSpans:()=>f5,as:()=>Dq,asSome:()=>Sq,asSomeError:()=>Eq,asUnit:()=>Cq,async:()=>x3,asyncEffect:()=>y3,asyncEither:()=>D3,asyncOption:()=>b3,awaitAllChildren:()=>Kq,bind:()=>YH,bindTo:()=>ZH,blocked:()=>GB,cacheRequestResult:()=>QB,cached:()=>KL,cachedFunction:()=>$L,cachedInvalidateWithTTL:()=>zL,cachedWithTTL:()=>WL,catch:()=>L3,catchAll:()=>q3,catchAllCause:()=>H3,catchAllDefect:()=>j3,catchSome:()=>B3,catchSomeCause:()=>U3,catchSomeDefect:()=>W3,catchTag:()=>z3,catchTags:()=>K3,cause:()=>$3,checkInterruptible:()=>lq,clock:()=>hH,clockWith:()=>gH,config:()=>FH,configProviderWith:()=>AH,context:()=>kH,contextWith:()=>m2,contextWithEffect:()=>IH,currentParentSpan:()=>h5,currentSpan:()=>d5,daemonChildren:()=>$q,delay:()=>DH,descriptor:()=>Gq,descriptorWith:()=>Vq,die:()=>O3,dieMessage:()=>w3,dieSync:()=>R3,diffFiberRefs:()=>Jq,disconnect:()=>fq,dropUntil:()=>ZL,dropWhile:()=>QL,either:()=>fn,ensuring:()=>Pq,ensuringChild:()=>Yq,ensuringChildren:()=>Zq,eventually:()=>G3,every:()=>XL,exists:()=>e3,exit:()=>XH,fail:()=>S3,failCause:()=>C3,failCauseSync:()=>_3,failSync:()=>E3,fiberId:()=>Qq,fiberIdWith:()=>Xq,filter:()=>t3,filterOrDie:()=>sj,filterOrDieMessage:()=>ij,filterOrElse:()=>aj,filterOrFail:()=>cj,findFirst:()=>r3,firstSuccessOf:()=>o3,flatMap:()=>Ut,flatMapStep:()=>YB,flatten:()=>hj,flip:()=>_q,flipWith:()=>Oq,forEach:()=>Nc,forever:()=>Rj,fork:()=>eH,forkAll:()=>rH,forkDaemon:()=>tH,forkIn:()=>oH,forkScoped:()=>nH,forkWithErrorHandler:()=>sH,fromFiber:()=>iH,fromFiberEffect:()=>aH,fromNullable:()=>F5,gen:()=>F3,getFiberRefs:()=>Bj,head:()=>n3,if:()=>nj,ignore:()=>V3,ignoreLogged:()=>J3,inheritFiberRefs:()=>Uj,interrupt:()=>mq,interruptWith:()=>dq,interruptible:()=>hq,interruptibleMask:()=>gq,intoDeferred:()=>ej,isEffect:()=>UL,isFailure:()=>Jj,isSuccess:()=>Yj,iterate:()=>Fj,labelMetrics:()=>OB,labelMetricsScoped:()=>FB,labelMetricsScopedSet:()=>AB,labelMetricsSet:()=>wB,let:()=>QH,linkSpans:()=>y5,locally:()=>Wj,locallyScoped:()=>Kj,locallyScopedWith:()=>$j,locallyWith:()=>zj,log:()=>tB,logAnnotations:()=>pB,logDebug:()=>oB,logError:()=>iB,logFatal:()=>aB,logInfo:()=>nB,logTrace:()=>rB,logWarning:()=>sB,loop:()=>Aj,makeSemaphore:()=>PB,makeSpan:()=>b5,map:()=>Ny,mapAccum:()=>wq,mapBoth:()=>Rq,mapError:()=>Fq,mapErrorCause:()=>Aq,mapInputContext:()=>PH,match:()=>Zj,matchCause:()=>Qj,matchCauseEffect:()=>Xj,matchEffect:()=>eB,merge:()=>vq,mergeAll:()=>s3,metricLabels:()=>vB,negate:()=>Mq,never:()=>A3,none:()=>v3,onError:()=>Nq,onExit:()=>Lq,onInterrupt:()=>xq,once:()=>GL,option:()=>tj,optionFromOptional:()=>A5,orDie:()=>mB,orDieWith:()=>dB,orElse:()=>hB,orElseFail:()=>gB,orElseSucceed:()=>xB,parallelErrors:()=>Y3,parallelFinalizers:()=>qq,partition:()=>i3,patchFiberRefs:()=>Iy,promise:()=>M3,provideContext:()=>NH,provideLayer:()=>qH,provideService:()=>HH,provideServiceEffect:()=>jH,provideSomeContext:()=>d2,provideSomeLayer:()=>BH,provideSomeRuntime:()=>LH,race:()=>xj,raceAll:()=>gj,raceFirst:()=>yj,raceWith:()=>bj,random:()=>yB,randomWith:()=>bB,reduce:()=>a3,reduceEffect:()=>c3,reduceRight:()=>u3,reduceWhile:()=>p3,repeat:()=>vj,repeatN:()=>Mj,repeatOrElse:()=>Tj,repeatUntil:()=>kj,repeatUntilEffect:()=>Ij,repeatWhile:()=>Pj,repeatWhileEffect:()=>Nj,replicate:()=>l3,replicateEffect:()=>f3,request:()=>ZB,retry:()=>Q3,retryN:()=>X3,retryOrElse:()=>eq,retryUntil:()=>tq,retryUntilEffect:()=>rq,retryWhile:()=>oq,retryWhileEffect:()=>nq,runCallback:()=>LB,runFork:()=>NB,runPromise:()=>h2,runPromiseExit:()=>qB,runRequestBlock:()=>VB,runSync:()=>HB,runSyncExit:()=>jB,runtime:()=>DB,runtimeFlags:()=>SB,sandbox:()=>Z3,schedule:()=>Lj,scheduleForked:()=>qj,scheduleFrom:()=>Hj,scope:()=>jq,scopeWith:()=>Bq,scoped:()=>Uq,sequentialFinalizers:()=>Hq,serviceConstants:()=>KH,serviceFunction:()=>UH,serviceFunctionEffect:()=>WH,serviceFunctions:()=>zH,serviceMembers:()=>$H,serviceOption:()=>GH,setClock:()=>xH,setConfigProvider:()=>vH,setFiberRefs:()=>Gj,setParentSpan:()=>D5,setRequestBatching:()=>e5,setRequestCache:()=>r5,setRequestCaching:()=>t5,setScheduler:()=>lH,setSpan:()=>S5,setTracer:()=>s5,setTracerTiming:()=>l5,setUnhandledErrorLogLevel:()=>fB,sleep:()=>SH,some:()=>rj,spanAnnotations:()=>g5,spanLinks:()=>x5,step:()=>JB,succeed:()=>T3,succeedNone:()=>k3,succeedSome:()=>I3,summarized:()=>Dj,supervised:()=>cH,suspend:()=>zi,sync:()=>P3,tagMetrics:()=>_B,tagMetricsScoped:()=>RB,takeUntil:()=>m3,takeWhile:()=>d3,tap:()=>Sj,tapBoth:()=>Ej,tapDefect:()=>Cj,tapError:()=>_j,tapErrorCause:()=>wj,tapErrorTag:()=>Oj,timed:()=>EH,timedWith:()=>CH,timeout:()=>_H,timeoutFail:()=>OH,timeoutFailCause:()=>wH,timeoutTo:()=>RH,tracer:()=>i5,tracerWith:()=>a5,transplant:()=>uH,try:()=>sq,tryMap:()=>iq,tryMapPromise:()=>aq,tryPromise:()=>cq,unified:()=>kB,unifiedFn:()=>TB,uninterruptible:()=>yq,uninterruptibleMask:()=>bq,unit:()=>Ft,unless:()=>uj,unlessEffect:()=>pj,unsafeMakeSemaphore:()=>IB,unsandbox:()=>uq,unsome:()=>oj,updateFiberRefs:()=>Vj,updateRuntimeFlags:()=>Py,updateService:()=>VH,useSpan:()=>E5,useSpanScoped:()=>C5,using:()=>Wq,validate:()=>BB,validateAll:()=>h3,validateFirst:()=>g3,validateWith:()=>UB,when:()=>lj,whenEffect:()=>fj,whenFiberRef:()=>mj,whenRef:()=>dj,whileLoop:()=>jj,withClock:()=>bH,withClockScoped:()=>yH,withConcurrency:()=>pH,withConfigProvider:()=>MH,withConfigProviderScoped:()=>TH,withEarlyRelease:()=>zq,withLogSpan:()=>cB,withMaxFiberOps:()=>fH,withMetric:()=>MB,withParentSpan:()=>w5,withParentSpanScoped:()=>R5,withRequestBatching:()=>XB,withRequestCache:()=>n5,withRequestCaching:()=>o5,withRuntimeFlags:()=>EB,withRuntimeFlagsScoped:()=>CB,withScheduler:()=>mH,withSchedulingPriority:()=>dH,withSpan:()=>_5,withSpanScoped:()=>O5,withTracer:()=>c5,withTracerScoped:()=>u5,withTracerTiming:()=>p5,withUnhandledErrorLogLevel:()=>lB,yieldNow:()=>N3,zip:()=>WB,zipLeft:()=>zB,zipRight:()=>KB,zipWith:()=>$B});var qc={};Os(qc,{SafeRefinementId:()=>S6,any:()=>w6,bigint:()=>M6,boolean:()=>F6,date:()=>T6,defined:()=>R6,discriminator:()=>x2,discriminators:()=>Hy,discriminatorsExhaustive:()=>y2,either:()=>_f,exhaustive:()=>S2,instanceOf:()=>b2,instanceOfUnsafe:()=>I6,is:()=>C6,nonEmptyString:()=>E6,not:()=>D6,null:()=>v6,number:()=>O6,option:()=>N6,orElse:()=>D2,orElseAbsurd:()=>P6,record:()=>k6,string:()=>_6,tag:()=>y6,tags:()=>b6,tagsExhaustive:()=>jy,type:()=>l6,typeTags:()=>d6,undefined:()=>A6,value:()=>f6,valueTags:()=>m6,when:()=>h6,whenAnd:()=>x6,whenOr:()=>g6});var Lc=class e{constructor(t){this.cases=t,this._tag="TypeMatcher",this._input=P,this._filters=P,this._remaining=P,this._result=P}add(t){return new e([...this.cases,t])}pipe(){return C(this,arguments)}},Ly=class e{constructor(t,r){this.provided=t,this.value=r,this._tag="ValueMatcher",this._input=P,this._filters=P,this._result=P}add(t){return this.value._tag==="Right"?this:t._tag==="When"&&t.guard(this.provided)===!0?new e(this.provided,H(t.evaluate(this.provided))):t._tag==="Not"&&t.guard(this.provided)===!1?new e(this.provided,H(t.evaluate(this.provided))):this}pipe(){return C(this,arguments)}},gs=class{constructor(t,r){this.guard=t,this.evaluate=r,this._tag="When"}},qy=class{constructor(t,r){this.guard=t,this.evaluate=r,this._tag="Not"}},$i=e=>{if(typeof e=="function")return e;if(Array.isArray(e)){let t=e.map($i),r=t.length;return o=>{if(!Array.isArray(o))return!1;for(let n=0;n<r;n++)if(t[n](o[n])===!1)return!1;return!0}}else if(e!==null&&typeof e=="object"){let t=Object.entries(e).map(([o,n])=>[o,$i(n)]),r=t.length;return o=>{if(typeof o!="object"||o===null)return!1;for(let n=0;n<r;n++){let[s,i]=t[n];if(!(s in o)||i(o[s])===!1)return!1}return!0}}return t=>t===e},u6=e=>{let t=e.map($i),r=t.length;return o=>{for(let n=0;n<r;n++)if(t[n](o)===!0)return!0;return!1}},p6=e=>{let t=e.map($i),r=t.length;return o=>{for(let n=0;n<r;n++)if(t[n](o)===!1)return!1;return!0}},l6=()=>new Lc([]),f6=e=>new Ly(e,z(e)),m6=e=>{let t=jy(e)(new Lc([]));return r=>t(r)},d6=()=>e=>{let t=jy(e)(new Lc([]));return r=>t(r)},h6=(e,t)=>r=>r.add(new gs($i(e),t)),g6=(...e)=>t=>{let r=e[e.length-1],o=e.slice(0,-1);return t.add(new gs(u6(o),r))},x6=(...e)=>t=>{let r=e[e.length-1],o=e.slice(0,-1);return t.add(new gs(p6(o),r))},x2=e=>(...t)=>{let r=t[t.length-1],o=t.slice(0,-1),n=o.length===1?s=>s[e]===o[0]:s=>o.includes(s[e]);return s=>s.add(new gs(n,r))},Hy=e=>t=>{let r=[];for(let n in t){let s=a=>a[e]===n,i=t[n];i&&r.push(new gs(s,i))}let o=r.length;return n=>{let s=n;for(let i=0;i<o;i++)s=s.add(r[i]);return s}},y2=e=>t=>{let r=Hy(e)(t);return o=>S2(r(o))},y6=x2("_tag"),b6=Hy("_tag"),jy=y2("_tag"),D6=(e,t)=>r=>r.add(new qy($i(e),t)),S6=Symbol.for("@effect/match/SafeRefinementId"),E6=e=>typeof e=="string"&&e.length>0,C6=(...e)=>{let t=e.length;return r=>{for(let o=0;o<t;o++)if(r===e[o])return!0;return!1}},_6=pa,O6=yn,w6=()=>!0,R6=e=>e!=null,F6=uu,A6=la;var v6=Yb;var M6=vs,T6=pu,k6=fa,b2=e=>t=>t instanceof e,I6=b2,D2=e=>t=>{let r=_f(t);return ha(r)?r._tag==="Right"?r.right:e(r.left):o=>{let n=r(o);return n._tag==="Right"?n.right:e(n.left)}},P6=e=>D2(()=>{throw new Error("absurd")})(e),_f=e=>{if(e._tag==="ValueMatcher")return e.value;let t=e.cases.length;return r=>{for(let o=0;o<t;o++){let n=e.cases[o];if(n._tag==="When"&&n.guard(r)===!0)return H(n.evaluate(r));if(n._tag==="Not"&&n.guard(r)===!1)return H(n.evaluate(r))}return z(r)}},N6=e=>{let t=_f(e);return ha(t)?ga(t,{onLeft:()=>g(),onRight:x}):r=>ga(t(r),{onLeft:()=>g(),onRight:o=>x(o)})},S2=e=>{let t=_f(e);if(ha(t)){if(t._tag==="Right")return t.right;throw new Error("@effect/match: exhaustive absurd")}return r=>{let o=t(r);if(o._tag==="Right")return o.right;throw new Error("@effect/match: exhaustive absurd")}};var so={};Os(so,{Do:()=>Tk,TypeId:()=>xD,all:()=>CD,ap:()=>hk,as:()=>DD,asUnit:()=>ck,bind:()=>Mk,bindTo:()=>Ak,composeK:()=>fk,contains:()=>nd,containsWith:()=>RD,divide:()=>wk,exists:()=>Ek,filter:()=>yk,filterMap:()=>OD,firstSomeOf:()=>sk,flatMap:()=>mr,flatMapNullable:()=>pk,flatten:()=>rd,fromIterable:()=>rk,fromNullable:()=>Xe,gen:()=>Ik,getEquivalence:()=>bk,getLeft:()=>ok,getOrElse:()=>J,getOrNull:()=>ed,getOrThrow:()=>td,getOrThrowWith:()=>bD,getOrUndefined:()=>Ke,getOrder:()=>Dk,getRight:()=>yD,isNone:()=>j,isOption:()=>Xm,isSome:()=>N,let:()=>vk,lift2:()=>ya,liftNullable:()=>ik,liftPredicate:()=>wD,liftThrowable:()=>ak,map:()=>te,match:()=>je,multiply:()=>_k,multiplyCompact:()=>Fk,none:()=>g,orElse:()=>Dn,orElseEither:()=>nk,partitionMap:()=>xk,product:()=>ED,productMany:()=>dk,reduceCompact:()=>gk,some:()=>x,subtract:()=>Ok,sum:()=>Ck,sumCompact:()=>Rk,tap:()=>SD,toArray:()=>_D,toRefinement:()=>tk,unit:()=>uk,zipLeft:()=>mk,zipRight:()=>lk,zipWith:()=>od});var Of="@effect/schema/ArbitraryHookId",By="@effect/schema/PrettyHookId",Uy=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return Uy(e,t.from)}},Hc=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),wf=e=>{let t=!1,r;return()=>(t||(r=e(),t=!0),r)};var Wy=e=>({_tag:"ParseError",errors:e}),ur=(e,t,r)=>({_tag:"Type",expected:e,actual:t,message:Xe(r)}),C2={_tag:"Forbidden"},No=(e,t)=>({_tag:"Index",index:e,errors:t}),io=(e,t)=>({_tag:"Key",key:e,errors:t}),Rf={_tag:"Missing"},zy=e=>({_tag:"Unexpected",actual:e}),Ky=e=>({_tag:"UnionMember",errors:e}),Te=H,dt=e=>z(Wy([e])),Ye=e=>z(Wy(e)),ao=e=>{let t=e;if(t._tag==="Left"||t._tag==="Right")return t},jc=(e,t)=>{let r=e;return r._tag==="Left"?r:r._tag==="Right"?t(r.right):Ut(e,t)},_2=(e,t)=>{let r=e;return r._tag==="Left"?r:r._tag==="Right"?H(t(r.right)):Ny(e,t)};var vf="@effect/schema/TypeAnnotationId",Mf="@effect/schema/MessageAnnotationId",Gi="@effect/schema/IdentifierAnnotationId",ht="@effect/schema/TitleAnnotationId",Lo="@effect/schema/DescriptionAnnotationId",Gy="@effect/schema/ExamplesAnnotationId",Wc="@effect/schema/JSONSchemaAnnotationId",R2="@effect/schema/DocumentationAnnotationId",ys=e=>t=>Object.prototype.hasOwnProperty.call(t.annotations,e)?x(t.annotations[e]):g(),Vi=(e,t,r,o={})=>({_tag:"Declaration",typeParameters:e,type:t,decode:r,annotations:o});var Vy=e=>({_tag:"Literal",literal:e,annotations:{}}),xs=e=>e._tag==="Literal";var L6=e=>e._tag==="UniqueSymbol",q6={_tag:"UndefinedKeyword",annotations:{[ht]:"undefined"}};var H6={_tag:"VoidKeyword",annotations:{[ht]:"void"}};var zc={_tag:"NeverKeyword",annotations:{[ht]:"never"}};var Ji={_tag:"UnknownKeyword",annotations:{[ht]:"unknown"}},j6=e=>e._tag==="UnknownKeyword",F2={_tag:"AnyKeyword",annotations:{[ht]:"any"}},B6=e=>e._tag==="AnyKeyword",Tf={_tag:"StringKeyword",annotations:{[ht]:"string"}},Uc=e=>e._tag==="StringKeyword",A2={_tag:"NumberKeyword",annotations:{[ht]:"number"}},Af=e=>e._tag==="NumberKeyword",v2={_tag:"BooleanKeyword",annotations:{[ht]:"boolean"}},O2=e=>e._tag==="BooleanKeyword",U6={_tag:"BigIntKeyword",annotations:{[ht]:"bigint"}},w2=e=>e._tag==="BigIntKeyword",Jy={_tag:"SymbolKeyword",annotations:{[ht]:"symbol"}},$y=e=>e._tag==="SymbolKeyword",W6={_tag:"ObjectKeyword",annotations:{[ht]:"object"}};var Kc=(e,t)=>({type:e,isOptional:t}),bs=(e,t,r,o={})=>({_tag:"Tuple",elements:e,rest:t,isReadonly:r,annotations:o});var Ue=(e,t,r,o,n={})=>({name:e,type:t,isOptional:r,isReadonly:o,annotations:n}),M2=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return M2(e.from);default:return!1}},Yi=(e,t,r)=>{if(M2(e))return{parameter:e,type:t,isReadonly:r};throw new Error("An index signature parameter type must be 'string', 'symbol', a template literal type or a refinement of the previous types")},qo=(e,t,r={})=>{let o={};for(let s=0;s<e.length;s++){let i=e[s].name;if(Object.prototype.hasOwnProperty.call(o,i))throw new Error(`Duplicate property signature ${String(i)}`);o[i]=null}let n={string:!1,symbol:!1};for(let s=0;s<t.length;s++){let i=If(t[s].parameter);if(Uc(i)){if(n.string)throw new Error("Duplicate index signature for type `string`");n.string=!0}else if($y(i)){if(n.symbol)throw new Error("Duplicate index signature for type `symbol`");n.symbol=!0}}return{_tag:"TypeLiteral",propertySignatures:z6(e),indexSignatures:t,annotations:r}};var Ho=(e,t={})=>{let r=V6(e);switch(r.length){case 0:return zc;case 1:return r[0];default:return{_tag:"Union",types:G6(r),annotations:t}}};var $c=(e,t={})=>({_tag:"Lazy",f:wf(e),annotations:t});var Gc=(e,t,r,o={})=>({_tag:"Refinement",from:e,decode:t,isReversed:r,annotations:o}),T2=e=>e._tag==="Refinement",Vc=(e,t,r,o)=>({from:e,to:t,decode:r,encode:o}),kf=(e,t,r,o,n,s={})=>({_tag:"Transform",from:e,to:t,decode:r,encode:o,propertySignatureTransformations:n,annotations:s}),k2=(e,t,r,o,n={})=>kf(e,t,r,o,[],n),I2=(e,t,r,o={})=>kf(e,t,n=>{for(let s=0;s<r.length;s++){let i=r[s],a=i.from,c=Object.prototype.hasOwnProperty.call(n,a)?x(n[a]):g();delete n[a];let p=i.decode(c);N(p)&&(n[i.to]=p.value)}return Te(n)},n=>{for(let s=0;s<r.length;s++){let i=r[s],a=i.to,c=Object.prototype.hasOwnProperty.call(n,a)?x(n[a]):g();delete n[a];let p=i.encode(c);N(p)&&(n[i.from]=p.value)}return Te(n)},r,o);var P2=(e,t)=>({...e,annotations:{...e.annotations,...t}}),Yy=(e,t,r)=>({...e,annotations:{...e.annotations,[t]:r}});var N2=e=>e.map(t=>Ue(t.name,Ne(t.type),t.isOptional,t.isReadonly,t.annotations)),L2=e=>e.map(t=>Yi(t.parameter,Ne(t.type),t.isReadonly)),Ne=e=>{switch(e._tag){case"Declaration":return Vi(e.typeParameters.map(Ne),Ne(e.type),e.decode,e.annotations);case"Tuple":return bs(e.elements.map(t=>Kc(Ne(t.type),t.isOptional)),te(e.rest,Ns(Ne)),e.isReadonly,e.annotations);case"TypeLiteral":return qo(N2(e.propertySignatures),L2(e.indexSignatures),e.annotations);case"Union":return Ho(e.types.map(Ne),e.annotations);case"Lazy":return $c(()=>Ne(e.f()),e.annotations);case"Refinement":return Gc(Ne(e.from),e.decode,!1,e.annotations);case"Transform":return Ne(e.to)}return e},pr=e=>{switch(e._tag){case"Declaration":return Vi(e.typeParameters.map(pr),pr(e.type),e.decode,e.annotations);case"Tuple":return bs(e.elements.map(t=>Kc(pr(t.type),t.isOptional)),te(e.rest,Ns(pr)),e.isReadonly);case"TypeLiteral":return qo(e.propertySignatures.map(t=>Ue(t.name,pr(t.type),t.isOptional,t.isReadonly)),e.indexSignatures.map(t=>Yi(t.parameter,pr(t.type),t.isReadonly)));case"Union":return Ho(e.types.map(pr));case"Lazy":return $c(()=>pr(e.f()));case"Refinement":case"Transform":return pr(e.from)}return e},q2=e=>{switch(e._tag){case"Declaration":return q2(e.type);case"NeverKeyword":return 0;case"Literal":case"UndefinedKeyword":case"VoidKeyword":case"UniqueSymbol":return 1;case"BooleanKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3;case"ObjectKeyword":return 5;case"UnknownKeyword":case"AnyKeyword":return 6;default:return 4}},z6=Sn(Qe(vt,ua(e=>q2(e.type)))),H2=Gb(vt,vt,vt),K6=jm(H2),j2=[0,0,0],$6=e=>e.reduce(K6,j2),Bc=e=>{switch(e._tag){case"Tuple":{let t=e.elements.length,r=N(e.rest)?e.rest.value.length:0;return[2,t,r]}case"TypeLiteral":{let t=e.propertySignatures.length,r=e.indexSignatures.length;return t+r===0?[-4,0,0]:[4,t,r]}case"Declaration":{let[t,r,o]=Bc(e.type);return[6,r,o]}case"Lazy":return[8,0,0];case"Union":return $6(e.types.map(Bc));case"Refinement":{let[t,r,o]=Bc(e.from);return[t+1,r,o]}case"Transform":return Bc(e.from);case"ObjectKeyword":return[-2,0,0];case"UnknownKeyword":case"AnyKeyword":return[-4,0,0];default:return j2}},G6=Sn($b(ua(H2,Bc))),V6=e=>{let t=Qe(e,Cu(o=>{switch(o._tag){case"NeverKeyword":return[];case"Union":return o.types;default:return[o]}}));if(t.some(B6))return[F2];if(t.some(j6))return[Ji];let r;return(r=t.findIndex(Uc))!==-1&&(t=t.filter((o,n)=>n===r||!Uc(o)&&!(xs(o)&&typeof o.literal=="string"))),(r=t.findIndex(Af))!==-1&&(t=t.filter((o,n)=>n===r||!Af(o)&&!(xs(o)&&typeof o.literal=="number"))),(r=t.findIndex(O2))!==-1&&(t=t.filter((o,n)=>n===r||!O2(o)&&!(xs(o)&&typeof o.literal=="boolean"))),(r=t.findIndex(w2))!==-1&&(t=t.filter((o,n)=>n===r||!w2(o)&&!(xs(o)&&typeof o.literal=="bigint"))),(r=t.findIndex($y))!==-1&&(t=t.filter((o,n)=>n===r||!$y(o)&&!L6(o))),t},If=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return If(e.from)}};var co=(e,t=[])=>({value:e,forest:t}),B2=e=>J6(co("error(s) found",e.map(Lf))),J6=e=>e.value+U2(`
`,e.forest),U2=(e,t)=>{let r="",o=t.length,n;for(let s=0;s<o;s++){n=t[s];let i=s===o-1;r+=e+(i?"\u2514":"\u251C")+"\u2500 "+n.value,r+=U2(e+(o>1&&!i?"\u2502  ":"   "),n.forest)}return r},Jc=e=>{if(e==null||typeof e=="number"||typeof e=="symbol"||e instanceof Date)return String(e);if(typeof e=="bigint")return String(e)+"n";try{return JSON.stringify(e)}catch{return String(e)}},Y6=e=>{switch(e.type._tag){case"StringKeyword":return"${string}";case"NumberKeyword":return"${number}"}},Z6=e=>e.head+e.spans.map(t=>Y6(t)+t.literal).join(""),Q6=ys(Mf),X6=ys(ht),e8=ys(Gi),t8=ys(Lo),vr=e=>Qe(e8(e),Dn(()=>X6(e)),Dn(()=>t8(e))),Nf=e=>{switch(e._tag){case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"UndefinedKeyword":case"SymbolKeyword":case"ObjectKeyword":case"AnyKeyword":case"UnknownKeyword":case"VoidKeyword":case"NeverKeyword":return J(vr(e),()=>e._tag);case"Literal":return J(vr(e),()=>Jc(e.literal));case"UniqueSymbol":return J(vr(e),()=>Jc(e.symbol));case"Union":return e.types.map(Nf).join(" or ");case"TemplateLiteral":return J(vr(e),()=>Z6(e));case"Tuple":return J(vr(e),()=>"<anonymous tuple or array schema>");case"TypeLiteral":return J(vr(e),()=>"<anonymous type literal schema>");case"Enums":return J(vr(e),()=>e.enums.map((t,r)=>JSON.stringify(r)).join(" | "));case"Lazy":return J(vr(e),()=>"<anonymous lazy schema>");case"Declaration":return J(vr(e),()=>"<anonymous declaration schema>");case"Refinement":return J(vr(e),()=>"<anonymous refinement schema>");case"Transform":return J(vr(e),()=>`${Nf(e.from)} -> ${Nf(e.to)}`)}},Lf=e=>{switch(e._tag){case"Type":return co(Qe(Q6(e.expected),te(t=>t(e.actual)),Dn(()=>e.message),J(()=>`Expected ${Nf(e.expected)}, actual ${Jc(e.actual)}`)));case"Forbidden":return co("is forbidden");case"Index":{let t=e.errors.map(Lf);return t.length===1&&t[0].forest.length!==0?co(`[${e.index}]${t[0].value}`,t[0].forest):co(`[${e.index}]`,t)}case"Unexpected":return co("is unexpected");case"Key":{let t=e.errors.map(Lf);return t.length===1&&t[0].forest.length!==0?co(`[${Jc(e.key)}]${t[0].value}`,t[0].forest):co(`[${Jc(e.key)}]`,t)}case"Missing":return co("is missing");case"UnionMember":return co("union member",e.errors.map(Lf))}};var z2=e=>{let t=gt(e);return(r,o)=>t(r,{...o,isEffectAllowed:!0})};var Qy=e=>gt(e.ast);var Yc=e=>z2(e.ast);var Zc=e=>z2(Mr(e.ast)),gt=(e,t=!0)=>{switch(e._tag){case"Refinement":if(e.isReversed){let r=gt(Ne(e),t),o=gt(Mr(K2(e.from)),!1);return(n,s)=>qf(jc(r(n,s),i=>o(i,s)),s)}else{let r=gt(e.from,t);return(o,n)=>qf(jc(r(o,n),s=>e.decode(s,n)),n)}case"Transform":{let r=gt(e.from,t),o=gt(e.to,!1);return(n,s)=>qf(jc(r(n,s),i=>jc(e.decode(i,s),a=>o(a,s))),s)}case"Declaration":{let r=e.decode(...e.typeParameters);return(o,n)=>qf(r(o,n),n)}case"Literal":return At(e,r=>r===e.literal);case"UniqueSymbol":return At(e,r=>r===e.symbol);case"UndefinedKeyword":return At(e,la);case"VoidKeyword":return At(e,la);case"NeverKeyword":return At(e,Zb);case"UnknownKeyword":case"AnyKeyword":return Te;case"StringKeyword":return At(e,pa);case"NumberKeyword":return At(e,yn);case"BooleanKeyword":return At(e,uu);case"BigIntKeyword":return At(e,vs);case"SymbolKeyword":return At(e,Vb);case"ObjectKeyword":return At(e,de);case"Enums":return At(e,r=>e.enums.some(([o,n])=>n===r));case"TemplateLiteral":{let r=n8(e);return At(e,o=>pa(o)&&r.test(o))}case"Tuple":{let r=e.elements.map(s=>gt(s.type,t)),o=Qe(e.rest,te(Ns(s=>gt(s)))),n=e.elements.filter(s=>!s.isOptional).length;return N(e.rest)&&(n+=e.rest.value.length-1),(s,i)=>{if(!Array.isArray(s))return dt(ur(o8,s));let a=i?.errors==="all",c=[],p=0,l=s.length;for(let w=l;w<=n-1;w++){let A=No(w,[Rf]);if(a){c.push([p++,A]);continue}else return dt(A)}if(j(e.rest))for(let w=e.elements.length;w<=l-1;w++){let A=No(w,[zy(s[w])]);if(a){c.push([p++,A]);continue}else return Ye(Wt(Ze(c),A))}let f=[],d=0,h;for(;d<r.length;d++)if(l<d+1){if(e.elements[d].isOptional)continue}else{let w=r[d],A=w(s[d],i),I=ao(A);if(I){if(Re(I)){let B=No(d,I.left.errors);if(a){c.push([p++,B]);continue}else return Ye(Wt(Ze(c),B))}f.push([p++,I.right])}else{let B=p++,K=d;h||(h=[]),h.push(({es:ae,output:Ee})=>Ut(fn(A),qe=>{if(Re(qe)){let me=No(K,qe.left.errors);return a?(ae.push([B,me]),Ft):Ye(Wt(Ze(ae),me))}return Ee.push([B,qe.right]),Ft}))}}if(N(o)){let w=Fe(o.value),A=Jt(o.value);for(;d<l-A.length;d++){let I=w(s[d],i),B=ao(I);if(B)if(Re(B)){let K=No(d,B.left.errors);if(a){c.push([p++,K]);continue}else return Ye(Wt(Ze(c),K))}else f.push([p++,B.right]);else{let K=p++,ae=d;h||(h=[]),h.push(({es:Ee,output:qe})=>Ut(fn(I),me=>{if(Re(me)){let kr=No(ae,me.left.errors);return a?(Ee.push([K,kr]),Ft):Ye(Wt(Ze(Ee),kr))}else return qe.push([K,me.right]),Ft}))}}for(let I=0;I<A.length;I++)if(d+=I,!(l<d+1)){let B=A[I](s[d],i),K=ao(B);if(K){if(Re(K)){let ae=No(d,K.left.errors);if(a){c.push([p++,ae]);continue}else return Ye(Wt(Ze(c),ae))}f.push([p++,K.right])}else{let ae=p++,Ee=d;h||(h=[]),h.push(({es:qe,output:me})=>Ut(fn(B),kr=>{if(Re(kr)){let lo=No(Ee,kr.left.errors);return a?(qe.push([ae,lo]),Ft):Ye(Wt(Ze(qe),lo))}return me.push([ae,kr.right]),Ft}))}}}let S=({es:w,output:A})=>Su(w)?Ye(Ze(w)):Te(Ze(A));if(h&&h.length>0){let w=h;return zi(()=>{let A={es:Array.from(c),output:Array.from(f)};return Ut(Nc(w,I=>I(A),{concurrency:"unbounded",discard:!0}),()=>S(A))})}return S({output:f,es:c})}}case"TypeLiteral":{if(e.propertySignatures.length===0&&e.indexSignatures.length===0)return At(e,Qb);let r=e.propertySignatures.map(i=>gt(i.type,t)),o=e.indexSignatures.map(i=>[gt(i.parameter,t),gt(i.type,t)]),n=gt(Ho(e.indexSignatures.map(i=>If(i.parameter)))),s={};for(let i=0;i<r.length;i++)s[e.propertySignatures[i].name]=null;return(i,a)=>{if(!fa(i))return dt(ur(W2,i));let c=a?.errors==="all",p=[],l=0;if(a?.onExcessProperty==="error"){for(let w of Hc(i))if(!Object.prototype.hasOwnProperty.call(s,w)){let A=n(w),I=ao(A);if(I&&Re(I)){let B=io(w,[zy(i[w])]);if(c){p.push([l++,B]);continue}else return Ye(Wt(Ze(p),B))}}}let d={},h;for(let w=0;w<r.length;w++){let A=e.propertySignatures[w],I=r[w],B=A.name;if(Object.prototype.hasOwnProperty.call(i,B)){let K=I(i[B],a),ae=ao(K);if(ae){if(Re(ae)){let Ee=io(B,ae.left.errors);if(c){p.push([l++,Ee]);continue}else return Ye(Wt(Ze(p),Ee))}d[B]=ae.right}else{let Ee=l++,qe=B;h||(h=[]),h.push(({es:me,output:kr})=>Ut(fn(K),lo=>{if(Re(lo)){let nu=io(qe,lo.left.errors);return c?(me.push([Ee,nu]),Ft):Ye(Wt(Ze(me),nu))}return kr[qe]=lo.right,Ft}))}}else if(!A.isOptional){let K=io(B,[Rf]);if(c){p.push([l++,K]);continue}else return dt(K)}}for(let w=0;w<o.length;w++){let A=o[w][0],I=o[w][1],B=Uy(i,e.indexSignatures[w].parameter);for(let K of B){if(Object.prototype.hasOwnProperty.call(s,K))continue;let ae=ao(A(K,a));if(ae&&Re(ae)){let me=io(K,ae.left.errors);if(c){p.push([l++,me]);continue}else return Ye(Wt(Ze(p),me))}let Ee=I(i[K],a),qe=ao(Ee);if(qe)if(Re(qe)){let me=io(K,qe.left.errors);if(c){p.push([l++,me]);continue}else return Ye(Wt(Ze(p),me))}else d[K]=qe.right;else{let me=l++,kr=K;h||(h=[]),h.push(({es:lo,output:nu})=>Ut(fn(Ee),Lm=>{if(Re(Lm)){let Bb=io(kr,Lm.left.errors);return c?(lo.push([me,Bb]),Ft):Ye(Wt(Ze(lo),Bb))}else return nu[K]=Lm.right,Ft}))}}}let S=({es:w,output:A})=>Su(w)?Ye(Ze(w)):Te(A);if(h&&h.length>0){let w=h;return zi(()=>{let A={es:Array.from(p),output:Object.assign({},d)};return Ut(Nc(w,I=>I(A),{concurrency:"unbounded",discard:!0}),()=>S(A))})}return S({es:p,output:d})}}case"Union":{let r=r8(e.types),o=Hc(r.keys),n=o.length,s=new Map;for(let i=0;i<e.types.length;i++)s.set(e.types[i],gt(e.types[i],!0));return(i,a)=>{let c=[],p=0,l=[];if(n>0)if(fa(i))for(let h=0;h<n;h++){let S=o[h],w=r.keys[S].buckets;if(Object.prototype.hasOwnProperty.call(i,S)){let A=String(i[S]);Object.prototype.hasOwnProperty.call(w,A)?l=l.concat(w[A]):c.push([p++,io(S,[ur(r.keys[S].ast,i[S])])])}else c.push([p++,io(S,[Rf])])}else c.push([p++,ur(W2,i)]);r.otherwise.length>0&&(l=l.concat(r.otherwise));let f;for(let h=0;h<l.length;h++){let S=s.get(l[h])(i,a),w=!f||f.length===0?ao(S):void 0;if(w){if(Pr(w))return Te(w.right);c.push([p++,Ky(w.left.errors)])}else{let A=p++;f||(f=[]),f.push(I=>zi(()=>"finalResult"in I?Ft:Ut(fn(S),B=>(Pr(B)?I.finalResult=Te(B.right):I.es.push([A,Ky(B.left.errors)]),Ft))))}}let d=h=>Su(h)?Ye(Ze(h)):dt(ur(zc,i));if(f&&f.length>0){let h=f;return zi(()=>{let S={es:Array.from(c)};return Ut(Nc(h,w=>w(S),{concurrency:1,discard:!0}),()=>"finalResult"in S?S.finalResult:d(S.es))})}return d(c)}}case"Lazy":{let r=wf(()=>gt(e.f(),t));return(o,n)=>r()(o,n)}}},At=(e,t)=>r=>t(r)?Te(r):dt(ur(e,r)),Zy=e=>{switch(e._tag){case"Declaration":return Zy(e.type);case"TypeLiteral":{let t=[];for(let r=0;r<e.propertySignatures.length;r++){let o=e.propertySignatures[r],n=pr(o.type);xs(n)&&!o.isOptional&&t.push([o.name,n])}return t}case"Refinement":case"Transform":return Zy(e.from)}return[]},r8=e=>{let t={},r=[];for(let o=0;o<e.length;o++){let n=e[o],s=Zy(n);if(s.length>0)for(let i=0;i<s.length;i++){let[a,c]=s[i],p=String(c.literal);t[a]=t[a]||{buckets:{},ast:zc};let l=t[a].buckets;if(Object.prototype.hasOwnProperty.call(l,p)){if(i<s.length-1)continue;l[p].push(n),t[a].ast=Ho([t[a].ast,c])}else{l[p]=[n],t[a].ast=Ho([t[a].ast,c]);break}}else r.push(n)}return{keys:t,otherwise:r}},K2=e=>T2(e)?K2(e.from):e,qf=(e,t)=>{let r=ao(e);return r||(t?.isEffectAllowed===!0?e:dt(C2))},o8=bs([],x([Ji]),!0,{[Lo]:"a generic array"}),W2=qo([],[Yi(Tf,Ji,!0),Yi(Jy,Ji,!0)],{[Lo]:"a generic object"}),Wt=(e,t)=>(e.push(t),e),n8=e=>{let t=`^${e.head}`;for(let r of e.spans)Uc(r.type)?t+=".*":Af(r.type)&&(t+="-?\\d+(\\.\\d+)?"),t+=r.literal;return t+="$",new RegExp(t)};function Ze(e){return e.sort(([t],[r])=>t>r?1:t<r?-1:0).map(([t,r])=>r)}var Mr=e=>{switch(e._tag){case"Declaration":return Vi(e.typeParameters.map(Mr),e.type,e.decode,e.annotations);case"Tuple":return bs(e.elements.map(t=>Kc(Mr(t.type),t.isOptional)),te(e.rest,Ns(Mr)),e.isReadonly);case"TypeLiteral":return qo(e.propertySignatures.map(t=>Ue(t.name,Mr(t.type),t.isOptional,t.isReadonly,t.annotations)),e.indexSignatures.map(t=>Yi(t.parameter,Mr(t.type),t.isReadonly)));case"Union":return Ho(e.types.map(Mr));case"Lazy":return $c(()=>Mr(e.f()));case"Refinement":return Gc(e.from,e.decode,!e.isReversed,e.annotations);case"Transform":return kf(Mr(e.to),Mr(e.from),e.encode,e.decode,e.propertySignatureTransformations.map(t=>Vc(t.to,t.from,t.encode,t.decode)))}return e};var p8=Symbol.for("@effect/schema/Schema");var l8=e=>We(Ne(e.ast)),Xy=class{constructor(t){$t(this,"ast");$t(this,"_id",p8);$t(this,"From");$t(this,"To");this.ast=t}pipe(){return C(this,arguments)}},We=e=>new Xy(e);var f8=e=>We(Vy(e)),mn=(...e)=>dn(...e.map(t=>f8(t)));var eb=(e,t,r,o)=>We(Vi(e.map(n=>n.ast),t.ast,(...n)=>r(...n.map(We)),o)),dn=(...e)=>We(Ho(e.map(t=>t.ast))),m8=e=>dn(g8,e);var Ds=e=>We(bs([],x([e.ast]),!0));var Hf=class e{constructor(t,r,o){$t(this,"_from");$t(this,"_annotations");$t(this,"_optional");$t(this,"From");$t(this,"FromIsOptional");$t(this,"To");$t(this,"ToIsOptional");this._from=t,this._annotations=r,this._optional=o}optional(){if(this._optional)throw new Error("duplicate optional configuration");return new e(this._from,this._annotations,{to:"optional"})}withDefault(t){if(this._optional&&this._optional.to!=="optional")throw new Error("duplicate optional configuration");return new e(this._from,this._annotations,{to:"default",value:t})}toOption(){if(this._optional&&this._optional.to!=="optional")throw new Error("duplicate optional configuration");return new e(this._from,this._annotations,{to:"Option"})}},d8=(e,t)=>new Hf(e.ast,t),jf=(e,t)=>d8(e,t).optional(),xt=e=>{let t=Hc(e),r=[],o=[],n=[],s=[];for(let i=0;i<t.length;i++){let a=t[i],c=e[a];if(c instanceof Hf){let p=c._optional;if(p)switch(p.to){case"optional":{r.push(Ue(a,c._from,!0,!0,c._annotations)),o.push(Ue(a,c._from,!0,!0)),n.push(Ue(a,Ne(c._from),!0,!0,c._annotations));break}case"default":{o.push(Ue(a,c._from,!0,!0)),n.push(Ue(a,Ne(c._from),!1,!0,c._annotations)),s.push(Vc(a,a,Dn(()=>x(p.value())),P));break}case"Option":{o.push(Ue(a,c._from,!0,!0)),n.push(Ue(a,tv(We(Ne(c._from))).ast,!1,!0,c._annotations)),s.push(Vc(a,a,x,rd));break}}else r.push(Ue(a,c._from,!1,!0,c._annotations)),o.push(Ue(a,c._from,!1,!0)),n.push(Ue(a,Ne(c._from),!1,!0,c._annotations))}else r.push(Ue(a,c.ast,!1,!0)),o.push(Ue(a,c.ast,!1,!0)),n.push(Ue(a,Ne(c.ast),!1,!0))}return s.length>0?We(I2(qo(o,[]),qo(n,[]),s)):We(qo(r,[]))};var G2=e=>{let t={};if(e?.typeId!==void 0){let r=e?.typeId;typeof r=="object"?(t[vf]=r.id,t[r.id]=r.params):t[vf]=r}return e?.message!==void 0&&(t[Mf]=e?.message),e?.identifier!==void 0&&(t[Gi]=e?.identifier),e?.title!==void 0&&(t[ht]=e?.title),e?.description!==void 0&&(t[Lo]=e?.description),e?.examples!==void 0&&(t[Gy]=e?.examples),e?.documentation!==void 0&&(t[R2]=e?.documentation),e?.jsonSchema!==void 0&&(t[Wc]=e?.jsonSchema),e?.arbitrary!==void 0&&(t[Of]=e?.arbitrary),t};function tb(e,t){return r=>{let o=s=>e(s)?Te(s):dt(ur(n,s)),n=Gc(r.ast,o,!1,G2(t));return We(n)}}var Bf=u(4,(e,t,r,o)=>We(k2(e.ast,t.ast,r,o))),h8=u(4,(e,t,r,o)=>Bf(e,t,n=>H(r(n)),n=>H(o(n))));var V2=e=>t=>We(P2(t.ast,e));var J2=e=>t=>We(Yy(t.ast,Lo,e)),Y2=e=>t=>We(Yy(t.ast,Gy,e));var g8=We(Vy(null));var lr=We(Tf),Uf=We(A2),Z2=We(v2);var x8=()=>e=>e.date(),y8=()=>e=>`new Date(${JSON.stringify(e)})`,Q2=eb([],xt({}),()=>e=>pu(e)?Te(e):dt(ur(Q2.ast,e)),{[Gi]:"Date",[By]:y8,[Of]:x8}),b8="@effect/schema/ValidDateTypeId",D8=e=>t=>t.pipe(tb(r=>!isNaN(r.getTime()),{typeId:b8,description:"a valid Date",...e})),S8=Q2.pipe(D8()),X2=e=>Bf(e,S8,t=>Te(new Date(t)),t=>Te(t.toISOString()));var $2="@effect/schema/InstanceOfTypeId",ev=(e,t)=>{let r=G2(t),o=eb([],xt({}),()=>n=>n instanceof e?Te(n):dt(ur(o.ast,n)),{[vf]:$2,[$2]:{constructor:e},[Lo]:`an instance of ${e.name}`,...r});return o},E8=e=>t=>t.oneof(t.constant(g()),e(t).map(x)),C8=e=>je({onNone:()=>"none()",onSome:t=>`some(${e(t)})`}),_8=e=>dn(xt({_tag:mn("None")}),xt({_tag:mn("Some"),value:e})),tv=e=>{let t=eb([e],_8(e),r=>{let o=Qy(r);return(n,s)=>Xm(n)?j(n)?Te(g()):_2(o(n.value,s),x):dt(ur(t.ast,n))},{[Gi]:"Option",[By]:C8,[Of]:E8});return t};var Qc=e=>h8(m8(e),l8(tv(e)),Xe,ed);var O8="@effect/schema/MaxLengthTypeId",rb=(e,t)=>r=>r.pipe(tb(o=>o.length<=e,{typeId:O8,description:`a string at most ${e} character(s) long`,jsonSchema:{maxLength:e},...t})),w8="@effect/schema/MinLengthTypeId",ob=(e,t)=>r=>r.pipe(tb(o=>o.length>=e,{typeId:w8,description:`a string at least ${e} character(s) long`,jsonSchema:{minLength:e},...t}));var nb=xn(require("fs/promises")),sv=xn(require("@actions/glob"));var Wf=require("@actions/core");var Le=class extends Ki.TaggedClass("GenericError"){},ov=e=>k.sync(()=>{(0,Wf.error)(e.message),(0,Wf.debug)(`cause: ${e.error}`),process.exitCode=1});var iv=xn(require("path")),Xc=e=>t=>t.pipe(V2({[Wc]:{...ys(Wc)(t.ast).pipe(so.getOrNull),...e}})),R8=e=>t=>t.pipe(Y2(e),Xc({examples:e})),hn=e=>t=>t.pipe(J2(e),Xc({description:e})),F8=Je.string("INPUT_FILE").pipe(Je.map(e=>({_tag:"File",path:e})),Je.orElse(()=>Je.string("JSON").pipe(Je.map(e=>({_tag:"Json",stringified:e})))),Je.orElse(()=>Qe(Je.all({key:Je.string("KEY"),value:Je.number("VALUE")}),Je.map(({key:e,value:t})=>({_tag:"KeyVal",key:e,value:t}))))),A8=Je.all({metricsInput:F8,trackFileSizeGlob:Je.string("TRACK_FILE_SIZE").pipe(Je.option)}).pipe(Je.nested("INPUT")),av=e=>k.try({try:()=>JSON.parse(e),catch:t=>new Le({message:"Failed to parse JSON",error:t})}),v8=dn(mn("lower-is-better").pipe(hn("if value is _lower_ than the previous run, the trend is _good_. otherwise, the trend is bad")),mn("higher-is-better").pipe(hn("if value is _higher_ than the previous run, the trend is _good_. otherwise, the trend is bad"))).pipe(hn("The acceptable trend for the given metric")),M8=Qe(lr,hn("A unique string that represents this metric across runs"),rb(120),ob(1),ob(1)),T8=Qe(Uf,hn("The numeric value of the metric")),k8=Qe(lr,X2,hn("the date to apply sorting by. defaults to the commit time"),Xc({format:"date-time"})),I8=Qe(lr,rb(32),hn("The units of the metric"),R8(["ms","ns","bytes","kb","mb"])),zf=xt({key:M8,value:T8,sortDate:k8.pipe(jf),units:I8.pipe(jf),trend:v8.pipe(jf)}).pipe(Xc({additionalProperties:!0})),sY=xt({metrics:zf.pipe(Ds)}),cv=dn(xt({metrics:Ds(zf).pipe(hn("A list of metrics to report"))}).pipe(Xc({additionalProperties:!0})),zf.pipe(Ds),zf),iY=Zc(cv),uv=e=>Yc(cv)(e).pipe(k.map(t=>"metrics"in t?t.metrics:t),k.map(t=>[t].flat()),k.mapError(t=>new Le({error:t,message:`Failed to parse given JSON:
${B2(t.errors)}`}))),P8=e=>k.tryPromise({try:()=>nb.default.readFile(e,"utf-8"),catch:t=>new Le({message:"Failed to read file",error:t})}).pipe(k.flatMap(av),k.flatMap(uv)),pv=e=>k.gen(function*(t){let r=yield*t(k.tryPromise({try:()=>sv.create(e),catch:n=>new Le({message:"Failed to parse glob syntax",error:n})}));return yield*t(k.tryPromise({try:()=>r.glob(),catch:n=>new Le({message:"Failed to iterate through glob",error:n})}))}),N8=e=>k.gen(function*(t){let r=yield*t(pv(e));return(yield*t(k.all(r.map(P8),{concurrency:5}))).flat()}),L8=Qe(qc.type(),qc.tagsExhaustive({File:({path:e})=>N8(e),Json:({stringified:e})=>av(e).pipe(k.flatMap(uv)),KeyVal:({key:e,value:t})=>k.succeed([{key:e,value:t}])})),lv=k.gen(function*(e){let t=yield*e(k.config(A8),k.mapError(n=>new Le({error:n,message:"Failed to read input"}))),r=yield*e(L8(t.metricsInput)),o=yield*e(t.trackFileSizeGlob,so.match({onNone:()=>k.succeed([]),onSome:n=>q8(n)}));return{...t,metrics:[...r,...o]}}),q8=e=>k.gen(function*(t){let o=(yield*t(pv(e))).map(n=>k.gen(function*(s){let a=(yield*s(k.tryPromise({try:()=>nb.default.stat(n),catch:p=>new Le({error:p,message:`Failed to get file size for ${n}`})}))).size.valueOf()/1024;return{key:iv.relative(process.cwd(),n),value:Number(a),units:"kB",trend:"lower-is-better"}}));return yield*t(k.all(o,{concurrency:10}))});var fv=e=>e;var mv=(e=0)=>t=>`\x1B[${t+e}m`,dv=(e=0)=>t=>`\x1B[${38+e};5;${t}m`,hv=(e=0)=>(t,r,o)=>`\x1B[${38+e};2;${t};${r};${o}m`,le={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},cY=Object.keys(le.modifier),j8=Object.keys(le.color),B8=Object.keys(le.bgColor),uY=[...j8,...B8];function U8(){let e=new Map;for(let[t,r]of Object.entries(le)){for(let[o,n]of Object.entries(r))le[o]={open:`\x1B[${n[0]}m`,close:`\x1B[${n[1]}m`},r[o]=le[o],e.set(n[0],n[1]);Object.defineProperty(le,t,{value:r,enumerable:!1})}return Object.defineProperty(le,"codes",{value:e,enumerable:!1}),le.color.close="\x1B[39m",le.bgColor.close="\x1B[49m",le.color.ansi=mv(),le.color.ansi256=dv(),le.color.ansi16m=hv(),le.bgColor.ansi=mv(10),le.bgColor.ansi256=dv(10),le.bgColor.ansi16m=hv(10),Object.defineProperties(le,{rgbToAnsi256:{value(t,r,o){return t===r&&r===o?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(o/255*5)},enumerable:!1},hexToRgb:{value(t){let r=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!r)return[0,0,0];let[o]=r;o.length===3&&(o=[...o].map(s=>s+s).join(""));let n=Number.parseInt(o,16);return[n>>16&255,n>>8&255,n&255]},enumerable:!1},hexToAnsi256:{value:t=>le.rgbToAnsi256(...le.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value(t){if(t<8)return 30+t;if(t<16)return 90+(t-8);let r,o,n;if(t>=232)r=((t-232)*10+8)/255,o=r,n=r;else{t-=16;let a=t%36;r=Math.floor(t/36)/5,o=Math.floor(a/6)/5,n=a%6/5}let s=Math.max(r,o,n)*2;if(s===0)return 30;let i=30+(Math.round(n)<<2|Math.round(o)<<1|Math.round(r));return s===2&&(i+=60),i},enumerable:!1},rgbToAnsi:{value:(t,r,o)=>le.ansi256ToAnsi(le.rgbToAnsi256(t,r,o)),enumerable:!1},hexToAnsi:{value:t=>le.ansi256ToAnsi(le.hexToAnsi256(t)),enumerable:!1}}),le}var W8=U8(),Tr=W8;var $f=xn(require("process"),1),xv=xn(require("os"),1),sb=xn(require("tty"),1);function fr(e,t=globalThis.Deno?globalThis.Deno.args:$f.default.argv){let r=e.startsWith("-")?"":e.length===1?"-":"--",o=t.indexOf(r+e),n=t.indexOf("--");return o!==-1&&(n===-1||o<n)}var{env:ge}=$f.default,Kf;fr("no-color")||fr("no-colors")||fr("color=false")||fr("color=never")?Kf=0:(fr("color")||fr("colors")||fr("color=true")||fr("color=always"))&&(Kf=1);function z8(){if("FORCE_COLOR"in ge)return ge.FORCE_COLOR==="true"?1:ge.FORCE_COLOR==="false"?0:ge.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(ge.FORCE_COLOR,10),3)}function K8(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function $8(e,{streamIsTTY:t,sniffFlags:r=!0}={}){let o=z8();o!==void 0&&(Kf=o);let n=r?Kf:o;if(n===0)return 0;if(r){if(fr("color=16m")||fr("color=full")||fr("color=truecolor"))return 3;if(fr("color=256"))return 2}if("TF_BUILD"in ge&&"AGENT_NAME"in ge)return 1;if(e&&!t&&n===void 0)return 0;let s=n||0;if(ge.TERM==="dumb")return s;if($f.default.platform==="win32"){let i=xv.default.release().split(".");return Number(i[0])>=10&&Number(i[2])>=10586?Number(i[2])>=14931?3:2:1}if("CI"in ge)return"GITHUB_ACTIONS"in ge||"GITEA_ACTIONS"in ge?3:["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(i=>i in ge)||ge.CI_NAME==="codeship"?1:s;if("TEAMCITY_VERSION"in ge)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ge.TEAMCITY_VERSION)?1:0;if(ge.COLORTERM==="truecolor"||ge.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in ge){let i=Number.parseInt((ge.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ge.TERM_PROGRAM){case"iTerm.app":return i>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ge.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ge.TERM)||"COLORTERM"in ge?1:s}function gv(e,t={}){let r=$8(e,{streamIsTTY:e&&e.isTTY,...t});return K8(r)}var G8={stdout:gv({isTTY:sb.default.isatty(1)}),stderr:gv({isTTY:sb.default.isatty(2)})},yv=G8;function bv(e,t,r){let o=e.indexOf(t);if(o===-1)return e;let n=t.length,s=0,i="";do i+=e.slice(s,o)+t+r,s=o+n,o=e.indexOf(t,s);while(o!==-1);return i+=e.slice(s),i}function Dv(e,t,r,o){let n=0,s="";do{let i=e[o-1]==="\r";s+=e.slice(n,i?o-1:o)+t+(i?`\r
`:`
`)+r,n=o+1,o=e.indexOf(`
`,n)}while(o!==-1);return s+=e.slice(n),s}var{stdout:Sv,stderr:Ev}=yv,ib=Symbol("GENERATOR"),Zi=Symbol("STYLER"),eu=Symbol("IS_EMPTY"),Cv=["ansi","ansi","ansi256","ansi16m"],Qi=Object.create(null),V8=(e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let r=Sv?Sv.level:0;e.level=t.level===void 0?r:t.level},Gf=class{constructor(t){return _v(t)}},_v=e=>{let t=(...r)=>r.join(" ");return V8(t,e),Object.setPrototypeOf(t,tu.prototype),t};function tu(e){return _v(e)}Object.setPrototypeOf(tu.prototype,Function.prototype);for(let[e,t]of Object.entries(Tr))Qi[e]={get(){let r=Vf(this,cb(t.open,t.close,this[Zi]),this[eu]);return Object.defineProperty(this,e,{value:r}),r}};Qi.visible={get(){let e=Vf(this,this[Zi],!0);return Object.defineProperty(this,"visible",{value:e}),e}};var ab=(e,t,r,...o)=>e==="rgb"?t==="ansi16m"?Tr[r].ansi16m(...o):t==="ansi256"?Tr[r].ansi256(Tr.rgbToAnsi256(...o)):Tr[r].ansi(Tr.rgbToAnsi(...o)):e==="hex"?ab("rgb",t,r,...Tr.hexToRgb(...o)):Tr[r][e](...o),J8=["rgb","hex","ansi256"];for(let e of J8){Qi[e]={get(){let{level:r}=this;return function(...o){let n=cb(ab(e,Cv[r],"color",...o),Tr.color.close,this[Zi]);return Vf(this,n,this[eu])}}};let t="bg"+e[0].toUpperCase()+e.slice(1);Qi[t]={get(){let{level:r}=this;return function(...o){let n=cb(ab(e,Cv[r],"bgColor",...o),Tr.bgColor.close,this[Zi]);return Vf(this,n,this[eu])}}}}var Y8=Object.defineProperties(()=>{},{...Qi,level:{enumerable:!0,get(){return this[ib].level},set(e){this[ib].level=e}}}),cb=(e,t,r)=>{let o,n;return r===void 0?(o=e,n=t):(o=r.openAll+e,n=t+r.closeAll),{open:e,close:t,openAll:o,closeAll:n,parent:r}},Vf=(e,t,r)=>{let o=(...n)=>Z8(o,n.length===1?""+n[0]:n.join(" "));return Object.setPrototypeOf(o,Y8),o[ib]=e,o[Zi]=t,o[eu]=r,o},Z8=(e,t)=>{if(e.level<=0||!t)return e[eu]?"":t;let r=e[Zi];if(r===void 0)return t;let{openAll:o,closeAll:n}=r;if(t.includes("\x1B"))for(;r!==void 0;)t=bv(t,r.close,r.open),r=r.parent;let s=t.indexOf(`
`);return s!==-1&&(t=Dv(t,n,o,s)),o+t+n};Object.defineProperties(tu.prototype,Qi);var gY=tu(),xY=tu({level:Ev?Ev.level:0});var Ss=Cf.Tag(),Ov=k.sync(()=>new Gf({level:2}));function wv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,o)}return r}function Rv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wv(Object(r),!0).forEach(function(o){Q8(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wv(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function Q8(e,t,r){return t=X8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X8(e){var t=eU(e,"string");return typeof t=="symbol"?t:String(t)}function eU(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fv=Av({});function Av(e){return t.withOptions=r=>Av(Rv(Rv({},e),r)),t;function t(r,...o){let n=typeof r=="string"?[r]:r.raw,{escapeSpecialCharacters:s=Array.isArray(r)}=e,i="";for(let p=0;p<n.length;p++){let l=n[p];s&&(l=l.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\{/g,"{")),i+=l,p<o.length&&(i+=o[p])}let a=i.split(`
`),c=null;for(let p of a){let l=p.match(/^(\s+)\S+/);if(l){let f=l[1].length;c?c=Math.min(c,f):c=f}}if(c!==null){let p=c;i=a.map(l=>l[0]===" "||l[0]==="	"?l.slice(p):l).join(`
`)}return i.trim().replace(/\\n/g,`
`)}}var vv=require("@actions/core"),pb=class extends Ki.TaggedClass("IdTokenError"){},Mv=e=>k.gen(function*(t){let r=yield*t(Ss),o=r.cyan("`id-token`"),n=Fv`
      Failed to read GitHub Actions ID token.

      This means you probably forgot to add permissions for ${o} in your workflow/job definition.
      The ${o} permissions allows GitHub to sign your requests to the Benchy API. This does not
      give GitHub access to your Benchy account: it's merely a way to prove that the request is coming
      from your GitHub workflow.

      An example of a workflow with the ${o} permission:

      \`\`\`yaml
       jobs:
         test:
           runs-on: ubuntu-latest
      ${r.green("+    permissions:")}
      ${r.green("+      id-token: write")}
           steps:
             # ...
      \`\`\`

      For more information about the ${o} permisison, see the GitHub documentation on OpenID Connect: https://docs.github.com/en/actions/deployment/security-hardening-your-deployments/about-security-hardening-with-openid-connect#overview-of-openid-connect
   `;return yield*t(k.fail(new Le({message:n,error:e.error})))}),Tv=k.tryPromise({try:()=>(0,vv.getIDToken)(),catch:e=>new pb({error:e})});var Lv=require("@actions/http-client");var qv=require("@actions/core"),Hv=require("util");var lb=xt({value:Uf,units:Qc(lr)}),Iv=Bf(lr,ev(URL),e=>{try{return Te(new URL(e))}catch{return dt({_tag:"Unexpected",actual:e})}},e=>Te(e.href)),Pv=xt({key:lr,storedValue:Qc(lb),currentValue:lb,sparkline:lr,diff:Qc(lb),trend:Qc(xt({alt:lr,url:Iv,good:Z2})),chartUrl:Iv}),OY=Zc(Pv),tU=xt({error:mn(!0),message:lr}),rU=xt({error:mn(!1),data:xt({warnings:Ds(lr),metrics:Ds(Pv)})}),oU=dn(tU,rU),Nv=Yc(oU);var jv=k.gen(function*(e){let t=yield*e(Tv);return new Lv.HttpClient("benchy-action",[],{headers:{Authorization:`Bearer ${t}`}})}),nU=e=>k.tryPromise({try:async()=>({...e,body:await e.readBody()}),catch:t=>new Le({message:"Failed to read response body",error:t})}).pipe(k.flatMap(t=>k.try({try:()=>({...e,json:JSON.parse(t.body)}),catch:r=>new Le({message:"Failed to parse JSON of response body",error:r})})),k.mapError(t=>new Le({error:t.error,message:`HTTP ${e.message.statusCode}: ${t.message}`})),k.map(t=>t.json)),Bv=(e,t)=>k.gen(function*(r){let o=yield*r(k.tryPromise({try:()=>e.post("https://benchy.hagever.com/api/metrics",JSON.stringify({metrics:t})),catch:a=>new Le({message:"Failed to send metrics",error:a})})),n=yield*r(nU(o)),s=yield*r(Nv(n),k.mapError(a=>new Le({error:a,message:"Response is malformed"})));if(s.error)return yield*r(k.fail(new Le({error:new Error(`HTTP ${o.message.statusCode}: ${s.message}`),message:s.message})));let i={...o,body:s};return yield*r(k.sync(()=>{(0,qv.debug)(`got response: ${(0,Hv.inspect)(i,{depth:10,colors:!0})}`)})),i});var FT=require("@actions/core");var wT=xn(OT());var RT=e=>k.gen(function*(t){let r=yield*t(Ss),o=yield*t(q9),n=[["",r.bold("change"),r.bold("current"),r.bold("diff"),""]];for(let s of e){let i=so.match(s.trend,{onNone:()=>r.reset,onSome:a=>a.good?r.green:r.red});n.push([i(s.key),i(o(s.currentValue)),so.match(s.storedValue,{onNone:()=>"",onSome:a=>i(o(a))}),so.match(s.diff,{onNone:()=>"",onSome:a=>i(o(a))}),i(s.sparkline)])}return(0,wT.table)(n)}),q9=Ss.pipe(k.map(e=>t=>{let r=so.match(t.units,{onNone:()=>"",onSome:n=>e.dim(n)});return`${Math.round(t.value*1e3)/1e3}${r}`}));var j9=k.gen(function*(e){let t=yield*e(lv),r=yield*e(jv),o=yield*e(Bv(r,t.metrics));for(let s of o.body.data.warnings)yield*e(k.sync(()=>(0,FT.warning)(s)));let n=RT(o.body.data.metrics);yield*e(k.sync(()=>console.log(n)))});j9.pipe(k.catchTag("IdTokenError",e=>Mv(e)),k.catchTag("GenericError",e=>ov(e)),fv,k.provideServiceEffect(Ss,Ov),k.runPromise);
