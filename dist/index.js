"use strict";var IT=Object.create;var Du=Object.defineProperty;var PT=Object.getOwnPropertyDescriptor;var NT=Object.getOwnPropertyNames;var LT=Object.getPrototypeOf,qT=Object.prototype.hasOwnProperty;var HT=(e,t,r)=>t in e?Du(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var j=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Sn=(e,t)=>{for(var r in t)Du(e,r,{get:t[r],enumerable:!0})},jT=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of NT(t))!qT.call(e,n)&&n!==r&&Du(e,n,{get:()=>t[n],enumerable:!(o=PT(t,n))||o.enumerable});return e};var En=(e,t,r)=>(r=e!=null?IT(LT(e)):{},jT(t||!e||!e.__esModule?Du(r,"default",{value:e,enumerable:!0}):r,e));var Jt=(e,t,r)=>(HT(e,typeof t!="symbol"?t+"":t,r),r);var VM=j((gQ,GM)=>{"use strict";GM.exports=({onlyFirst:e=!1}={})=>{let t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}});var hm=j((xQ,JM)=>{"use strict";var u4=VM();JM.exports=e=>typeof e=="string"?e.replace(u4(),""):e});var jb=j((yQ,Hb)=>{"use strict";var YM=e=>Number.isNaN(e)?!1:e>=4352&&(e<=4447||e===9001||e===9002||11904<=e&&e<=12871&&e!==12351||12880<=e&&e<=19903||19968<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65131||65281<=e&&e<=65376||65504<=e&&e<=65510||110592<=e&&e<=110593||127488<=e&&e<=127569||131072<=e&&e<=262141);Hb.exports=YM;Hb.exports.default=YM});var QM=j((bQ,ZM)=>{"use strict";ZM.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}});var sa=j((DQ,Bb)=>{"use strict";var p4=hm(),l4=jb(),f4=QM(),XM=e=>{if(typeof e!="string"||e.length===0||(e=p4(e),e.length===0))return 0;e=e.replace(f4(),"  ");let t=0;for(let r=0;r<e.length;r++){let o=e.codePointAt(r);o<=31||o>=127&&o<=159||o>=768&&o<=879||(o>65535&&r++,t+=l4(o)?2:1)}return t};Bb.exports=XM;Bb.exports.default=XM});var rk=j((SQ,tk)=>{"use strict";var ek="[\uD800-\uDBFF][\uDC00-\uDFFF]",m4=e=>e&&e.exact?new RegExp(`^${ek}$`):new RegExp(ek,"g");tk.exports=m4});var nk=j((EQ,ok)=>{"use strict";ok.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var Ub=j((CQ,ik)=>{"use strict";var xu=nk(),sk={};for(let e of Object.keys(xu))sk[xu[e]]=e;var M={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};ik.exports=M;for(let e of Object.keys(M)){if(!("channels"in M[e]))throw new Error("missing channels property: "+e);if(!("labels"in M[e]))throw new Error("missing channel labels property: "+e);if(M[e].labels.length!==M[e].channels)throw new Error("channel and label counts mismatch: "+e);let{channels:t,labels:r}=M[e];delete M[e].channels,delete M[e].labels,Object.defineProperty(M[e],"channels",{value:t}),Object.defineProperty(M[e],"labels",{value:r})}M.rgb.hsl=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255,n=Math.min(t,r,o),s=Math.max(t,r,o),i=s-n,a,c;s===n?a=0:t===s?a=(r-o)/i:r===s?a=2+(o-t)/i:o===s&&(a=4+(t-r)/i),a=Math.min(a*60,360),a<0&&(a+=360);let p=(n+s)/2;return s===n?c=0:p<=.5?c=i/(s+n):c=i/(2-s-n),[a,c*100,p*100]};M.rgb.hsv=function(e){let t,r,o,n,s,i=e[0]/255,a=e[1]/255,c=e[2]/255,p=Math.max(i,a,c),l=p-Math.min(i,a,c),f=function(d){return(p-d)/6/l+1/2};return l===0?(n=0,s=0):(s=l/p,t=f(i),r=f(a),o=f(c),i===p?n=o-r:a===p?n=1/3+t-o:c===p&&(n=2/3+r-t),n<0?n+=1:n>1&&(n-=1)),[n*360,s*100,p*100]};M.rgb.hwb=function(e){let t=e[0],r=e[1],o=e[2],n=M.rgb.hsl(e)[0],s=1/255*Math.min(t,Math.min(r,o));return o=1-1/255*Math.max(t,Math.max(r,o)),[n,s*100,o*100]};M.rgb.cmyk=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255,n=Math.min(1-t,1-r,1-o),s=(1-t-n)/(1-n)||0,i=(1-r-n)/(1-n)||0,a=(1-o-n)/(1-n)||0;return[s*100,i*100,a*100,n*100]};function d4(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}M.rgb.keyword=function(e){let t=sk[e];if(t)return t;let r=1/0,o;for(let n of Object.keys(xu)){let s=xu[n],i=d4(e,s);i<r&&(r=i,o=n)}return o};M.keyword.rgb=function(e){return xu[e]};M.rgb.xyz=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,o=o>.04045?((o+.055)/1.055)**2.4:o/12.92;let n=t*.4124+r*.3576+o*.1805,s=t*.2126+r*.7152+o*.0722,i=t*.0193+r*.1192+o*.9505;return[n*100,s*100,i*100]};M.rgb.lab=function(e){let t=M.rgb.xyz(e),r=t[0],o=t[1],n=t[2];r/=95.047,o/=100,n/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,o=o>.008856?o**(1/3):7.787*o+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;let s=116*o-16,i=500*(r-o),a=200*(o-n);return[s,i,a]};M.hsl.rgb=function(e){let t=e[0]/360,r=e[1]/100,o=e[2]/100,n,s,i;if(r===0)return i=o*255,[i,i,i];o<.5?n=o*(1+r):n=o+r-o*r;let a=2*o-n,c=[0,0,0];for(let p=0;p<3;p++)s=t+1/3*-(p-1),s<0&&s++,s>1&&s--,6*s<1?i=a+(n-a)*6*s:2*s<1?i=n:3*s<2?i=a+(n-a)*(2/3-s)*6:i=a,c[p]=i*255;return c};M.hsl.hsv=function(e){let t=e[0],r=e[1]/100,o=e[2]/100,n=r,s=Math.max(o,.01);o*=2,r*=o<=1?o:2-o,n*=s<=1?s:2-s;let i=(o+r)/2,a=o===0?2*n/(s+n):2*r/(o+r);return[t,a*100,i*100]};M.hsv.rgb=function(e){let t=e[0]/60,r=e[1]/100,o=e[2]/100,n=Math.floor(t)%6,s=t-Math.floor(t),i=255*o*(1-r),a=255*o*(1-r*s),c=255*o*(1-r*(1-s));switch(o*=255,n){case 0:return[o,c,i];case 1:return[a,o,i];case 2:return[i,o,c];case 3:return[i,a,o];case 4:return[c,i,o];case 5:return[o,i,a]}};M.hsv.hsl=function(e){let t=e[0],r=e[1]/100,o=e[2]/100,n=Math.max(o,.01),s,i;i=(2-r)*o;let a=(2-r)*n;return s=r*n,s/=a<=1?a:2-a,s=s||0,i/=2,[t,s*100,i*100]};M.hwb.rgb=function(e){let t=e[0]/360,r=e[1]/100,o=e[2]/100,n=r+o,s;n>1&&(r/=n,o/=n);let i=Math.floor(6*t),a=1-o;s=6*t-i,i&1&&(s=1-s);let c=r+s*(a-r),p,l,f;switch(i){default:case 6:case 0:p=a,l=c,f=r;break;case 1:p=c,l=a,f=r;break;case 2:p=r,l=a,f=c;break;case 3:p=r,l=c,f=a;break;case 4:p=c,l=r,f=a;break;case 5:p=a,l=r,f=c;break}return[p*255,l*255,f*255]};M.cmyk.rgb=function(e){let t=e[0]/100,r=e[1]/100,o=e[2]/100,n=e[3]/100,s=1-Math.min(1,t*(1-n)+n),i=1-Math.min(1,r*(1-n)+n),a=1-Math.min(1,o*(1-n)+n);return[s*255,i*255,a*255]};M.xyz.rgb=function(e){let t=e[0]/100,r=e[1]/100,o=e[2]/100,n,s,i;return n=t*3.2406+r*-1.5372+o*-.4986,s=t*-.9689+r*1.8758+o*.0415,i=t*.0557+r*-.204+o*1.057,n=n>.0031308?1.055*n**(1/2.4)-.055:n*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,n=Math.min(Math.max(0,n),1),s=Math.min(Math.max(0,s),1),i=Math.min(Math.max(0,i),1),[n*255,s*255,i*255]};M.xyz.lab=function(e){let t=e[0],r=e[1],o=e[2];t/=95.047,r/=100,o/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;let n=116*r-16,s=500*(t-r),i=200*(r-o);return[n,s,i]};M.lab.xyz=function(e){let t=e[0],r=e[1],o=e[2],n,s,i;s=(t+16)/116,n=r/500+s,i=s-o/200;let a=s**3,c=n**3,p=i**3;return s=a>.008856?a:(s-16/116)/7.787,n=c>.008856?c:(n-16/116)/7.787,i=p>.008856?p:(i-16/116)/7.787,n*=95.047,s*=100,i*=108.883,[n,s,i]};M.lab.lch=function(e){let t=e[0],r=e[1],o=e[2],n;n=Math.atan2(o,r)*360/2/Math.PI,n<0&&(n+=360);let i=Math.sqrt(r*r+o*o);return[t,i,n]};M.lch.lab=function(e){let t=e[0],r=e[1],n=e[2]/360*2*Math.PI,s=r*Math.cos(n),i=r*Math.sin(n);return[t,s,i]};M.rgb.ansi16=function(e,t=null){let[r,o,n]=e,s=t===null?M.rgb.hsv(e)[2]:t;if(s=Math.round(s/50),s===0)return 30;let i=30+(Math.round(n/255)<<2|Math.round(o/255)<<1|Math.round(r/255));return s===2&&(i+=60),i};M.hsv.ansi16=function(e){return M.rgb.ansi16(M.hsv.rgb(e),e[2])};M.rgb.ansi256=function(e){let t=e[0],r=e[1],o=e[2];return t===r&&r===o?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(o/255*5)};M.ansi16.rgb=function(e){let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];let r=(~~(e>50)+1)*.5,o=(t&1)*r*255,n=(t>>1&1)*r*255,s=(t>>2&1)*r*255;return[o,n,s]};M.ansi256.rgb=function(e){if(e>=232){let s=(e-232)*10+8;return[s,s,s]}e-=16;let t,r=Math.floor(e/36)/5*255,o=Math.floor((t=e%36)/6)/5*255,n=t%6/5*255;return[r,o,n]};M.rgb.hex=function(e){let r=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r};M.hex.rgb=function(e){let t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let r=t[0];t[0].length===3&&(r=r.split("").map(a=>a+a).join(""));let o=parseInt(r,16),n=o>>16&255,s=o>>8&255,i=o&255;return[n,s,i]};M.rgb.hcg=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255,n=Math.max(Math.max(t,r),o),s=Math.min(Math.min(t,r),o),i=n-s,a,c;return i<1?a=s/(1-i):a=0,i<=0?c=0:n===t?c=(r-o)/i%6:n===r?c=2+(o-t)/i:c=4+(t-r)/i,c/=6,c%=1,[c*360,i*100,a*100]};M.hsl.hcg=function(e){let t=e[1]/100,r=e[2]/100,o=r<.5?2*t*r:2*t*(1-r),n=0;return o<1&&(n=(r-.5*o)/(1-o)),[e[0],o*100,n*100]};M.hsv.hcg=function(e){let t=e[1]/100,r=e[2]/100,o=t*r,n=0;return o<1&&(n=(r-o)/(1-o)),[e[0],o*100,n*100]};M.hcg.rgb=function(e){let t=e[0]/360,r=e[1]/100,o=e[2]/100;if(r===0)return[o*255,o*255,o*255];let n=[0,0,0],s=t%1*6,i=s%1,a=1-i,c=0;switch(Math.floor(s)){case 0:n[0]=1,n[1]=i,n[2]=0;break;case 1:n[0]=a,n[1]=1,n[2]=0;break;case 2:n[0]=0,n[1]=1,n[2]=i;break;case 3:n[0]=0,n[1]=a,n[2]=1;break;case 4:n[0]=i,n[1]=0,n[2]=1;break;default:n[0]=1,n[1]=0,n[2]=a}return c=(1-r)*o,[(r*n[0]+c)*255,(r*n[1]+c)*255,(r*n[2]+c)*255]};M.hcg.hsv=function(e){let t=e[1]/100,r=e[2]/100,o=t+r*(1-t),n=0;return o>0&&(n=t/o),[e[0],n*100,o*100]};M.hcg.hsl=function(e){let t=e[1]/100,o=e[2]/100*(1-t)+.5*t,n=0;return o>0&&o<.5?n=t/(2*o):o>=.5&&o<1&&(n=t/(2*(1-o))),[e[0],n*100,o*100]};M.hcg.hwb=function(e){let t=e[1]/100,r=e[2]/100,o=t+r*(1-t);return[e[0],(o-t)*100,(1-o)*100]};M.hwb.hcg=function(e){let t=e[1]/100,o=1-e[2]/100,n=o-t,s=0;return n<1&&(s=(o-n)/(1-n)),[e[0],n*100,s*100]};M.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};M.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};M.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};M.gray.hsl=function(e){return[0,0,e[0]]};M.gray.hsv=M.gray.hsl;M.gray.hwb=function(e){return[0,100,e[0]]};M.gray.cmyk=function(e){return[0,0,0,e[0]]};M.gray.lab=function(e){return[e[0],0,0]};M.gray.hex=function(e){let t=Math.round(e[0]/100*255)&255,o=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(o.length)+o};M.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}});var ck=j((_Q,ak)=>{"use strict";var gm=Ub();function h4(){let e={},t=Object.keys(gm);for(let r=t.length,o=0;o<r;o++)e[t[o]]={distance:-1,parent:null};return e}function g4(e){let t=h4(),r=[e];for(t[e].distance=0;r.length;){let o=r.pop(),n=Object.keys(gm[o]);for(let s=n.length,i=0;i<s;i++){let a=n[i],c=t[a];c.distance===-1&&(c.distance=t[o].distance+1,c.parent=o,r.unshift(a))}}return t}function x4(e,t){return function(r){return t(e(r))}}function y4(e,t){let r=[t[e].parent,e],o=gm[t[e].parent][e],n=t[e].parent;for(;t[n].parent;)r.unshift(t[n].parent),o=x4(gm[t[n].parent][n],o),n=t[n].parent;return o.conversion=r,o}ak.exports=function(e){let t=g4(e),r={},o=Object.keys(t);for(let n=o.length,s=0;s<n;s++){let i=o[s];t[i].parent!==null&&(r[i]=y4(i,t))}return r}});var pk=j((OQ,uk)=>{"use strict";var Wb=Ub(),b4=ck(),ia={},D4=Object.keys(Wb);function S4(e){let t=function(...r){let o=r[0];return o==null?o:(o.length>1&&(r=o),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function E4(e){let t=function(...r){let o=r[0];if(o==null)return o;o.length>1&&(r=o);let n=e(r);if(typeof n=="object")for(let s=n.length,i=0;i<s;i++)n[i]=Math.round(n[i]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}D4.forEach(e=>{ia[e]={},Object.defineProperty(ia[e],"channels",{value:Wb[e].channels}),Object.defineProperty(ia[e],"labels",{value:Wb[e].labels});let t=b4(e);Object.keys(t).forEach(o=>{let n=t[o];ia[e][o]=E4(n),ia[e][o].raw=S4(n)})});uk.exports=ia});var gk=j((wQ,hk)=>{"use strict";var lk=(e,t)=>(...r)=>`\x1B[${e(...r)+t}m`,fk=(e,t)=>(...r)=>{let o=e(...r);return`\x1B[${38+t};5;${o}m`},mk=(e,t)=>(...r)=>{let o=e(...r);return`\x1B[${38+t};2;${o[0]};${o[1]};${o[2]}m`},xm=e=>e,dk=(e,t,r)=>[e,t,r],aa=(e,t,r)=>{Object.defineProperty(e,t,{get:()=>{let o=r();return Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0}),o},enumerable:!0,configurable:!0})},zb,ca=(e,t,r,o)=>{zb===void 0&&(zb=pk());let n=o?10:0,s={};for(let[i,a]of Object.entries(zb)){let c=i==="ansi16"?"ansi":i;i===t?s[c]=e(r,n):typeof a=="object"&&(s[c]=e(a[t],n))}return s};function C4(){let e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(let[r,o]of Object.entries(t)){for(let[n,s]of Object.entries(o))t[n]={open:`\x1B[${s[0]}m`,close:`\x1B[${s[1]}m`},o[n]=t[n],e.set(s[0],s[1]);Object.defineProperty(t,r,{value:o,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="\x1B[39m",t.bgColor.close="\x1B[49m",aa(t.color,"ansi",()=>ca(lk,"ansi16",xm,!1)),aa(t.color,"ansi256",()=>ca(fk,"ansi256",xm,!1)),aa(t.color,"ansi16m",()=>ca(mk,"rgb",dk,!1)),aa(t.bgColor,"ansi",()=>ca(lk,"ansi16",xm,!0)),aa(t.bgColor,"ansi256",()=>ca(fk,"ansi256",xm,!0)),aa(t.bgColor,"ansi16m",()=>ca(mk,"rgb",dk,!0)),t}Object.defineProperty(hk,"exports",{enumerable:!0,get:C4})});var bm=j((RQ,Dk)=>{"use strict";var _4=jb(),O4=rk(),xk=gk(),bk=["\x1B","\x9B"],ym=e=>`${bk[0]}[${e}m`,yk=(e,t,r)=>{let o=[];e=[...e];for(let n of e){let s=n;n.includes(";")&&(n=n.split(";")[0][0]+"0");let i=xk.codes.get(Number.parseInt(n,10));if(i){let a=e.indexOf(i.toString());a===-1?o.push(ym(t?i:s)):e.splice(a,1)}else if(t){o.push(ym(0));break}else o.push(ym(s))}if(t&&(o=o.filter((n,s)=>o.indexOf(n)===s),r!==void 0)){let n=ym(xk.codes.get(Number.parseInt(r,10)));o=o.reduce((s,i)=>i===n?[i,...s]:[...s,i],[])}return o.join("")};Dk.exports=(e,t,r)=>{let o=[...e],n=[],s=typeof r=="number"?r:o.length,i=!1,a,c=0,p="";for(let[l,f]of o.entries()){let d=!1;if(bk.includes(f)){let h=/\d[^m]*/.exec(e.slice(l,l+18));a=h&&h.length>0?h[0]:void 0,c<s&&(i=!0,a!==void 0&&n.push(a))}else i&&f==="m"&&(i=!1,d=!0);if(!i&&!d&&c++,!O4({exact:!0}).test(f)&&_4(f.codePointAt())&&(c++,typeof r!="number"&&s++),c>t&&c<=s)p+=f;else if(c===t&&!i&&a!==void 0)p=yk(n);else if(c>=s){p+=yk(n,!0,a);break}}return p}});var Kb=j(Dm=>{"use strict";Object.defineProperty(Dm,"__esModule",{value:!0});Dm.getBorderCharacters=void 0;var w4=e=>{if(e==="honeywell")return{topBody:"\u2550",topJoin:"\u2564",topLeft:"\u2554",topRight:"\u2557",bottomBody:"\u2550",bottomJoin:"\u2567",bottomLeft:"\u255A",bottomRight:"\u255D",bodyLeft:"\u2551",bodyRight:"\u2551",bodyJoin:"\u2502",headerJoin:"\u252C",joinBody:"\u2500",joinLeft:"\u255F",joinRight:"\u2562",joinJoin:"\u253C",joinMiddleDown:"\u252C",joinMiddleUp:"\u2534",joinMiddleLeft:"\u2524",joinMiddleRight:"\u251C"};if(e==="norc")return{topBody:"\u2500",topJoin:"\u252C",topLeft:"\u250C",topRight:"\u2510",bottomBody:"\u2500",bottomJoin:"\u2534",bottomLeft:"\u2514",bottomRight:"\u2518",bodyLeft:"\u2502",bodyRight:"\u2502",bodyJoin:"\u2502",headerJoin:"\u252C",joinBody:"\u2500",joinLeft:"\u251C",joinRight:"\u2524",joinJoin:"\u253C",joinMiddleDown:"\u252C",joinMiddleUp:"\u2534",joinMiddleLeft:"\u2524",joinMiddleRight:"\u251C"};if(e==="ramac")return{topBody:"-",topJoin:"+",topLeft:"+",topRight:"+",bottomBody:"-",bottomJoin:"+",bottomLeft:"+",bottomRight:"+",bodyLeft:"|",bodyRight:"|",bodyJoin:"|",headerJoin:"+",joinBody:"-",joinLeft:"|",joinRight:"|",joinJoin:"|",joinMiddleDown:"+",joinMiddleUp:"+",joinMiddleLeft:"+",joinMiddleRight:"+"};if(e==="void")return{topBody:"",topJoin:"",topLeft:"",topRight:"",bottomBody:"",bottomJoin:"",bottomLeft:"",bottomRight:"",bodyLeft:"",bodyRight:"",bodyJoin:"",headerJoin:"",joinBody:"",joinLeft:"",joinRight:"",joinJoin:"",joinMiddleDown:"",joinMiddleUp:"",joinMiddleLeft:"",joinMiddleRight:""};throw new Error('Unknown border template "'+e+'".')};Dm.getBorderCharacters=w4});var $e=j(J=>{"use strict";var $b=J&&J.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(J,"__esModule",{value:!0});J.isCellInRange=J.areCellEqual=J.calculateRangeCoordinate=J.findOriginalRowIndex=J.flatten=J.extractTruncates=J.sumArray=J.sequence=J.distributeUnevenly=J.countSpaceSequence=J.groupBySizes=J.makeBorderConfig=J.splitAnsi=J.normalizeString=void 0;var R4=$b(bm()),F4=$b(sa()),A4=$b(hm()),v4=Kb(),M4=e=>e.replace(/\r\n/g,`
`);J.normalizeString=M4;var k4=e=>{let t=(0,A4.default)(e).split(`
`).map(F4.default),r=[],o=0;return t.forEach(n=>{r.push(n===0?"":(0,R4.default)(e,o,o+n)),o+=n+1}),r};J.splitAnsi=k4;var T4=e=>({...(0,v4.getBorderCharacters)("honeywell"),...e});J.makeBorderConfig=T4;var I4=(e,t)=>{let r=0;return t.map(o=>{let n=e.slice(r,r+o);return r+=o,n})};J.groupBySizes=I4;var P4=e=>{var t,r;return(r=(t=e.match(/\s+/g))===null||t===void 0?void 0:t.length)!==null&&r!==void 0?r:0};J.countSpaceSequence=P4;var N4=(e,t)=>Array.from({length:t}).fill(Math.floor(e/t)).map((o,n)=>o+(n<e%t?1:0));J.distributeUnevenly=N4;var L4=(e,t)=>Array.from({length:t-e+1},(r,o)=>o+e);J.sequence=L4;var q4=e=>e.reduce((t,r)=>t+r,0);J.sumArray=q4;var H4=e=>e.columns.map(({truncate:t})=>t);J.extractTruncates=H4;var j4=e=>[].concat(...e);J.flatten=j4;var B4=(e,t)=>(0,J.flatten)(e.map((o,n)=>Array.from({length:o},()=>n)))[t];J.findOriginalRowIndex=B4;var U4=e=>{let{row:t,col:r,colSpan:o=1,rowSpan:n=1}=e;return{bottomRight:{col:r+o-1,row:t+n-1},topLeft:{col:r,row:t}}};J.calculateRangeCoordinate=U4;var W4=(e,t)=>e.row===t.row&&e.col===t.col;J.areCellEqual=W4;var z4=(e,{topLeft:t,bottomRight:r})=>t.row<=e.row&&e.row<=r.row&&t.col<=e.col&&e.col<=r.col;J.isCellInRange=z4});var Vb=j(ua=>{"use strict";var K4=ua&&ua.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ua,"__esModule",{value:!0});ua.alignString=void 0;var $4=K4(sa()),Sk=$e(),Gb=(e,t)=>e+" ".repeat(t),G4=(e,t)=>" ".repeat(t)+e,V4=(e,t)=>" ".repeat(Math.floor(t/2))+e+" ".repeat(Math.ceil(t/2)),J4=(e,t)=>{let r=(0,Sk.countSpaceSequence)(e);if(r===0)return Gb(e,t);let o=(0,Sk.distributeUnevenly)(t,r);if(Math.max(...o)>3)return Gb(e,t);let n=0;return e.replace(/\s+/g,s=>s+" ".repeat(o[n++]))},Y4=(e,t,r)=>{let o=(0,$4.default)(e);if(o===t)return e;if(o>t)throw new Error("Subject parameter value width cannot be greater than the container width.");if(o===0)return" ".repeat(t);let n=t-o;return r==="left"?Gb(e,n):r==="right"?G4(e,n):r==="justify"?J4(e,n):V4(e,n)};ua.alignString=Y4});var Jb=j(Sm=>{"use strict";Object.defineProperty(Sm,"__esModule",{value:!0});Sm.alignTableData=void 0;var Z4=Vb(),Q4=(e,t)=>e.map((r,o)=>r.map((n,s)=>{var i;let{width:a,alignment:c}=t.columns[s];return((i=t.spanningCellManager)===null||i===void 0?void 0:i.getContainingRange({col:s,row:o},{mapped:!0}))?n:(0,Z4.alignString)(n,a,c)}));Sm.alignTableData=Q4});var _k=j(pa=>{"use strict";var Ck=pa&&pa.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pa,"__esModule",{value:!0});pa.wrapString=void 0;var Ek=Ck(bm()),X4=Ck(sa()),e9=(e,t)=>{let r=e,o=[];do o.push((0,Ek.default)(r,0,t)),r=(0,Ek.default)(r,t).trim();while((0,X4.default)(r));return o};pa.wrapString=e9});var wk=j(la=>{"use strict";var Ok=la&&la.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(la,"__esModule",{value:!0});la.wrapWord=void 0;var t9=Ok(bm()),r9=Ok(hm()),o9=(e,t)=>{let r=(0,r9.default)(e),o=[],n=new RegExp("(^.{1,"+String(Math.max(t,1))+"}(\\s+|$))|(^.{1,"+String(Math.max(t-1,1))+"}(\\\\|/|_|\\.|,|;|-))");do{let s,i=n.exec(r);if(i){s=i[0],r=r.slice(s.length);let a=s.trim().length,c=s.length-a;o.push([a,c])}else s=r.slice(0,t),r=r.slice(t),o.push([s.length,0])}while(r.length);return o},n9=(e,t)=>{let r=[],o=0;return o9(e,t).forEach(([n,s])=>{r.push((0,t9.default)(e,o,o+n)),o+=n+s}),r};la.wrapWord=n9});var Cm=j(Em=>{"use strict";Object.defineProperty(Em,"__esModule",{value:!0});Em.wrapCell=void 0;var s9=$e(),i9=_k(),a9=wk(),c9=(e,t,r)=>{let o=(0,s9.splitAnsi)(e);for(let n=0;n<o.length;){let s;r?s=(0,a9.wrapWord)(o[n],t):s=(0,i9.wrapString)(o[n],t),o.splice(n,1,...s),n+=s.length}return o};Em.wrapCell=c9});var Rk=j(_m=>{"use strict";Object.defineProperty(_m,"__esModule",{value:!0});_m.calculateCellHeight=void 0;var u9=Cm(),p9=(e,t,r=!1)=>(0,u9.wrapCell)(e,t,r).length;_m.calculateCellHeight=p9});var Yb=j(Om=>{"use strict";Object.defineProperty(Om,"__esModule",{value:!0});Om.calculateRowHeights=void 0;var l9=Rk(),Fk=$e(),f9=(e,t)=>{let r=[];for(let[o,n]of e.entries()){let s=1;n.forEach((i,a)=>{var c;let p=(c=t.spanningCellManager)===null||c===void 0?void 0:c.getContainingRange({col:a,row:o});if(!p){let h=(0,l9.calculateCellHeight)(i,t.columns[a].width,t.columns[a].wrapWord);s=Math.max(s,h);return}let{topLeft:l,bottomRight:f,height:d}=p;if(o===f.row){let h=(0,Fk.sumArray)(r.slice(l.row)),S=f.row-l.row,w=(0,Fk.sequence)(l.row+1,f.row).filter(N=>{var U;return!(!((U=t.drawHorizontalLine)===null||U===void 0)&&U.call(t,N,e.length))}).length,A=d-h-S+w;s=Math.max(s,A)}}),r.push(s)}return r};Om.calculateRowHeights=f9});var Rm=j(wm=>{"use strict";Object.defineProperty(wm,"__esModule",{value:!0});wm.drawContent=void 0;var m9=e=>{let{contents:t,separatorGetter:r,drawSeparator:o,spanningCellManager:n,rowIndex:s,elementType:i}=e,a=t.length,c=[];return o(0,a)&&c.push(r(0,a)),t.forEach((p,l)=>{if((!i||i==="border"||i==="row")&&c.push(p),i==="cell"&&s===void 0&&c.push(p),i==="cell"&&s!==void 0){let f=n?.getContainingRange({col:l,row:s});(!f||l===f.topLeft.col)&&c.push(p)}if(l+1<a&&o(l+1,a)){let f=r(l+1,a);if(i==="cell"&&s!==void 0){let d={col:l+1,row:s},h=n?.getContainingRange(d);(!h||h.topLeft.col===d.col)&&c.push(f)}else c.push(f)}}),o(a,a)&&c.push(r(a,a)),c.join("")};wm.drawContent=m9});var Zb=j(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.createTableBorderGetter=de.drawBorderBottom=de.drawBorderJoin=de.drawBorderTop=de.drawBorder=de.createSeparatorGetter=de.drawBorderSegments=void 0;var d9=Rm(),h9=(e,t)=>{let{separator:r,horizontalBorderIndex:o,spanningCellManager:n}=t;return e.map((s,i)=>{let a=r.body.repeat(s);if(o===void 0)return a;let c=n?.getContainingRange({col:i,row:o});if(!c)return a;let{topLeft:p}=c;return o===p.row?a:i!==p.col?"":c.extractBorderContent(o)})};de.drawBorderSegments=h9;var g9=e=>{let{separator:t,spanningCellManager:r,horizontalBorderIndex:o,rowCount:n}=e;return(s,i)=>{let a=r?.inSameRange;if(o!==void 0&&a){let c={col:s,row:o-1},p={col:s-1,row:o},l={col:s-1,row:o-1},f={col:s,row:o},d=[[l,c],[c,f],[f,p],[p,l]];if(s===0)return a(f,c)&&t.bodyJoinOuter?t.bodyJoinOuter:t.left;if(s===i)return a(l,p)&&t.bodyJoinOuter?t.bodyJoinOuter:t.right;if(o===0)return a(f,p)?t.body:t.join;if(o===n)return a(c,l)?t.body:t.join;let h=d.map(S=>a(...S)).filter(Boolean).length;if(h===0)return t.join;if(h===4)return"";if(h===2)return a(...d[1])&&a(...d[3])&&t.bodyJoinInner?t.bodyJoinInner:t.body;if(h===1){if(!t.joinRight||!t.joinLeft||!t.joinUp||!t.joinDown)throw new Error(`Can not get border separator for position [${o}, ${s}]`);return a(...d[0])?t.joinDown:a(...d[1])?t.joinLeft:a(...d[2])?t.joinUp:t.joinRight}throw new Error("Invalid case")}return s===0?t.left:s===i?t.right:t.join}};de.createSeparatorGetter=g9;var x9=(e,t)=>{let r=(0,de.drawBorderSegments)(e,t),{drawVerticalLine:o,horizontalBorderIndex:n,spanningCellManager:s}=t;return(0,d9.drawContent)({contents:r,drawSeparator:o,elementType:"border",rowIndex:n,separatorGetter:(0,de.createSeparatorGetter)(t),spanningCellManager:s})+`
`};de.drawBorder=x9;var y9=(e,t)=>{let{border:r}=t,o=(0,de.drawBorder)(e,{...t,separator:{body:r.topBody,join:r.topJoin,left:r.topLeft,right:r.topRight}});return o===`
`?"":o};de.drawBorderTop=y9;var b9=(e,t)=>{let{border:r}=t;return(0,de.drawBorder)(e,{...t,separator:{body:r.joinBody,bodyJoinInner:r.bodyJoin,bodyJoinOuter:r.bodyLeft,join:r.joinJoin,joinDown:r.joinMiddleDown,joinLeft:r.joinMiddleLeft,joinRight:r.joinMiddleRight,joinUp:r.joinMiddleUp,left:r.joinLeft,right:r.joinRight}})};de.drawBorderJoin=b9;var D9=(e,t)=>{let{border:r}=t;return(0,de.drawBorder)(e,{...t,separator:{body:r.bottomBody,join:r.bottomJoin,left:r.bottomLeft,right:r.bottomRight}})};de.drawBorderBottom=D9;var S9=(e,t)=>(r,o)=>{let n={...t,horizontalBorderIndex:r};return r===0?(0,de.drawBorderTop)(e,n):r===o?(0,de.drawBorderBottom)(e,n):(0,de.drawBorderJoin)(e,n)};de.createTableBorderGetter=S9});var Qb=j(Fm=>{"use strict";Object.defineProperty(Fm,"__esModule",{value:!0});Fm.drawRow=void 0;var E9=Rm(),C9=(e,t)=>{let{border:r,drawVerticalLine:o,rowIndex:n,spanningCellManager:s}=t;return(0,E9.drawContent)({contents:e,drawSeparator:o,elementType:"cell",rowIndex:n,separatorGetter:(i,a)=>i===0?r.bodyLeft:i===a?r.bodyRight:r.bodyJoin,spanningCellManager:s})+`
`};Fm.drawRow=C9});var vk=j((jQ,Ak)=>{"use strict";Ak.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var o,n,s;if(Array.isArray(t)){if(o=t.length,o!=r.length)return!1;for(n=o;n--!==0;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(s=Object.keys(t),o=s.length,o!==Object.keys(r).length)return!1;for(n=o;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[n]))return!1;for(n=o;n--!==0;){var i=s[n];if(!e(t[i],r[i]))return!1}return!0}return t!==t&&r!==r}});var kk=j(Xb=>{"use strict";Object.defineProperty(Xb,"__esModule",{value:!0});var Mk=vk();Mk.code='require("ajv/dist/runtime/equal").default';Xb.default=Mk});var qk=j(tD=>{"use strict";tD["config.json"]=Nk;var _9={$id:"config.json",$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{border:{$ref:"shared.json#/definitions/borders"},header:{type:"object",properties:{content:{type:"string"},alignment:{$ref:"shared.json#/definitions/alignment"},wrapWord:{type:"boolean"},truncate:{type:"integer"},paddingLeft:{type:"integer"},paddingRight:{type:"integer"}},required:["content"],additionalProperties:!1},columns:{$ref:"shared.json#/definitions/columns"},columnDefault:{$ref:"shared.json#/definitions/column"},drawVerticalLine:{typeof:"function"},drawHorizontalLine:{typeof:"function"},singleLine:{typeof:"boolean"},spanningCells:{type:"array",items:{type:"object",properties:{col:{type:"integer",minimum:0},row:{type:"integer",minimum:0},colSpan:{type:"integer",minimum:1},rowSpan:{type:"integer",minimum:1},alignment:{$ref:"shared.json#/definitions/alignment"},verticalAlignment:{$ref:"shared.json#/definitions/verticalAlignment"},wrapWord:{type:"boolean"},truncate:{type:"integer"},paddingLeft:{type:"integer"},paddingRight:{type:"integer"}},required:["row","col"],additionalProperties:!1}}},additionalProperties:!1},Tk={type:"object",properties:{topBody:{$ref:"#/definitions/border"},topJoin:{$ref:"#/definitions/border"},topLeft:{$ref:"#/definitions/border"},topRight:{$ref:"#/definitions/border"},bottomBody:{$ref:"#/definitions/border"},bottomJoin:{$ref:"#/definitions/border"},bottomLeft:{$ref:"#/definitions/border"},bottomRight:{$ref:"#/definitions/border"},bodyLeft:{$ref:"#/definitions/border"},bodyRight:{$ref:"#/definitions/border"},bodyJoin:{$ref:"#/definitions/border"},headerJoin:{$ref:"#/definitions/border"},joinBody:{$ref:"#/definitions/border"},joinLeft:{$ref:"#/definitions/border"},joinRight:{$ref:"#/definitions/border"},joinJoin:{$ref:"#/definitions/border"},joinMiddleUp:{$ref:"#/definitions/border"},joinMiddleDown:{$ref:"#/definitions/border"},joinMiddleLeft:{$ref:"#/definitions/border"},joinMiddleRight:{$ref:"#/definitions/border"}},additionalProperties:!1},eD=Object.prototype.hasOwnProperty;function b(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(typeof e!="string"){let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[a]:s.push(a),i++}return b.errors=s,i===0}function Am(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let a in e)if(!eD.call(Tk.properties,a)){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}e.topBody!==void 0&&(b(e.topBody,{instancePath:t+"/topBody",parentData:e,parentDataProperty:"topBody",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.topJoin!==void 0&&(b(e.topJoin,{instancePath:t+"/topJoin",parentData:e,parentDataProperty:"topJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.topLeft!==void 0&&(b(e.topLeft,{instancePath:t+"/topLeft",parentData:e,parentDataProperty:"topLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.topRight!==void 0&&(b(e.topRight,{instancePath:t+"/topRight",parentData:e,parentDataProperty:"topRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomBody!==void 0&&(b(e.bottomBody,{instancePath:t+"/bottomBody",parentData:e,parentDataProperty:"bottomBody",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomJoin!==void 0&&(b(e.bottomJoin,{instancePath:t+"/bottomJoin",parentData:e,parentDataProperty:"bottomJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomLeft!==void 0&&(b(e.bottomLeft,{instancePath:t+"/bottomLeft",parentData:e,parentDataProperty:"bottomLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomRight!==void 0&&(b(e.bottomRight,{instancePath:t+"/bottomRight",parentData:e,parentDataProperty:"bottomRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bodyLeft!==void 0&&(b(e.bodyLeft,{instancePath:t+"/bodyLeft",parentData:e,parentDataProperty:"bodyLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bodyRight!==void 0&&(b(e.bodyRight,{instancePath:t+"/bodyRight",parentData:e,parentDataProperty:"bodyRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bodyJoin!==void 0&&(b(e.bodyJoin,{instancePath:t+"/bodyJoin",parentData:e,parentDataProperty:"bodyJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.headerJoin!==void 0&&(b(e.headerJoin,{instancePath:t+"/headerJoin",parentData:e,parentDataProperty:"headerJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinBody!==void 0&&(b(e.joinBody,{instancePath:t+"/joinBody",parentData:e,parentDataProperty:"joinBody",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinLeft!==void 0&&(b(e.joinLeft,{instancePath:t+"/joinLeft",parentData:e,parentDataProperty:"joinLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinRight!==void 0&&(b(e.joinRight,{instancePath:t+"/joinRight",parentData:e,parentDataProperty:"joinRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinJoin!==void 0&&(b(e.joinJoin,{instancePath:t+"/joinJoin",parentData:e,parentDataProperty:"joinJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleUp!==void 0&&(b(e.joinMiddleUp,{instancePath:t+"/joinMiddleUp",parentData:e,parentDataProperty:"joinMiddleUp",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleDown!==void 0&&(b(e.joinMiddleDown,{instancePath:t+"/joinMiddleDown",parentData:e,parentDataProperty:"joinMiddleDown",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleLeft!==void 0&&(b(e.joinMiddleLeft,{instancePath:t+"/joinMiddleLeft",parentData:e,parentDataProperty:"joinMiddleLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleRight!==void 0&&(b(e.joinMiddleRight,{instancePath:t+"/joinMiddleRight",parentData:e,parentDataProperty:"joinMiddleRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length))}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return Am.errors=s,i===0}var Ik={type:"string",enum:["left","right","center","justify"]},UQ=kk().default;function Fs(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(typeof e!="string"){let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[a]:s.push(a),i++}if(!(e==="left"||e==="right"||e==="center"||e==="justify")){let a={instancePath:t,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:Ik.enum},message:"must be equal to one of the allowed values"};s===null?s=[a]:s.push(a),i++}return Fs.errors=s,i===0}var Nm=new RegExp("^[0-9]+$","u");function mo(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(typeof e!="string"){let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[a]:s.push(a),i++}if(!(e==="left"||e==="right"||e==="center"||e==="justify")){let a={instancePath:t,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:Ik.enum},message:"must be equal to one of the allowed values"};s===null?s=[a]:s.push(a),i++}return mo.errors=s,i===0}var Pk={type:"string",enum:["top","middle","bottom"]};function ho(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(typeof e!="string"){let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[a]:s.push(a),i++}if(!(e==="top"||e==="middle"||e==="bottom")){let a={instancePath:t,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:Pk.enum},message:"must be equal to one of the allowed values"};s===null?s=[a]:s.push(a),i++}return ho.errors=s,i===0}function Gt(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let a in e)if(!(a==="alignment"||a==="verticalAlignment"||a==="width"||a==="wrapWord"||a==="truncate"||a==="paddingLeft"||a==="paddingRight")){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}if(e.alignment!==void 0&&(mo(e.alignment,{instancePath:t+"/alignment",parentData:e,parentDataProperty:"alignment",rootData:n})||(s=s===null?mo.errors:s.concat(mo.errors),i=s.length)),e.verticalAlignment!==void 0&&(ho(e.verticalAlignment,{instancePath:t+"/verticalAlignment",parentData:e,parentDataProperty:"verticalAlignment",rootData:n})||(s=s===null?ho.errors:s.concat(ho.errors),i=s.length)),e.width!==void 0){let a=e.width;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/width",schemaPath:"#/properties/width/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}if(typeof a=="number"&&isFinite(a)&&(a<1||isNaN(a))){let c={instancePath:t+"/width",schemaPath:"#/properties/width/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};s===null?s=[c]:s.push(c),i++}}if(e.wrapWord!==void 0&&typeof e.wrapWord!="boolean"){let a={instancePath:t+"/wrapWord",schemaPath:"#/properties/wrapWord/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[a]:s.push(a),i++}if(e.truncate!==void 0){let a=e.truncate;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/truncate",schemaPath:"#/properties/truncate/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}if(e.paddingLeft!==void 0){let a=e.paddingLeft;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/paddingLeft",schemaPath:"#/properties/paddingLeft/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}if(e.paddingRight!==void 0){let a=e.paddingRight;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/paddingRight",schemaPath:"#/properties/paddingRight/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return Gt.errors=s,i===0}function vm(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0,a=i,c=!1,p=null,l=i;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let h in e)if(!Nm.test(h)){let S={instancePath:t,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties"};s===null?s=[S]:s.push(S),i++}for(let h in e)Nm.test(h)&&(Gt(e[h],{instancePath:t+"/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:e,parentDataProperty:h,rootData:n})||(s=s===null?Gt.errors:s.concat(Gt.errors),i=s.length))}else{let h={instancePath:t,schemaPath:"#/oneOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[h]:s.push(h),i++}var d=l===i;d&&(c=!0,p=0);let f=i;if(Array.isArray(e)){let h=e.length;for(let S=0;S<h;S++)Gt(e[S],{instancePath:t+"/"+S,parentData:e,parentDataProperty:S,rootData:n})||(s=s===null?Gt.errors:s.concat(Gt.errors),i=s.length)}else{let h={instancePath:t,schemaPath:"#/oneOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[h]:s.push(h),i++}var d=f===i;if(d&&c?(c=!1,p=[p,1]):d&&(c=!0,p=1),c)i=a,s!==null&&(a?s.length=a:s=null);else{let h={instancePath:t,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:p},message:"must match exactly one schema in oneOf"};s===null?s=[h]:s.push(h),i++}return vm.errors=s,i===0}function Mm(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let a in e)if(!(a==="alignment"||a==="verticalAlignment"||a==="width"||a==="wrapWord"||a==="truncate"||a==="paddingLeft"||a==="paddingRight")){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}if(e.alignment!==void 0&&(mo(e.alignment,{instancePath:t+"/alignment",parentData:e,parentDataProperty:"alignment",rootData:n})||(s=s===null?mo.errors:s.concat(mo.errors),i=s.length)),e.verticalAlignment!==void 0&&(ho(e.verticalAlignment,{instancePath:t+"/verticalAlignment",parentData:e,parentDataProperty:"verticalAlignment",rootData:n})||(s=s===null?ho.errors:s.concat(ho.errors),i=s.length)),e.width!==void 0){let a=e.width;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/width",schemaPath:"#/properties/width/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}if(typeof a=="number"&&isFinite(a)&&(a<1||isNaN(a))){let c={instancePath:t+"/width",schemaPath:"#/properties/width/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};s===null?s=[c]:s.push(c),i++}}if(e.wrapWord!==void 0&&typeof e.wrapWord!="boolean"){let a={instancePath:t+"/wrapWord",schemaPath:"#/properties/wrapWord/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[a]:s.push(a),i++}if(e.truncate!==void 0){let a=e.truncate;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/truncate",schemaPath:"#/properties/truncate/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}if(e.paddingLeft!==void 0){let a=e.paddingLeft;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/paddingLeft",schemaPath:"#/properties/paddingLeft/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}if(e.paddingRight!==void 0){let a=e.paddingRight;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/paddingRight",schemaPath:"#/properties/paddingRight/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return Mm.errors=s,i===0}function km(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(typeof e!="string"){let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[a]:s.push(a),i++}if(!(e==="top"||e==="middle"||e==="bottom")){let a={instancePath:t,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:Pk.enum},message:"must be equal to one of the allowed values"};s===null?s=[a]:s.push(a),i++}return km.errors=s,i===0}function Nk(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let a in e)if(!(a==="border"||a==="header"||a==="columns"||a==="columnDefault"||a==="drawVerticalLine"||a==="drawHorizontalLine"||a==="singleLine"||a==="spanningCells")){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}if(e.border!==void 0&&(Am(e.border,{instancePath:t+"/border",parentData:e,parentDataProperty:"border",rootData:n})||(s=s===null?Am.errors:s.concat(Am.errors),i=s.length)),e.header!==void 0){let a=e.header;if(a&&typeof a=="object"&&!Array.isArray(a)){if(a.content===void 0){let c={instancePath:t+"/header",schemaPath:"#/properties/header/required",keyword:"required",params:{missingProperty:"content"},message:"must have required property 'content'"};s===null?s=[c]:s.push(c),i++}for(let c in a)if(!(c==="content"||c==="alignment"||c==="wrapWord"||c==="truncate"||c==="paddingLeft"||c==="paddingRight")){let p={instancePath:t+"/header",schemaPath:"#/properties/header/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties"};s===null?s=[p]:s.push(p),i++}if(a.content!==void 0&&typeof a.content!="string"){let c={instancePath:t+"/header/content",schemaPath:"#/properties/header/properties/content/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[c]:s.push(c),i++}if(a.alignment!==void 0&&(Fs(a.alignment,{instancePath:t+"/header/alignment",parentData:a,parentDataProperty:"alignment",rootData:n})||(s=s===null?Fs.errors:s.concat(Fs.errors),i=s.length)),a.wrapWord!==void 0&&typeof a.wrapWord!="boolean"){let c={instancePath:t+"/header/wrapWord",schemaPath:"#/properties/header/properties/wrapWord/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[c]:s.push(c),i++}if(a.truncate!==void 0){let c=a.truncate;if(!(typeof c=="number"&&!(c%1)&&!isNaN(c)&&isFinite(c))){let p={instancePath:t+"/header/truncate",schemaPath:"#/properties/header/properties/truncate/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[p]:s.push(p),i++}}if(a.paddingLeft!==void 0){let c=a.paddingLeft;if(!(typeof c=="number"&&!(c%1)&&!isNaN(c)&&isFinite(c))){let p={instancePath:t+"/header/paddingLeft",schemaPath:"#/properties/header/properties/paddingLeft/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[p]:s.push(p),i++}}if(a.paddingRight!==void 0){let c=a.paddingRight;if(!(typeof c=="number"&&!(c%1)&&!isNaN(c)&&isFinite(c))){let p={instancePath:t+"/header/paddingRight",schemaPath:"#/properties/header/properties/paddingRight/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[p]:s.push(p),i++}}}else{let c={instancePath:t+"/header",schemaPath:"#/properties/header/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[c]:s.push(c),i++}}if(e.columns!==void 0&&(vm(e.columns,{instancePath:t+"/columns",parentData:e,parentDataProperty:"columns",rootData:n})||(s=s===null?vm.errors:s.concat(vm.errors),i=s.length)),e.columnDefault!==void 0&&(Mm(e.columnDefault,{instancePath:t+"/columnDefault",parentData:e,parentDataProperty:"columnDefault",rootData:n})||(s=s===null?Mm.errors:s.concat(Mm.errors),i=s.length)),e.drawVerticalLine!==void 0&&typeof e.drawVerticalLine!="function"){let a={instancePath:t+"/drawVerticalLine",schemaPath:"#/properties/drawVerticalLine/typeof",keyword:"typeof",params:{},message:'must pass "typeof" keyword validation'};s===null?s=[a]:s.push(a),i++}if(e.drawHorizontalLine!==void 0&&typeof e.drawHorizontalLine!="function"){let a={instancePath:t+"/drawHorizontalLine",schemaPath:"#/properties/drawHorizontalLine/typeof",keyword:"typeof",params:{},message:'must pass "typeof" keyword validation'};s===null?s=[a]:s.push(a),i++}if(e.singleLine!==void 0&&typeof e.singleLine!="boolean"){let a={instancePath:t+"/singleLine",schemaPath:"#/properties/singleLine/typeof",keyword:"typeof",params:{},message:'must pass "typeof" keyword validation'};s===null?s=[a]:s.push(a),i++}if(e.spanningCells!==void 0){let a=e.spanningCells;if(Array.isArray(a)){let c=a.length;for(let p=0;p<c;p++){let l=a[p];if(l&&typeof l=="object"&&!Array.isArray(l)){if(l.row===void 0){let f={instancePath:t+"/spanningCells/"+p,schemaPath:"#/properties/spanningCells/items/required",keyword:"required",params:{missingProperty:"row"},message:"must have required property 'row'"};s===null?s=[f]:s.push(f),i++}if(l.col===void 0){let f={instancePath:t+"/spanningCells/"+p,schemaPath:"#/properties/spanningCells/items/required",keyword:"required",params:{missingProperty:"col"},message:"must have required property 'col'"};s===null?s=[f]:s.push(f),i++}for(let f in l)if(!eD.call(_9.properties.spanningCells.items.properties,f)){let d={instancePath:t+"/spanningCells/"+p,schemaPath:"#/properties/spanningCells/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties"};s===null?s=[d]:s.push(d),i++}if(l.col!==void 0){let f=l.col;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/col",schemaPath:"#/properties/spanningCells/items/properties/col/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}if(typeof f=="number"&&isFinite(f)&&(f<0||isNaN(f))){let d={instancePath:t+"/spanningCells/"+p+"/col",schemaPath:"#/properties/spanningCells/items/properties/col/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"};s===null?s=[d]:s.push(d),i++}}if(l.row!==void 0){let f=l.row;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/row",schemaPath:"#/properties/spanningCells/items/properties/row/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}if(typeof f=="number"&&isFinite(f)&&(f<0||isNaN(f))){let d={instancePath:t+"/spanningCells/"+p+"/row",schemaPath:"#/properties/spanningCells/items/properties/row/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"};s===null?s=[d]:s.push(d),i++}}if(l.colSpan!==void 0){let f=l.colSpan;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/colSpan",schemaPath:"#/properties/spanningCells/items/properties/colSpan/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}if(typeof f=="number"&&isFinite(f)&&(f<1||isNaN(f))){let d={instancePath:t+"/spanningCells/"+p+"/colSpan",schemaPath:"#/properties/spanningCells/items/properties/colSpan/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};s===null?s=[d]:s.push(d),i++}}if(l.rowSpan!==void 0){let f=l.rowSpan;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/rowSpan",schemaPath:"#/properties/spanningCells/items/properties/rowSpan/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}if(typeof f=="number"&&isFinite(f)&&(f<1||isNaN(f))){let d={instancePath:t+"/spanningCells/"+p+"/rowSpan",schemaPath:"#/properties/spanningCells/items/properties/rowSpan/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};s===null?s=[d]:s.push(d),i++}}if(l.alignment!==void 0&&(Fs(l.alignment,{instancePath:t+"/spanningCells/"+p+"/alignment",parentData:l,parentDataProperty:"alignment",rootData:n})||(s=s===null?Fs.errors:s.concat(Fs.errors),i=s.length)),l.verticalAlignment!==void 0&&(km(l.verticalAlignment,{instancePath:t+"/spanningCells/"+p+"/verticalAlignment",parentData:l,parentDataProperty:"verticalAlignment",rootData:n})||(s=s===null?km.errors:s.concat(km.errors),i=s.length)),l.wrapWord!==void 0&&typeof l.wrapWord!="boolean"){let f={instancePath:t+"/spanningCells/"+p+"/wrapWord",schemaPath:"#/properties/spanningCells/items/properties/wrapWord/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[f]:s.push(f),i++}if(l.truncate!==void 0){let f=l.truncate;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/truncate",schemaPath:"#/properties/spanningCells/items/properties/truncate/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}}if(l.paddingLeft!==void 0){let f=l.paddingLeft;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/paddingLeft",schemaPath:"#/properties/spanningCells/items/properties/paddingLeft/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}}if(l.paddingRight!==void 0){let f=l.paddingRight;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/paddingRight",schemaPath:"#/properties/spanningCells/items/properties/paddingRight/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}}}else{let f={instancePath:t+"/spanningCells/"+p,schemaPath:"#/properties/spanningCells/items/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[f]:s.push(f),i++}}}else{let c={instancePath:t+"/spanningCells",schemaPath:"#/properties/spanningCells/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[c]:s.push(c),i++}}}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return Nk.errors=s,i===0}tD["streamConfig.json"]=Lk;function Tm(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let a in e)if(!eD.call(Tk.properties,a)){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}e.topBody!==void 0&&(b(e.topBody,{instancePath:t+"/topBody",parentData:e,parentDataProperty:"topBody",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.topJoin!==void 0&&(b(e.topJoin,{instancePath:t+"/topJoin",parentData:e,parentDataProperty:"topJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.topLeft!==void 0&&(b(e.topLeft,{instancePath:t+"/topLeft",parentData:e,parentDataProperty:"topLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.topRight!==void 0&&(b(e.topRight,{instancePath:t+"/topRight",parentData:e,parentDataProperty:"topRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomBody!==void 0&&(b(e.bottomBody,{instancePath:t+"/bottomBody",parentData:e,parentDataProperty:"bottomBody",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomJoin!==void 0&&(b(e.bottomJoin,{instancePath:t+"/bottomJoin",parentData:e,parentDataProperty:"bottomJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomLeft!==void 0&&(b(e.bottomLeft,{instancePath:t+"/bottomLeft",parentData:e,parentDataProperty:"bottomLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomRight!==void 0&&(b(e.bottomRight,{instancePath:t+"/bottomRight",parentData:e,parentDataProperty:"bottomRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bodyLeft!==void 0&&(b(e.bodyLeft,{instancePath:t+"/bodyLeft",parentData:e,parentDataProperty:"bodyLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bodyRight!==void 0&&(b(e.bodyRight,{instancePath:t+"/bodyRight",parentData:e,parentDataProperty:"bodyRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bodyJoin!==void 0&&(b(e.bodyJoin,{instancePath:t+"/bodyJoin",parentData:e,parentDataProperty:"bodyJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.headerJoin!==void 0&&(b(e.headerJoin,{instancePath:t+"/headerJoin",parentData:e,parentDataProperty:"headerJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinBody!==void 0&&(b(e.joinBody,{instancePath:t+"/joinBody",parentData:e,parentDataProperty:"joinBody",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinLeft!==void 0&&(b(e.joinLeft,{instancePath:t+"/joinLeft",parentData:e,parentDataProperty:"joinLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinRight!==void 0&&(b(e.joinRight,{instancePath:t+"/joinRight",parentData:e,parentDataProperty:"joinRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinJoin!==void 0&&(b(e.joinJoin,{instancePath:t+"/joinJoin",parentData:e,parentDataProperty:"joinJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleUp!==void 0&&(b(e.joinMiddleUp,{instancePath:t+"/joinMiddleUp",parentData:e,parentDataProperty:"joinMiddleUp",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleDown!==void 0&&(b(e.joinMiddleDown,{instancePath:t+"/joinMiddleDown",parentData:e,parentDataProperty:"joinMiddleDown",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleLeft!==void 0&&(b(e.joinMiddleLeft,{instancePath:t+"/joinMiddleLeft",parentData:e,parentDataProperty:"joinMiddleLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleRight!==void 0&&(b(e.joinMiddleRight,{instancePath:t+"/joinMiddleRight",parentData:e,parentDataProperty:"joinMiddleRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length))}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return Tm.errors=s,i===0}function Im(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0,a=i,c=!1,p=null,l=i;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let h in e)if(!Nm.test(h)){let S={instancePath:t,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties"};s===null?s=[S]:s.push(S),i++}for(let h in e)Nm.test(h)&&(Gt(e[h],{instancePath:t+"/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:e,parentDataProperty:h,rootData:n})||(s=s===null?Gt.errors:s.concat(Gt.errors),i=s.length))}else{let h={instancePath:t,schemaPath:"#/oneOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[h]:s.push(h),i++}var d=l===i;d&&(c=!0,p=0);let f=i;if(Array.isArray(e)){let h=e.length;for(let S=0;S<h;S++)Gt(e[S],{instancePath:t+"/"+S,parentData:e,parentDataProperty:S,rootData:n})||(s=s===null?Gt.errors:s.concat(Gt.errors),i=s.length)}else{let h={instancePath:t,schemaPath:"#/oneOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[h]:s.push(h),i++}var d=f===i;if(d&&c?(c=!1,p=[p,1]):d&&(c=!0,p=1),c)i=a,s!==null&&(a?s.length=a:s=null);else{let h={instancePath:t,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:p},message:"must match exactly one schema in oneOf"};s===null?s=[h]:s.push(h),i++}return Im.errors=s,i===0}function Pm(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let a in e)if(!(a==="alignment"||a==="verticalAlignment"||a==="width"||a==="wrapWord"||a==="truncate"||a==="paddingLeft"||a==="paddingRight")){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}if(e.alignment!==void 0&&(mo(e.alignment,{instancePath:t+"/alignment",parentData:e,parentDataProperty:"alignment",rootData:n})||(s=s===null?mo.errors:s.concat(mo.errors),i=s.length)),e.verticalAlignment!==void 0&&(ho(e.verticalAlignment,{instancePath:t+"/verticalAlignment",parentData:e,parentDataProperty:"verticalAlignment",rootData:n})||(s=s===null?ho.errors:s.concat(ho.errors),i=s.length)),e.width!==void 0){let a=e.width;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/width",schemaPath:"#/properties/width/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}if(typeof a=="number"&&isFinite(a)&&(a<1||isNaN(a))){let c={instancePath:t+"/width",schemaPath:"#/properties/width/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};s===null?s=[c]:s.push(c),i++}}if(e.wrapWord!==void 0&&typeof e.wrapWord!="boolean"){let a={instancePath:t+"/wrapWord",schemaPath:"#/properties/wrapWord/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[a]:s.push(a),i++}if(e.truncate!==void 0){let a=e.truncate;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/truncate",schemaPath:"#/properties/truncate/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}if(e.paddingLeft!==void 0){let a=e.paddingLeft;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/paddingLeft",schemaPath:"#/properties/paddingLeft/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}if(e.paddingRight!==void 0){let a=e.paddingRight;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/paddingRight",schemaPath:"#/properties/paddingRight/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return Pm.errors=s,i===0}function Lk(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.columnDefault===void 0){let a={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"columnDefault"},message:"must have required property 'columnDefault'"};s===null?s=[a]:s.push(a),i++}if(e.columnCount===void 0){let a={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"columnCount"},message:"must have required property 'columnCount'"};s===null?s=[a]:s.push(a),i++}for(let a in e)if(!(a==="border"||a==="columns"||a==="columnDefault"||a==="columnCount"||a==="drawVerticalLine")){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}if(e.border!==void 0&&(Tm(e.border,{instancePath:t+"/border",parentData:e,parentDataProperty:"border",rootData:n})||(s=s===null?Tm.errors:s.concat(Tm.errors),i=s.length)),e.columns!==void 0&&(Im(e.columns,{instancePath:t+"/columns",parentData:e,parentDataProperty:"columns",rootData:n})||(s=s===null?Im.errors:s.concat(Im.errors),i=s.length)),e.columnDefault!==void 0&&(Pm(e.columnDefault,{instancePath:t+"/columnDefault",parentData:e,parentDataProperty:"columnDefault",rootData:n})||(s=s===null?Pm.errors:s.concat(Pm.errors),i=s.length)),e.columnCount!==void 0){let a=e.columnCount;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/columnCount",schemaPath:"#/properties/columnCount/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}if(typeof a=="number"&&isFinite(a)&&(a<1||isNaN(a))){let c={instancePath:t+"/columnCount",schemaPath:"#/properties/columnCount/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};s===null?s=[c]:s.push(c),i++}}if(e.drawVerticalLine!==void 0&&typeof e.drawVerticalLine!="function"){let a={instancePath:t+"/drawVerticalLine",schemaPath:"#/properties/drawVerticalLine/typeof",keyword:"typeof",params:{},message:'must pass "typeof" keyword validation'};s===null?s=[a]:s.push(a),i++}}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return Lk.errors=s,i===0}});var rD=j(fa=>{"use strict";var O9=fa&&fa.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fa,"__esModule",{value:!0});fa.validateConfig=void 0;var w9=O9(qk()),R9=(e,t)=>{let r=w9.default[e];if(!r(t)&&r.errors){let o=r.errors.map(n=>({message:n.message,params:n.params,schemaPath:n.schemaPath}));throw console.log("config",t),console.log("errors",o),new Error("Invalid config.")}};fa.validateConfig=R9});var Hk=j(Lm=>{"use strict";Object.defineProperty(Lm,"__esModule",{value:!0});Lm.makeStreamConfig=void 0;var F9=$e(),A9=rD(),v9=(e,t={},r)=>Array.from({length:e}).map((o,n)=>({alignment:"left",paddingLeft:1,paddingRight:1,truncate:Number.POSITIVE_INFINITY,verticalAlignment:"top",wrapWord:!1,...r,...t[n]})),M9=e=>{if((0,A9.validateConfig)("streamConfig.json",e),e.columnDefault.width===void 0)throw new Error("Must provide config.columnDefault.width when creating a stream.");return{drawVerticalLine:()=>!0,...e,border:(0,F9.makeBorderConfig)(e.border),columns:v9(e.columnCount,e.columns,e.columnDefault)}};Lm.makeStreamConfig=M9});var Hm=j(As=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});As.mapDataUsingRowHeights=As.padCellVertically=void 0;var k9=$e(),T9=Cm(),qm=e=>new Array(e).fill(""),I9=(e,t,r)=>{let o=t-e.length;return r==="top"?[...e,...qm(o)]:r==="bottom"?[...qm(o),...e]:[...qm(Math.floor(o/2)),...e,...qm(Math.ceil(o/2))]};As.padCellVertically=I9;var P9=(e,t,r)=>{let o=e[0].length,n=e.map((s,i)=>{let a=t[i],c=Array.from({length:a},()=>new Array(o).fill(""));return s.forEach((p,l)=>{var f;let d=(f=r.spanningCellManager)===null||f===void 0?void 0:f.getContainingRange({col:l,row:i});if(d){d.extractCellContent(i).forEach((w,A)=>{c[A][l]=w});return}let h=(0,T9.wrapCell)(p,r.columns[l].width,r.columns[l].wrapWord);(0,As.padCellVertically)(h,a,r.columns[l].verticalAlignment).forEach((w,A)=>{c[A][l]=w})}),c});return(0,k9.flatten)(n)};As.mapDataUsingRowHeights=P9});var jm=j(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});vs.padTableData=vs.padString=void 0;var N9=(e,t,r)=>" ".repeat(t)+e+" ".repeat(r);vs.padString=N9;var L9=(e,t)=>e.map((r,o)=>r.map((n,s)=>{var i;if((i=t.spanningCellManager)===null||i===void 0?void 0:i.getContainingRange({col:s,row:o},{mapped:!0}))return n;let{paddingLeft:c,paddingRight:p}=t.columns[s];return(0,vs.padString)(n,c,p)}));vs.padTableData=L9});var oD=j(Bm=>{"use strict";Object.defineProperty(Bm,"__esModule",{value:!0});Bm.stringifyTableData=void 0;var q9=$e(),H9=e=>e.map(t=>t.map(r=>(0,q9.normalizeString)(String(r))));Bm.stringifyTableData=H9});var cT=j((yu,ma)=>{"use strict";var j9=30,B9="...",nD=1/0,U9=17976931348623157e292,jk=0/0,W9="[object RegExp]",z9="[object Symbol]",K9=/^\s+|\s+$/g,$9=/\w*$/,G9=/^[-+]0x[0-9a-f]+$/i,V9=/^0b[01]+$/i,J9=/^0o[0-7]+$/i,uD="\\ud800-\\udfff",Jk="\\u0300-\\u036f\\ufe20-\\ufe23",Yk="\\u20d0-\\u20f0",Zk="\\ufe0e\\ufe0f",Y9="["+uD+"]",sD="["+Jk+Yk+"]",iD="\\ud83c[\\udffb-\\udfff]",Z9="(?:"+sD+"|"+iD+")",Qk="[^"+uD+"]",Xk="(?:\\ud83c[\\udde6-\\uddff]){2}",eT="[\\ud800-\\udbff][\\udc00-\\udfff]",tT="\\u200d",rT=Z9+"?",oT="["+Zk+"]?",Q9="(?:"+tT+"(?:"+[Qk,Xk,eT].join("|")+")"+oT+rT+")*",X9=oT+rT+Q9,e7="(?:"+[Qk+sD+"?",sD,Xk,eT,Y9].join("|")+")",aD=RegExp(iD+"(?="+iD+")|"+e7+X9,"g"),t7=RegExp("["+tT+uD+Jk+Yk+Zk+"]"),r7=parseInt,nT=typeof global=="object"&&global&&global.Object===Object&&global,o7=typeof self=="object"&&self&&self.Object===Object&&self,n7=nT||o7||Function("return this")(),sT=typeof yu=="object"&&yu&&!yu.nodeType&&yu,Bk=sT&&typeof ma=="object"&&ma&&!ma.nodeType&&ma,s7=Bk&&Bk.exports===sT,Uk=s7&&nT.process,Wk=function(){try{return Uk&&Uk.binding("util")}catch{}}(),zk=Wk&&Wk.isRegExp,i7=c7("length");function a7(e){return e.split("")}function c7(e){return function(t){return t?.[e]}}function u7(e){return function(t){return e(t)}}function pD(e){return t7.test(e)}function p7(e){return pD(e)?f7(e):i7(e)}function l7(e){return pD(e)?m7(e):a7(e)}function f7(e){for(var t=aD.lastIndex=0;aD.test(e);)t++;return t}function m7(e){return e.match(aD)||[]}var d7=Object.prototype,iT=d7.toString,Kk=n7.Symbol,$k=Kk?Kk.prototype:void 0,Gk=$k?$k.toString:void 0;function h7(e){return Um(e)&&iT.call(e)==W9}function g7(e,t,r){var o=-1,n=e.length;t<0&&(t=-t>n?0:n+t),r=r>n?n:r,r<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(n);++o<n;)s[o]=e[o+t];return s}function cD(e){if(typeof e=="string")return e;if(aT(e))return Gk?Gk.call(e):"";var t=e+"";return t=="0"&&1/e==-nD?"-0":t}function x7(e,t,r){var o=e.length;return r=r===void 0?o:r,!t&&r>=o?e:g7(e,t,r)}function Um(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function y7(e){return!!e&&typeof e=="object"}var b7=zk?u7(zk):h7;function aT(e){return typeof e=="symbol"||y7(e)&&iT.call(e)==z9}function D7(e){if(!e)return e===0?e:0;if(e=E7(e),e===nD||e===-nD){var t=e<0?-1:1;return t*U9}return e===e?e:0}function S7(e){var t=D7(e),r=t%1;return t===t?r?t-r:t:0}function E7(e){if(typeof e=="number")return e;if(aT(e))return jk;if(Um(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Um(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(K9,"");var r=V9.test(e);return r||J9.test(e)?r7(e.slice(2),r?2:8):G9.test(e)?jk:+e}function Vk(e){return e==null?"":cD(e)}function C7(e,t){var r=j9,o=B9;if(Um(t)){var n="separator"in t?t.separator:n;r="length"in t?S7(t.length):r,o="omission"in t?cD(t.omission):o}e=Vk(e);var s=e.length;if(pD(e)){var i=l7(e);s=i.length}if(r>=s)return e;var a=r-p7(o);if(a<1)return o;var c=i?x7(i,0,a).join(""):e.slice(0,a);if(n===void 0)return c+o;if(i&&(a+=c.length-a),b7(n)){if(e.slice(a).search(n)){var p,l=c;for(n.global||(n=RegExp(n.source,Vk($9.exec(n))+"g")),n.lastIndex=0;p=n.exec(l);)var f=p.index;c=c.slice(0,f===void 0?a:f)}}else if(e.indexOf(cD(n),a)!=a){var d=c.lastIndexOf(n);d>-1&&(c=c.slice(0,d))}return c+o}ma.exports=C7});var Wm=j(Wo=>{"use strict";var _7=Wo&&Wo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wo,"__esModule",{value:!0});Wo.truncateTableData=Wo.truncateString=void 0;var O7=_7(cT()),w7=(e,t)=>(0,O7.default)(e,{length:t,omission:"\u2026"});Wo.truncateString=w7;var R7=(e,t)=>e.map(r=>r.map((o,n)=>(0,Wo.truncateString)(o,t[n])));Wo.truncateTableData=R7});var lT=j(Km=>{"use strict";Object.defineProperty(Km,"__esModule",{value:!0});Km.createStream=void 0;var F7=Jb(),A7=Yb(),zm=Zb(),uT=Qb(),v7=Hk(),M7=Hm(),k7=jm(),T7=oD(),I7=Wm(),P7=$e(),pT=(e,t)=>{let r=(0,T7.stringifyTableData)(e);r=(0,I7.truncateTableData)(r,(0,P7.extractTruncates)(t));let o=(0,A7.calculateRowHeights)(r,t);return r=(0,M7.mapDataUsingRowHeights)(r,o,t),r=(0,F7.alignTableData)(r,t),r=(0,k7.padTableData)(r,t),r},N7=(e,t,r)=>{let n=pT([e],r).map(i=>(0,uT.drawRow)(i,r)).join(""),s;s="",s+=(0,zm.drawBorderTop)(t,r),s+=n,s+=(0,zm.drawBorderBottom)(t,r),s=s.trimEnd(),process.stdout.write(s)},L7=(e,t,r)=>{let n=pT([e],r).map(a=>(0,uT.drawRow)(a,r)).join(""),s="",i=(0,zm.drawBorderBottom)(t,r);i!==`
`&&(s="\r\x1B[K"),s+=(0,zm.drawBorderJoin)(t,r),s+=n,s+=i,s=s.trimEnd(),process.stdout.write(s)},q7=e=>{let t=(0,v7.makeStreamConfig)(e),r=Object.values(t.columns).map(n=>n.width+n.paddingLeft+n.paddingRight),o=!0;return{write:n=>{if(n.length!==t.columnCount)throw new Error("Row cell count does not match the config.columnCount.");o?(o=!1,N7(n,r,t)):L7(n,r,t)}}};Km.createStream=q7});var fT=j($m=>{"use strict";Object.defineProperty($m,"__esModule",{value:!0});$m.calculateOutputColumnWidths=void 0;var H7=e=>e.columns.map(t=>t.paddingLeft+t.width+t.paddingRight);$m.calculateOutputColumnWidths=H7});var mT=j(Gm=>{"use strict";Object.defineProperty(Gm,"__esModule",{value:!0});Gm.drawTable=void 0;var j7=Zb(),B7=Rm(),U7=Qb(),W7=$e(),z7=(e,t,r,o)=>{let{drawHorizontalLine:n,singleLine:s}=o,i=(0,W7.groupBySizes)(e,r).map((a,c)=>a.map(p=>(0,U7.drawRow)(p,{...o,rowIndex:c})).join(""));return(0,B7.drawContent)({contents:i,drawSeparator:(a,c)=>(a===0||a===c||!s)&&n(a,c),elementType:"row",rowIndex:-1,separatorGetter:(0,j7.createTableBorderGetter)(t,{...o,rowCount:i.length}),spanningCellManager:o.spanningCellManager})};Gm.drawTable=z7});var dT=j(Vm=>{"use strict";Object.defineProperty(Vm,"__esModule",{value:!0});Vm.injectHeaderConfig=void 0;var K7=(e,t)=>{var r;let o=(r=t.spanningCells)!==null&&r!==void 0?r:[],n=t.header,s=[...e];if(n){o=o.map(({row:c,...p})=>({...p,row:c+1}));let{content:i,...a}=n;o.unshift({alignment:"center",col:0,colSpan:e[0].length,paddingLeft:1,paddingRight:1,row:0,wrapWord:!1,...a}),s.unshift([i,...Array.from({length:e[0].length-1}).fill("")])}return[s,o]};Vm.injectHeaderConfig=K7});var gT=j(zo=>{"use strict";var $7=zo&&zo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zo,"__esModule",{value:!0});zo.calculateMaximumColumnWidths=zo.calculateMaximumCellWidth=void 0;var G7=$7(sa()),hT=$e(),V7=e=>Math.max(...e.split(`
`).map(G7.default));zo.calculateMaximumCellWidth=V7;var J7=(e,t=[])=>{let r=new Array(e[0].length).fill(0),o=t.map(hT.calculateRangeCoordinate),n=(s,i)=>o.some(a=>(0,hT.isCellInRange)({col:i,row:s},a));return e.forEach((s,i)=>{s.forEach((a,c)=>{n(i,c)||(r[c]=Math.max(r[c],(0,zo.calculateMaximumCellWidth)(a)))})}),r};zo.calculateMaximumColumnWidths=J7});var yT=j(Dn=>{"use strict";var Y7=Dn&&Dn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.alignVerticalRangeContent=Dn.wrapRangeContent=void 0;var Z7=Y7(sa()),Q7=Vb(),X7=Hm(),ez=jm(),tz=Wm(),xT=$e(),rz=Cm(),oz=(e,t,r)=>{let{topLeft:o,paddingRight:n,paddingLeft:s,truncate:i,wrapWord:a,alignment:c}=e,p=r.rows[o.row][o.col],l=t-s-n;return(0,rz.wrapCell)((0,tz.truncateString)(p,i),l,a).map(f=>{let d=(0,Q7.alignString)(f,l,c);return(0,ez.padString)(d,s,n)})};Dn.wrapRangeContent=oz;var nz=(e,t,r)=>{let{rows:o,drawHorizontalLine:n,rowHeights:s}=r,{topLeft:i,bottomRight:a,verticalAlignment:c}=e;if(s.length===0)return[];let p=(0,xT.sumArray)(s.slice(i.row,a.row+1)),l=a.row-i.row,f=(0,xT.sequence)(i.row+1,a.row).filter(h=>!n(h,o.length)).length,d=p+l-f;return(0,X7.padCellVertically)(t,d,c).map(h=>h.length===0?" ".repeat((0,Z7.default)(t[0])):h)};Dn.alignVerticalRangeContent=nz});var bT=j(Jm=>{"use strict";Object.defineProperty(Jm,"__esModule",{value:!0});Jm.calculateSpanningCellWidth=void 0;var lD=$e(),sz=(e,t)=>{let{columnsConfig:r,drawVerticalLine:o}=t,{topLeft:n,bottomRight:s}=e,i=(0,lD.sumArray)(r.slice(n.col,s.col+1).map(({width:l})=>l)),a=n.col===s.col?r[n.col].paddingRight+r[s.col].paddingLeft:(0,lD.sumArray)(r.slice(n.col,s.col+1).map(({paddingLeft:l,paddingRight:f})=>l+f)),c=s.col-n.col,p=(0,lD.sequence)(n.col+1,s.col).filter(l=>!o(l,r.length)).length;return i+a+c-p};Jm.calculateSpanningCellWidth=sz});var DT=j(Ym=>{"use strict";Object.defineProperty(Ym,"__esModule",{value:!0});Ym.makeRangeConfig=void 0;var iz=$e(),az=(e,t)=>{var r;let{topLeft:o,bottomRight:n}=(0,iz.calculateRangeCoordinate)(e);return{...{...t[o.col],...e,paddingRight:(r=e.paddingRight)!==null&&r!==void 0?r:t[n.col].paddingRight},bottomRight:n,topLeft:o}};Ym.makeRangeConfig=az});var CT=j(Zm=>{"use strict";Object.defineProperty(Zm,"__esModule",{value:!0});Zm.createSpanningCellManager=void 0;var ST=yT(),cz=bT(),uz=DT(),da=$e(),fD=(e,t)=>t.find(r=>(0,da.isCellInRange)(e,r)),ET=(e,t)=>{let r=(0,cz.calculateSpanningCellWidth)(e,t),o=(0,ST.wrapRangeContent)(e,r,t),n=(0,ST.alignVerticalRangeContent)(e,o,t);return{...e,extractBorderContent:a=>{let{topLeft:c}=e,p=(0,da.sumArray)(t.rowHeights.slice(c.row,a))+(a-c.row-1);return n[p]},extractCellContent:a=>{let{topLeft:c}=e,{drawHorizontalLine:p,rowHeights:l}=t,f=a-c.row,d=(0,da.sequence)(c.row+1,a).filter(S=>!p?.(S,l.length)).length,h=(0,da.sumArray)(l.slice(c.row,a))+f-d;return n.slice(h,h+l[a])},height:o.length,width:r}},pz=(e,t,r)=>{let o=fD(e,r),n=fD(t,r);return o&&n?(0,da.areCellEqual)(o.topLeft,n.topLeft):!1},lz=e=>{let{row:t,col:r}=e.topLeft;return`${t}/${r}`},fz=e=>{let{spanningCellConfigs:t,columnsConfig:r}=e,o=t.map(i=>(0,uz.makeRangeConfig)(i,r)),n={},s=[];return{getContainingRange:(i,a)=>{var c;let p=a?.mapped?(0,da.findOriginalRowIndex)(s,i.row):i.row,l=fD({...i,row:p},o);if(!l)return;if(s.length===0)return ET(l,{...e,rowHeights:s});let f=lz(l);return(c=n[f])!==null&&c!==void 0||(n[f]=ET(l,{...e,rowHeights:s})),n[f]},inSameRange:(i,a)=>pz(i,a,o),rowHeights:s,setRowHeights:i=>{s=i}}};Zm.createSpanningCellManager=fz});var _T=j(Xm=>{"use strict";Object.defineProperty(Xm,"__esModule",{value:!0});Xm.validateSpanningCellConfig=void 0;var mD=$e(),Qm=(e,t,r)=>e<=r&&r<=t,mz=(e,t)=>{let[r,o]=[e.length,e[0].length];t.forEach((i,a)=>{let{colSpan:c,rowSpan:p}=i;if(c===void 0&&p===void 0)throw new Error(`Expect at least colSpan or rowSpan is provided in config.spanningCells[${a}]`);if(c!==void 0&&c<1)throw new Error(`Expect colSpan is not equal zero, instead got: ${c} in config.spanningCells[${a}]`);if(p!==void 0&&p<1)throw new Error(`Expect rowSpan is not equal zero, instead got: ${p} in config.spanningCells[${a}]`)});let n=t.map(mD.calculateRangeCoordinate);n.forEach(({topLeft:i,bottomRight:a},c)=>{if(!Qm(0,o-1,i.col)||!Qm(0,r-1,i.row)||!Qm(0,o-1,a.col)||!Qm(0,r-1,a.row))throw new Error(`Some cells in config.spanningCells[${c}] are out of the table`)});let s=Array.from({length:r},()=>Array.from({length:o}));n.forEach(({topLeft:i,bottomRight:a},c)=>{(0,mD.sequence)(i.row,a.row).forEach(p=>{(0,mD.sequence)(i.col,a.col).forEach(l=>{if(s[p][l]!==void 0)throw new Error(`Spanning cells in config.spanningCells[${s[p][l]}] and config.spanningCells[${c}] are overlap each other`);s[p][l]=c})})})};Xm.validateSpanningCellConfig=mz});var OT=j(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});ed.makeTableConfig=void 0;var dz=gT(),hz=CT(),gz=$e(),xz=rD(),yz=_T(),bz=(e,t,r,o)=>{let n=(0,dz.calculateMaximumColumnWidths)(e,o);return e[0].map((s,i)=>({alignment:"left",paddingLeft:1,paddingRight:1,truncate:Number.POSITIVE_INFINITY,verticalAlignment:"top",width:n[i],wrapWord:!1,...r,...t?.[i]}))},Dz=(e,t={},r)=>{var o,n,s,i,a;(0,xz.validateConfig)("config.json",t),(0,yz.validateSpanningCellConfig)(e,(o=t.spanningCells)!==null&&o!==void 0?o:[]);let c=(n=r??t.spanningCells)!==null&&n!==void 0?n:[],p=bz(e,t.columns,t.columnDefault,c),l=(s=t.drawVerticalLine)!==null&&s!==void 0?s:()=>!0,f=(i=t.drawHorizontalLine)!==null&&i!==void 0?i:()=>!0;return{...t,border:(0,gz.makeBorderConfig)(t.border),columns:p,drawHorizontalLine:f,drawVerticalLine:l,singleLine:(a=t.singleLine)!==null&&a!==void 0?a:!1,spanningCellManager:(0,hz.createSpanningCellManager)({columnsConfig:p,drawHorizontalLine:f,drawVerticalLine:l,rows:e,spanningCellConfigs:c})}};ed.makeTableConfig=Dz});var wT=j(td=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});td.validateTableData=void 0;var Sz=$e(),Ez=e=>{if(!Array.isArray(e))throw new TypeError("Table data must be an array.");if(e.length===0)throw new Error("Table must define at least one row.");if(e[0].length===0)throw new Error("Table must define at least one column.");let t=e[0].length;for(let r of e){if(!Array.isArray(r))throw new TypeError("Table row data must be an array.");if(r.length!==t)throw new Error("Table must have a consistent number of cells.");for(let o of r)if(/[\u0001-\u0006\u0008\u0009\u000B-\u001A]/.test((0,Sz.normalizeString)(String(o))))throw new Error("Table data must not contain control characters.")}};td.validateTableData=Ez});var RT=j(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});rd.table=void 0;var Cz=Jb(),_z=fT(),Oz=Yb(),wz=mT(),Rz=dT(),Fz=OT(),Az=Hm(),vz=jm(),Mz=oD(),kz=Wm(),Tz=$e(),Iz=wT(),Pz=(e,t={})=>{(0,Iz.validateTableData)(e);let r=(0,Mz.stringifyTableData)(e),[o,n]=(0,Rz.injectHeaderConfig)(r,t),s=(0,Fz.makeTableConfig)(o,t,n);r=(0,kz.truncateTableData)(o,(0,Tz.extractTruncates)(s));let i=(0,Oz.calculateRowHeights)(r,s);s.spanningCellManager.setRowHeights(i),r=(0,Az.mapDataUsingRowHeights)(r,i,s),r=(0,Cz.alignTableData)(r,s),r=(0,vz.padTableData)(r,s);let a=(0,_z.calculateOutputColumnWidths)(s);return(0,wz.drawTable)(r,a,i,s)};rd.table=Pz});var AT=j(FT=>{"use strict";Object.defineProperty(FT,"__esModule",{value:!0})});var vT=j(Vt=>{"use strict";var Nz=Vt&&Vt.__createBinding||(Object.create?function(e,t,r,o){o===void 0&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){o===void 0&&(o=r),e[o]=t[r]}),Lz=Vt&&Vt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Nz(t,e,r)};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.getBorderCharacters=Vt.createStream=Vt.table=void 0;var qz=lT();Object.defineProperty(Vt,"createStream",{enumerable:!0,get:function(){return qz.createStream}});var Hz=Kb();Object.defineProperty(Vt,"getBorderCharacters",{enumerable:!0,get:function(){return Hz.getBorderCharacters}});var jz=RT();Object.defineProperty(Vt,"table",{enumerable:!0,get:function(){return jz.table}});Lz(AT(),Vt)});var hD=e=>typeof e=="function",u=function(e,t){if(typeof e=="function")return function(){return e(arguments)?t.apply(this,arguments):r=>t(r,...arguments)};switch(e){case 0:return t;case 1:return function(r){return arguments.length>=1?t(r):function(){return t(r)}};case 2:return function(r,o){return arguments.length>=2?t(r,o):function(n){return t(n,r)}};case 3:return function(r,o,n){return arguments.length>=3?t(r,o,n):function(s){return t(s,r,o)}};case 4:return function(r,o,n,s){return arguments.length>=4?t(r,o,n,s):function(i){return t(i,r,o,n)}};case 5:return function(r,o,n,s,i){return arguments.length>=5?t(r,o,n,s,i):function(a){return t(a,r,o,n,s)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);let r=arguments;return function(o){return t(o,...r)}}}};var k=e=>e;var Ms=e=>()=>e,Lr=Ms(!0),Yt=Ms(!1),nd=Ms(null),Su=Ms(void 0),ks=Su;function et(e,t,r,o,n,s,i,a,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return r(t(e));case 4:return o(r(t(e)));case 5:return n(o(r(t(e))));case 6:return s(n(o(r(t(e)))));case 7:return i(s(n(o(r(t(e))))));case 8:return a(i(s(n(o(r(t(e)))))));case 9:return c(a(i(s(n(o(r(t(e))))))));default:{let p=arguments[0];for(let l=1;l<arguments.length;l++)p=arguments[l](p);return p}}}var Ts=e=>(t,r)=>t===r||e(t,r);var gD=u(2,(e,t)=>Ts((r,o)=>e(t(r),t(o))));var xD=e=>Ts((t,r)=>{if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(!e(t[o],r[o]))return!1;return!0});var yo=e=>(t,r)=>t===r?0:e(t,r);var sd=yo((e,t)=>e<t?-1:1);var yD=e=>yo((t,r)=>e(r,t));var BT=u(2,(e,t)=>yo((r,o)=>{let n=e(r,o);if(n!==0)return n;for(let s of t)if(n=s(r,o),n!==0)return n;return n})),UT=()=>yo(()=>0),bD=e=>BT(UT(),e),Cn=u(2,(e,t)=>yo((r,o)=>e(t(r),t(o))));var WT=e=>yo((t,r)=>{let o=Math.min(t.length,r.length),n=0;for(let s of e){if(n>=o)break;let i=s(t[n],r[n]);if(i!==0)return i;n++}return 0});var DD=(...e)=>WT(e),SD=e=>yo((t,r)=>{let o=t.length,n=r.length,s=Math.min(o,n);for(let i=0;i<s;i++){let a=e(t[i],r[i]);if(a!==0)return a}return sd(o,n)});var id=e=>u(2,(t,r)=>e(t,r)===1);var ad=e=>u(2,(t,r)=>t===r||e(t,r)<1?t:r),ha=e=>u(2,(t,r)=>t===r||e(t,r)>-1?t:r);var xa=e=>typeof e=="string",_n=e=>typeof e=="number",Cu=e=>typeof e=="boolean",Is=e=>typeof e=="bigint",ED=e=>typeof e=="symbol",CD=hD,ya=e=>e===void 0;var _D=e=>e===null;var OD=e=>!1;var ge=e=>typeof e=="object"&&e!=null||CD(e);var On=e=>e==null,wD=e=>e!=null;var _u=e=>e instanceof Date,Zt=e=>ge(e)&&Symbol.iterator in e,ba=e=>ge(e)&&!Array.isArray(e);var RD=e=>!e;var FD,AD=Symbol.for("@effect/data/Gen/GenKind"),cd=class{constructor(t){this.value=t,this[FD]=AD}get _F(){return k}get _R(){return t=>t}get _O(){return t=>t}get _E(){return t=>t}[(FD=AD,Symbol.iterator)](){return new ud(this)}},ud=class e{constructor(t){this.self=t,this.called=!1}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new e(this.self)}};var vD=()=>function(){let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return new cd(e)};var $T=335903614,GT=4150755663,VT=1481765933,JT=1284865837,YT=9007199254740992,ZT=134217728,Ps=class{constructor(t,r,o,n){return On(r)&&On(t)?(r=Math.random()*4294967295>>>0,t=0):On(r)&&(r=t,t=0),On(n)&&On(o)?(n=this._state?this._state[3]:GT,o=this._state?this._state[2]:$T):On(n)&&(n=o,o=0),this._state=new Int32Array([0,0,o>>>0,((n||0)|1)>>>0]),this._next(),MD(this._state,this._state[0],this._state[1],t>>>0,r>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(t){this._state[0]=t[0],this._state[1]=t[1],this._state[2]=t[2],this._state[3]=t[3]|1}integer(t){if(!t)return this._next();if(t=t>>>0,!(t&t-1))return this._next()&t-1;let r=0,o=(-t>>>0)%t>>>0;for(r=this._next();r<o;r=this._next());return r%t}number(){let t=(this._next()&67108863)*1,r=(this._next()&134217727)*1;return(t*ZT+r)/YT}_next(){let t=this._state[0]>>>0,r=this._state[1]>>>0;QT(this._state,t,r,VT,JT),MD(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let o=t>>>18,n=(r>>>18|t<<14)>>>0;o=(o^t)>>>0,n=(n^r)>>>0;let s=(n>>>27|o<<5)>>>0,i=t>>>27,a=(-i>>>0&31)>>>0;return(s>>>i|s<<a)>>>0}};function QT(e,t,r,o,n){let s=(r>>>16)*(n&65535)>>>0,i=(r&65535)*(n>>>16)>>>0,a=(r&65535)*(n&65535)>>>0,c=(r>>>16)*(n>>>16)+((i>>>16)+(s>>>16))>>>0;i=i<<16>>>0,a=a+i>>>0,a>>>0<i>>>0&&(c=c+1>>>0),s=s<<16>>>0,a=a+s>>>0,a>>>0<s>>>0&&(c=c+1>>>0),c=c+Math.imul(r,o)>>>0,c=c+Math.imul(t,n)>>>0,e[0]=c,e[1]=a}function MD(e,t,r,o,n){let s=t+o>>>0,i=r+n>>>0;i>>>0<r>>>0&&(s=s+1|0),e[0]=s,e[1]=i}var ld=Symbol.for("@effect/data/Global/globalStoreId");ld in globalThis||(globalThis[ld]=new Map);var pd=globalThis[ld],Y=(e,t)=>(pd.has(e)||pd.set(e,t()),pd.get(e));var fd=Y(Symbol.for("@effect/data/Hash/randomHashCache"),()=>new WeakMap),t1=Y(Symbol.for("@effect/data/Hash/pcgr"),()=>new Ps),R=Symbol.for("@effect/data/Hash"),E=e=>{switch(typeof e){case"number":return wu(e);case"bigint":return je(e.toString(10));case"boolean":return je(String(e));case"symbol":return je(String(e));case"string":return je(e);case"undefined":return je("undefined");case"function":case"object":return e===null?je("null"):r1(e)?e[R]():Ko(e);default:throw new Error("Bug in Equal.hash")}},Ko=e=>(fd.has(e)||fd.set(e,wu(t1.integer(Number.MAX_SAFE_INTEGER))),fd.get(e)),T=e=>t=>t*53^e,Ou=e=>e&3221225471|e>>>1&1073741824,r1=e=>typeof e=="object"&&e!==null&&R in e,wu=e=>{if(e!==e||e===1/0)return 0;let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return Ou(e)},je=e=>{let t=5381,r=e.length;for(;r;)t=t*33^e.charCodeAt(--r);return Ou(t)},o1=(e,t)=>{let r=12289;for(let o=0;o<t.length;o++)r^=T(E(e[t[o]]))(je(t[o]));return Ou(r)},Sa=e=>o1(e,Object.keys(e)),bo=e=>{let t=6151;for(let r=0;r<e.length;r++)t=T(E(e[r]))(t);return Ou(t)};var F=Symbol.for("@effect/data/Equal");function O(){return arguments.length===1?e=>kD(e,arguments[0]):kD(arguments[0],arguments[1])}function kD(e,t){if(e===t)return!0;let r=typeof e;return r!==typeof t?!1:(r==="object"||r==="function")&&e!==null&&t!==null&&Ns(e)&&Ns(t)?E(e)===E(t)&&e[F](t):!1}var Ns=e=>typeof e=="object"&&e!==null&&F in e,$o=()=>(e,t)=>E(e)===E(t)&&O(e,t);var Go=Symbol.for("@effect/io/Effect"),Vo={_R:e=>e,_E:e=>e,_A:e=>e};var C=(e,t)=>{switch(t.length){case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let r=e;for(let o=0,n=t.length;o<n;o++)r=t[o](r);return r}}};var TD,ID,Ru=Symbol.for("@effect/data/Option"),md=class{[(TD=Go,F)](t){return PD(t)&&hd(t)&&O(t.i0,this.i0)}[R](){return E(this.i0)}toString(){return`Some(${String(this.i0)})`}toJSON(){return{_tag:this._tag,value:this.i0}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}get[Ru](){return{_A:t=>t}}get value(){return this.i0}constructor(t){this.i0=t,this._tag="Some",this._id=Ru,this.i1=void 0,this.i2=void 0,this[TD]=Vo}pipe(){return C(this,arguments)}},dd=class{constructor(){this._tag="None",this._id=Ru,this.i0=void 0,this.i1=void 0,this.i2=void 0,this[ID]=Vo}[(ID=Go,F)](t){return PD(t)&&Fu(t)}[R](){return E(this._tag)}toString(){return"None()"}toJSON(){return{_tag:this._tag}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}get[Ru](){return{_A:t=>t}}pipe(){return C(this,arguments)}},PD=e=>typeof e=="object"&&e!=null&&"_tag"in e&&(e._tag==="None"||e._tag==="Some")&&Ns(e),Fu=e=>e._tag==="None",hd=e=>e._tag==="Some",Ls=new dd,qs=e=>new md(e);var LD,qD,Au=Symbol.for("@effect/data/Either"),gd=class{[(LD=Go,F)](t){return HD(t)&&vu(t)&&O(t.i0,this.i0)}[R](){return E(this.i0)}get right(){return this.i0}constructor(t){this.i0=t,this._tag="Right",this._id=Au,this.i1=void 0,this.i2=void 0,this[LD]=Vo}get[Au](){return{_E:t=>t,_A:t=>t}}toString(){return`right(${String(this.i0)})`}toJSON(){return{_tag:this._tag,right:this.i0}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},xd=class{[(qD=Go,F)](t){return HD(t)&&Hs(t)&&O(t.i0,this.i0)}[R](){return E(this.i0)}get[Au](){return{_E:t=>t,_A:t=>t}}get left(){return this.i0}constructor(t){this.i0=t,this._tag="Left",this._id=Au,this.i1=void 0,this.i2=void 0,this[qD]=Vo}toString(){return`left(${String(this.i0)})`}toJSON(){return{_tag:this._tag,left:this.i0}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},HD=e=>typeof e=="object"&&e!=null&&"_tag"in e&&(e._tag==="Left"||e._tag==="Right")&&Ns(e),Hs=e=>e._tag==="Left",vu=e=>e._tag==="Right",Mu=e=>new xd(e),ku=e=>new gd(e),yd=e=>vu(e)?Ls:qs(e.left),bd=e=>Hs(e)?Ls:qs(e.right);var n1=Symbol.for("@effect/data/Either"),B=ku,K=Mu;var Ea=e=>ge(e)&&"_id"in e&&e._id===n1,xe=Hs,qr=vu;var Ca=u(2,(e,{onLeft:t,onRight:r})=>xe(e)?t(e.left):r(e.right)),Tu=Ca({onLeft:k,onRight:k});var BD=u(2,(e,t)=>e+t),UD=u(2,(e,t)=>e*t),WD=u(2,(e,t)=>e-t),zD=u(2,(e,t)=>e/t);var Tt=sd;var KD=Symbol.for("@effect/data/Option"),g=()=>Ls,x=qs,Dd=e=>ge(e)&&"_id"in e&&e._id===KD,H=Fu,L=hd,Be=u(2,(e,{onNone:t,onSome:r})=>H(e)?t():r(e.value)),c1=e=>t=>L(e(t)),u1=e=>{for(let t of e)return x(t);return g()},$D=bd,p1=yd,V=u(2,(e,t)=>H(e)?t():e.value),wn=u(2,(e,t)=>H(e)?t():e),l1=u(2,(e,t)=>H(e)?re(t(),ku):re(e,Mu)),f1=e=>{let t=g();for(t of e)if(L(t))return t;return t},tt=e=>e==null?g():x(e),m1=e=>(...t)=>tt(e(...t)),Sd=V(nd),Ge=V(Su),d1=e=>(...t)=>{try{return x(e(...t))}catch{return g()}},GD=u(2,(e,t)=>{if(L(e))return e.value;throw t()}),Ed=GD(()=>new Error("getOrThrow called on a None")),re=u(2,(e,t)=>H(e)?g():x(t(e.value))),VD=u(2,(e,t)=>re(e,()=>t)),h1=VD(void 0),g1=x(void 0),gr=u(2,(e,t)=>H(e)?g():t(e.value)),x1=u(2,(e,t)=>H(e)?g():tt(t(e.value))),Cd=gr(k),y1=u(2,(e,t)=>gr(e,()=>t)),b1=u(2,(e,t)=>r=>gr(e(r),t)),D1=u(2,(e,t)=>JD(e,()=>t)),JD=u(2,(e,t)=>gr(e,r=>re(t(r),()=>r))),YD=(e,t)=>L(e)&&L(t)?x([e.value,t.value]):g(),S1=(e,t)=>{if(H(e))return g();let r=[e.value];for(let o of t){if(H(o))return g();r.push(o.value)}return x(r)},ZD=e=>{if(Symbol.iterator in e){let r=[];for(let o of e){if(H(o))return g();r.push(o.value)}return x(r)}let t={};for(let r of Object.keys(e)){let o=e[r];if(H(o))return g();t[r]=o.value}return x(t)},_d=u(3,(e,t,r)=>re(YD(e,t),([o,n])=>r(o,n))),E1=u(2,(e,t)=>_d(e,t,(r,o)=>r(o))),C1=u(3,(e,t,r)=>{let o=t;for(let n of e)L(n)&&(o=r(o,n.value));return o}),Od=e=>H(e)?[]:[e.value],_1=u(2,(e,t)=>{if(H(e))return[g(),g()];let r=t(e.value);return Hs(r)?[x(r.left),g()]:[g(),x(r.right)]}),QD=u(2,(e,t)=>H(e)?g():t(e.value)),O1=u(2,(e,t)=>QD(e,r=>t(r)?qs(r):Ls)),w1=e=>Ts((t,r)=>t===r||(H(t)?H(r):H(r)?!1:e(t.value,r.value))),R1=e=>yo((t,r)=>L(t)?L(r)?e(t.value,r.value):1:-1),Oa=e=>u(2,(t,r)=>_d(t,r,e)),XD=e=>t=>e(t)?x(t):g(),eS=e=>u(2,(t,r)=>H(t)?!1:e(t.value,r)),F1=$o(),wd=eS(F1),A1=u(2,(e,t)=>H(e)?!1:t(e.value)),v1=Oa(BD),M1=Oa(UD),k1=Oa(WD),T1=Oa(zD),I1=e=>{let t=0;for(let r of e)L(r)&&(t+=r.value);return t},P1=e=>{let t=1;for(let r of e)if(L(r)){let o=r.value;if(o===0)return 0;t*=o}return t},N1=u(2,(e,t)=>re(e,r=>({[t]:r}))),L1=u(3,(e,t,r)=>re(e,o=>Object.assign({},o,{[t]:r(o)})));var q1=u(3,(e,t,r)=>gr(e,o=>re(r(o),n=>Object.assign({},o,{[t]:n})))),H1=x({}),j1=vD(),B1=e=>{let t=e(j1),r=t.next();if(r.done)return x(void 0);{let o=r.value.value;if(H(o))return o;for(;!r.done;)if(r=t.next(o.value),!r.done&&(o=r.value.value,H(o)))return o;return x(r.value)}};var Iu=e=>e.length>0;var W1=u(2,(e,t)=>{let r=[];for(let o of Object.keys(e))r.push(t(o,e[o]));return r}),tS=W1((e,t)=>[e,t]);var rS=(...e)=>e,js=(e,t)=>{let r=Math.max(1,Math.floor(e)),o=[t(0)];for(let n=1;n<r;n++)o.push(t(n));return o},K1=(e,t)=>e<=t?js(t-e+1,r=>e+r):[e],$1=u(2,(e,t)=>js(t,()=>e)),I=e=>Array.isArray(e)?e:Array.from(e),G1=tS,oS=Od,V1=u(2,(e,{onEmpty:t,onNonEmpty:r})=>se(e)?r(e):t()),J1=u(2,(e,{onEmpty:t,onNonEmpty:r})=>se(e)?r(oe(e),Ue(e)):t()),Y1=u(2,(e,{onEmpty:t,onNonEmpty:r})=>se(e)?r(va(e),Bs(e)):t()),It=u(2,(e,t)=>[t,...e]),nS=u(2,(e,t)=>I(t).concat(I(e))),Z1=u(2,(e,t)=>nS(e,t)),Pu=u(2,(e,t)=>[...e,t]),sS=u(2,(e,t)=>I(e).concat(I(t))),Rd=u(2,(e,t)=>sS(e,t)),Q1=u(3,(e,t,r)=>{let o=[t],n=0;for(let s of e)o[n+1]=r(o[n],s),n++;return o}),X1=u(3,(e,t,r)=>{let o=I(e),n=new Array(o.length+1);n[o.length]=t;for(let s=o.length-1;s>=0;s--)n[s]=r(n[s+1],o[s]);return n}),iS=e=>e.length===0,wa=iS,Ra=Iu,se=Iu,eI=e=>e.length,Fa=(e,t)=>e<0||e>=t.length,Nu=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),aS=u(2,(e,t)=>{let r=Math.floor(t);return Fa(r,e)?g():x(e[r])}),Lu=u(2,(e,t)=>{let r=Math.floor(t);if(Fa(r,e))throw new Error(`Index ${r} out of bounds`);return e[r]}),tI=e=>[oe(e),Ue(e)],rI=e=>[va(e),Bs(e)],Aa=aS(0),oe=Lu(0),Fd=e=>se(e)?x(Bs(e)):g(),Bs=e=>e[e.length-1],oI=e=>{let t=I(e);return se(t)?x(Ue(t)):g()},Ue=e=>e.slice(1),nI=e=>{let t=I(e);return se(t)?x(va(t)):g()},va=e=>e.slice(0,-1),sI=u(2,(e,t)=>{let r=I(e);return r.slice(0,Nu(t,r))}),iI=u(2,(e,t)=>{let r=I(e),o=Nu(t,r);return o===0?[]:r.slice(-o)}),aI=u(2,(e,t)=>{let r=[];for(let o of e){if(!t(o))break;r.push(o)}return r}),cS=(e,t)=>{let r=0;for(let o of e){if(!t(o))break;r++}return r},cI=u(2,(e,t)=>CS(e,cS(e,t))),uI=u(2,(e,t)=>{let r=I(e);return r.slice(Nu(t,r),r.length)}),pI=u(2,(e,t)=>{let r=I(e);return r.slice(0,r.length-Nu(t,r))}),lI=u(2,(e,t)=>I(e).slice(cS(e,t))),uS=u(2,(e,t)=>{let r=0;for(let o of e){if(t(o))return x(r);r++}return g()}),pS=u(2,(e,t)=>{let r=I(e);for(let o=r.length-1;o>=0;o--)if(t(r[o]))return x(o);return g()}),lS=u(2,(e,t)=>{let r=I(e);for(let o=0;o<r.length;o++)if(t(r[o]))return x(r[o]);return g()}),fS=u(2,(e,t)=>{let r=I(e);for(let o=r.length-1;o>=0;o--)if(t(r[o]))return x(r[o]);return g()}),fI=u(3,(e,t,r)=>{let o=Array.from(e);return t<0||t>o.length?g():(o.splice(t,0,r),x(o))}),mI=u(3,(e,t,r)=>mS(e,t,()=>r)),dI=u(3,(e,t,r)=>qu(e,t,()=>r)),mS=u(3,(e,t,r)=>V(qu(e,t,r),()=>Array.from(e))),qu=u(3,(e,t,r)=>{let o=Array.from(e);if(Fa(t,o))return g();let n=r(o[t]);return o[t]=n,x(o)}),dS=u(2,(e,t)=>{let r=Array.from(e);return Fa(t,r)||r.splice(t,1),r}),Hu=e=>Array.from(e).reverse(),hI=e=>[Bs(e),...e.slice(0,-1).reverse()],Hr=u(2,(e,t)=>{let r=Array.from(e);return r.sort(t),r}),gI=u(3,(e,t,r)=>Hr(e,Cn(r,t))),hS=u(2,(e,t)=>Hr(t)(e)),xI=(...e)=>t=>{let r=I(t);return se(r)?gS(...e)(r):[]},gS=(...e)=>hS(bD(e)),ju=u(2,(e,t)=>Ad(e,t,(r,o)=>[r,o])),Ad=u(3,(e,t,r)=>{let o=I(e),n=I(t);return se(o)&&se(n)?vd(n,r)(o):[]}),yI=u(2,(e,t)=>vd(e,t,(r,o)=>[r,o])),vd=u(3,(e,t,r)=>{let o=[r(oe(e),oe(t))],n=Math.min(e.length,t.length);for(let s=1;s<n;s++)o[s]=r(e[s],t[s]);return o}),xS=e=>{let t=I(e);return se(t)?yS(t):[[],[]]},yS=e=>{let t=[e[0][0]],r=[e[0][1]];for(let o=1;o<e.length;o++)t[o]=e[o][0],r[o]=e[o][1];return[t,r]},bI=u(2,(e,t)=>{let r=I(e);return se(r)?bS(r,t):[]}),bS=u(2,(e,t)=>{let r=[oe(e)],o=Ue(e);for(let n=0;n<o.length;n++)n<o.length&&r.push(t),r.push(o[n]);return r}),DS=u(2,(e,t)=>[t(oe(e)),...Ue(e)]),DI=u(2,(e,t)=>DS(e,()=>t)),SS=u(2,(e,t)=>Pu(va(e),t(Bs(e)))),SI=u(2,(e,t)=>SS(e,()=>t)),EI=u(2,(e,t)=>{let r=I(e);return se(r)?Md(r,t):[]}),Md=u(2,(e,t)=>{let r=e.length,o=Math.round(t)%r;if(Fa(Math.abs(o),e)||o===0)return kd(e);if(o<0){let[n,s]=Wu(e,-o);return Rd(s,n)}else return Md(e,o-r)}),Ma=e=>u(2,(t,r)=>{for(let o of t)if(e(r,o))return!0;return!1}),ka=$o(),ES=Ma(ka),Bu=u(2,(e,t)=>{let r=[oe(e)],o=Ue(e);for(let n of o)r.every(s=>!t(n,s))&&r.push(n);return r}),CI=Bu($o()),_I=u(2,(e,t)=>{let r=I(e);return se(r)?Uu(r,t):[]}),Uu=u(2,(e,t)=>{let[r,o]=t(e),n=[r],s=o;for(;Iu(s);){let[i,a]=t(s);n.push(i),s=a}return n}),CS=u(2,(e,t)=>{let r=Array.from(e);return t>=1&&se(r)?Wu(r,t):wa(r)?[r,[]]:[[],r]}),kd=e=>e.slice(),Wu=u(2,(e,t)=>{let r=Math.max(1,t);return r>=e.length?[kd(e),[]]:[It(e.slice(1,r),oe(e)),e.slice(r)]}),OI=u(2,(e,t)=>{let r=I(e);return se(r)?_S(r,t):[]}),_S=u(2,(e,t)=>Uu(e,Wu(t))),OS=u(2,(e,t)=>Uu(e,r=>{let o=oe(r),n=[o],s=1;for(;s<r.length;s++){let i=r[s];if(t(i,o))n.push(i);else break}return[n,r.slice(s)]})),wI=OS($o()),RI=u(2,(e,t)=>{let r={};for(let o of e){let n=t(o);Object.prototype.hasOwnProperty.call(r,n)?r[n].push(o):r[n]=[o]}return r}),wS=e=>u(2,(t,r)=>{let o=I(t),n=I(r);return se(o)&&se(n)?Td(e)(o,n):se(o)?o:n}),RS=wS(ka),Td=e=>{let t=Bu(e);return u(2,(r,o)=>t(Rd(r,o)))},FI=Td(ka),FS=e=>{let t=Ma(e);return u(2,(r,o)=>I(r).filter(n=>t(o,n)))},AS=FS(ka),vS=e=>{let t=Ma(e);return u(2,(r,o)=>I(r).filter(n=>!t(o,n)))},AI=vS(ka),jr=()=>[],Et=e=>[e],xr=u(2,(e,t)=>e.map(t)),Rn=xr,Fn=u(2,(e,t)=>{if(wa(e))return[];let r=[];for(let o=0;o<e.length;o++)r.push(...t(e[o],o));return r}),MS=Fn,Ta=Fn(k),vI=MS(k),Us=u(2,(e,t)=>{let r=I(e),o=[];for(let n=0;n<r.length;n++){let s=t(r[n],n);L(s)&&o.push(s.value)}return o}),kS=u(2,(e,t)=>{let r=[];for(let o of e){let n=t(o);if(L(n))r.push(n.value);else break}return r}),Id=u(2,(e,t)=>{let r=[],o=[],n=I(e);for(let s=0;s<n.length;s++){let i=t(n[s],s);xe(i)?r.push(i.left):o.push(i.right)}return[r,o]}),Pd=Us(k),MI=u(2,(e,t)=>{let r=I(e),o=[];for(let n=0;n<r.length;n++)t(r[n],n)&&o.push(r[n]);return o}),TS=u(2,(e,t)=>{let r=[],o=[],n=I(e);for(let s=0;s<n.length;s++)t(n[s],s)?o.push(n[s]):r.push(n[s]);return[r,o]}),IS=Id(k),pt=u(3,(e,t,r)=>I(e).reduce((o,n,s)=>r(o,n,s),t)),Ia=u(3,(e,t,r)=>I(e).reduceRight((o,n,s)=>r(o,n,s),t)),kI=e=>t=>e(t)?[t]:[],TI=e=>(...t)=>oS(e(...t)),Nd=e=>e==null?jr():[e],II=e=>(...t)=>Nd(e(...t)),PI=u(2,(e,t)=>se(e)?Nd(t(oe(e))):jr()),NI=e=>(...t)=>{let r=e(...t);return xe(r)?[]:[r.right]},LI=u(2,(e,t)=>e.every(t)),qI=u(2,(e,t)=>e.some(t)),HI=u(2,(e,t)=>e.map((r,o,n)=>t(n.slice(o)))),jI=u(2,(e,t)=>e.reduce(ad(t))),BI=u(2,(e,t)=>e.reduce(ha(t))),zu=(e,t)=>{let r=[],o=e,n;for(;L(n=t(o));){let[s,i]=n.value;r.push(s),o=i}return r},UI=SD,Ld=xD,WI=u(2,(e,t)=>I(e).forEach((r,o)=>t(r,o))),PS=u(2,(e,t)=>{let r=I(e);return se(r)?Bu(t)(r):[]}),qd=PS($o()),NS=u(2,(e,t)=>{let r=[],o=g();for(let n of e)(H(o)||!t(n,o.value))&&(r.push(n),o=x(n));return r}),LS=NS($o()),Br=u(2,(e,t)=>I(e).join(t)),qS=u(3,(e,t,r)=>{let o=t,n=[];for(let s of e){let i=r(o,s);o=i[0],n.push(i[1])}return[o,n]}),HS=u(3,(e,t,r)=>Fn(e,o=>xr(t,n=>r(o,n)))),zI=u(2,(e,t)=>HS(e,t,(r,o)=>[r,o]));var jS,Hd=Symbol.for("@effect/data/Context/Tag"),Ku=class{[(jS=Go,F)](t){return this===t}[R](){return Ko(this)}get[Hd](){return{_S:t=>t,_I:t=>t}}constructor(t){this._tag="Tag",this.i0=void 0,this.i1=void 0,this.i2=void 0,this[jS]=Vo;let r=Error.stackTraceLimit;if(Error.stackTraceLimit=3,this.creationError=new Error,Error.stackTraceLimit=r,typeof t<"u")return this.i0=t,Y(t,()=>this)}get stack(){return this.creationError.stack}toString(){return JSON.stringify(this)}toJSON(){return{_tag:"Tag",identifier:this.i0,stack:this.stack}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}of(t){return t}context(t){return Ud(this,t)}},jd=Symbol.for("@effect/data/Context"),yr=class{[F](t){if(Bd(t)&&this.unsafeMap.size===t.unsafeMap.size){for(let r of this.unsafeMap.keys())if(!t.unsafeMap.has(r)||!O(this.unsafeMap.get(r),t.unsafeMap.get(r)))return!1;return!0}return!1}[R](){return wu(this.unsafeMap.size)}constructor(t){this.unsafeMap=t,this._id=jd,this._S=r=>r}pipe(){return C(this,arguments)}},KI=e=>{let t=new Error(`Service not found${e.i0?`: ${String(e.i0)}`:""}`);if(e.stack){let r=e.stack.split(`
`);if(r.length>2){let o=r[3].match(/at (.*)/);o&&(t.message=t.message+` (defined at ${o[1]})`)}}if(t.stack){let r=t.stack.split(`
`);r.splice(1,3),t.stack=r.join(`
`)}return t},Bd=e=>typeof e=="object"&&e!==null&&"_id"in e&&e._id===jd,BS=e=>typeof e=="object"&&e!==null&&Hd in e,US=()=>new yr(new Map),Ud=(e,t)=>new yr(new Map([[e,t]])),WS=u(3,(e,t,r)=>{let o=new Map(e.unsafeMap);return o.set(t,r),new yr(o)}),Wd=u(2,(e,t)=>{if(!e.unsafeMap.has(t))throw KI(t);return e.unsafeMap.get(t)}),zS=Wd,KS=u(2,(e,t)=>e.unsafeMap.has(t)?x(e.unsafeMap.get(t)):g()),$S=u(2,(e,t)=>{let r=new Map(e.unsafeMap);for(let[o,n]of t.unsafeMap)r.set(o,n);return new yr(r)}),GS=(...e)=>t=>{let r=new Set(e),o=new Map;for(let[n,s]of t.unsafeMap.entries())r.has(n)&&o.set(n,s);return new yr(o)},VS=(...e)=>t=>{let r=new Map(t.unsafeMap);for(let o of e)r.delete(o);return new yr(r)};var Ct=e=>new Ku(e);var GI=Bd,JS=BS,Pt=US,$u=Ud,Ie=WS,Ur=zS,Ws=Wd,zd=KS,An=$S,VI=GS,JI=VS;var YI=(()=>{let e={[R](){return bo(this)},[F](t){return Array.isArray(t)&&this.length===t.length?this.every((r,o)=>O(r,t[o])):!1}};return Object.setPrototypeOf(e,Array.prototype)})(),ZI=(()=>{let e={[R](){return Sa(this)},[F](t){let r=Object.keys(this),o=Object.keys(t);if(r.length!==o.length)return!1;for(let n of r)if(!(n in t&&O(this[n],t[n])))return!1;return!0}};return Object.setPrototypeOf(e,Object.prototype)})(),Do=e=>YS(Object.assign({},e)),YS=e=>Object.setPrototypeOf(e,ZI),QI=(...e)=>Kd(e),XI=e=>Kd(e.slice(0)),Kd=e=>Object.setPrototypeOf(e,YI),eP=()=>e=>Do(e===void 0?{}:e);var ZS=e=>t=>Do(t===void 0?{_tag:e}:{...t,_tag:e}),tP=e=>{class t extends QS{constructor(){super(...arguments),this._tag=e}}return t},QS=(()=>{class e{constructor(r){r&&Object.assign(this,r)}[R](){return Sa(this)}[F](r){let o=Object.keys(this),n=Object.keys(r);if(o.length!==n.length)return!1;for(let s of o)if(!(s in r&&O(this[s],r[s])))return!1;return!0}}return e})(),rP=()=>ZS;var rE=Symbol.for("@effect/data/Duration"),nP=BigInt(1e3),XS=BigInt(1e9),eE=/^(-?\d+(?:\.\d+)?)\s+(nanos|micros|millis|seconds|minutes|hours|days|weeks)$/,rt=e=>{if(oE(e))return e;if(_n(e))return zs(e);if(Is(e))return Gu(e);{eE.lastIndex=0;let t=eE.exec(e);if(t){let[r,o,n]=t,s=Number(o);switch(n){case"nanos":return Gu(BigInt(o));case"micros":return iP(BigInt(o));case"millis":return zs(s);case"seconds":return Gd(s);case"minutes":return aP(s);case"hours":return cP(s);case"days":return uP(s);case"weeks":return pP(s)}}}throw new Error("Invalid duration input")},tE={_tag:"Millis",millis:0},sP={_tag:"Infinity"},br=class{constructor(t){this._id=rE,_n(t)?isNaN(t)||t<0?this.value=tE:Number.isFinite(t)?Number.isInteger(t)?this.value={_tag:"Millis",millis:t}:this.value={_tag:"Nanos",nanos:BigInt(Math.round(t*1e6))}:this.value=sP:t<BigInt(0)?this.value=tE:this.value={_tag:"Nanos",nanos:t}}[R](){return Sa(this.value)}[F](t){return oE(t)&&mP(this,t)}toString(){switch(this.value._tag){case"Millis":return`Duration("${this.value.millis} millis")`;case"Nanos":return`Duration("${this.value.nanos} nanos")`;case"Infinity":return"Duration(Infinity)"}}toJSON(){return this.value._tag==="Nanos"?{_tag:"Duration",value:{_tag:"Nanos",hrtime:lP(this)}}:{_tag:"Duration",value:this.value}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},oE=e=>ge(e)&&"_id"in e&&e._id===rE,$d=new br(0);var Gu=e=>new br(e),iP=e=>new br(e*nP),zs=e=>new br(e),Gd=e=>new br(e*1e3),aP=e=>new br(e*6e4),cP=e=>new br(e*36e5),uP=e=>new br(e*864e5),pP=e=>new br(e*6048e5),Wr=e=>{let t=rt(e);switch(t.value._tag){case"Infinity":return 1/0;case"Nanos":return Number(t.value.nanos)/1e6;case"Millis":return t.value.millis}};var lP=e=>{let t=rt(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/XS),Number(t.value.nanos%XS)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}};var nE=u(3,(e,t,r)=>{let o=rt(e),n=rt(t);if(o.value._tag==="Infinity"||n.value._tag==="Infinity")return r.onMillis(Wr(o),Wr(n));if(o.value._tag==="Nanos"||n.value._tag==="Nanos"){let s=o.value._tag==="Nanos"?o.value.nanos:BigInt(Math.round(o.value.millis*1e6)),i=n.value._tag==="Nanos"?n.value.nanos:BigInt(Math.round(n.value.millis*1e6));return r.onNanos(s,i)}return r.onMillis(o.value.millis,n.value.millis)});var fP=(e,t)=>nE(e,t,{onMillis:(r,o)=>r===o,onNanos:(r,o)=>r===o});var Vd=u(2,(e,t)=>nE(e,t,{onMillis:(r,o)=>r>=o,onNanos:(r,o)=>r>=o})),mP=u(2,(e,t)=>fP(rt(e),rt(t)));var Jd=Math.pow(2,5),sE=Jd-1,iE=Jd/2,aE=Jd/4;function dP(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Jo(e,t){return t>>>e&sE}function Yo(e){return 1<<e}function Vu(e,t){return dP(e&t-1)}function Mn(e,t,r,o){let n=o;if(!e){let s=o.length;n=new Array(s);for(let i=0;i<s;++i)n[i]=o[i]}return n[t]=r,n}function Yd(e,t,r){let o=r.length-1,n=0,s=0,i=r;if(e)n=s=t;else for(i=new Array(o);n<t;)i[s++]=r[n++];for(++n;n<=o;)i[s++]=r[n++];return e&&(i.length=o),i}function cE(e,t,r,o){let n=o.length;if(e){let c=n;for(;c>=t;)o[c--]=o[c];return o[t]=r,o}let s=0,i=0,a=new Array(n+1);for(;s<t;)a[i++]=o[s++];for(a[t]=r;s<n;)a[++i]=o[s++];return a}var Ju=class{constructor(t,r){this.value=t,this.previous=r}};var zr=class e{constructor(){this._tag="EmptyNode"}modify(t,r,o,n,s,i){let a=o(g());return H(a)?new e:(++i.value,new Ks(t,n,s,a))}};function Qt(e){return e instanceof zr}function hP(e){return Qt(e)||e._tag==="LeafNode"||e._tag==="CollisionNode"}function Yu(e,t){return Qt(e)?!1:t===e.edit}var Ks=class e{constructor(t,r,o,n){this.edit=t,this.hash=r,this.key=o,this.value=n,this._tag="LeafNode"}modify(t,r,o,n,s,i){if(O(s,this.key)){let c=o(this.value);return c===this.value?this:H(c)?(--i.value,new zr):Yu(this,t)?(this.value=c,this):new e(t,n,s,c)}let a=o(g());return H(a)?this:(++i.value,uE(t,r,this.hash,this,n,new e(t,n,s,a)))}},Zd=class e{constructor(t,r,o){this.edit=t,this.hash=r,this.children=o,this._tag="CollisionNode"}modify(t,r,o,n,s,i){if(n===this.hash){let c=Yu(this,t),p=this.updateCollisionList(c,t,this.hash,this.children,o,s,i);return p===this.children?this:p.length>1?new e(t,this.hash,p):p[0]}let a=o(g());return H(a)?this:(++i.value,uE(t,r,this.hash,this,n,new Ks(t,n,s,a)))}updateCollisionList(t,r,o,n,s,i,a){let c=n.length;for(let l=0;l<c;++l){let f=n[l];if("key"in f&&O(i,f.key)){let d=f.value,h=s(d);return h===d?n:H(h)?(--a.value,Yd(t,l,n)):Mn(t,l,new Ks(r,o,i,h),n)}}let p=s(g());return H(p)?n:(++a.value,Mn(t,c,new Ks(r,o,i,p),n))}},Pa=class e{constructor(t,r,o){this.edit=t,this.mask=r,this.children=o,this._tag="IndexedNode"}modify(t,r,o,n,s,i){let a=this.mask,c=this.children,p=Jo(r,n),l=Yo(p),f=Vu(a,l),d=a&l,h=Yu(this,t);if(!d){let U=new zr().modify(t,r+5,o,n,s,i);return U?c.length>=iE?xP(t,p,U,a,c):new e(t,a|l,cE(h,f,U,c)):this}let S=c[f],w=S.modify(t,r+5,o,n,s,i);if(S===w)return this;let A=a,N;if(Qt(w)){if(A&=~l,!A)return new zr;if(c.length<=2&&hP(c[f^1]))return c[f^1];N=Yd(h,f,c)}else N=Mn(h,f,w,c);return h?(this.mask=A,this.children=N,this):new e(t,A,N)}},Qd=class e{constructor(t,r,o){this.edit=t,this.size=r,this.children=o,this._tag="ArrayNode"}modify(t,r,o,n,s,i){let a=this.size,c=this.children,p=Jo(r,n),l=c[p],f=(l||new zr).modify(t,r+5,o,n,s,i);if(l===f)return this;let d=Yu(this,t),h;if(Qt(l)&&!Qt(f))++a,h=Mn(d,p,f,c);else if(!Qt(l)&&Qt(f)){if(--a,a<=aE)return gP(t,a,p,c);h=Mn(d,p,new zr,c)}else h=Mn(d,p,f,c);return d?(this.size=a,this.children=h,this):new e(t,a,h)}};function gP(e,t,r,o){let n=new Array(t-1),s=0,i=0;for(let a=0,c=o.length;a<c;++a)if(a!==r){let p=o[a];p&&!Qt(p)&&(n[s++]=p,i|=1<<a)}return new Pa(e,i,n)}function xP(e,t,r,o,n){let s=[],i=o,a=0;for(let c=0;i;++c)i&1&&(s[c]=n[a++]),i>>>=1;return s[t]=r,new Qd(e,a+1,s)}function yP(e,t,r,o,n,s){if(r===n)return new Zd(e,r,[s,o]);let i=Jo(t,r),a=Jo(t,n);if(i===a)return c=>new Pa(e,Yo(i)|Yo(a),[c]);{let c=i<a?[o,s]:[s,o];return new Pa(e,Yo(i)|Yo(a),c)}}function uE(e,t,r,o,n,s){let i,a=t;for(;;){let c=yP(e,a,r,o,n,s);if(typeof c=="function")i=new Ju(c,i),a=a+5;else{let p=c;for(;i!=null;)p=i.value(p),i=i.previous;return p}}}var Xd=Symbol.for("@effect/data/HashMap"),Na=class{constructor(t,r,o,n){this._editable=t,this._edit=r,this._root=o,this._size=n,this._id=Xd}[Symbol.iterator](){return new Zu(this,(t,r)=>[t,r])}[R](){let t=E("HashMap");for(let r of this)t^=T(E(r[0]))(E(r[1]));return t}[F](t){if(mE(t)){if(t._size!==this._size)return!1;for(let r of this){let o=Xu(r[0],E(r[0]))(t);if(H(o))return!1;if(!O(r[1],o.value))return!1}return!0}return!1}toString(){return`HashMap(${Array.from(this).map(([t,r])=>`[${String(t)}, ${String(r)}]`).join(", ")})`}toJSON(){return{_tag:"HashMap",values:Array.from(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},Zu=class e{constructor(t,r){this.map=t,this.f=r,this.v=pE(this.map._root,this.f,void 0)}next(){if(H(this.v))return{done:!0,value:void 0};let t=this.v.value;return this.v=Qu(t.cont),{done:!1,value:t.value}}[Symbol.iterator](){return new e(this.map,this.f)}},Qu=e=>e?lE(e[0],e[1],e[2],e[3],e[4]):g(),pE=(e,t,r=void 0)=>{switch(e._tag){case"LeafNode":return L(e.value)?x({value:t(e.key,e.value.value),cont:r}):Qu(r);case"CollisionNode":case"ArrayNode":case"IndexedNode":{let o=e.children;return lE(o.length,o,0,t,r)}default:return Qu(r)}},lE=(e,t,r,o,n)=>{for(;r<e;){let s=t[r++];if(s&&!Qt(s))return pE(s,o,[e,t,r,o,n])}return Qu(n)},Gs=()=>new Na(!1,0,new zr,0),fE=(...e)=>eh(e),eh=e=>{let t=tp(Gs());for(let r of e)kn(r[0],r[1])(t);return gE(t)},mE=e=>ge(e)&&"_id"in e&&e._id===Xd,dE=e=>e&&Qt(e._root),hE=u(2,(e,t)=>Xu(e,t,E(t))),Xu=u(3,(e,t,r)=>{let o=e._root,n=0;for(;;)switch(o._tag){case"LeafNode":return O(t,o.key)?o.value:g();case"CollisionNode":{if(r===o.hash){let s=o.children;for(let i=0,a=s.length;i<a;++i){let c=s[i];if("key"in c&&O(t,c.key))return c.value}}return g()}case"IndexedNode":{let s=Jo(n,r),i=Yo(s);if(o.mask&i){o=o.children[Vu(o.mask,i)],n+=5;break}return g()}case"ArrayNode":{if(o=o.children[Jo(n,r)],o){n+=5;break}return g()}default:return g()}});var th=u(2,(e,t)=>L(Xu(e,t,E(t))));var kn=u(3,(e,t,r)=>rh(e,t,()=>x(r))),DP=u(3,(e,t,r)=>e._editable?(e._root=t,e._size=r,e):t===e._root?e:new Na(e._editable,e._edit,t,r)),ep=e=>new Zu(e,t=>t);var Vs=e=>e._size,tp=e=>new Na(!0,e._edit+1,e._root,e._size),gE=e=>(e._editable=!1,e);var rh=u(3,(e,t,r)=>xE(e,t,E(t),r)),xE=u(4,(e,t,r,o)=>{let n={value:e._size},s=e._root.modify(e._editable?e._edit:NaN,0,o,r,t,n);return DP(s,n.value)(e)});var La=u(2,(e,t)=>rh(e,t,g));var yE=u(2,(e,t)=>Js(e,Gs(),(r,o,n)=>kn(r,n,t(o,n))));var rp=u(2,(e,t)=>Js(e,void 0,(r,o,n)=>t(o,n))),Js=u(3,(e,t,r)=>{let o=e._root;if(o._tag==="LeafNode")return L(o.value)?r(t,o.value.value,o.key):t;if(o._tag==="EmptyNode")return t;let n=[o.children],s;for(;s=n.pop();)for(let i=0,a=s.length;i<a;){let c=s[i++];c&&!Qt(c)&&(c._tag==="LeafNode"?L(c.value)&&(t=r(t,c.value.value,c.key)):n.push(c.children))}return t});var oh=Symbol.for("@effect/data/HashSet"),Ys=class{constructor(t){this._keyMap=t,this._id=oh}[Symbol.iterator](){return ep(this._keyMap)}[R](){return T(E(this._keyMap))(E("HashSet"))}[F](t){return DE(t)?Vs(this._keyMap)===Vs(t._keyMap)&&O(this._keyMap,t._keyMap):!1}toString(){return`HashSet(${Array.from(this).map(String).join(", ")})`}toJSON(){return{_tag:"HashSet",values:Array.from(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},DE=e=>ge(e)&&"_id"in e&&e._id===oh,qa=()=>new Ys(Gs()),SE=e=>{let t=op(qa());for(let r of e)Zs(t,r);return np(t)},EE=(...e)=>{let t=op(qa());for(let r of e)Zs(t,r);return np(t)},CE=u(2,(e,t)=>th(e._keyMap,t));var _E=e=>Vs(e._keyMap),op=e=>new Ys(tp(e._keyMap)),np=e=>(e._keyMap._editable=!1,e),nh=u(2,(e,t)=>{let r=op(e);return t(r),np(r)}),Zs=u(2,(e,t)=>e._keyMap._editable?(kn(t,!0)(e._keyMap),e):new Ys(kn(t,!0)(e._keyMap))),sh=u(2,(e,t)=>e._keyMap._editable?(La(t)(e._keyMap),e):new Ys(La(t)(e._keyMap))),OE=u(2,(e,t)=>nh(e,r=>{for(let o of t)sh(r,o)}));var wE=u(2,(e,t)=>nh(qa(),r=>{RE(e,o=>Zs(r,o));for(let o of t)Zs(r,o)}));var RE=u(2,(e,t)=>rp(e._keyMap,(r,o)=>t(o))),FE=u(3,(e,t,r)=>Js(e._keyMap,t,(o,n,s)=>r(o,s)));var So=Gs,AE=fE,sp=eh,vE=dE,Ha=hE;var Kr=kn,ih=ep;var ip=Vs;var ME=La;var kE=yE;var TE=rp,ah=Js;var EP=Symbol.for("@effect/data/MutableRef"),ch=class{constructor(t){this.current=t,this._T=r=>r,this._id=EP}toString(){return`MutableRef(${String(this.current)})`}toJSON(){return{_tag:"MutableRef",current:this.current}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},_t=e=>new ch(e),ap=u(3,(e,t,r)=>O(t,e.current)?(e.current=r,!0):!1);var Lt=e=>e.current;var IE=e=>_P(e,t=>t+1),Xt=u(2,(e,t)=>(e.current=t,e)),CP=u(2,(e,t)=>(e.current=t,e.current)),uh=u(2,(e,t)=>Xt(e,t(Lt(e)))),_P=u(2,(e,t)=>CP(e,t(Lt(e))));var OP=Symbol.for("@effect/data/MutableHashMap"),ph=class{constructor(){this._id=OP,this.backingMap=_t(So())}[Symbol.iterator](){return this.backingMap.current[Symbol.iterator]()}toString(){return`MutableHashMap(${Array.from(this).map(([t,r])=>`[${String(t)}, ${String(r)}]`).join(", ")})`}toJSON(){return{_tag:"MutableHashMap",values:Array.from(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},Pn=()=>new ph;var we=u(2,(e,t)=>Ha(e.backingMap.current,t)),Dr=u(2,(e,t)=>L(we(e,t)));var Nn=u(2,(e,t)=>(uh(e.backingMap,ME(t)),e)),Ot=u(3,(e,t,r)=>(uh(e.backingMap,Kr(t,r)),e)),cp=e=>ip(Lt(e.backingMap));var PE=Symbol.for("@effect/data/Chunk");function wP(e,t,r,o,n){for(let s=t;s<Math.min(e.length,t+n);s++)r[o+s-t]=e[s];return r}var NE=[],RP=e=>Ts((t,r)=>ft(t).every((o,n)=>e(o,Zo(r,n)))),FP=RP(O),pe=class{constructor(t){switch(this.backing=t,this._id=PE,t._tag){case"IEmpty":{this.length=0,this.depth=0,this.left=this,this.right=this;break}case"IConcat":{this.length=t.left.length+t.right.length,this.depth=1+Math.max(t.left.depth,t.right.depth),this.left=t.left,this.right=t.right;break}case"IArray":{this.length=t.array.length,this.depth=0,this.left=Sr,this.right=Sr;break}case"ISingleton":{this.length=1,this.depth=0,this.left=Sr,this.right=Sr;break}case"ISlice":{this.length=t.length,this.depth=t.chunk.depth+1,this.left=Sr,this.right=Sr;break}}}toString(){return`Chunk(${ft(this).map(String).join(", ")})`}toJSON(){return{_tag:"Chunk",values:ft(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}[F](t){return LE(t)&&FP(this,t)}[R](){return bo(ft(this))}[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return NE[Symbol.iterator]();default:return ft(this)[Symbol.iterator]()}}pipe(){return C(this,arguments)}},LE=e=>ge(e)&&"_id"in e&&e._id===PE,Sr=new pe({_tag:"IEmpty"}),mt=()=>Sr;var ve=e=>new pe({_tag:"ISingleton",a:e}),$r=e=>LE(e)?e:new pe({_tag:"IArray",array:I(e)}),fh=(e,t,r)=>{switch(e.backing._tag){case"IArray":{wP(e.backing.array,0,t,r,e.length);break}case"IConcat":{fh(e.left,t,r),fh(e.right,t,r+e.left.length);break}case"ISingleton":{t[r]=e.backing.a;break}case"ISlice":{let o=0,n=r;for(;o<e.length;)t[n]=Zo(e,o),o+=1,n+=1;break}}},ft=e=>{switch(e.backing._tag){case"IEmpty":return NE;case"IArray":return e.backing.array;default:{let t=new Array(e.length);return fh(e,t,0),e.backing={_tag:"IArray",array:t},e.left=Sr,e.right=Sr,e.depth=0,t}}},Eo=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return new pe({_tag:"IArray",array:Hu(e.backing.array)});case"IConcat":return new pe({_tag:"IConcat",left:Eo(e.backing.right),right:Eo(e.backing.left)});case"ISlice":return qt(Hu(ft(e)))}},AP=u(2,(e,t)=>t<0||t>=e.length?g():x(Zo(e,t))),qt=e=>new pe({_tag:"IArray",array:e});var Zo=u(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(t!==0)throw new Error("Index out of bounds");return e.backing.a}case"IArray":{if(t>=e.length||t<0)throw new Error("Index out of bounds");return e.backing.array[t]}case"IConcat":return t<e.left.length?Zo(e.left,t):Zo(e.right,t-e.left.length);case"ISlice":return Zo(e.backing.chunk,t+e.backing.offset)}}),up=u(2,(e,t)=>qE(e,ve(t))),Pe=u(2,(e,t)=>qE(ve(t),e)),mh=u(2,(e,t)=>{if(t<=0)return Sr;if(t>=e.length)return e;switch(e.backing._tag){case"ISlice":return new pe({_tag:"ISlice",chunk:e.backing.chunk,length:t,offset:e.backing.offset});case"IConcat":return t>e.left.length?new pe({_tag:"IConcat",left:e.left,right:mh(e.right,t-e.left.length)}):mh(e.left,t);default:return new pe({_tag:"ISlice",chunk:e,offset:0,length:t})}}),Qs=u(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return Sr;switch(e.backing._tag){case"ISlice":return new pe({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":return t>e.left.length?Qs(e.right,t-e.left.length):new pe({_tag:"IConcat",left:Qs(e.left,t),right:e.right});default:return new pe({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}});var Er=u(2,(e,t)=>{if(e.backing._tag==="IEmpty")return t;if(t.backing._tag==="IEmpty")return e;let r=t.depth-e.depth;if(Math.abs(r)<=1)return new pe({_tag:"IConcat",left:e,right:t});if(r<-1)if(e.left.depth>=e.right.depth){let o=Er(e.right,t);return new pe({_tag:"IConcat",left:e.left,right:o})}else{let o=Er(e.right.right,t);if(o.depth===e.depth-3){let n=new pe({_tag:"IConcat",left:e.right.left,right:o});return new pe({_tag:"IConcat",left:e.left,right:n})}else{let n=new pe({_tag:"IConcat",left:e.left,right:e.right.left});return new pe({_tag:"IConcat",left:n,right:o})}}else if(t.right.depth>=t.left.depth){let o=Er(e,t.left);return new pe({_tag:"IConcat",left:o,right:t.right})}else{let o=Er(e,t.left.left);if(o.depth===t.depth-3){let n=new pe({_tag:"IConcat",left:o,right:t.left.right});return new pe({_tag:"IConcat",left:n,right:t.right})}else{let n=new pe({_tag:"IConcat",left:t.left.right,right:t.right});return new pe({_tag:"IConcat",left:o,right:n})}}}),qE=u(2,(e,t)=>Er(e,t));var Xs=e=>e.length===0,ot=e=>e.length>0,Ln=AP(0),qn=e=>Zo(e,0),nt=qn;var HE=e=>Zo(e,e.length-1),dh=u(2,(e,t)=>e.backing._tag==="ISingleton"?ve(t(e.backing.a,0)):qt(xr((r,o)=>t(r,o))(ft(e))));var pp=u(2,(e,t)=>qt(Hr(ft(e),t)));var vP=u(2,(e,t)=>[mh(e,t),Qs(e,t)]);var jE=u(2,(e,t)=>{let r=0;for(let o of ft(e)){if(t(o))break;r++}return vP(e,r)});var st=e=>Qs(e,1);var BE=e=>qt(qd(ft(e)));var MP=Symbol.for("@effect/data/MutableList"),hh=class{constructor(){this._id=MP,this.head=void 0,this.tail=void 0,this._length=0}[Symbol.iterator](){let t=!1,r=this.head;return{next(){if(t)return this.return();if(r==null)return t=!0,this.return();let o=r.value;return r=r.next,{done:t,value:o}},return(o){return t||(t=!0),{done:!0,value:o}}}}toString(){return`MutableList(${Array.from(this).map(String).join(", ")})`}toJSON(){return{_tag:"MutableList",values:Array.from(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},gh=class{constructor(t){this.value=t,this.removed=!1,this.prev=void 0,this.next=void 0}},UE=()=>new hh;var WE=e=>xh(e)===0,xh=e=>e._length;var zE=u(2,(e,t)=>{let r=new gh(t);return e.head===void 0&&(e.head=r),e.tail===void 0||(e.tail.next=r,r.prev=e.tail),e.tail=r,e._length+=1,e}),KE=e=>{let t=e.head;if(t!==void 0)return kP(e,t),t.value};var kP=(e,t)=>{t.removed||(t.removed=!0,t.prev!==void 0&&t.next!==void 0?(t.prev.next=t.next,t.next.prev=t.prev):t.prev!==void 0?(e.tail=t.prev,t.prev.next=void 0):t.next!==void 0?(e.head=t.next,t.next.prev=void 0):(e.tail=void 0,e.head=void 0),e._length>0&&(e._length-=1))};var IP=Symbol.for("@effect/data/MutableQueue"),bh=Symbol.for("@effect/data/mutable/MutableQueue/Empty"),yh=class{constructor(t=void 0){this.capacity=t,this._tag="Bounded",this._id=IP,this.queue=UE()}[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()}toString(){return`MutableQueue(${Array.from(this).map(String).join(", ")})`}toJSON(){return{_tag:"MutableQueue",values:Array.from(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}};var $E=()=>new yh;var GE=u(2,(e,t)=>{let r=xh(e.queue);return e.capacity!==void 0&&r===e.capacity?!1:(zE(t)(e.queue),!0)});var VE=u(2,(e,t)=>WE(e.queue)?t:KE(e.queue));var ei=Symbol.for("@effect/data/Differ/ContextPatch");function Gr(e){return e}var Dh=class{constructor(){this._tag="Empty",this._Input=Gr,this._Output=Gr,this._id=ei}[R](){return je("ContextPatch(Empty)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id}},Sh=class{constructor(t,r){this.first=t,this.second=r,this._tag="AndThen",this._id=ei,this._Input=Gr,this._Output=Gr}[R](){return je("ContextPatch(AndThen)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.first,t.first)&&O(this.second,t.second)}},Eh=class{constructor(t,r){this.tag=t,this.service=r,this._tag="AddService",this._id=ei,this._Input=Gr,this._Output=Gr}[R](){return je("ContextPatch(AddService)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.tag,t.tag)&&O(this.service,t.service)}},Ch=class{constructor(t){this.tag=t,this._tag="RemoveService",this._id=ei,this._Input=Gr,this._Output=Gr}[R](){return je("ContextPatch(RemoveService)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.tag,t.tag)}},_h=class{constructor(t,r){this.tag=t,this.update=r,this._tag="UpdateService",this._id=ei,this._Input=Gr,this._Output=Gr}[R](){return je("ContextPatch(AndThen)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.tag,t.tag)&&O(this.update,t.update)}},Oh=()=>new Dh,JE=(e,t)=>{let r=new Map(e.unsafeMap),o=Oh();for(let[n,s]of t.unsafeMap.entries())if(r.has(n)){let i=r.get(n);r.delete(n),O(i,s)||(o=ja(new _h(n,()=>s))(o))}else r.delete(n),o=ja(new Eh(n,s))(o);for(let[n]of r.entries())o=ja(new Ch(n))(o);return o},ja=u(2,(e,t)=>new Sh(e,t)),YE=u(2,(e,t)=>{let r=!1,o=ve(e),n=new Map(t.unsafeMap);for(;ot(o);){let i=nt(o),a=st(o);switch(i._tag){case"Empty":{o=a;break}case"AddService":{n.set(i.tag,i.service),o=a;break}case"AndThen":{o=Pe(Pe(a,i.second),i.first);break}case"RemoveService":{n.delete(i.tag),o=a;break}case"UpdateService":{n.set(i.tag,i.update(n.get(i.tag))),r=!0,o=a;break}}}if(!r)return new yr(n);let s=new Map;for(let[i]of t.unsafeMap)n.has(i)&&(s.set(i,n.get(i)),n.delete(i));for(let[i,a]of n)s.set(i,a);return new yr(s)});var lp=Oh,ZE=JE,QE=ja,XE=YE;var it=qa,wt=SE,Co=EE,t0=CE;var _o=_E;var Vr=Zs,wh=sh,Rh=OE;var at=wE;var Hn=FE;var Ba=Symbol.for("@effect/data/Differ/HashSetPatch");function mp(e){return e}var Fh=class{constructor(){this._tag="Empty",this._Value=mp,this._id=Ba}[R](){return je("HashSetPatch(Empty)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id}},Ah=class{constructor(t,r){this.first=t,this.second=r,this._tag="AndThen",this._Value=mp,this._id=Ba}[R](){return je("HashSetPatch(AndThen)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.first,t.first)&&O(this.second,t.second)}},vh=class{constructor(t){this.value=t,this._tag="Add",this._Value=mp,this._id=Ba}[R](){return je("HashSetPatch(Add)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.value,t.value)}},Mh=class{constructor(t){this.value=t,this._tag="Remove",this._Value=mp,this._id=Ba}[R](){return je("HashSetPatch(Remove)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.value,t.value)}},kh=()=>new Fh,r0=(e,t)=>{let[r,o]=Hn([e,kh()],([n,s],i)=>t0(i)(n)?[wh(i)(n),s]:[n,fp(new vh(i))(s)])(t);return Hn(o,(n,s)=>fp(new Mh(s))(n))(r)},fp=u(2,(e,t)=>new Ah(e,t)),o0=u(2,(e,t)=>{let r=t,o=ve(e);for(;ot(o);){let n=nt(o),s=st(o);switch(n._tag){case"Empty":{o=s;break}case"AndThen":{o=Pe(n.first)(Pe(n.second)(s));break}case"Add":{r=Vr(n.value)(r),o=s;break}case"Remove":r=wh(n.value)(r),o=s}}return r});var dp=kh,n0=r0,s0=fp,i0=o0;var c0=Symbol.for("@effect/data/Differ"),Th=class{constructor(t){this._id=c0,this._P=k,this._V=k,this.empty=t.empty,this.diff=t.diff,this.combine=t.combine,this.patch=t.patch}},Ua=e=>new Th(e),u0=()=>Ua({empty:lp(),combine:(e,t)=>QE(t)(e),diff:(e,t)=>ZE(e,t),patch:(e,t)=>XE(t)(e)});var p0=()=>Ua({empty:dp(),combine:(e,t)=>s0(t)(e),diff:(e,t)=>n0(e,t),patch:(e,t)=>i0(t)(e)});var l0=()=>f0((e,t)=>t),f0=e=>Ua({empty:k,combine:(t,r)=>t===k?r:r===k?t:o=>r(t(o)),diff:(t,r)=>O(t,r)?k:Ms(r),patch:(t,r)=>e(r,t(r))});var m0=u(3,(e,t,r)=>e.diff(t,r)),d0=u(3,(e,t,r)=>e.combine(t,r)),h0=u(3,(e,t,r)=>e.patch(t,r)),hp=Ua,g0=u0;var x0=p0;var y0=l0;var Nh=Symbol.for("@effect/data/List"),Wa=e=>Array.from(e),jP=e=>gD(Ld(e),Wa),BP=jP(O),ti=class{constructor(t,r){this.head=t,this.tail=r,this._tag="Cons",this._id=Nh}toString(){return`List.Cons(${Wa(this).map(String).join(", ")})`}toJSON(){return{_tag:"List.Cons",values:Wa(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}[F](t){return b0(t)&&this._tag===t._tag&&BP(this,t)}[R](){return bo(Wa(this))}[Symbol.iterator](){let t=!1,r=this;return{next(){if(t)return this.return();if(r._tag==="Nil")return t=!0,this.return();let o=r.head;return r=r.tail,{done:t,value:o}},return(o){return t||(t=!0),{done:!0,value:o}}}}pipe(){return C(this,arguments)}},Ph=class{constructor(){this._tag="Nil",this._id=Nh}toString(){return"List.Nil"}toJSON(){return{_tag:"List.Nil"}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}[R](){return bo(Wa(this))}[F](t){return b0(t)&&this._tag===t._tag}[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}}pipe(){return C(this,arguments)}},b0=e=>ge(e)&&"_id"in e&&e._id===Nh,Rt=e=>e._tag==="Nil",za=e=>e._tag==="Cons";var D0=new Ph,UP=()=>D0,Oo=(e,t)=>new ti(e,t),Cr=UP,Ka=e=>new ti(e,D0);var S0=u(2,(e,t)=>WP(t,e));var Qo=u(2,(e,t)=>Oo(t,e)),WP=u(2,(e,t)=>{if(Rt(e))return t;if(Rt(t))return e;{let r=new ti(t.head,e),o=r,n=t.tail;for(;!Rt(n);){let s=new ti(n.head,e);o.tail=s,o=s,n=n.tail}return r}});var E0=u(2,(e,t)=>{let r=e;for(;!Rt(r);){if(t(r.head))return x(r.head);r=r.tail}return g()});var gp=e=>Rt(e)?g():x(e.head);var C0=u(3,(e,t,r)=>{let o=t,n=e;for(;!Rt(n);)o=r(o,n.head),n=n.tail;return o});var _0=e=>{let t=Cr(),r=e;for(;!Rt(r);)t=Qo(t,r.head),r=r.tail;return t};var O0,w0,R0,yp="@effect/io/Fiber/Id",Xo=Symbol.for(yp),$a="None",Lh="Runtime",qh="Composite",Hh=class{constructor(){this[O0]=Xo,this._tag=$a}[(O0=Xo,R)](){return T(E(this._tag))(E(yp))}[F](t){return Dp(t)&&t._tag===$a}},jh=class{constructor(t,r){this.id=t,this.startTimeMillis=r,this[w0]=Xo,this._tag=Lh}[(w0=Xo,R)](){return T(E(this.startTimeMillis))(T(E(this.id))(T(E(this._tag))(E(yp))))}[F](t){return Dp(t)&&t._tag===Lh&&this.id===t.id&&this.startTimeMillis===t.startTimeMillis}},Bh=class{constructor(t,r){this.left=t,this.right=r,this[R0]=Xo,this._tag=qh}[(R0=Xo,R)](){return T(E(this.right))(T(E(this.left))(T(E(this._tag))(E(yp))))}[F](t){return Dp(t)&&t._tag===qh&&O(this.left,t.left)&&O(this.right,t.right)}},bp=new Hh;var Dp=e=>typeof e=="object"&&e!=null&&Xo in e;var A0=u(2,(e,t)=>e._tag===$a?t:t._tag===$a?e:new Bh(e,t));var xp=e=>{switch(e._tag){case $a:return it();case Lh:return Co(e.id);case qh:return at(xp(e.right))(xp(e.left))}},F0=Y(Symbol.for("@effect/io/Fiber/Id/_fiberCounter"),()=>_t(0));var Sp=e=>Array.from(xp(e)).map(r=>`#${r}`).join(",");var v0=()=>{let e=Lt(F0);return Xt(e+1)(F0),new jh(e,new Date().getTime())};var dt=bp;var Uh=A0;var k0=Sp;var Ep=v0;var jn="Die",en="Empty",Bn="Fail",ni="Interrupt",Un="Annotated",Wn="Parallel",zn="Sequential";var q0="@effect/io/Cause",Gh=Symbol.for(q0),KP={_E:e=>e},$n={[Gh]:KP,[R](){return T(E(GP(this)))(E(q0))},[F](e){return wp(e)&&$P(this,e)},pipe(){return C(this,arguments)},toJSON(){return{_tag:"Cause",errors:vp(this)}},toString(){return Fo(this)},[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}},ht=(()=>{let e=Object.create($n);return e._tag=en,e})(),Gn=e=>{let t=Object.create($n);return t._tag=Bn,t.error=e,t},Ve=e=>{let t=Object.create($n);return t._tag=jn,t.defect=e,t},_r=e=>{let t=Object.create($n);return t._tag=ni,t.fiberId=e,t},tn=(e,t)=>{let r=Object.create($n);return r._tag=Un,r.cause=e,r.annotation=t,r},We=(e,t)=>{let r=Object.create($n);return r._tag=Wn,r.left=e,r.right=t,r},Me=(e,t)=>{let r=Object.create($n);return r._tag=zn,r.left=e,r.right=t,r},wp=e=>typeof e=="object"&&e!=null&&Gh in e,Vh=e=>e._tag===en;var Rp=e=>e._tag===jn;var Jh=e=>e._tag===en?!0:Kn(e,!0,(t,r)=>{switch(r._tag){case en:return x(t);case jn:case Bn:case ni:return x(!1);default:return g()}});var rn=e=>Ap(void 0,JP)(e),Ga=e=>Eo(Kn(e,mt(),(t,r)=>r._tag===Bn?x(Pe(r.error)(t)):g())),Fp=e=>Eo(Kn(e,mt(),(t,r)=>r._tag===jn?x(Pe(r.defect)(t)):g())),Va=e=>Kn(e,it(),(t,r)=>r._tag===ni?x(Vr(r.fiberId)(t)):g()),H0=e=>Ja(e,t=>t._tag===Bn?x(t.error):g()),wo=e=>{let t=H0(e);switch(t._tag){case"None":return B(e);case"Some":return K(t.value)}};var Yh=e=>ii(e,{onEmpty:g(),onFail:()=>g(),onDie:t=>x(Ve(t)),onInterrupt:()=>g(),onAnnotated:(t,r)=>re(o=>tn(o,r))(t),onSequential:(t,r)=>L(t)&&L(r)?x(Me(t.value,r.value)):L(t)&&H(r)?x(t.value):H(t)&&L(r)?x(r.value):g(),onParallel:(t,r)=>L(t)&&L(r)?x(We(t.value,r.value)):L(t)&&H(r)?x(t.value):H(t)&&L(r)?x(r.value):g()}),j0=e=>ii(e,{onEmpty:g(),onFail:t=>x(Ve(t)),onDie:t=>x(Ve(t)),onInterrupt:()=>g(),onAnnotated:(t,r)=>re(o=>tn(o,r))(t),onSequential:(t,r)=>L(t)&&L(r)?x(Me(t.value,r.value)):L(t)&&H(r)?x(t.value):H(t)&&L(r)?x(r.value):g(),onParallel:(t,r)=>L(t)&&L(r)?x(We(t.value,r.value)):L(t)&&H(r)?x(t.value):H(t)&&L(r)?x(r.value):g()});var si=e=>ii(e,{onEmpty:ht,onFail:()=>ht,onDie:t=>Ve(t),onInterrupt:t=>_r(t),onAnnotated:(t,r)=>Vh(t)?t:tn(t,r),onSequential:Me,onParallel:We}),B0=e=>ii(e,{onEmpty:ht,onFail:t=>Ve(t),onDie:t=>Ve(t),onInterrupt:t=>_r(t),onAnnotated:(t,r)=>Vh(t)?t:tn(t,r),onSequential:(t,r)=>Me(t,r),onParallel:(t,r)=>We(t,r)});var U0=u(2,(e,t)=>ii(e,{onEmpty:ht,onFail:r=>t(r),onDie:r=>Ve(r),onInterrupt:r=>_r(r),onAnnotated:(r,o)=>tn(r,o),onSequential:(r,o)=>Me(r,o),onParallel:(r,o)=>We(r,o)})),Zh=e=>U0(e,k);var $P=(e,t)=>{let r=ve(e),o=ve(t);for(;ot(r)&&ot(o);){let[n,s]=Kn([it(),mt()],([c,p],l)=>{let[f,d]=Wh(l);return x([at(f)(c),Er(d)(p)])})(nt(r)),[i,a]=Kn([it(),mt()],([c,p],l)=>{let[f,d]=Wh(l);return x([at(f)(c),Er(d)(p)])})(nt(o));if(!O(n,i))return!1;r=s,o=a}return!0},GP=e=>VP(ve(e),mt()),VP=(e,t)=>{for(;;){let[r,o]=pt([it(),mt()],([s,i],a)=>{let[c,p]=Wh(a);return[at(c)(s),Er(p)(i)]})(e),n=_o(r)>0?Pe(r)(t):t;if(Xs(o))return Eo(n);e=o,t=n}throw new Error("BUG: Cause.flattenCauseLoop - please report an issue at https://github.com/Effect-TS/io/issues")};var Ja=u(2,(e,t)=>{let r=[e];for(;r.length>0;){let o=r.pop(),n=t(o);switch(n._tag){case"None":{switch(o._tag){case zn:case Wn:{r.push(o.right),r.push(o.left);break}case Un:{r.push(o.cause);break}}break}case"Some":return n}}return g()});var Wh=e=>{let t=e,r=[],o=it(),n=mt();for(;t!==void 0;)switch(t._tag){case en:{if(r.length===0)return[o,n];t=r.pop();break}case Bn:{if(r.length===0)return[Vr(t.error)(o),n];o=Vr(t.error)(o),t=r.pop();break}case jn:{if(r.length===0)return[Vr(t.defect)(o),n];o=Vr(t.defect)(o),t=r.pop();break}case ni:{if(r.length===0)return[Vr(t.fiberId)(o),n];o=Vr(t.fiberId)(o),t=r.pop();break}case Un:{t=t.cause;break}case zn:{switch(t.left._tag){case en:{t=t.right;break}case zn:{t=Me(t.left.left,Me(t.left.right,t.right));break}case Wn:{t=We(Me(t.left.left,t.right),Me(t.left.right,t.right));break}case Un:{t=Me(t.left.cause,t.right);break}default:{n=Pe(t.right)(n),t=t.left;break}}break}case Wn:{r.push(t.right),t=t.left;break}}throw new Error("BUG: Cause.evaluateCauseLoop - please report an issue at https://github.com/Effect-TS/io/issues")};var JP={emptyCase:Lr,failCase:Yt,dieCase:Yt,interruptCase:Lr,annotatedCase:(e,t)=>t,sequentialCase:(e,t,r)=>t&&r,parallelCase:(e,t,r)=>t&&r};var T0="SequentialCase",I0="ParallelCase",P0="AnnotatedCase",ii=u(2,(e,{onAnnotated:t,onDie:r,onEmpty:o,onFail:n,onInterrupt:s,onParallel:i,onSequential:a})=>Ap(e,void 0,{emptyCase:()=>o,failCase:(c,p)=>n(p),dieCase:(c,p)=>r(p),interruptCase:(c,p)=>s(p),annotatedCase:(c,p,l)=>t(p,l),sequentialCase:(c,p,l)=>a(p,l),parallelCase:(c,p,l)=>i(p,l)})),Kn=u(3,(e,t,r)=>{let o=t,n=e,s=[];for(;n!==void 0;){let i=r(o,n);switch(o=L(i)?i.value:o,n._tag){case zn:{s.push(n.right),n=n.left;break}case Wn:{s.push(n.right),n=n.left;break}case Un:{n=n.cause;break}default:{n=void 0;break}}n===void 0&&s.length>0&&(n=s.pop())}return o}),Ap=u(3,(e,t,r)=>{let o=[e],n=[];for(;o.length>0;){let i=o.pop();switch(i._tag){case en:{n.push(B(r.emptyCase(t)));break}case Bn:{n.push(B(r.failCase(t,i.error)));break}case jn:{n.push(B(r.dieCase(t,i.defect)));break}case ni:{n.push(B(r.interruptCase(t,i.fiberId)));break}case Un:{o.push(i.cause),n.push(K({_tag:P0,annotation:i.annotation}));break}case zn:{o.push(i.right),o.push(i.left),n.push(K({_tag:T0}));break}case Wn:{o.push(i.right),o.push(i.left),n.push(K({_tag:I0}));break}}}let s=[];for(;n.length>0;){let i=n.pop();switch(i._tag){case"Left":{switch(i.left._tag){case T0:{let a=s.pop(),c=s.pop(),p=r.sequentialCase(t,a,c);s.push(p);break}case I0:{let a=s.pop(),c=s.pop(),p=r.parallelCase(t,a,c);s.push(p);break}case P0:{let a=s.pop(),c=r.annotatedCase(t,a,i.left.annotation);s.push(c);break}}break}case"Right":{s.push(i.right);break}}}if(s.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/io/issues");return s.pop()}),Ya=(e,t)=>{let r={value:t,enumerable:!0},o={...e,toString(){return`${this._tag}: ${this.message}`}};return n=>Object.create(o,{_tag:r,message:{value:n,enumerable:!0}})},zh=Symbol.for("@effect/io/Cause/errors/RuntimeException"),Qh=Ya({[zh]:zh},"RuntimeException");var Cp=Symbol.for("@effect/io/Cause/errors/InterruptedException"),YP=Ya({[Cp]:Cp},"InterruptedException"),Xh=e=>typeof e=="object"&&e!=null&&Cp in e,Kh=Symbol.for("@effect/io/Cause/errors/IllegalArgument"),ai=Ya({[Kh]:Kh},"IllegalArgumentException");var _p=Symbol.for("@effect/io/Cause/errors/NoSuchElement"),Ro=Ya({[_p]:_p},"NoSuchElementException"),eg=e=>typeof e=="object"&&e!=null&&_p in e,$h=Symbol.for("@effect/io/Cause/errors/InvalidHubCapacityException"),q$=Ya({[$h]:$h},"InvalidHubCapacityException");var Op=Symbol.for("@effect/io/Cause/SpanAnnotation"),ZP=e=>typeof e=="object"&&e!==null&&Op in e,W0=e=>({_tag:"SpanAnnotation",[Op]:Op,span:e});var N0=e=>{if(typeof e=="object"&&e!=null&&"toString"in e&&typeof e.toString=="function"&&e.toString!==Object.prototype.toString)return e.toString();if(typeof e=="string")return`Error: ${e}`;if(typeof e=="object"&&e!==null&&"message"in e&&typeof e.message=="string"){let t=JSON.parse(JSON.stringify(e)),r=new Set(Object.keys(t));if(r.delete("name"),r.delete("message"),r.delete("_tag"),r.size===0)return`${"name"in e&&typeof e.name=="string"?e.name:"Error"}${"_tag"in e&&typeof e._tag=="string"?`(${e._tag})`:""}: ${e.message}`}return`Error: ${JSON.stringify(e)}`},L0=e=>e instanceof Error?[N0(e),e.stack?.split(`
`).filter(t=>!t.startsWith("Error")).join(`
`)]:[N0(e),void 0];var QP=e=>{let t=e.split(`
`),r=[];for(let o=0;o<t.length;o++){if(t[o].includes("EffectPrimitive")||t[o].includes("Generator.next")||t[o].includes("FiberRuntime"))return r.join(`
`);r.push(t[o])}return r.join(`
`)},Fo=e=>{if(rn(e))return"All fibers interrupted without errors.";let t=vp(e).map(r=>{let o=r.message;if(r.stack&&(o+=`\r
${QP(r.stack)}`),r.span){let n=r.span,s=0;for(;n&&n._tag==="Span"&&s<10;)o+=`\r
    at ${n.name}`,n=Ge(n.parent),s++}return o}).join(`\r
\r
`);return t.includes(`\r
`)?`\r
${t}\r
`:t},vp=e=>Ap(e,void 0,{emptyCase:()=>[],dieCase:(t,r)=>{let o=L0(r);return[{message:o[0],stack:o[1],span:void 0}]},failCase:(t,r)=>{let o=L0(r);return[{message:o[0],stack:o[1],span:void 0}]},interruptCase:()=>[],parallelCase:(t,r,o)=>[...r,...o],sequentialCase:(t,r,o)=>[...r,...o],annotatedCase:(t,r,o)=>ZP(o)?r.map(n=>({...n,span:n.span??o.span})):r});var z0=Fo;var Za=255,K0=8,Mp=e=>e&Za,kp=e=>e>>K0&Za,Jn=(e,t)=>(e&Za)+((t&e&Za)<<K0),Tp=Jn(0,0),$0=e=>Jn(e,e),G0=e=>Jn(e,0);var V0=u(2,(e,t)=>Jn(Mp(e)&~t,kp(e)));var tg=u(2,(e,t)=>e|t);var J0=e=>~e>>>0&Za;var Z0=0,Or=1,rg=2,Ip=4,Qa=16,Pp=32;var og=e=>Xa(e,Pp);var ng=u(2,(e,t)=>e|t);var Jr=e=>ci(e)&&!Q0(e),ci=e=>Xa(e,Or);var Xa=u(2,(e,t)=>(e&t)!==0),Np=(...e)=>e.reduce((t,r)=>t|r,0),sg=Np(Z0);var ec=e=>Xa(e,Ip);var Q0=e=>Xa(e,Qa);var Yn=u(2,(e,t)=>Jn(e^t,t)),ui=u(2,(e,t)=>e&(J0(Mp(t))|kp(t))|Mp(t)&kp(t));var ig=hp({empty:Tp,diff:(e,t)=>Yn(e,t),combine:(e,t)=>tg(t)(e),patch:(e,t)=>ui(t,e)});var qp=Tp;var ag=$0,cg=G0;var ug=V0;var eC,tC,rC,oC={_tag:"Empty"},Zn=(e,t)=>({_tag:"Par",left:e,right:t}),Hp=(e,t)=>({_tag:"Seq",left:e,right:t}),fg=(e,t)=>({_tag:"Single",dataSource:e,blockedRequest:t});var nC=e=>{let t=Ka(e),r=Cr();for(;;){let[o,n]=C0(t,[sC(),Cr()],([s,i],a)=>{let[c,p]=oN(a);return[iC(s,c),S0(i,p)]});if(r=nN(r,o),Rt(n))return _0(r);t=n}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/query/issues")},oN=e=>{let t=e,r=sC(),o=Cr(),n=Cr();for(;;)switch(t._tag){case"Empty":{if(Rt(o))return[r,n];t=o.head,o=o.tail;break}case"Par":{o=Oo(t.right,o),t=t.left;break}case"Seq":{let s=t.left,i=t.right;switch(s._tag){case"Empty":{t=i;break}case"Par":{let a=s.left,c=s.right;t=Zn(Hp(a,i),Hp(c,i));break}case"Seq":{let a=s.left,c=s.right;t=Hp(a,Hp(c,i));break}case"Single":{t=s,n=Oo(i,n);break}}break}case"Single":{if(r=iC(r,uN(t.dataSource,t.blockedRequest)),Rt(o))return[r,n];t=o.head,o=o.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/query/issues")},nN=(e,t)=>{if(Rt(e))return Ka(pg(t));if(pN(t))return e;let r=gN(e.head),o=lN(t);return r.length===1&&o.length===1&&O(r[0],o[0])?Oo(hN(e.head,pg(t)),e.tail):Oo(pg(t),e)},sN=Symbol.for("@effect/io/RequestBlock.Entry"),lg=class{constructor(t,r,o,n,s){this.request=t,this.result=r,this.listeners=o,this.ownerId=n,this.state=s,this[eC]=iN}};eC=sN;var iN={_R:e=>e};var mg=e=>new lg(e.request,e.result,e.listeners,e.ownerId,e.state),aN=Symbol.for("@effect/io/RequestBlockParallel"),cN={_R:e=>e},tc=class{constructor(t){this.map=t,this[tC]=cN}};tC=aN;var sC=()=>new tc(So()),uN=(e,t)=>new tc(AE([e,Array.of(t)])),iC=(e,t)=>new tc(ah(e.map,t.map,(r,o,n)=>Kr(r,n,Be(Ha(r,n),{onNone:()=>o,onSome:s=>[...s,...o]})))),pN=e=>vE(e.map),lN=e=>Array.from(ih(e.map)),pg=e=>dN(kE(e.map,t=>Array.of(t)));var fN=Symbol.for("@effect/io/RequestBlockSequential"),mN={_R:e=>e},jp=class{constructor(t){this.map=t,this[rC]=mN}};rC=fN;var dN=e=>new jp(e),hN=(e,t)=>new jp(ah(t.map,e.map,(r,o,n)=>Kr(r,n,Be(Ha(r,n),{onNone:()=>[],onSome:s=>[...s,...o]}))));var gN=e=>Array.from(ih(e.map)),aC=e=>Array.from(e.map);var Qn="Pending",rc="Done";var xN="@effect/io/Deferred",pC=Symbol.for(xN),lC={_E:e=>e,_A:e=>e},Bp=e=>({_tag:Qn,joiners:e}),dg=e=>({_tag:rc,effect:e});var pi="Async",fC="Commit",De="Failure",li="OnFailure",fi="OnSuccess",mi="OnSuccessAndFailure",Se="Success",Up="Sync",mC="Tag",Ao="UpdateRuntimeFlags",di="While",Wp="WithRuntime",hi="Yield",oc="RevertFlags";var Kp=class{constructor(){this.buckets=[]}scheduleTask(t,r){let o,n;for(n=0;n<this.buckets.length&&this.buckets[n][0]<=r;n++)o=this.buckets[n];if(o)o[1].push(t);else{let s=[];for(let i=0;i<n;i++)s.push(this.buckets[i]);s.push([r,[t]]);for(let i=n;i<this.buckets.length;i++)s.push(this.buckets[i]);this.buckets=s}}},hg=class{constructor(t){this.maxNextTickBeforeTimer=t,this.running=!1,this.tasks=new Kp}starveInternal(t){let r=this.tasks.buckets;this.tasks.buckets=[];for(let[o,n]of r)for(let s=0;s<n.length;s++)n[s]();this.tasks.buckets.length===0?this.running=!1:this.starve(t)}starve(t=0){t>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(t+1))}scheduleTask(t,r){this.tasks.scheduleTask(t,r),this.running||(this.running=!0,this.starve())}},gg=Y(Symbol.for("@effect/io/Scheduler/defaultScheduler"),()=>new hg(2048)),$p=class{constructor(){this.tasks=new Kp,this.deferred=!1}scheduleTask(t,r){this.deferred?gg.scheduleTask(t,r):this.tasks.scheduleTask(t,r)}flush(){for(;this.tasks.buckets.length>0;){let t=this.tasks.buckets;this.tasks.buckets=[];for(let[r,o]of t)for(let n=0;n<o.length;n++)o[n]()}this.deferred=!0}};var hC,gC,xC,yC,bN="@effect/io/Effect/Error",xg=Symbol.for(bN),DC=e=>typeof e=="object"&&e!=null&&xg in e,SC=e=>({[xg]:xg,_tag:"EffectError",cause:e}),Ee=(e,t)=>{let r=new ke("Blocked");return r.i0=e,r.i1=t,r},Zp=e=>{let t=new ke("RunBlocked");return t.i0=e,t},gi=Symbol.for("@effect/io/Effect"),Vp=class{constructor(t,r){this.patch=t,this.op=r,this._tag=oc}},ke=class{constructor(t){this._tag=t,this.i0=void 0,this.i1=void 0,this.i2=void 0,this.trace=void 0,this[hC]=yg}[(hC=gi,F)](t){return this===t}[R](){return Ko(this)}pipe(){return C(this,arguments)}},Jp=class{constructor(t){this._tag=t,this.i0=void 0,this.i1=void 0,this.i2=void 0,this.trace=void 0,this[gC]=yg}[(gC=gi,F)](t){return this===t}[R](){return Ko(this)}get cause(){return this.i0}pipe(){return C(this,arguments)}toJSON(){return{_tag:this._tag,cause:this.cause.toJSON()}}toString(){return z0(this.cause)}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}},Yp=class{constructor(t){this._tag=t,this.i0=void 0,this.i1=void 0,this.i2=void 0,this.trace=void 0,this[xC]=yg}[(xC=gi,F)](t){return this===t}[R](){return Ko(this)}get value(){return this.i0}pipe(){return C(this,arguments)}toJSON(){return{_tag:this._tag,value:this.value}}toString(){return`Success: ${String(this.value)}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}},yg={_R:e=>e,_E:e=>e,_A:e=>e},Ce=e=>typeof e=="object"&&e!=null&&gi in e,ye=e=>{let t=new ke(Wp);return t.i0=e,t},rr=u(3,(e,t,r)=>Re(o=>m(e,n=>m(ie(v(()=>o(t(n)))),s=>v(()=>r(n,s)).pipe(te({onFailure:i=>{switch(s._tag){case De:return W(We(s.i0,i));case Se:return W(i)}},onSuccess:()=>s})))))),ee=u(2,(e,t)=>m(e,()=>y(t))),ne=e=>ee(e,void 0),or=(e,t=dt)=>v(()=>{let r,o,n=new ke(pi);if(e.length!==1){let s=new AbortController;o=s,n.i0=i=>{r=e(i,s.signal)}}else n.i0=s=>{r=e(s)};return n.i1=t,cn(n,()=>(o&&o.abort(),r??q))}),Qr=(e,t=dt)=>or(r=>{let o=e(r);if(qr(o))r(o.right);else return o.left},t),Xr=u(2,(e,t)=>{let r=new ke(li);return r.i0=e,r.i1=t,r}),Ft=u(2,(e,t)=>fe(e,{onFailure:t,onSuccess:y})),on=e=>(...t)=>e(...t),EC=u(2,(e,t)=>te(e,{onFailure:on(r=>{let o=wo(r);switch(o._tag){case"Left":return V(()=>W(r))(t(o.left));case"Right":return W(o.right)}}),onSuccess:y})),CC=e=>ye((t,r)=>e(ci(r.runtimeFlags))),bg=e=>W(Ve(e)),xi=e=>ro(()=>Ve(Qh(e))),nn=e=>ro(()=>Ve(e())),eo=e=>fe(e,{onFailure:t=>y(K(t)),onSuccess:t=>y(B(t))}),to=()=>v(()=>ct(ko)),yi=e=>m(to(),e),ie=e=>sc(e,{onFailure:Z,onSuccess:ae}),z=e=>W(Gn(e)),wr=e=>ro(()=>Gn(e())),W=e=>{let t=new Jp(De);return t.i0=e,t},ro=e=>m(D(e),W),sn=ye(e=>y(e.id())),nr=e=>ye(t=>e(t.id())),m=u(2,(e,t)=>{let r=new ke(fi);return r.i0=e,r.i1=t,r}),Yr=e=>{let t=new ke("OnStep");return t.i0=e,t.i1=ae,t},bi=(e,t)=>{let r=new ke("OnStep");return r.i0=e,r.i1=t,r},At=e=>m(e,k),an=e=>fe(e,{onFailure:y,onSuccess:z}),sc=u(2,(e,{onFailure:t,onSuccess:r})=>te(e,{onFailure:o=>y(t(o)),onSuccess:o=>y(r(o))})),te=u(2,(e,{onFailure:t,onSuccess:r})=>{let o=new ke(mi);return o.i0=e,o.i1=t,o.i2=r,o}),fe=u(2,(e,{onFailure:t,onSuccess:r})=>te(e,{onFailure:o=>{let n=Ga(o);return Fp(o).length>0?W(B0(o)):n.length>0?t(qn(n)):W(o)},onSuccess:r})),Je=u(2,(e,t)=>v(()=>{let r=I(e),o=new Array(r.length),n=0;return ee(os({while:()=>n<r.length,body:()=>t(r[n],n),step:s=>{o[n++]=s}}),o)})),vt=u(2,(e,t)=>v(()=>{let r=I(e),o=0;return os({while:()=>o<r.length,body:()=>t(r[o],o),step:()=>{o++}})})),Qp=u(e=>typeof e[0]=="boolean"||Ce(e[0]),(e,{onFalse:t,onTrue:r})=>typeof e=="boolean"?e?r:t:m(e,on(o=>o?r:t))),Xp=m(sn,e=>el(e)),el=e=>W(_r(e)),tr=e=>{let t=new ke(Ao);t.i0=ag(Or);let r=o=>o._tag==="Blocked"?Ee(o.i0,tr(o.i1)):o;return t.i1=()=>bi(e,r),t},_C=e=>{let t=new ke(Ao);t.i0=ag(Or);let r=o=>o._tag==="Blocked"?Ee(o.i0,tr(o.i1)):o;return t.i1=o=>ci(o)?Yr(e(tr)):Yr(e(Zr)),m(t,r)},oo=u(2,(e,t)=>Re(r=>m(ie(r(e)),o=>Lg(t,o)))),_=u(2,(e,t)=>m(e,r=>D(()=>t(r)))),tl=u(2,(e,{onFailure:t,onSuccess:r})=>fe(e,{onFailure:o=>wr(()=>t(o)),onSuccess:o=>D(()=>r(o))})),vo=u(2,(e,t)=>te(e,{onFailure:r=>{let o=wo(r);switch(o._tag){case"Left":return wr(()=>t(o.left));case"Right":return W(o.right)}},onSuccess:y})),rl=u(2,(e,t)=>Rr(e,on(r=>dl(r)?q:t(r.i0)))),Rr=u(2,(e,t)=>Re(r=>te(r(e),{onFailure:o=>{let n=Z(o);return te(t(n),{onFailure:s=>Z(Me(o,s)),onSuccess:()=>n})},onSuccess:o=>{let n=ae(o);return G(t(n),n)}}))),cn=u(2,(e,t)=>Rr(e,xl({onFailure:r=>rn(r)?ne(t(Va(r))):q,onSuccess:()=>q}))),es=u(2,(e,t)=>DN(e,t,y)),ts=e=>Dg(e,k),Dg=u(2,(e,t)=>fe(e,{onFailure:r=>bg(t(r)),onSuccess:y})),OC=(e,t)=>I(e).reduceRight(([r,o],n)=>{let s=t(n);switch(s._tag){case"Left":return[[s.left,...r],o];case"Right":return[r,[s.right,...o]]}},[new Array,new Array]),jt=u(2,(e,t)=>Ae(ko,t)(e)),wC=u(2,(e,t)=>Ye(ko,r=>An(r,t))(e)),rs=u(2,(e,t)=>yi(r=>jt(e,t(r)))),ol=ye((e,t)=>y(t.runtimeFlags)),y=e=>{let t=new Yp(Se);return t.i0=e,t},v=e=>m(D(e),k),D=e=>{let t=new ke(Up);return t.i0=e,t},Bt=u(2,(e,t)=>m(e,r=>ee(t(r),r))),nl=e=>ye(t=>{let r=t.getFiberRef(nc),o=V(()=>t.scope())(r);return e(Ae(nc,x(o)))}),DN=u(3,(e,t,r)=>te(e,{onFailure:o=>Fp(o).length>0?W(Ed(j0(o))):t(),onSuccess:r})),Zr=e=>{let t=new ke(Ao);t.i0=cg(Or),t.i1=()=>bi(e,r);let r=o=>o._tag==="Blocked"?Ee(o.i0,Zr(o.i1)):o;return t},Re=e=>{let t=new ke(Ao);t.i0=cg(Or);let r=o=>o._tag==="Blocked"?Ee(o.i0,Zr(o.i1)):o;return t.i1=o=>ci(o)?Yr(e(tr)):Yr(e(Zr)),m(t,r)},q=y(void 0),Di=e=>{let t=new ke(Ao);return t.i0=e,t.i1=void 0,t},Si=u(2,(e,t)=>m(t,r=>r?_(x)(e):y(g()))),os=e=>{let t=new ke(di);return t.i0=e.while,t.i1=e.body,t.i2=e.step,t},RC=u(2,(e,t)=>Ae(e,pl,t)),FC=u(2,(e,t)=>Ae(e,cc,t)),AC=u(2,(e,t)=>{let r=new ke(Ao);return r.i0=t,r.i1=()=>e,r}),vC=u(2,(e,t)=>Ae(e,pc,t)),Ut=e=>{let t=new ke(hi);return typeof e?.priority<"u"?Mg(e.priority)(t):t},sl=u(2,(e,t)=>m(e,r=>_(t,o=>[r,o])));var Ei=u(2,(e,t)=>m(e,r=>ee(t,r))),G=u(2,(e,t)=>m(e,()=>t)),Mo=u(3,(e,t,r)=>m(e,o=>_(t,n=>r(o,n)))),ns=Qr(()=>{let e=setInterval(()=>{},2147483647);return K(D(()=>clearInterval(e)))}),un=e=>m(sn,t=>sr(t)(e)),sr=u(2,(e,t)=>m(e.interruptAsFork(t),()=>e.await())),Sg={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return C(this,arguments)}},Eg={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return C(this,arguments)}},Cg={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return C(this,arguments)}},_g={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return C(this,arguments)}},il={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return C(this,arguments)}},al={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return C(this,arguments)}},Og={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return C(this,arguments)}},wg={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return C(this,arguments)}},Rg=[Sg,Og,al,il,_g,Cg,Eg,wg],SN="@effect/io/FiberRef",EN=Symbol.for(SN),CN={_A:e=>e},ct=e=>MC(e,t=>[t,t]);var Fe=u(2,(e,t)=>m(ct(e),t)),Xn=u(2,(e,t)=>MC(e,()=>[void 0,t]));var MC=u(2,(e,t)=>ye(r=>{let[o,n]=t(r.getFiberRef(e));return r.setFiberRef(e,n),y(o)}));var _N="@effect/io/RequestResolver",kC=Symbol.for(_N),ON={_R:e=>e,_A:e=>e},bC=class e{constructor(t,r){this.runAll=t,this.target=r,this[yC]=ON,this.runAll=t}[(yC=kC,R)](){return this.target?E(this.target):Ko(this)}[F](t){return this.target?wN(t)&&O(this.target,t.target):this===t}identified(...t){return new e(this.runAll,$r(t))}pipe(){return C(this,arguments)}},wN=e=>typeof e=="object"&&e!=null&&kC in e;var Ae=u(3,(e,t,r)=>m(rr(Ei(ct(t),Xn(t,r)),()=>Yr(e),o=>Xn(t,o)),o=>o._tag==="Blocked"?Ee(o.i0,Ae(o.i1,t,r)):o)),Ye=u(3,(e,t,r)=>Fe(t,o=>Ae(e,t,r(o)))),_e=(e,t)=>Ci(e,{differ:y0(),fork:t?.fork??k,join:t?.join}),Fg=e=>Ci(e,{differ:x0(),fork:dp()}),cl=e=>Ci(e,{differ:g0(),fork:lp()}),Ci=(e,t)=>({[EN]:CN,initial:e,diff:(r,o)=>m0(r,o)(t.differ),combine:(r,o)=>d0(r,o)(t.differ),patch:r=>o=>h0(r,o)(t.differ),fork:t.fork,join:t.join??((r,o)=>o),pipe(){return C(this,arguments)}}),TC=e=>Ci(e,{differ:ig,fork:qp}),ko=cl(Pt()),ic=_e(0),Ag=_e(2048),ac=Y(Symbol.for("@effect/io/FiberRef/currentLogAnnotation"),()=>_e(So())),vg=_e(il),ul=Y(Symbol.for("@effect/io/FiberRef/currentLogSpan"),()=>_e(Cr())),To=Y(Symbol.for("@effect/io/FiberRef/currentScheduler"),()=>_e(gg)),IC=u(2,(e,t)=>Ae(e,To,t)),Mg=u(2,(e,t)=>Ae(e,ic,t)),PC=u(2,(e,t)=>Ae(e,Ag,t)),pl=Y(Symbol.for("@effect/io/FiberRef/currentConcurrency"),()=>_e("unbounded")),cc=Y(Symbol.for("@effect/io/FiberRef/currentRequestBatching"),()=>_e(!0)),uc=Y(Symbol.for("@effect/io/FiberRef/currentUnhandledErrorLogLevel"),()=>_e(x(al))),NC=u(2,(e,t)=>Ae(e,uc,t)),Io=Fg(it()),LC=ct(Io),nc=Y(Symbol.for("@effect/io/FiberRef/currentForkScopeOverride"),()=>_e(g(),{fork:()=>g(),join:(e,t)=>e})),ss=Y(Symbol.for("@effect/io/FiberRef/currentInterruptedCause"),()=>_e(ht,{fork:()=>ht,join:(e,t)=>e})),Po=Y(Symbol.for("@effect/io/FiberRef/currentTracerSpan"),()=>_e(Cr())),pc=Y(Symbol.for("@effect/io/FiberRef/currentTracerTiming"),()=>_e(!0)),ll=Y(Symbol.for("@effect/io/FiberRef/currentTracerSpanAnnotations"),()=>_e(So())),fl=Y(Symbol.for("@effect/io/FiberRef/currentTracerSpanLinks"),()=>_e(mt())),ml=Symbol.for("@effect/io/Scope"),kg=Symbol.for("@effect/io/CloseableScope");var _i=(e,t)=>e.addFinalizer(t),pn=(e,t)=>e.close(t),Tg=(e,t)=>e.fork(t),Ig=u(2,(e,t)=>_(FN(e,t),Be({onNone:()=>()=>q,onSome:r=>o=>RN(r,o)(e)}))),RN=u(3,(e,t,r)=>v(()=>{switch(e.state._tag){case"Exited":return q;case"Running":{let o=e.state.finalizers.get(t);return e.state.finalizers.delete(t),o!=null?e.state.update(o)(r):q}}})),FN=u(2,(e,t)=>v(()=>{switch(e.state._tag){case"Exited":return e.state.nextKey+=1,ee(t(e.state.exit),g());case"Running":{let r=e.state.nextKey;return e.state.finalizers.set(r,t),e.state.nextKey+=1,y(x(r))}}}));var qC=D(()=>({state:{_tag:"Running",nextKey:0,finalizers:new Map,update:k}}));var Pg=e=>e._tag==="Failure",dl=e=>e._tag==="Success";var HC=u(2,(e,t)=>{switch(e._tag){case De:return Z(e.i0);case Se:return ae(t)}}),lc=e=>HC(e,void 0);var Oi=(e,t)=>AN(e,t?.parallel?We:Me),hl=e=>Z(Ve(e));var Fr=e=>Z(Gn(e)),Z=e=>{let t=new Jp(De);return t.i0=e,t},jC=u(2,(e,t)=>{switch(e._tag){case De:return Z(e.i0);case Se:return t(e.i0)}});var BC=e=>jC(k)(e);var gl=e=>Z(_r(e)),Gp=u(2,(e,t)=>{switch(e._tag){case De:return Z(e.i0);case Se:return ae(t(e.i0))}});var xl=u(2,(e,{onFailure:t,onSuccess:r})=>{switch(e._tag){case De:return t(e.i0);case Se:return r(e.i0)}}),is=u(2,(e,{onFailure:t,onSuccess:r})=>{switch(e._tag){case De:return t(e.i0);case Se:return r(e.i0)}}),ae=e=>{let t=new Yp(Se);return t.i0=e,t};var no=ae(void 0);var fc=u(3,(e,t,{onFailure:r,onSuccess:o})=>{switch(e._tag){case De:switch(t._tag){case Se:return Z(e.i0);case De:return Z(r(e.i0,t.i0))}case Se:switch(t._tag){case Se:return ae(o(e.i0,t.i0));case De:return Z(t.i0)}}}),AN=(e,t)=>{let r=$r(e);return ot(r)?x(Gp(o=>Array.from(o))(Gp(Eo)(pt(Gp(ve)(nt(r)),(o,n)=>fc(n,{onSuccess:(s,i)=>Pe(i)(s),onFailure:t})(o))(st(r))))):g()},wi=e=>({[pC]:lC,state:_t(Bp([])),blockingOn:e,pipe(){return C(this,arguments)}}),gt=()=>m(sn,e=>UC(e)),UC=e=>D(()=>wi(e)),Ne=e=>Qr(t=>{let r=Lt(e.state);switch(r._tag){case rc:return B(r.effect);case Qn:return Xt(Bp([t,...r.joiners]))(e.state),K(vN(e,t))}},e.blockingOn),Ng=u(2,(e,t)=>oo(t,e)),Ri=u(2,(e,t)=>D(()=>{let r=Lt(e.state);switch(r._tag){case rc:return!1;case Qn:{Xt(dg(t))(e.state);for(let o=0;o<r.joiners.length;o++)r.joiners[o](t);return!0}}})),Lg=u(2,(e,t)=>Ri(e,t)),mc=u(2,(e,t)=>Ri(e,z(t)));var as=u(2,(e,t)=>Ri(e,W(t)));var WC=e=>m(sn,t=>Ri(e,el(t)));var Fi=u(2,(e,t)=>Ri(e,y(t)));var Ai=(e,t)=>{let r=Lt(e.state);if(r._tag===Qn){Xt(dg(t))(e.state);for(let o=r.joiners.length-1;o>=0;o--)r.joiners[o](t)}},vN=(e,t)=>D(()=>{let r=Lt(e.state);r._tag===Qn&&Xt(Bp(r.joiners.filter(o=>o!==t)))(e.state)});var cs=Ne;var zC=Lg;var KC=WC;var qg=wi;var GC=BC;var VC=ae;var QC,MN="@effect/io/Clock",jg=Symbol.for(MN),so=Ct(jg),kN=2**31-1,YC={unsafeSchedule(e,t){let r=Wr(t);if(r>kN)return Yt;let o=!1,n=setTimeout(()=>{o=!0,e()},r);return()=>(clearTimeout(n),!o)}},ZC=function(){let e=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*e;let t="timeOrigin"in performance&&typeof performance.timeOrigin=="number"?BigInt(Math.round(performance.timeOrigin*1e6)):BigInt(Date.now())*e;return()=>t+BigInt(Math.round(performance.now()*1e6))}(),TN=function(){let e=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!e)return ZC;let t=ZC()-e.bigint();return()=>t+e.bigint()}(),Hg=class{constructor(){this[QC]=jg,this.currentTimeMillis=D(()=>this.unsafeCurrentTimeMillis()),this.currentTimeNanos=D(()=>this.unsafeCurrentTimeNanos())}unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return TN()}scheduler(){return y(YC)}sleep(t){return Qr(r=>{let o=YC.unsafeSchedule(()=>r(q),t);return K(ne(D(o)))})}};QC=jg;var XC=()=>new Hg;var yl="And",bl="Or",Dl="InvalidData",Sl="MissingData",El="SourceUnavailable",Cl="Unsupported";var PN="@effect/io/Config/Error",Bg=Symbol.for(PN),vi={[Bg]:Bg},_l=(e,t)=>{let r=Object.create(vi);return r._tag=yl,r.left=e,r.right=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),r},Ol=(e,t)=>{let r=Object.create(vi);return r._tag=bl,r.left=e,r.right=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),r},io=(e,t,r={pathDelim:"."})=>{let o=Object.create(vi);return o._tag=Dl,o.path=e,o.message=t,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Invalid data at ${Br(r.pathDelim)(this.path)}: "${this.message}")`}}),o},Ar=(e,t,r={pathDelim:"."})=>{let o=Object.create(vi);return o._tag=Sl,o.path=e,o.message=t,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Missing data at ${Br(r.pathDelim)(this.path)}: "${this.message}")`}}),o},t_=(e,t,r,o={pathDelim:"."})=>{let n=Object.create(vi);return n._tag=El,n.path=e,n.message=t,n.cause=r,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Source unavailable at ${Br(o.pathDelim)(this.path)}: "${this.message}")`}}),n},wl=(e,t,r={pathDelim:"."})=>{let o=Object.create(vi);return o._tag=Cl,o.path=e,o.message=t,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${Br(r.pathDelim)(this.path)}: "${this.message}")`}}),o};var No=u(2,(e,t)=>{switch(e._tag){case yl:return _l(No(t)(e.left),No(t)(e.right));case bl:return Ol(No(t)(e.left),No(t)(e.right));case Dl:return io([...t,...e.path],e.message);case Sl:return Ar([...t,...e.path],e.message);case El:return t_([...t,...e.path],e.message,e.cause);case Cl:return wl([...t,...e.path],e.message)}}),NN={andCase:(e,t,r)=>t&&r,orCase:(e,t,r)=>t&&r,invalidDataCase:Yt,missingDataCase:Lr,sourceUnavailableCase:Yt,unsupportedCase:Yt},r_=u(3,(e,t,r)=>{let o=[e],n=[];for(;o.length>0;){let i=o.pop();switch(i._tag){case yl:{o.push(i.right),o.push(i.left),n.push(K({_tag:"AndCase"}));break}case bl:{o.push(i.right),o.push(i.left),n.push(K({_tag:"OrCase"}));break}case Dl:{n.push(B(r.invalidDataCase(t,i.path,i.message)));break}case Sl:{n.push(B(r.missingDataCase(t,i.path,i.message)));break}case El:{n.push(B(r.sourceUnavailableCase(t,i.path,i.message,i.cause)));break}case Cl:{n.push(B(r.unsupportedCase(t,i.path,i.message)));break}}}let s=[];for(;n.length>0;){let i=n.pop();switch(i._tag){case"Left":{switch(i.left._tag){case"AndCase":{let a=s.pop(),c=s.pop(),p=r.andCase(t,a,c);s.push(p);break}case"OrCase":{let a=s.pop(),c=s.pop(),p=r.orCase(t,a,c);s.push(p);break}}break}case"Right":{s.push(i.right);break}}}if(s.length===0)throw new Error("BUG: ConfigError.reduceWithContext - please report an issue at https://github.com/Effect-TS/io/issues");return s.pop()}),o_=e=>r_(e,void 0,NN);var Ug=o_;var n_="@effect/io/Config/Secret",Wg=Symbol.for(n_),qN={[Wg]:Wg,[R](){return T(bo(this.raw))(E(n_))},[F](e){return HN(e)&&this.raw.length===e.raw.length&&this.raw.every((t,r)=>O(t,e.raw[r]))}},HN=e=>typeof e=="object"&&e!=null&&Wg in e,jN=e=>{let t=Object.create(qN);return Object.defineProperty(t,"toString",{enumerable:!1,value(){return"ConfigSecret(<redacted>)"}}),Object.defineProperty(t,"raw",{enumerable:!1,value:e}),t};var s_=e=>jN(e.split("").map(t=>t.charCodeAt(0)));var Fl="Constant",Al="Fail",dc="Fallback",vl="Described",Ml="Lazy",kl="MapOrFail",Tl="Nested",Il="Primitive",Pl="Sequence",Nl="HashMap",Ll="ZipWith";var UN="@effect/io/Config",Hl=Symbol.for(UN),WN={_A:e=>e},ir={[Hl]:WN,pipe(){return C(this,arguments)}},c_=e=>{let t=ln("a boolean property",r=>{switch(r){case"true":case"yes":case"on":case"1":return B(!0);case"false":case"no":case"off":case"0":return B(!1);default:{let o=io([],`Expected a boolean value, but received ${r}`);return K(o)}}});return e===void 0?t:ar(e)(t)},u_=(e,t)=>Lo(ft)(jl(e,t)),jl=(e,t)=>Lo(t===void 0?ql(e):ar(t)(ql(e)),qt),p_=e=>{let t=ln("a date property",r=>{let o=Date.parse(r);return Number.isNaN(o)?K(io([],`Expected a date value but received ${r}`)):B(new Date(o))});return e===void 0?t:ar(e)(t)},l_=e=>{let t=Object.create(ir);return t._tag=Al,t.message=e,t.parse=()=>K(wl([],e)),t},f_=e=>{let t=ln("a number property",r=>{let o=Number.parseFloat(r);return Number.isNaN(o)?K(io([],`Expected an number value but received ${r}`)):B(o)});return e===void 0?t:ar(e)(t)},m_=e=>{let t=ln("an integer property",r=>{let o=Number.parseInt(r,10);return Number.isNaN(o)?K(io([],`Expected an integer value but received ${r}`)):B(o)});return e===void 0?t:ar(e)(t)},d_=e=>{let t=Mi(zg(),r=>{let o=r.toUpperCase(),n=Rg.find(s=>s.label===o);return n===void 0?K(io([],`Expected a log level, but found: ${r}`)):B(n)});return e===void 0?t:ar(t,e)},Lo=u(2,(e,t)=>Mi(e,r=>B(t(r)))),h_=u(2,(e,t)=>Mi(e,r=>{try{return B(t(r))}catch(o){return K(io([],o instanceof Error?o.message:`${o}`))}})),Mi=u(2,(e,t)=>{let r=Object.create(ir);return r._tag=kl,r.original=e,r.mapOrFail=t,r}),g_=e=>t=>Ar([],`Expected ${t.description} with name ${e}`),ar=u(2,(e,t)=>{let r=Object.create(ir);return r._tag=Tl,r.name=t,r.config=e,r}),x_=u(2,(e,t)=>{let r=Object.create(ir);return r._tag=dc,r.first=e,r.second=hc(t),r.condition=Lr,r}),Bl=u(2,(e,t)=>{let r=Object.create(ir);return r._tag=dc,r.first=e,r.second=hc(t.orElse),r.condition=t.if,r}),y_=e=>Bl({orElse:()=>ki(g()),if:Ug})(Lo(x)(e)),ln=(e,t)=>{let r=Object.create(ir);return r._tag=Il,r.description=e,r.parse=t,r},ql=e=>{let t=Object.create(ir);return t._tag=Pl,t.config=e,t},b_=e=>{let t=ln("a secret property",r=>B(s_(r)));return e===void 0?t:ar(e)(t)},D_=(e,t)=>{let r=Lo(jl(e),wt);return t===void 0?r:ar(t)(r)},zg=e=>{let t=ln("a text property",B);return e===void 0?t:ar(e)(t)},S_=e=>Array.isArray(e)?a_(e):Symbol.iterator in e?a_([...e]):E_(e),E_=e=>{let t=Object.entries(e),r=Lo(n=>({[t[0][0]]:n}))(t[0][1]);if(t.length===1)return r;let o=t.slice(1);for(let[n,s]of o)r=gc(s,(i,a)=>({...i,[n]:a}))(r);return r},ki=e=>{let t=Object.create(ir);return t._tag=Fl,t.value=e,t.parse=()=>B(e),t},hc=e=>{let t=Object.create(ir);return t._tag=Ml,t.config=e,t},C_=e=>hc(()=>ki(e())),__=(e,t)=>{let r=Object.create(ir);return r._tag=Nl,r.valueConfig=e,t===void 0?r:ar(t)(r)},Kg=e=>typeof e=="object"&&e!=null&&Hl in e,a_=e=>{if(e.length===0)return ki([]);if(e.length===1)return Lo(e[0],r=>[r]);let t=Lo(e[0],r=>[r]);for(let r=1;r<e.length;r++){let o=e[r];t=gc(o,(n,s)=>[...n,s])(t)}return t},$g=e=>Kg(e)?e:E_(Object.fromEntries(Object.entries(e).map(([t,r])=>[t,$g(r)]))),O_=u(2,(e,{message:t,validation:r})=>Mi(e,o=>r(o)?B(o):K(io([],t)))),w_=u(2,(e,t)=>Bl(e,{orElse:()=>ki(t),if:Ug})),R_=u(2,(e,t)=>{let r=Object.create(ir);return r._tag=vl,r.config=e,r.description=t,r}),F_=u(2,(e,t)=>gc(e,t,(r,o)=>[r,o])),gc=u(3,(e,t,r)=>{let o=Object.create(ir);return o._tag=Ll,o.left=e,o.right=t,o.zip=r,o});var v_={_tag:"Empty"};var Ul=u(2,(e,t)=>{let r=Ka(t),o=e;for(;za(r);){let n=r.head;switch(n._tag){case"Empty":{r=r.tail;break}case"AndThen":{r=Oo(n.first,Oo(n.second,r.tail));break}case"MapName":{o=xr(o,n.f),r=r.tail;break}case"Nested":{o=It(o,n.name),r=r.tail;break}case"Unnested":{if(wd(n.name)(Aa(o)))o=Ue(o),r=r.tail;else return K(Ar(o,`Expected ${n.name} to be in path in ConfigProvider#unnested`));break}}}return B(o)});var Wl=(e,t)=>[...e,...t],KN="@effect/io/Config/Provider",Gg=Symbol.for(KN),Ti=Ct(Gg),$N="@effect/io/Config/Provider/Flat",M_=Symbol.for($N),GN=e=>({[Gg]:Gg,pipe(){return C(this,arguments)},...e}),VN=e=>({[M_]:M_,patch:e.patch,load:(t,r,o=!0)=>e.load(t,r,o),enumerateChildren:e.enumerateChildren}),JN=e=>GN({load:t=>m(cr(e,jr(),t,!1),r=>Be(Aa(r),{onNone:()=>z(Ar(jr(),`Expected a single value having structure: ${t}`)),onSome:y})),flattened:e}),k_=(e={})=>{let{pathDelim:t,seqDelim:r}=Object.assign({},{pathDelim:"_",seqDelim:","},e),o=c=>Br(t)(c),n=c=>c.split(t),s=()=>typeof process<"u"&&"env"in process&&typeof process.env=="object"?process.env:{};return JN(VN({load:(c,p,l=!0)=>{let f=o(c),d=s(),h=f in d?x(d[f]):g();return m(S=>XN(S,c,p,r,l))(vo(()=>Ar(c,`Expected ${f} to exist in the process context`))(h))},enumerateChildren:c=>D(()=>{let p=s(),l=Object.keys(p),d=Array.from(l).map(h=>n(h.toUpperCase())).filter(h=>{for(let S=0;S<c.length;S++){let w=Lu(S)(c),A=h[S];if(A===void 0||w!==A)return!1}return!0}).flatMap(h=>h.slice(c.length,c.length+1));return wt(d)}),patch:v_}))};var YN=(e,t,r,o)=>{let n=zu(r.length,c=>c>=o.length?g():x([e(c),c+1])),s=zu(o.length,c=>c>=r.length?g():x([t(c),c+1])),i=Wl(r,n),a=Wl(o,s);return[i,a]},cr=(e,t,r,o)=>{let n=r;switch(n._tag){case Fl:return y(Et(n.value));case vl:return v(()=>cr(e,t,n.config,o));case Al:return z(Ar(t,n.message));case dc:return Ft(s=>n.condition(s)?Ft(i=>z(Ol(s,i)))(cr(e,t,n.second,o)):z(s))(v(()=>cr(e,t,n.first,o)));case Ml:return v(()=>cr(e,t,n.config(),o));case kl:return v(()=>m(Je(s=>vo(No(t))(n.mapOrFail(s))))(cr(e,t,n.original,o)));case Tl:return v(()=>cr(e,Wl(t,Et(n.name)),n.config,o));case Il:return m(s=>m(i=>{if(i.length===0){let a=V(()=>"<n/a>")(Fd(s));return z(g_(a))}return y(i)})(e.load(s,n,o)))(Ul(t,e.patch));case Pl:return m(s=>m(i=>i.length===0?v(()=>_(cr(e,s,n.config,!0),Et)):_(a=>{let c=Ta(a);return c.length===0?Et(jr()):Et(c)})(Je(i,a=>cr(e,Pu(t,`[${a}]`),n.config,!0))))(m(rL)(e.enumerateChildren(s))))(Ul(t,e.patch));case Nl:return v(()=>m(s=>m(i=>_(a=>{if(a.length===0)return Et(So());let c=a.map(p=>Array.from(p));return xr(p=>sp(ju(I(i),p)))(eL(c))})(Je(a=>cr(e,Wl(s,Et(a)),n.valueConfig,o))(i)))(e.enumerateChildren(s)))(Ul(t,e.patch)));case Ll:return v(()=>m(s=>m(i=>{if(xe(s)&&xe(i))return z(_l(s.left,i.left));if(xe(s)&&qr(i))return z(s.left);if(qr(s)&&xe(i))return z(i.left);if(qr(s)&&qr(i)){let a=Br(".")(t),c=ZN(t,a),[p,l]=YN(c,c,xr(B)(s.right),xr(B)(i.right));return Je(([f,d])=>_(([h,S])=>n.zip(h,S))(sl(f,d)))(ju(l)(p))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/io/issues")})(eo(cr(e,t,n.right,o))))(eo(cr(e,t,n.left,o))))}},ZN=(e,t)=>r=>K(Ar(e,`The element at index ${r} in a sequence at path "${t}" was missing`));var QN=(e,t)=>e.split(new RegExp(`\\s*${tL(t)}\\s*`)),XN=(e,t,r,o,n)=>n?vo(No(t))(Je(s=>r.parse(s.trim()))(QN(e,o))):vo(No(t))(_(Et)(r.parse(e))),eL=e=>Object.keys(e[0]).map(t=>e.map(r=>r[t])),tL=e=>e.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&"),rL=e=>_(Tu)(eo(tl({onFailure:()=>jr(),onSuccess:Hr(Tt)})(Je(e,nL))));var oL=/^(\[(\d+)\])$/,nL=e=>{let t=e.match(oL);if(t!==null){let r=t[2];return gr(sL)(r!==void 0&&r.length>0?x(r):g())}return g()};var sL=e=>{let t=Number.parseInt(e);return Number.isNaN(t)?g():x(t)};var Vg=Symbol("@effect/io/Console"),T_=Ct(Vg),I_={[Vg]:Vg,assert(e,...t){return D(()=>{console.assert(e,...t)})},clear:D(()=>{console.clear()}),count(e){return D(()=>{console.count(e)})},countReset(e){return D(()=>{console.countReset(e)})},debug(...e){return D(()=>{console.debug(...e)})},dir(e,t){return D(()=>{console.dir(e,t)})},dirxml(...e){return D(()=>{console.dirxml(...e)})},error(...e){return D(()=>{console.error(...e)})},group(e){return e?.collapsed?D(()=>console.groupCollapsed(e?.label)):D(()=>console.group(e?.label))},groupEnd:D(()=>{console.groupEnd()}),info(...e){return D(()=>{console.info(...e)})},log(...e){return D(()=>{console.log(...e)})},table(e,t){return D(()=>{console.table(e,t)})},time(e){return D(()=>console.time(e))},timeEnd(e){return D(()=>console.timeEnd(e))},timeLog(e,...t){return D(()=>{console.timeLog(e,...t)})},trace(...e){return D(()=>{console.trace(...e)})},warn(...e){return D(()=>{console.warn(...e)})},withGroup(e,t){return rr(t?.collapsed?D(()=>console.groupCollapsed(t?.label)):D(()=>console.group(t?.label)),()=>e,()=>D(()=>console.groupEnd()))},withTime(e,t){return rr(D(()=>console.time(t)),()=>e,()=>D(()=>console.timeEnd(t)))}};var P_,cL="@effect/io/Random",Yg=Symbol.for(cL),Zg=Ct(Yg),Jg=class{constructor(t){this.seed=t,this[P_]=Yg,this.PRNG=new Ps(t)}next(){return D(()=>this.PRNG.number())}nextBoolean(){return _(this.next(),t=>t>.5)}nextInt(){return D(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(t,r){return _(this.next(),o=>(r-t)*o+t)}nextIntBetween(t,r){return D(()=>this.PRNG.integer(r-t)+t)}shuffle(t){return uL(t,r=>this.nextIntBetween(0,r+1))}};P_=Yg;var uL=(e,t)=>v(()=>m(r=>{let o=[];for(let n=r.length;n>=2;n=n-1)o.push(n);return ee($r(r))(vt(n=>_(s=>pL(r,n-1,s))(t(n)))(o))})(D(()=>Array.from(e)))),pL=(e,t,r)=>{let o=e[t];return e[t]=e[r],e[r]=o,e},N_=e=>new Jg(e);var L_=Symbol.for("@effect/io/Tracer"),fL=e=>({[L_]:L_,...e}),Ii=Ct(Symbol.for("@effect/io/Tracer")),mL=Y("@effect/io/Tracer/SpanId.ids",()=>_t(0)),Qg=class{constructor(t,r,o,n,s){this.name=t,this.parent=r,this.context=o,this.links=n,this.startTime=s,this._tag="Span",this.traceId="native",this.events=[],this.end=(i,a)=>{this.status={_tag:"Ended",endTime:i,exit:a,startTime:this.status.startTime}},this.attribute=(i,a)=>{this.attributes.set(i,a)},this.event=(i,a,c)=>{this.events.push([i,a,c??{}])},this.status={_tag:"Started",startTime:s},this.attributes=new Map,this.spanId=`span${IE(mL)}`}},q_=fL({span:(e,t,r,o,n)=>new Qg(e,t,r,o,n)});var dL=Ie(Ii,q_)(Ie(Ti,k_())(Ie(Zg,N_(Math.random()*4294967296>>>0))(Ie(T_,I_)(Ie(so,XC())(Pt()))))),xt=cl(dL),j_=e=>{let t=rt(e);return xc(r=>r.sleep(t))},xc=e=>Fe(xt,t=>e(Ur(t,so))),B_=xc(e=>e.currentTimeMillis),U_=xc(e=>e.currentTimeNanos),W_=u(2,(e,t)=>Ye(xt,Ie(so,t))(e)),z_=u(2,(e,t)=>Ye(xt,Ie(Ti,t))(e)),Xg=e=>Fe(xt,t=>e(Ur(t,Ti))),K_=e=>Xg(t=>t.load(e));var zl=e=>Fe(xt,t=>e(Ur(t,Zg)));var Kl=e=>Fe(xt,t=>e(Ur(t,Ii))),$_=u(2,(e,t)=>Ye(xt,Ie(Ii,t))(e));var ex=j_,$l=B_,tx=U_,G_=xc;var J_;function Y_(e){return new us(e)}var rx=Symbol.for("@effect/io/FiberRefs"),us=class{constructor(t){this.locals=t,this[J_]=rx}pipe(){return C(this,arguments)}};J_=rx;var hL=(e,t,r,o=!1)=>{let n=e,s=t,i=r,a=o,c;for(;c===void 0;)if(se(s)&&se(i)){let p=oe(s)[0],l=Ue(s),f=oe(i)[0],d=oe(i)[1],h=Ue(i);p.startTimeMillis<f.startTimeMillis?(i=h,a=!0):p.startTimeMillis>f.startTimeMillis?s=l:p.id<f.id?(i=h,a=!0):p.id>f.id?s=l:c=[d,a]}else c=[n.initial,!0];return c},Gl=u(3,(e,t,r)=>{let o=new Map(e.locals);for(let[n,s]of r.locals){let i=oe(s)[1];if(!O(oe(s)[0],t)){if(!o.has(n)){if(O(i,n.initial))continue;o.set(n,[[t,n.join(n.initial,i)]]);continue}let a=o.get(n),[c,p]=hL(n,a,s);if(p){let l=n.diff(c,i),f=oe(a)[1],d=n.join(f,n.patch(l)(f));if(!O(f,d)){let h,S=oe(a)[0];O(S,t)?h=It([S,d])(Ue(a)):h=It([t,d])(a),o.set(n,h)}}}}return new us(new Map(o))}),Vl=u(2,(e,t)=>{let r=new Map;for(let[o,n]of e.locals.entries()){let s=oe(n)[1],i=o.patch(o.fork)(s);O(s,i)?r.set(o,n):r.set(o,It([t,i])(n))}return new us(r)}),Z_=e=>wt(e.locals.keys()),Q_=e=>vt(Z_(e),t=>Xn(t,Pi(e,t))),bc=u(2,(e,t)=>{let r=new Map(e.locals);return r.delete(t),new us(r)}),Dc=u(2,(e,t)=>e.locals.has(t)?x(oe(e.locals.get(t))[1]):g()),Pi=u(2,(e,t)=>V(()=>t.initial)(Dc(e,t))),ps=u(2,(e,{fiberId:t,fiberRef:r,value:o})=>{let n=e.locals.has(r)?e.locals.get(r):jr(),s;if(wa(n))s=Et([t,o]);else{let[a,c]=oe(n);if(O(a,t)){if(O(c,o))return e;s=It([t,o])(Ue(n))}else s=It([t,o])(n)}let i=new Map(e.locals);return new us(i.set(r,s))});var X_=Vl;var eO=Gl,tO=Q_,nx=ps,rO=Y_;var nO="Empty",sO="Add",iO="Remove",aO="Update",cO="AndThen",uO={_tag:nO},Yl=(e,t)=>{let r=new Map(e.locals),o=uO;for(let[n,s]of t.locals.entries()){let i=oe(s)[1],a=r.get(n);if(a!==void 0){let c=oe(a)[1];O(c,i)||(o=Jl({_tag:aO,fiberRef:n,patch:n.diff(c,i)})(o))}else o=Jl({_tag:sO,fiberRef:n,value:i})(o);r.delete(n)}for(let[n]of r.entries())o=Jl({_tag:iO,fiberRef:n})(o);return o},Jl=u(2,(e,t)=>({_tag:cO,first:e,second:t})),Zl=u(3,(e,t,r)=>{let o=r,n=Et(e);for(;se(n);){let s=oe(n),i=Ue(n);switch(s._tag){case nO:{n=i;break}case sO:{o=ps(o,{fiberId:t,fiberRef:s.fiberRef,value:s.value}),n=i;break}case iO:{o=bc(o,s.fiberRef),n=i;break}case aO:{let a=Pi(o,s.fiberRef);o=ps(o,{fiberId:t,fiberRef:s.fiberRef,value:s.fiberRef.patch(s.patch)(a)}),n=i;break}case cO:{n=It(s.first)(It(s.second)(i));break}}}return o});var lO,fO="@effect/io/Metric/Label",sx=Symbol.for(fO),ix=class{constructor(t,r){this.key=t,this.value=r,this[lO]=sx}[(lO=sx,R)](){return T(E(this.value))(T(E(this.key))(E(fO)))}[F](t){return gL(t)&&this.key===t.key&&this.value===t.value}pipe(){return C(this,arguments)}},Ql=(e,t)=>new ix(e,t),gL=e=>typeof e=="object"&&e!=null&&sx in e;var Xl=class e{constructor(t){this.self=t,this.called=!1}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new e(this.self)}};var yL=Sg,ax=Eg,cx=Cg,ux=_g,px=il,lx=al,fx=Og,bL=wg;var DL=Cn(e=>e.ordinal)(Tt);var dO=id(DL);var hO=e=>{switch(e){case"All":return yL;case"Debug":return lx;case"Error":return cx;case"Fatal":return ax;case"Info":return px;case"Trace":return fx;case"None":return bL;case"Warning":return ux}};var xO=(e,t)=>({label:e,startTime:t}),yO=e=>t=>`${t.label.replace(/[\s="]/g,"_")}=${e-t.startTime}ms`;var bO=xO,DO=yO;var EO,ef=Symbol.for("@effect/io/Ref"),dx={_A:e=>e},mx=class{constructor(t){this.ref=t,this[EO]=dx}modify(t){return D(()=>{let r=Lt(this.ref),[o,n]=t(r);return r!==n&&Xt(n)(this.ref),o})}pipe(){return C(this,arguments)}};EO=ef;var tf=e=>new mx(_t(e)),ls=e=>D(()=>tf(e)),vr=e=>e.modify(t=>[t,t]),ao=u(2,(e,t)=>e.modify(()=>[void 0,t])),CO=u(2,(e,t)=>e.modify(r=>[r,t]));var rf=u(2,(e,t)=>e.modify(t));var Sc=u(2,(e,t)=>e.modify(r=>[void 0,t(r)]));var Ec=ls,nf=vr,_O=CO;var OO=rf;var wO=Sc;var FO=Kl;var AO=u(e=>Ce(e[0]),function(){let e=arguments;return Ye(e[0],ac,typeof e[1]=="string"?Kr(e[1],e[2]):t=>Object.entries(e[1]).reduce((r,[o,n])=>Kr(r,o,n),t))}),sf=e=>_(e,x),vO=e=>vo(e,x),MO=(e,t=dt)=>Qr(r=>{let o=e(r);switch(o._tag){case"None":return K(q);case"Some":return B(o.value)}},t),Cc=e=>{let t,r;return typeof e=="function"?t=e:(t=e.try,r=e.catch),D(()=>{try{return t()}catch(o){throw SC(Gn(r?r(o):o))}})},kO=u(3,(e,t,r)=>Ft(e,o=>typeof o=="object"&&o!=null&&t in o&&o[t]===r.failure?r.onFailure(o):z(o))),TO=u(2,(e,t)=>Xr(e,on(r=>{let o=Ja(r,n=>Rp(n)?x(n):g());switch(o._tag){case"None":return W(r);case"Some":return t(o.value.defect)}}))),IO=u(2,(e,t)=>te(e,{onFailure:r=>{let o=t(r);switch(o._tag){case"None":return W(r);case"Some":return o.value}},onSuccess:y})),PO=u(2,(e,t)=>Xr(e,on(r=>{let o=Ja(r,n=>Rp(n)?x(n):g());switch(o._tag){case"None":return W(r);case"Some":{let n=t(o.value.defect);return n._tag==="Some"?n.value:W(r)}}}))),NO=u(3,(e,t,r)=>Ft(e,o=>ge(o)&&"_tag"in o&&o._tag===t?r(o):z(o))),LO=u(2,(e,t)=>Ft(e,r=>{let o=Object.keys(t);return ge(r)&&"_tag"in r&&o.includes(r._tag)?t[r._tag](r):z(r)})),qO=e=>sc(e,{onFailure:k,onSuccess:()=>ht}),co=G_,HO=co(y),jO=u(2,(e,t)=>G(ex(t),e)),af=e=>ye((t,r)=>e({id:t.id(),status:r,interruptors:Va(t.getFiberRef(ss))})),BO=af(e=>_o(e.interruptors)>0?Xp:q),UO=af(y),fs=e=>cf(e,xx,Yl),WO=y({}),zO=u(3,(e,t,r)=>m(e,o=>_(r(o),n=>({...o,[t]:n})))),KO=u(2,(e,t)=>_(e,r=>({[t]:r}))),$O=u(3,(e,t,r)=>_(e,o=>({...o,[t]:r(o)}))),GO=u(2,(e,t)=>v(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!1),i=0;for(;(n=r.next())&&!n.done;){let a=n.value,c=i++;s=m(s,p=>p?(o.push(a),y(!0)):t(a,c))}return _(s,()=>o)})),VO=u(2,(e,t)=>v(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!0),i=0;for(;(n=r.next())&&!n.done;){let a=n.value,c=i++;s=m(s,p=>_(p?t(a,c):y(!1),l=>(l||o.push(a),l)))}return _(s,()=>o)})),JO=e=>_(to(),e),gx=e=>es(e,()=>m(Ut(),()=>gx(e)));var YO=u(3,(e,t,r)=>_c(e,t,()=>nn(r))),ZO=u(3,(e,t,r)=>_c(e,t,()=>xi(r))),_c=u(3,(e,t,r)=>m(e,o=>t(o)?y(o):r(o))),QO=u(3,(e,t,r)=>_c(e,t,o=>wr(()=>r(o)))),XO=u(2,(e,t)=>v(()=>{let r=e[Symbol.iterator](),o=r.next();return o.done?y(g()):ew(r,0,t,o.value)})),ew=(e,t,r,o)=>m(r(o,t),n=>{if(n)return y(x(o));let s=e.next();return s.done?y(g()):ew(e,t+1,r,s.value)}),tw=e=>v(()=>{let t=$r(e);return ot(t)?pt(nt(t),(r,o)=>es(r,()=>o))(st(t)):nn(()=>ai("Received an empty collection of effects"))}),rw=u(2,(e,t)=>an(t(an(e)))),Oc=u(2,(e,{onFailure:t,onSuccess:r})=>fe(e,{onFailure:o=>y(t(o)),onSuccess:o=>y(r(o))})),ow=u(2,(e,t)=>v(()=>nw(e[Symbol.iterator](),0,t))),nw=(e,t,r)=>{let o=e.next();return o.done?y(!0):m(r(o.value,t),n=>n?nw(e,t+1,r):y(n))},sw=e=>{let t=m(m(e,()=>Ut()),()=>t);return t},hx=class{constructor(t){this.value=t}[Symbol.iterator](){return new Xl(this)}},CL=function(){let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return new hx(e)},iw=e=>v(()=>{let t=e(CL),r=t.next(),o=n=>n.done?y(n.value):m(s=>o(t.next(s)))(n.value.value);return o(r)}),xx=ye(e=>y(e.unsafeGetFiberRefs())),aw=e=>fe(e,{onFailure:t=>z(x(t)),onSuccess:t=>{let o=t[Symbol.iterator]().next();return o.done?z(g()):y(o.value)}}),cw=e=>Oc(e,{onFailure:ks,onSuccess:ks}),uw=e=>te(e,{onFailure:t=>bx(t,"An error was silently ignored because it is not anticipated to be useful"),onSuccess:()=>q}),pw=e=>uf((t,r)=>eO(r,t,e)),lw=e=>Oc(e,{onFailure:Lr,onSuccess:Yt}),fw=e=>Oc(e,{onFailure:Yt,onSuccess:Lr}),yx=(e,t)=>v(()=>t.while(e)?m(t.body(e),r=>yx(r,t)):y(e)),ms=e=>(t,r)=>{let o=tt(e),n,s;return wp(t)?(s=t,n=r??""):(n=t,s=r??ht),ye(i=>(i.log(n,s,o),q))},mw=ms(),dw=ms(fx),bx=ms(lx),hw=ms(px),gw=ms(ux),xw=ms(cx),yw=ms(ax),bw=u(2,(e,t)=>m($l,r=>Ye(e,ul,Qo(bO(t,r))))),Dw=ct(ac),Sw=(e,t)=>t.discard?Cw(e,t.while,t.step,t.body):_(Ew(e,t.while,t.step,t.body),r=>Array.from(r)),Ew=(e,t,r,o)=>v(()=>t(e)?m(o(e),n=>_(Ew(r(e),t,r,o),Qo(n))):D(()=>Cr())),Cw=(e,t,r,o)=>v(()=>t(e)?m(o(e),()=>Cw(r(e),t,r,o)):q),_w=u(3,(e,t,r)=>v(()=>{let o=e[Symbol.iterator](),n=[],s=y(t),i,a=0;for(;!(i=o.next()).done;){let c=a++;s=m(s,p=>_(r(p,i.value,c),([l,f])=>(n.push(f),l)))}return _(s,c=>[c,n])})),Ni=u(2,(e,t)=>te(e,{onFailure:r=>ro(()=>t(r)),onSuccess:y})),Dx=e=>m(t=>_(r=>G(r,m(([o,n])=>ee(ds(o),n))(Ne(t))))(Sx(oo(t)(fs(e)))))(gt()),Ow=e=>fe(e,{onFailure:t=>y(t),onSuccess:y}),wc=e=>_(e,t=>!t),ww=e=>fe(e,{onFailure:t=>z(x(t)),onSuccess:t=>{switch(t._tag){case"None":return q;case"Some":return z(g())}}}),Sx=e=>_(Ec(!0),t=>ne(Si(e,_O(t,!1)))),Rw=e=>fe(e,{onFailure:()=>y(g()),onSuccess:t=>y(x(t))}),Fw=u(2,(e,t)=>es(e,()=>wr(t))),Aw=u(2,(e,t)=>es(e,()=>D(t))),vw=e=>te(e,{onFailure:t=>{let r=Array.from(Ga(t));return r.length===0?W(t):z(r)},onSuccess:y}),ds=e=>uf((t,r)=>Zl(t,r)(e)),Mw=e=>e.length>=1?or((t,r)=>{e(r).then(o=>t(ae(o))).catch(o=>t(hl(o)))}):or(t=>{e().then(r=>t(ae(r))).catch(r=>t(hl(r)))}),kw=u(3,(e,t,r)=>Ex(e,t,y(r))),Ex=u(3,(e,t,r)=>yi(o=>m(r,n=>jt(e,Ie(t,n)(o))))),Tw=zl(y),Iw=u(3,(e,t,r)=>I(e).reduce((o,n,s)=>m(o,i=>r(i,n,s)),y(t))),Pw=u(3,(e,t,r)=>I(e).reduceRight((o,n,s)=>m(o,i=>r(n,i,s)),y(t))),Nw=u(3,(e,t,r)=>m(D(()=>e[Symbol.iterator]()),o=>Lw(o,0,t,r.while,r.body))),Lw=(e,t,r,o,n)=>{let s=e.next();return!s.done&&o(r)?m(n(r,s.value,t),i=>Lw(e,t+1,i,o,n)):y(r)},qw=u(2,(e,t)=>v(()=>Hw(e,t))),Hw=(e,t)=>m(e,r=>t<=0?y(r):G(Ut(),Hw(e,t-1))),jw=e=>te(e,{onFailure:z,onSuccess:y}),Bw=e=>v(()=>tO(e)),Li=ex,Uw=e=>fe(e,{onFailure:t=>z(x(t)),onSuccess:t=>{switch(t._tag){case"None":return z(g());case"Some":return y(t.value)}}}),qi=y(g()),Cx=e=>y(x(e)),cf=u(3,(e,t,r)=>m(t,o=>m(e,n=>_(t,s=>[r(o,s),n])))),Ww=u(3,(e,t,r)=>_x(e,[Ql(t,r)])),_x=u(2,(e,t)=>Ox(e,wt(t))),Ox=u(2,(e,t)=>Ye(Io,r=>at(t)(r))(e)),zw=u(2,(e,t)=>v(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!1),i=0;for(;(n=r.next())&&!n.done;){let a=n.value,c=i++;s=m(s,p=>p?y(!0):(o.push(a),t(a,c)))}return _(s,()=>o)})),Kw=u(2,(e,t)=>v(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!0),i=0;for(;(n=r.next())&&!n.done;){let a=n.value,c=i++;s=m(s,p=>_(l=>(l&&o.push(a),l))(p?t(a,c):y(!1)))}return _(s,()=>o)})),$w=u(2,(e,{onFailure:t,onSuccess:r})=>te(e,{onFailure:o=>{let n=wo(o);switch(n._tag){case"Left":return G(t(n.left),W(o));case"Right":return W(o)}},onSuccess:o=>ee(r(o),o)})),Gw=u(2,(e,t)=>Xr(e,r=>Be(Yh(r),{onNone:()=>W(r),onSome:o=>G(t(o),W(r))}))),wx=u(2,(e,t)=>te(e,{onFailure:r=>{let o=wo(r);switch(o._tag){case"Left":return G(t(o.left),W(r));case"Right":return W(r)}},onSuccess:y})),Vw=u(3,(e,t,r)=>wx(e,o=>ge(o)&&"_tag"in o&&o._tag===t?r(o):q)),Jw=u(2,(e,t)=>te(e,{onFailure:r=>G(t(r),W(r)),onSuccess:y})),Yw=e=>Rx(e,tx),Rx=u(2,(e,t)=>cf(e,t,(r,o)=>Gu(o-r))),Zw=FO,Qw=Zw(y),Fx=e=>{let t,r;return typeof e=="function"?t=e:(t=e.try,r=e.catch),t.length>=1?v(()=>{let o=new AbortController;return m(Cc(()=>t(o.signal)),n=>or(s=>(n.then(i=>s(ae(i))).catch(i=>s(Fr(r?r(i):i))),D(()=>o.abort()))))}):m(Cc(e),o=>or(n=>{o.then(s=>n(ae(s))).catch(s=>n(Fr(r?r(s):s)))}))},Xw=u(2,(e,t)=>m(e,r=>Cc({try:()=>t.try(r),catch:t.catch}))),eR=u(2,(e,t)=>m(e,r=>Fx({try:t.try.length>=1?o=>t.try(r,o):()=>t.try(r),catch:t.catch}))),tR=u(2,(e,t)=>v(()=>t()?qi:sf(e))),rR=u(2,(e,t)=>m(t,r=>r?qi:sf(e))),oR=e=>Ni(e,Zh),uf=e=>ye(t=>(t.setFiberRefs(e(t.id(),t.unsafeGetFiberRefs())),q)),nR=u(3,(e,t,r)=>rs(e,o=>Ie(o,t,r(Ws(o,t))))),pf=u(2,(e,t)=>v(()=>t()?_(e,x):y(g()))),sR=u(3,(e,t,r)=>m(ct(t),o=>r(o)?_(e,n=>[o,x(n)]):y([o,g()]))),iR=u(3,(e,t,r)=>m(nf(t),o=>r(o)?_(e,n=>[o,x(n)]):y([o,g()]))),aR=u(2,(e,t)=>t(e)),cR=(e,t)=>(...r)=>m(e,o=>t(o)(...r)),uR=(e,t)=>(...r)=>_(e,o=>t(o)(...r)),Ax=e=>new Proxy({},{get(t,r,o){return(...n)=>m(e,s=>s[r](...n))}}),vx=e=>new Proxy({},{get(t,r,o){return m(e,n=>n[r])}}),pR=e=>({functions:Ax(e),constants:vx(e)}),lR=function(){let e=arguments;return m(kx,t=>t._tag==="Some"?D(()=>{if(typeof e[0]=="string")t.value.attribute(e[0],e[1]);else for(let r in e[0])t.value.attribute(r,e[0][r])}):q)},fR=u(e=>Ce(e[0]),function(){let e=arguments;return Ye(e[0],ll,typeof e[1]=="string"?Kr(e[1],e[2]):t=>Object.entries(e[1]).reduce((r,[o,n])=>Kr(r,o,n),t))}),Mx=_(ct(Po),gp),kx=_(ct(Po),E0(e=>e._tag==="Span")),_L=BigInt(0),lf=Fe(pc,e=>e?tx:y(_L)),mR=u(e=>Ce(e[0]),(e,t,r)=>Ye(e,fl,up({_tag:"SpanLink",span:t,attributes:r??{}}))),Hi=(e,t)=>Zw(r=>m(t?.parent?Cx(t.parent):t?.root?qi:Mx,o=>m(ct(ll),n=>m(ct(fl),s=>m(lf,i=>D(()=>{let a=t?.links?[...ft(s),...t.links]:ft(s),c=r.span(e,o,t?.context??Pt(),a,i);return TE(n,(p,l)=>c.attribute(l,p)),Object.entries(t?.attributes??{}).forEach(([p,l])=>c.attribute(p,l)),c})))))),dR=ct(ll),hR=ct(fl),Tx=(e,...t)=>{let r=t.length===1?void 0:t[0],o=t[t.length-1];return rr(Hi(e,r),o,(n,s)=>m(lf,i=>D(()=>n.end(i,s))))},Ix=u(2,(e,t)=>Ye(e,Po,Qo(t))),gR=u(e=>typeof e[0]!="string",(e,t,r)=>Tx(t,r??{},o=>Ix(e,o))),xR=e=>v(()=>{let t=e();return t==null?z(Ro()):y(t)}),yR=e=>Ft(_(e,x),t=>eg(t)?qi:z(t));var bR,DR,SR,ff="@effect/io/Fiber/Status",fn=Symbol.for(ff),Px="Done",ER="Running",CR="Suspended",Nx=class{constructor(){this[bR]=fn,this._tag=Px}[(bR=fn,R)](){return T(E(this._tag))(E(ff))}[F](t){return mf(t)&&t._tag===Px}},Lx=class{constructor(t){this.runtimeFlags=t,this[DR]=fn,this._tag=ER}[(DR=fn,R)](){return T(E(this.runtimeFlags))(T(E(this._tag))(E(ff)))}[F](t){return mf(t)&&t._tag===ER&&this.runtimeFlags===t.runtimeFlags}},qx=class{constructor(t,r){this.runtimeFlags=t,this.blockingOn=r,this[SR]=fn,this._tag=CR}[(SR=fn,R)](){return T(E(this.blockingOn))(T(E(this.runtimeFlags))(T(E(this._tag))(E(ff))))}[F](t){return mf(t)&&t._tag===CR&&this.runtimeFlags===t.runtimeFlags&&O(this.blockingOn,t.blockingOn)}},_R=new Nx,OR=e=>new Lx(e),wR=(e,t)=>new qx(e,t),mf=e=>typeof e=="object"&&e!=null&&fn in e,RR=e=>e._tag===Px;var FR=_R,Hx=OR,AR=wR;var vR=RR;var Bi=Yl;var jx=Zl;var df=Y(Symbol.for("@effect/io/FiberRef/currentRequestMap"),()=>_e(new Map));var Bx=(e,t,r,o)=>{switch(e?.concurrency){case void 0:return t();case"unbounded":return r();case"inherit":return Fe(pl,n=>n==="unbounded"?r():n>1?o(n):t());default:return e.concurrency>1?o(e.concurrency):t()}},Rc=(e,t,r)=>{switch(e?.concurrency){case void 0:return t();case"unbounded":return r();case"inherit":return Fe(pl,o=>o==="unbounded"||o>1?r():t());default:return e.concurrency>1?r():t()}};var kR="Sequential",TR="Parallel";var Ui={_tag:kR},IR={_tag:TR};var PR=e=>e._tag===kR,NR=e=>e._tag===TR;var hf="InterruptSignal",gf="Stateful",xf="Resume",yf="YieldNow",Ux=e=>({_tag:hf,cause:e}),Wi=e=>({_tag:gf,onFiber:e}),hs=e=>({_tag:xf,effect:e}),qR=()=>({_tag:yf});var jR,BR,AL="@effect/io/Fiber/Scope",bf=Symbol.for(AL),Wx=class{constructor(){this[jR]=bf,this.fiberId=dt,this.roots=new Set}add(t,r){this.roots.add(r),r.unsafeAddObserver(()=>{this.roots.delete(r)})}};jR=bf;var zx=class{constructor(t,r){this.fiberId=t,this.parent=r,this[BR]=bf}add(t,r){this.parent.tell(Wi(o=>{o.addChild(r),r.unsafeAddObserver(()=>{o.removeChild(r)})}))}};BR=bf;var UR=e=>new zx(e.id(),e),gs=Y(Symbol.for("@effect/io/FiberScope/Global"),()=>new Wx);var vL="@effect/io/Fiber",Fc=Symbol.for(vL),Ac={_E:e=>e,_A:e=>e},ML={[Fc]:Ac,pipe(){return C(this,arguments)}},kL="@effect/io/Fiber",zR=Symbol.for(kL);var Kx=e=>e.await();var KR=e=>e.inheritAll();var $R=u(2,(e,t)=>e.interruptAsFork(t)),xs=e=>Ei(At(e.await()),e.inheritAll());var LV={...ML,id:()=>dt,await:()=>ns,children:()=>y([]),inheritAll:()=>ns,poll:()=>y(g()),interruptAsFork:()=>ns};var mn="@effect/io/Fiber/Current";var TL="@effect/io/Logger",VR=Symbol.for(TL),JR={_Message:e=>e,_Output:e=>e},Df=e=>({[VR]:JR,log:e,pipe(){return C(this,arguments)}});var jV={[VR]:JR,log:ks,pipe(){return C(this,arguments)}};var YR=Df(({annotations:e,cause:t,date:r,fiberId:o,logLevel:n,message:s,spans:i})=>{let a=r.getTime(),p=[`timestamp=${r.toISOString()}`,`level=${n.label}`,`fiber=${Sp(o)}`].join(" "),l=IL(s);if(l.length>0&&(p=p+" message=",p=$x(l,p)),t!=null&&t!=ht&&(p=p+" cause=",p=$x(Fo(t),p)),za(i)){p=p+" ";let f=!0;for(let d of i)f?f=!1:p=p+" ",p=p+DO(a)(d)}if(ip(e)>0){p=p+" ";let f=!0;for(let[d,h]of e)f?f=!1:p=p+" ",p=p+LL(d),p=p+"=",p=$x(String(h),p)}return p}),IL=e=>{try{return typeof e=="object"?JSON.stringify(e):String(e)}catch{return String(e)}},PL=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,NL=/^[^\s"=]+$/,$x=(e,t)=>t+(e.match(NL)?e:PL(e));var LL=e=>e.replace(/[\s="]/g,"_");var ZR,QR="@effect/io/Metric/Boundaries",Gx=Symbol.for(QR),Vx=class{constructor(t){this.values=t,this[ZR]=Gx}[(ZR=Gx,R)](){return T(E(this.values))(E(QR))}[F](t){return HL(t)&&O(this.values,t.values)}pipe(){return C(this,arguments)}},HL=e=>typeof e=="object"&&e!=null&&Gx in e,jL=e=>{let t=BE(Er(ve(Number.POSITIVE_INFINITY))(e));return new Vx(t)};var XR=e=>jL(qt(js(e.count-1,t=>e.start*Math.pow(e.factor,t))));var eF,tF,rF,oF,nF,sF,iF,aF,cF,uF,UL="@effect/io/Metric/KeyType",vc=Symbol.for(UL),mF="effect/io/Metric/KeyType/Counter",Jx=Symbol.for(mF),dF="effect/io/Metric/KeyType/Frequency",Yx=Symbol.for(dF),hF="effect/io/Metric/KeyType/Gauge",Zx=Symbol.for(hF),gF="effect/io/Metric/KeyType/Histogram",Qx=Symbol.for(gF),xF="effect/io/Metric/KeyType/Summary",Xx=Symbol.for(xF),Mc={_In:e=>e,_Out:e=>e},ey=class{constructor(){this[eF]=Mc,this[tF]=Jx}[(eF=vc,tF=Jx,R)](){return E(mF)}[F](t){return ry(t)}pipe(){return C(this,arguments)}},pF=class{constructor(){this[rF]=Mc,this[oF]=Yx}[(rF=vc,oF=Yx,R)](){return E(dF)}[F](t){return oy(t)}pipe(){return C(this,arguments)}},lF=class{constructor(){this[nF]=Mc,this[sF]=Zx}[(nF=vc,sF=Zx,R)](){return E(hF)}[F](t){return ny(t)}pipe(){return C(this,arguments)}},ty=class{constructor(t){this.boundaries=t,this[iF]=Mc,this[aF]=Qx}[(iF=vc,aF=Qx,R)](){return T(E(this.boundaries))(E(gF))}[F](t){return sy(t)&&O(this.boundaries,t.boundaries)}pipe(){return C(this,arguments)}},fF=class{constructor(t,r,o,n){this.maxAge=t,this.maxSize=r,this.error=o,this.quantiles=n,this[cF]=Mc,this[uF]=Xx}[(cF=vc,uF=Xx,R)](){return T(E(this.quantiles))(T(E(this.error))(T(E(this.maxSize))(T(E(this.maxAge))(E(xF)))))}[F](t){return iy(t)&&O(this.maxAge,t.maxAge)&&this.maxSize===t.maxSize&&this.error===t.error&&O(this.quantiles,t.quantiles)}pipe(){return C(this,arguments)}},yF=new ey;var bF=e=>new ty(e);var ry=e=>typeof e=="object"&&e!=null&&Jx in e,oy=e=>typeof e=="object"&&e!=null&&Yx in e,ny=e=>typeof e=="object"&&e!=null&&Zx in e,sy=e=>typeof e=="object"&&e!=null&&Qx in e,iy=e=>typeof e=="object"&&e!=null&&Xx in e;var SF,WL="@effect/io/Metric/Key",EF=Symbol.for(WL),zL={_Type:e=>e},kc=class{constructor(t,r,o,n=it()){this.name=t,this.keyType=r,this.description=o,this.tags=n,this[SF]=zL}[(SF=EF,R)](){return T(E(this.tags))(T(E(this.description))(T(E(this.keyType))(E(this.name))))}[F](t){return KL(t)&&this.name===t.name&&O(this.keyType,t.keyType)&&O(this.description,t.description)&&O(this.tags,t.tags)}pipe(){return C(this,arguments)}},KL=e=>typeof e=="object"&&e!=null&&EF in e,CF=(e,t)=>new kc(e,yF,tt(t));var _F=(e,t,r)=>new kc(e,bF(t),tt(r));var OF=u(2,(e,t)=>_o(t)===0?e:new kc(e.name,e.keyType,e.description,at(t)(e.tags)));var wF,RF,FF,AF,vF,MF,kF,TF,IF,PF,GL="@effect/io/Metric/State",Tc=Symbol.for(GL),NF="effect/io/Metric/State/Counter",ay=Symbol.for(NF),LF="effect/io/Metric/State/Frequency",cy=Symbol.for(LF),qF="effect/io/Metric/State/Gauge",uy=Symbol.for(qF),HF="effect/io/Metric/State/Histogram",py=Symbol.for(HF),jF="effect/io/Metric/State/Summary",ly=Symbol.for(jF),Ic={_A:e=>e},fy=class{constructor(t){this.count=t,this[wF]=Ic,this[RF]=ay}[(wF=Tc,RF=ay,R)](){return T(E(this.count))(E(NF))}[F](t){return VL(t)&&this.count===t.count}pipe(){return C(this,arguments)}},my=class{constructor(t){this.occurrences=t,this[FF]=Ic,this[AF]=cy}[(FF=Tc,AF=cy,R)](){return T(E(this.occurrences))(E(LF))}[F](t){return JL(t)&&O(this.occurrences,t.occurrences)}pipe(){return C(this,arguments)}},dy=class{constructor(t){this.value=t,this[vF]=Ic,this[MF]=uy}[(vF=Tc,MF=uy,R)](){return T(E(this.value))(E(qF))}[F](t){return YL(t)&&this.value===t.value}pipe(){return C(this,arguments)}},hy=class{constructor(t,r,o,n,s){this.buckets=t,this.count=r,this.min=o,this.max=n,this.sum=s,this[kF]=Ic,this[TF]=py}[(kF=Tc,TF=py,R)](){return T(E(this.sum))(T(E(this.max))(T(E(this.min))(T(E(this.count))(T(E(this.buckets))(E(HF))))))}[F](t){return ZL(t)&&O(this.buckets,t.buckets)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return C(this,arguments)}},gy=class{constructor(t,r,o,n,s,i){this.error=t,this.quantiles=r,this.count=o,this.min=n,this.max=s,this.sum=i,this[IF]=Ic,this[PF]=ly}[(IF=Tc,PF=ly,R)](){return T(E(this.sum))(T(E(this.max))(T(E(this.min))(T(E(this.count))(T(E(this.quantiles))(T(E(this.error))(E(jF)))))))}[F](t){return QL(t)&&this.error===t.error&&O(this.quantiles,t.quantiles)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return C(this,arguments)}},BF=e=>new fy(e),UF=e=>new my(e),WF=e=>new dy(e),zF=e=>new hy(e.buckets,e.count,e.min,e.max,e.sum),KF=e=>new gy(e.error,e.quantiles,e.count,e.min,e.max,e.sum);var VL=e=>typeof e=="object"&&e!=null&&ay in e,JL=e=>typeof e=="object"&&e!=null&&cy in e,YL=e=>typeof e=="object"&&e!=null&&uy in e,ZL=e=>typeof e=="object"&&e!=null&&py in e,QL=e=>typeof e=="object"&&e!=null&&ly in e;var e3="@effect/io/Metric/Hook",t3=Symbol.for(e3),r3={_In:e=>e,_Out:e=>e},Pc=e=>({[t3]:r3,pipe(){return C(this,arguments)},...e});var GF=e=>{let t=0;return Pc({get:()=>BF(t),update:r=>{t=t+r}})},VF=e=>{let t=0,r=new Map,o=s=>{t=t+1;let i=r.get(s)??0;r.set(s,i+1)},n=()=>sp(r.entries());return Pc({get:()=>UF(n()),update:o})},JF=(e,t)=>{let r=t;return Pc({get:()=>WF(r),update:o=>{r=o}})},YF=e=>{let t=e.keyType.boundaries.values,r=t.length,o=new Uint32Array(r+1),n=new Float32Array(r),s=0,i=0,a=Number.MAX_VALUE,c=Number.MIN_VALUE;dh((f,d)=>{n[d]=f})(pp(Tt)(t));let p=f=>{let d=0,h=r;for(;d!==h;){let S=Math.floor(d+(h-d)/2),w=n[S];f<=w?h=S:d=S,h===d+1&&(f<=n[d]?h=d:d=h)}o[d]=o[d]+1,s=s+1,i=i+f,f<a&&(a=f),f>c&&(c=f)},l=()=>{let f=Array(r),d=0;for(let h=0;h<r;h++){let S=n[h],w=o[h];d=d+w,f[h]=[S,d]}return qt(f)};return Pc({get:()=>zF({buckets:l(),count:s,min:a,max:c,sum:i}),update:p})},ZF=e=>{let{error:t,maxAge:r,maxSize:o,quantiles:n}=e.keyType,s=pp(Tt)(n),i=Array(o),a=0,c=0,p=0,l=Number.MAX_VALUE,f=Number.MIN_VALUE,d=S=>{let w=[],A=0;for(;A!==o-1;){let N=i[A];if(N!=null){let[U,$]=N,ue=zs(S-U);Vd(ue,$d)&&ue<=r&&w.push($)}A=A+1}return o3(t,s,pp(Tt)(qt(w)))},h=(S,w)=>{if(o>0){a=a+1;let A=a%o;i[A]=[w,S]}c=c+1,p=p+S,S<l&&(l=S),S>f&&(f=S)};return Pc({get:()=>KF({error:t,quantiles:d(Date.now()),count:c,min:l,max:f,sum:p}),update:([S,w])=>h(S,w)})},o3=(e,t,r)=>{let o=r.length;if(Xs(t))return mt();let n=qn(t),s=Qs(1)(t),i=pt(ve($F(e,o,g(),0,n,r)),(a,c)=>{let p=qn(a);return up($F(e,o,p.value,p.consumed,c,p.rest))(a)})(s);return dh(a=>[a.quantile,a.value])(i)},$F=(e,t,r,o,n,s)=>{let i=e,a=t,c=r,p=o,l=n,f=s,d=e,h=t,S=r,w=o,A=n,N=s;for(;;){if(Xs(f))return{quantile:l,value:g(),consumed:p,rest:mt()};if(l===1)return{quantile:l,value:x(HE(f)),consumed:p+f.length,rest:mt()};let U=jE(he=>he>qn(f))(f),$=l*a,ue=i/2*$,Oe=p+U[0].length,He=Math.abs(Oe-$);if(Oe<$-ue){d=i,h=a,S=Ln(f),w=Oe,A=l,N=U[1],i=d,a=h,c=S,p=w,l=A,f=N;continue}if(Oe>$+ue)return{quantile:l,value:c,consumed:p,rest:f};switch(c._tag){case"None":{d=i,h=a,S=Ln(f),w=Oe,A=l,N=U[1],i=d,a=h,c=S,p=w,l=A,f=N;continue}case"Some":{let he=Math.abs($-c.value);if(He<he){d=i,h=a,S=Ln(f),w=Oe,A=l,N=U[1],i=d,a=h,c=S,p=w,l=A,f=N;continue}return{quantile:l,value:x(c.value),consumed:p,rest:f}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/io/issues")};var s3="@effect/io/Metric/Pair",i3=Symbol.for(s3),a3={_Type:e=>e};var QF=(e,t)=>({[i3]:a3,metricKey:e,metricState:t,pipe(){return C(this,arguments)}});var XF,u3="@effect/io/Metric/Registry",eA=Symbol.for(u3),xy=class{constructor(){this[XF]=eA,this.map=Pn()}snapshot(){let t=[];for(let[r,o]of this.map)t.push(QF(r,o.get()));return wt(t)}get(t){let r=Ge(we(t)(this.map));if(r==null){if(ry(t.keyType))return this.getCounter(t);if(ny(t.keyType))return this.getGauge(t);if(oy(t.keyType))return this.getFrequency(t);if(sy(t.keyType))return this.getHistogram(t);if(iy(t.keyType))return this.getSummary(t);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/io/issues")}else return r}getCounter(t){let r=Ge(we(t)(this.map));if(r==null){let o=GF(t);Dr(t)(this.map)||Ot(t,o)(this.map),r=o}return r}getFrequency(t){let r=Ge(we(t)(this.map));if(r==null){let o=VF(t);Dr(t)(this.map)||Ot(t,o)(this.map),r=o}return r}getGauge(t){let r=Ge(we(t)(this.map));if(r==null){let o=JF(t,0);Dr(t)(this.map)||Ot(t,o)(this.map),r=o}return r}getHistogram(t){let r=Ge(we(t)(this.map));if(r==null){let o=YF(t);Dr(t)(this.map)||Ot(t,o)(this.map),r=o}return r}getSummary(t){let r=Ge(we(t)(this.map));if(r==null){let o=ZF(t);Dr(t)(this.map)||Ot(t,o)(this.map),r=o}return r}};XF=eA;var tA=()=>new xy;var l3="@effect/io/Metric",f3=Symbol.for(l3),m3={_Type:e=>e,_In:e=>e,_Out:e=>e},d3=Y(Symbol.for("@effect/io/Metric/globalMetricRegistry"),()=>tA()),h3=function(e,t,r){return Object.assign(n=>Bt(n,s=>D(()=>t(s,it()))),{[f3]:m3,keyType:e,unsafeUpdate:t,unsafeValue:r,pipe(){return C(this,arguments)}})};var Nc=(e,t)=>rA(CF(e,t));var rA=e=>{let t=r=>{let o=OF(r)(e);return d3.get(o)};return h3(e.keyType,(r,o)=>t(o).update(r),r=>t(r).get())};var oA=(e,t,r)=>rA(_F(e,t,r));var nA=u(2,(e,t)=>Fe(df,r=>D(()=>{if(r.has(e)){let o=r.get(e);o.state.completed||(o.state.completed=!0,Ai(o.result,t))}})));var Lc=class{constructor(){this.count=0,this.observers=new Set}addObserver(t){this.observers.add(t)}removeObserver(t){this.observers.delete(t)}increment(){this.count++,this.observers.forEach(t=>t(this.count))}decrement(){this.count--,this.observers.forEach(t=>t(this.count))}};var sA,iA,aA,cA,x3,y3="@effect/io/Supervisor",Hc=Symbol.for(y3),Sf={_T:e=>e},qc=class e{constructor(t,r){this.underlying=t,this.value0=r,this[sA]=Sf}value(){return this.value0()}onStart(t,r,o,n){this.underlying.onStart(t,r,o,n)}onEnd(t,r){this.underlying.onEnd(t,r)}onEffect(t,r){this.underlying.onEffect(t,r)}onSuspend(t){this.underlying.onSuspend(t)}onResume(t){this.underlying.onResume(t)}map(t){return new e(this,()=>_(t)(this.value()))}zip(t){return new dn(this,t)}onRun(t,r){return this.underlying.onRun(t,r)}};sA=Hc;var dn=class e{constructor(t,r){this.left=t,this.right=r,this[iA]=Sf}value(){return sl(this.left.value(),this.right.value())}onStart(t,r,o,n){this.left.onStart(t,r,o,n),this.right.onStart(t,r,o,n)}onEnd(t,r){this.left.onEnd(t,r),this.right.onEnd(t,r)}onEffect(t,r){this.left.onEffect(t,r),this.right.onEffect(t,r)}onSuspend(t){this.left.onSuspend(t),this.right.onSuspend(t)}onResume(t){this.left.onResume(t),this.right.onResume(t)}map(t){return new qc(this,()=>_(t)(this.value()))}zip(t){return new e(this,t)}onRun(t,r){return this.right.onRun(()=>this.left.onRun(t,r),r)}};iA=Hc;var yy=class{constructor(){this[aA]=Sf,this.fibers=new Set}value(){return D(()=>Array.from(this.fibers))}onStart(t,r,o,n){this.fibers.add(n)}onEnd(t,r){this.fibers.delete(r)}onEffect(t,r){}onSuspend(t){}onResume(t){}map(t){return new qc(this,()=>_(t)(this.value()))}zip(t){return new dn(this,t)}onRun(t,r){return t()}};aA=Hc;var by=class{constructor(t){this.effect=t,this[cA]=Sf}value(){return this.effect}onStart(t,r,o,n){}onEnd(t,r){}onEffect(t,r){}onSuspend(t){}onResume(t){}map(t){return new qc(this,()=>_(t)(this.value()))}zip(t){return new dn(this,t)}onRun(t,r){return t()}};cA=Hc;x3=Hc;var b3=()=>new yy,uA=D(b3),D3=e=>new by(e),ys=D3(q);var pA="Empty",lA="AddSupervisor",fA="RemoveSupervisor",mA="AndThen",zi={_tag:pA},Cf=(e,t)=>({_tag:mA,first:e,second:t}),S3=(e,t)=>E3(t,ve(e)),E3=(e,t)=>{let r=e,o=t;for(;ot(o);){let n=nt(o);switch(n._tag){case pA:{o=st(o);break}case lA:{r=r.zip(n.supervisor),o=st(o);break}case fA:{r=Dy(r,n.supervisor),o=st(o);break}case mA:{o=Pe(n.first)(Pe(n.second)(st(o)));break}}}return r},Dy=(e,t)=>O(e,t)?ys:e instanceof dn?Dy(e.left,t).zip(Dy(e.right,t)):e,_f=e=>O(e,ys)?it():e instanceof dn?at(_f(e.right))(_f(e.left)):Co(e),C3=(e,t)=>{if(O(e,t))return zi;let r=_f(e),o=_f(t),n=Hn(zi,(i,a)=>Cf(i,{_tag:lA,supervisor:a}))(Rh(r)(o)),s=Hn(zi,(i,a)=>Cf(i,{_tag:fA,supervisor:a}))(Rh(o)(r));return Cf(n,s)},dA=hp({empty:zi,patch:S3,combine:Cf,diff:C3});var hA,gA,O3=Nc("effect_fiber_started"),xA=Nc("effect_fiber_active"),w3=Nc("effect_fiber_successes"),R3=Nc("effect_fiber_failures"),F3=oA("effect_fiber_lifetimes",XR({start:1,factor:2,count:100})),jc="Continue",A3="Done",yA="Yield",v3={_E:e=>e,_A:e=>e},Bc=e=>{throw new Error(`BUG: FiberRuntime - ${JSON.stringify(e)} - please report an issue at https://github.com/Effect-TS/io/issues`)},Of={[fi]:(e,t,r)=>t.i1(r),OnStep:(e,t,r)=>t.i1(ae(r)),[mi]:(e,t,r)=>t.i2(r),[oc]:(e,t,r)=>(e.patchRuntimeFlags(e._runtimeFlags,t.patch),Jr(e._runtimeFlags)&&e.isInterrupted()?Z(e.getInterruptedCause()):ae(r)),[di]:(e,t,r)=>(t.i2(r),t.i0()?(e.pushStack(t),t.i1()):q)},M3={[hf]:(e,t,r,o)=>(e.processNewInterruptSignal(o.cause),Jr(t)?Z(o.cause):r),[xf]:(e,t,r,o)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[gf]:(e,t,r,o)=>(o.onFiber(e,Hx(t)),r),[yf]:(e,t,r,o)=>m(Ut(),()=>r)},k3=e=>vt(nC(e),t=>$i(aC(t),([r,o])=>{let n=new Map;for(let s of o)for(let i of s)n.set(i.request,i);return Ae(W3(r.runAll(o),o.flat()),df,n)},!1)),Uc=class{pipe(){return C(this,arguments)}constructor(t,r,o){if(this[hA]=Ac,this[gA]=v3,this._queue=new Array,this._children=null,this._observers=new Array,this._running=!1,this._stack=[],this._asyncInterruptor=null,this._asyncBlockingOn=null,this._exitValue=null,this._steps=[!1],this.run=()=>{this.drainQueueOnCurrentThread()},this._runtimeFlags=o,this._fiberId=t,this._fiberRefs=r,this._supervisor=this.getFiberRef(Ki),ec(o)){let n=this.getFiberRef(Io);O3.unsafeUpdate(1,n),xA.unsafeUpdate(1,n)}}id(){return this._fiberId}resume(t){this.tell(hs(t))}status(){return this.ask((t,r)=>r)}runtimeFlags(){return this.ask((t,r)=>vR(r)?t._runtimeFlags:r.runtimeFlags)}scope(){return UR(this)}children(){return this.ask(t=>Array.from(t.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(ss)}fiberRefs(){return this.ask(t=>t.unsafeGetFiberRefs())}ask(t){return v(()=>{let r=wi(this._fiberId);return this.tell(Wi((o,n)=>{Ai(r,D(()=>t(o,n)))})),Ne(r)})}tell(t){this._queue.push(t),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}await(){return or(t=>{let r=o=>t(y(o));return this.tell(Wi((o,n)=>{o._exitValue!==null?r(this._exitValue):o.unsafeAddObserver(r)})),D(()=>this.tell(Wi((o,n)=>{o.unsafeRemoveObserver(r)})))},this.id())}inheritAll(){return ye((t,r)=>{let o=t.id(),n=t.unsafeGetFiberRefs(),s=r.runtimeFlags,i=this.unsafeGetFiberRefs(),a=Gl(n,o,i);t.setFiberRefs(a);let c=t.getFiberRef(DA),p=ug(Qa)(ug(Or)(Yn(s,c)));return Di(p)})}poll(){return D(()=>tt(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(t){return D(()=>this.tell(Ux(_r(t))))}unsafeAddObserver(t){this._exitValue!==null?t(this._exitValue):this._observers.push(t)}unsafeRemoveObserver(t){this._observers=this._observers.filter(r=>r!==t)}unsafeGetFiberRefs(){return this.setFiberRef(DA,this._runtimeFlags),this._fiberRefs}unsafeDeleteFiberRef(t){this._fiberRefs=bc(this._fiberRefs,t)}getFiberRef(t){return this._fiberRefs.locals.has(t)?this._fiberRefs.locals.get(t)[0][1]:t.initial}setFiberRef(t,r){this._fiberRefs=ps(this._fiberRefs,{fiberId:this._fiberId,fiberRef:t,value:r}),t===Ki&&(this._supervisor=r)}setFiberRefs(t){this._fiberRefs=t,this._supervisor=this.getFiberRef(Ki)}addChild(t){this.getChildren().add(t)}removeChild(t){this.getChildren().delete(t)}drainQueueOnCurrentThread(){let t=!0;for(;t;){let r=jc,o=globalThis[mn];globalThis[mn]=this;try{for(;r===jc;)r=this._queue.length===0?A3:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[mn]=o}this._queue.length>0&&!this._running?(this._running=!0,r===yA?(this.drainQueueLaterOnExecutor(),t=!1):t=!0):t=!1}}drainQueueLaterOnExecutor(){this.getFiberRef(To).scheduleTask(this.run,this.getFiberRef(ic))}drainQueueWhileRunning(t,r){let o=r;for(;this._queue.length>0;){let n=this._queue.splice(0,1)[0];o=M3[n._tag](this,t,o,n)}return o}isInterrupted(){return!Jh(this.getFiberRef(ss))}addInterruptedCause(t){let r=this.getFiberRef(ss);this.setFiberRef(ss,Me(r,t))}processNewInterruptSignal(t){this.addInterruptedCause(t),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let t=!1;for(let r of this._children)r.tell(Ux(_r(this.id()))),t=!0;return t}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){let t=this._children.values();this._children=null;let r=!1;return os({while:()=>!r,body:()=>{let n=t.next();return n.done?D(()=>{r=!0}):ne(n.value.await())},step:()=>{}})}return null}reportExitValue(t){if(ec(this._runtimeFlags)){let r=this.getFiberRef(Io);switch(xA.unsafeUpdate(-1,r),t._tag){case Se:{w3.unsafeUpdate(1,r);break}case De:{R3.unsafeUpdate(1,r);break}}}if(t._tag==="Failure"){let r=this.getFiberRef(uc);!rn(t.cause)&&r._tag==="Some"&&this.log("Fiber terminated with a non handled error",t.cause,r)}}setExitValue(t){if(this._exitValue=t,ec(this._runtimeFlags)){let r=this.getFiberRef(Io),o=this.id().startTimeMillis,n=new Date().getTime();F3.unsafeUpdate((n-o)/1e3,r)}this.reportExitValue(t);for(let r=this._observers.length-1;r>=0;r--)this._observers[r](t)}getLoggers(){return this.getFiberRef(CA)}log(t,r,o){let n=L(o)?o.value:this.getFiberRef(vg),s=this.getFiberRef(EA);if(dO(s,n))return;let i=this.getFiberRef(ul),a=this.getFiberRef(ac),c=this.getLoggers(),p=this.unsafeGetFiberRefs();if(_o(c)>0){let l=Ur(this.getFiberRef(xt),so),f=new Date(l.unsafeCurrentTimeMillis());for(let d of c)d.log({fiberId:this.id(),logLevel:n,message:t,cause:r,context:p,spans:i,annotations:a,date:f})}}evaluateMessageWhileSuspended(t){switch(t._tag){case yf:return yA;case hf:return this.processNewInterruptSignal(t.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(Z(t.cause)),this._asyncInterruptor=null),jc;case xf:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(t.effect),jc;case gf:return t.onFiber(this,this._exitValue!==null?FR:AR(this._runtimeFlags,this._asyncBlockingOn)),jc;default:return Bc(t)}}evaluateEffect(t){this._supervisor.onResume(this);try{let r=Jr(this._runtimeFlags)&&this.isInterrupted()?Z(this.getInterruptedCause()):t;for(;r!==null;)try{let o=r,n=this.runLoop(o);this._runtimeFlags=ng(Qa)(this._runtimeFlags);let s=this.interruptAllChildren();s!==null?r=m(s,()=>n):(this._queue.length===0?this.setExitValue(n):this.tell(hs(n)),r=null)}catch(o){if(Ce(o))o._tag===hi?og(this._runtimeFlags)?(this.tell(qR()),this.tell(hs(no)),r=null):r=no:o._tag===pi&&(r=null);else throw o}}finally{this._supervisor.onSuspend(this)}}start(t){if(this._running)this.tell(hs(t));else{this._running=!0;let r=globalThis[mn];globalThis[mn]=this;try{this.evaluateEffect(t)}finally{this._running=!1,globalThis[mn]=r,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(t){this.tell(hs(t))}patchRuntimeFlags(t,r){let o=ui(t,r);return globalThis[mn]=this,this._runtimeFlags=o,o}initiateAsync(t,r){let o=!1,n=s=>{o||(o=!0,this.tell(hs(s)))};Jr(t)&&(this._asyncInterruptor=n);try{r(n)}catch(s){n(W(Ve(s)))}}pushStack(t){this._stack.push(t),t._tag==="OnStep"&&this._steps.push(!0),t._tag==="RevertFlags"&&this._steps.push(!1)}popStack(){let t=this._stack.pop();if(t)return(t._tag==="OnStep"||t._tag==="RevertFlags")&&this._steps.pop(),t}getNextSuccessCont(){let t=this.popStack();for(;t;){if(t._tag!==li)return t;t=this.popStack()}}getNextFailCont(){let t=this.popStack();for(;t;){if(t._tag!==fi&&t._tag!==di)return t;t=this.popStack()}}[(hA=Fc,gA=zR,mC)](t){return _(ct(ko),r=>{try{return Ws(r,t)}catch(o){throw console.log(o),o}})}Left(t){return Fr(t.i0)}None(t){return Fr(Ro())}Right(t){return ae(t.i0)}Some(t){return ae(t.i0)}[Up](t){let r=t.i0(),o=this.getNextSuccessCont();if(o!==void 0)return o._tag in Of||Bc(o),Of[o._tag](this,o,r);throw ae(r)}[Se](t){let r=t,o=this.getNextSuccessCont();if(o!==void 0)return o._tag in Of||Bc(o),Of[o._tag](this,o,r.i0);throw r}[De](t){let r=this.getFiberRef(Po),o=Rt(r)||r.head._tag==="ExternalSpan"?t.i0:tn(t.i0,W0(r.head)),n=this.getNextFailCont();if(n!==void 0)switch(n._tag){case li:case mi:return Jr(this._runtimeFlags)&&this.isInterrupted()?Z(si(o)):n.i1(o);case"OnStep":return Jr(this._runtimeFlags)&&this.isInterrupted()?Z(si(o)):n.i1(Z(o));case oc:return this.patchRuntimeFlags(this._runtimeFlags,n.patch),Jr(this._runtimeFlags)&&this.isInterrupted()?Z(Me(o,this.getInterruptedCause())):Z(o);default:Bc(n)}else throw Z(o)}[Wp](t){return t.i0(this,Hx(this._runtimeFlags))}Blocked(t){if(this._steps[this._steps.length-1]){let r=this.popStack();if(r)switch(r._tag){case"OnStep":return r.i1(t);case"OnSuccess":return Ee(t.i0,m(t.i1,r.i1));case"OnSuccessAndFailure":return Ee(t.i0,te(t.i1,{onFailure:r.i1,onSuccess:r.i2}));case"OnFailure":return Ee(t.i0,Xr(t.i1,r.i1));case"While":return Ee(t.i0,m(t.i1,o=>(r.i2(o),r.i0()?os({while:r.i0,body:r.i1,step:r.i2}):q)));case"RevertFlags":{this.pushStack(r);break}}}return Re(r=>m(Wt(Zp(t.i0)),()=>r(t.i1)))}RunBlocked(t){return k3(t.i0)}[Ao](t){let r=t.i0,o=this._runtimeFlags,n=ui(o,r);if(Jr(n)&&this.isInterrupted())return Z(this.getInterruptedCause());if(this.patchRuntimeFlags(this._runtimeFlags,r),t.i1){let s=Yn(n,o);return this.pushStack(new Vp(s,t)),t.i1(o)}else return no}[fi](t){return this.pushStack(t),t.i0}OnStep(t){return this.pushStack(t),t.i0}[li](t){return this.pushStack(t),t.i0}[mi](t){return this.pushStack(t),t.i0}[pi](t){throw this._asyncBlockingOn=t.i1,this.initiateAsync(this._runtimeFlags,t.i0),t}[hi](t){throw t}[di](t){let r=t.i0,o=t.i1;return r()?(this.pushStack(t),o()):no}[fC](t){return t.commit()}runLoop(t){let r=t,o=0;for(;;){if(this._runtimeFlags&rg&&this._supervisor.onEffect(this,r),this._queue.length>0&&(r=this.drainQueueWhileRunning(this._runtimeFlags,r)),o+=1,o>=this.getFiberRef(Ag)){o=0;let n=r;r=m(Ut(),()=>n)}try{r._tag in this||(typeof r=="function"&&console.log(r()),Bc(r)),r=this._supervisor.onRun(()=>this[r._tag](r),this)}catch(n){if(Ce(n)){if(n._tag===hi||n._tag===pi)throw n;if(n._tag===Se||n._tag===De)return n}else DC(n)?r=Z(n.cause):Xh(n)?r=Z(Me(Ve(n),_r(dt))):r=Z(Ve(n))}}}},EA=_e(hO("Info")),T3=Df(e=>{let t=YR.log(e);globalThis.console.log(t)});var I3=Df(({annotations:e,cause:t,context:r,fiberId:o,logLevel:n,message:s})=>{let i=gr(Dc(r,Po),gp),a=re(Dc(r,xt),p=>Ur(p,so));if(i._tag==="None"||i.value._tag==="ExternalSpan"||a._tag==="None")return;let c=Object.fromEntries(e);c["effect.fiberId"]=k0(o),c["effect.logLevel"]=n.label,t!==null&&t!==ht&&(c["effect.cause"]=Fo(t)),i.value.event(String(s),a.value.unsafeCurrentTimeNanos(),c)}),CA=Fg(Co(T3,I3)),zc=u(e=>Ce(e[0]),(e,t)=>Zr(Bt(e,r=>Kc(o=>t(r,o))))),_A=u(e=>Ce(e[0]),(e,t)=>uo(e,Kc(r=>t(r)))),Kc=e=>ye(t=>{let r=t.unsafeGetFiberRefs();return m(Rf,o=>_i(o,n=>ye(s=>{let i=s.unsafeGetFiberRefs(),a=Bi(i,r),c=Bi(r,i);return s.setFiberRefs(jx(a,s.id(),r)),uo(e(n),D(()=>{s.setFiberRefs(jx(c,s.id(),s.unsafeGetFiberRefs()))}))})))}),OA=e=>Ae(nc,x(gs))(e),bA=Symbol("@effect/io/Effect/existsPar/found"),wA=u(e=>Zt(e[0]),(e,t,r)=>Rc(r,()=>v(()=>RA(e[Symbol.iterator](),0,t)),()=>fe(ur(e,(o,n)=>Qp(t(o,n),{onTrue:z(bA),onFalse:q}),r),{onFailure:o=>o===bA?y(!0):z(o),onSuccess:()=>y(!1)}))),RA=(e,t,r)=>{let o=e.next();return o.done?y(!1):m(r(o.value,t),n=>n?y(n):RA(e,t+1,r))},FA=u(e=>Zt(e[0]),(e,t,r)=>{let o=r?.negate?(n,s)=>_(t(n,s),RD):t;return Rc(r,()=>v(()=>I(e).reduceRight((n,s,i)=>Mo(n,v(()=>o(s,i)),(a,c)=>c?[s,...a]:a),D(()=>new Array))),()=>_(ur(e,(n,s)=>_(o(n,s),i=>i?x(n):g()),r),Pd))}),P3=e=>{if(Array.isArray(e)||Zt(e))return[e,g()];let t=Object.keys(e),r=t.length;return[t.map(o=>e[o]),x(o=>{let n={};for(let s=0;s<r;s++)n[t[s]]=o[s];return n})]},N3=(e,t,r)=>{let o=[];for(let n of e)o.push(eo(n));return m(ur(o,k,{concurrency:r?.concurrency,batching:r?.batching}),n=>{let s=g(),i=n.length,a=new Array(i),c=new Array(i),p=!1;for(let l=0;l<i;l++){let f=n[l];f._tag==="Left"?(a[l]=x(f.left),p=!0):(c[l]=f.right,a[l]=s)}return p?t._tag==="Some"?z(t.value(a)):z(a):r?.discard?q:t._tag==="Some"?y(t.value(c)):y(c)})},L3=(e,t,r)=>{let o=[];for(let n of e)o.push(eo(n));return r?.discard?ur(o,k,{concurrency:r?.concurrency,batching:r?.batching,discard:!0}):_(ur(o,k,{concurrency:r?.concurrency,batching:r?.batching}),n=>t._tag==="Some"?t.value(n):n)},Gi=(e,t)=>{let[r,o]=P3(e);return t?.mode==="validate"?N3(r,o,t):t?.mode==="either"?L3(r,o,t):o._tag==="Some"?_(ur(r,k,t),o.value):ur(r,k,t)},AA=e=>t=>Gi(t,e),vA=(e,t)=>_(Gi(I(e).map(ie),t),Us(r=>dl(r)?x(r.i0):g())),_y=u(2,(e,t)=>Array.from({length:t},()=>e)),MA=u(e=>Ce(e[0]),(e,t,r)=>Gi(_y(t)(e),r)),ur=u(e=>Zt(e[0]),(e,t,r)=>ye(o=>{let n=r?.batching===!0||r?.batching==="inherit"&&o.getFiberRef(cc);return r?.discard?Bx(r,()=>n?Sy(e,t):vt(e,t),()=>$i(e,t,n),s=>Oy(e,s,t,n)):Bx(r,()=>n?Ey(e,1,t,!0):Je(e,t),()=>Wc(e,t,n),s=>Ey(e,s,t,n))})),Wc=(e,t,r)=>v(()=>{let o=I(e),n=new Array(o.length);return G($i(o,(i,a)=>m(t(i,a),c=>D(()=>n[a]=c)),r),y(n))}),Sy=(e,t)=>v(()=>{let r=I(e),o=r.length;if(o===0)return q;if(o===1)return ne(t(r[0],0));let n=r.map(t),s=new Array,i=a=>a===n.length?v(()=>{if(s.length>0){let c=s.map(p=>p.i0).reduce(Zn);return Ee(c,Sy(s.map(p=>p.i1),k))}return q}):bi(n[a],c=>c._tag==="Blocked"?(s.push(c),i(a+1)):c._tag==="Failure"?v(()=>{if(s.length>0){let p=s.map(l=>l.i0).reduce(Zn);return Ee(p,m(Sy(s.map(l=>l.i1),k),()=>c))}return q}):i(a+1));return i(0)}),$i=(e,t,r)=>v(()=>{let o=I(e),n=o.length;return n===0?q:n===1?ne(t(o[0],0)):Re(s=>{let i=wi(dt),a=0,c=[],p=[],l=nl(f=>Je(o,(d,h)=>_(S=>(S.unsafeAddObserver(()=>{p.push(S)}),S))(bs(f(m(S=>{switch(S._tag){case"Failure":{if(c.length>0){let w=c.map(N=>N.i0).reduce(Zn),A=$i(c,N=>N.i1,r);return Ee(w,te(A,{onFailure:N=>G(mc(i,void 0),W(We(N,S.cause))),onSuccess:()=>G(mc(i,void 0),W(S.cause))}))}return G(mc(i,void 0),W(S.cause))}default:{if(S._tag==="Blocked"&&c.push(S),a+1===n)if(c.length>0){let w=c.map(N=>N.i0).reduce(Zn),A=$i(c,N=>N.i1,r);return Fi(i,Ee(w,A))}else Ai(i,ae(no));else a=a+1;return q}}})(v(()=>s((r?Yr:ie)(t(d,h))))))))));return m(l,f=>te(s(Ne(i)),{onFailure:d=>m(Wc(f,un,r),h=>{let S=Oi(h,{parallel:!0});return S._tag==="Some"&&Pg(S.value)?W(We(si(d),S.value.i0)):W(si(d))}),onSuccess:d=>m(d,()=>vt(p,h=>h.inheritAll()))}))})}),Ey=(e,t,r,o)=>v(()=>{let n=I(e),s=new Array(n.length);return G(Oy(n,t,(a,c)=>_(r(a,c),p=>s[c]=p),o),y(s))}),Oy=(e,t,r,o)=>v(()=>{let n=0,s=e[Symbol.iterator](),i=[],a=m(D(()=>s.next()),p=>p.done?q:m((o?Yr:ie)(ne(r(p.value,n++))),l=>{switch(l._tag){case"Blocked":return i.push(l),a;case"Failure":return l;case"Success":return a}})),c=[];for(let p=0;p<t;p++)c.push(a);return m(ie($i(c,k,o)),p=>{if(i.length===0)return p;let l=i.map(d=>d.i0).reduce(Zn),f=Oy(i,t,d=>d.i1,o);return p._tag==="Failure"?Ee(l,te(f,{onFailure:d=>Z(We(p.cause,d)),onSuccess:()=>p})):Ee(l,f)})}),Wt=e=>ye((t,r)=>y(TA(e,t,r.runtimeFlags))),bs=e=>q3(e,gs),kA=u(2,(e,t)=>Wt(rl(e,r=>{let o=wo(r);switch(o._tag){case"Left":return t(o.left);case"Right":return W(o.right)}}))),TA=(e,t,r,o=null)=>{let n=Cy(e,t,r,o);return n.resume(e),n},Cy=(e,t,r,o=null)=>{let n=Ep(),s=t.unsafeGetFiberRefs(),i=Vl(s,n),a=new Uc(n,i,r),c=Pi(i,ko),p=a._supervisor;return p.onStart(c,e,x(t),a),a.unsafeAddObserver(f=>p.onEnd(f,a)),(o!==null?o:V(()=>t.scope())(t.getFiberRef(nc))).add(r,a),a},q3=(e,t)=>ye((r,o)=>y(TA(e,r,o.runtimeFlags,t))),wy=u(e=>Zt(e[0]),(e,t,r,o)=>Rc(o,()=>I(e).reduce((n,s,i)=>Mo(n,s,(a,c)=>r(a,c,i)),y(t)),()=>m(Ec(t),n=>m(ur(e,(s,i)=>m(s,a=>wO(n,c=>r(c,a,i))),o),()=>nf(n))))),Ry=u(e=>Zt(e[0]),(e,t,r)=>_(o=>OC(o,k))(ur(e,(o,n)=>eo(t(o,n)),r))),IA=u(e=>Zt(e[0]),(e,t,r)=>m(Ry(e,t,{concurrency:r?.concurrency,batching:r?.batching}),([o,n])=>o.length===0?r?.discard?q:y(n):z(o))),PA=e=>{let t=$r(e);if(!ot(t))return nn(()=>ai("Received an empty collection of effects"));let r=nt(t),o=st(t),n=s=>ee(s[0])(KR(s[1]));return m(s=>m(i=>Re(a=>m(c=>m(p=>cn(()=>pt(q,(l,f)=>Ei(un(f))(l))(p))(a(m(n)(cs(s)))))(Bt(p=>pt(q,(l,f)=>G(ne(Wt(m(H3(p,f,s,i))(Kx(f)))))(l))(p))(_(p=>Pe(c)(p))(_(qt)(Je(p=>Wt(tr(p)))(o))))))(Wt(tr(r)))))(Ec(o.length)))(gt())},H3=(e,t,r,o)=>n=>is(n,{onFailure:s=>At(OO(o,i=>[i===0?ne(as(r,s)):q,i-1])),onSuccess:s=>m(i=>i?pt(q,(a,c)=>c===t?a:Ei(un(c))(a))($r(e)):q)(Fi(r,[s,t]))}),NA=u(e=>Zt(e[0]),(e,t,r,o)=>Rc(o,()=>I(e).reduce((n,s,i)=>Mo(n,s,(a,c)=>r(a,c,i)),t),()=>v(()=>_(n=>{switch(n._tag){case"None":throw new Error("BUG: Effect.reduceEffect - please report an issue at https://github.com/Effect-TS/io/issues");case"Some":return n.value}})(wy([t,...e],g(),(n,s,i)=>{switch(n._tag){case"None":return x(s);case"Some":return x(r(n.value,s,i))}},o))))),LA=e=>m(Rf,t=>m(Ds(IR),r=>G(Ss(e,r))(t.addFinalizer(o=>r.close(o))))),hn=e=>m(Ty,e),Fy=e=>m(Ds(),t=>B3(t)(e)),qA=e=>hn(t=>m(r=>Ss(r)(e))(Tg(t,Ui))),HA=(e,t)=>Ay([Ql(e,t)]),Ay=e=>vy(wt(e)),vy=e=>Mr(Io,t=>at(e)(t)),jA=u(2,(e,t)=>rr(Ds(),r=>m(Ss(e,r),t),(r,o)=>pn(r,o))),BA=e=>fe(e,{onFailure:t=>{switch(t._tag){case"None":return y(g());case"Some":return z(t.value)}},onSuccess:t=>y(x(t))}),UA=u(e=>Ce(e[1]),(e,t,r)=>My(e,t,(o,n)=>[o,n],r)),My=u(e=>Ce(e[1]),(e,t,r,o)=>At(qo(ie(e),ie(t),(n,s)=>fc(n,s,{onSuccess:r,onFailure:(i,a)=>o?.concurrent?We(i,a):Me(i,a)}),o)));var WA=u(e=>Zt(e[0]),(e,t,r)=>an(ur(e,(o,n)=>an(t(o,n)),r))),zA=e=>Mr(xt,Ie(so,e)),wf=e=>Mr(xt,Ie(Ti,e)),KA=e=>hn(t=>m(Tg(t,Ui),r=>_(o=>[nr(n=>pn(r,gl(n))),o])(Ss(r)(e)))),$A=u(e=>Ce(e[1]),(e,t,r)=>qo(e,t,(o,n)=>[o,n],r)),GA=u(e=>Ce(e[1]),(e,t,r)=>qo(e,t,(o,n)=>o,r)),VA=u(e=>Ce(e[1]),(e,t,r)=>qo(e,t,(o,n)=>n,r)),qo=u(e=>Ce(e[1]),(e,t,r,o)=>_(Gi([e,t],{concurrency:o?.concurrent?2:1,batching:o?.batching}),([n,s])=>r(n,s))),ky=e=>e===qp?q:Zr(m(t=>{let r=ui(t,e),o=Yn(r,t);return ne(G(Kc(()=>Di(o)))(Di(e)))})(ol)),j3=(e,t)=>r=>v(()=>{switch(r.state._tag){case"Exited":return q;case"Running":{let o=r.state.finalizers,n=r.state.update,s=Array.from(o.keys()).sort((i,a)=>a-i).map(i=>o.get(i));return r.state={_tag:"Exited",nextKey:r.state.nextKey,exit:t,update:n},PR(e)?m(i=>V(()=>no)(re(lc)(Oi(i))))(Je(i=>ie(n(i)(t)))(s)):NR(e)?m(i=>V(()=>no)(re(lc)(Oi(i,{parallel:!0}))))(Wc(s,i=>ie(n(i)(t)),!1)):m(i=>V(()=>no)(re(lc)(Oi(i,{parallel:!0}))))(Ey(s,e.parallelism,i=>ie(n(i)(t)),!1))}}}),Ty=Ct(ml),Rf=Ty,Ds=(e=Ui)=>_(qC,t=>({[ml]:ml,[kg]:kg,pipe(){return C(this,arguments)},fork:r=>Zr(m(o=>ee(o)(Bt(n=>_i(o,n))(Ig(t,n=>pn(o,n)))))(Ds(r))),close:r=>ne(j3(e,r)(t)),addFinalizer:r=>ne(Ig(r)(t))})),Ss=u(2,(e,t)=>rs(e,An($u(Ty,t)))),B3=u(2,(e,t)=>Rr(r=>t.close(r))(Ss(t)(e))),U3=e=>Ci(e,{differ:dA,fork:zi}),pr=u(2,(e,t)=>ne(zc(m(ct(e),r=>ee(Xn(e,t),r)),r=>Xn(e,r)))),Mr=u(2,(e,t)=>Fe(e,r=>pr(e,t(r))));var DA=TC(sg),Ki=U3(ys),JA=e=>ne(Kx(Ff(e))),Ff=e=>({[Fc]:Ac,id:()=>I(e).reduce((t,r)=>Uh(t,r.id()),dt),await:()=>ie(Wc(e,t=>At(t.await()),!1)),children:()=>_(Wc(e,t=>t.children(),!1),Ta),inheritAll:()=>vt(e,t=>t.inheritAll()),poll:()=>_(Je(e,t=>t.poll()),Ia(x(ae(new Array)),(t,r)=>{switch(r._tag){case"None":return g();case"Some":switch(t._tag){case"None":return g();case"Some":return x(fc(r.value,t.value,{onSuccess:(o,n)=>[o,...n],onFailure:We}))}}})),interruptAsFork:t=>vt(e,r=>r.interruptAsFork(t)),pipe(){return C(this,arguments)}});var Iy=u(3,(e,t,r)=>Py(e,t,{onSelfWin:(o,n)=>m(o.await(),s=>{switch(s._tag){case Se:return m(o.inheritAll(),()=>r.onSelfDone(s,n));case De:return r.onSelfDone(s,n)}}),onOtherWin:(o,n)=>m(o.await(),s=>{switch(s._tag){case Se:return m(o.inheritAll(),()=>r.onOtherDone(s,n));case De:return r.onOtherDone(s,n)}})})),YA=e=>Re(t=>nr(r=>m(bs(t(e)),o=>cn(()=>$R(r)(o))(t(xs(o)))))),Af=u(2,(e,t)=>nr(r=>Iy(e,t,{onSelfDone:(o,n)=>is(o,{onFailure:s=>Ni(i=>We(s,i))(xs(n)),onSuccess:s=>ee(s)(sr(r)(n))}),onOtherDone:(o,n)=>is(o,{onFailure:s=>Ni(i=>We(i,s))(xs(n)),onSuccess:s=>ee(s)(sr(r)(n))})}))),Py=u(3,(e,t,r)=>ye((o,n)=>{let s=n.runtimeFlags,i=_t(!0),a=Cy(e,o,s,r.selfScope),c=Cy(t,o,s,r.otherScope);return or(p=>{a.unsafeAddObserver(()=>SA(a,c,r.onSelfWin,i,p)),c.unsafeAddObserver(()=>SA(c,a,r.onOtherWin,i,p)),a.startFork(e),c.startFork(t)},Uh(a.id(),c.id()))})),SA=(e,t,r,o,n)=>{ap(!0,!1)(o)&&n(r(e,t))},uo=u(2,(e,t)=>Re(r=>te(r(e),{onFailure:o=>te(t,{onFailure:n=>W(Me(o,n)),onSuccess:()=>W(o)}),onSuccess:o=>ee(t,o)}))),W3=(e,t)=>nr(r=>m(m(bs(tr(e)),o=>or(n=>{let s=t.map(c=>c.listeners.count),i=()=>{s.every(c=>c===0)&&(a.forEach(c=>c()),n(un(o)))};o.unsafeAddObserver(c=>{a.forEach(p=>p()),n(c)});let a=t.map((c,p)=>{let l=f=>{s[p]=f,i()};return c.listeners.addObserver(l),()=>c.listeners.removeObserver(l)});return i(),D(()=>{a.forEach(c=>c())})})),()=>v(()=>{let o=t.flatMap(n=>n.state.completed?[]:[n]);return vt(o,n=>nA(n.request,gl(r)))})));var ZA=(e,t)=>zc(Hi(e,t),(r,o)=>m(lf,n=>D(()=>r.end(n,o)))),vf=(e,t)=>m(Hi(e,t),r=>Mr(Po,Qo(r))),Mf=e=>Mr(xt,Ie(Ii,e)),kf=e=>Mr(Po,Qo(e));var QA,t2,XA=(e,t,r,o)=>Do({_tag:"Complete",key:e,exit:t,entryStats:r,timeToLiveMillis:o}),e2=(e,t)=>Do({_tag:"Pending",key:e,deferred:t}),z3=(e,t)=>Do({_tag:"Refreshing",deferred:e,complete:t}),Ny=Symbol.for("@effect/cache/Cache/MapKey"),Ly=class{constructor(t){this.current=t,this[QA]=Ny,this.previous=void 0,this.next=void 0}[(QA=Ny,R)](){return T(E(this.next))(T(E(this.previous))(E(this.current)))}[F](t){return this===t?!0:K3(t)&&O(this.current,t.current)&&O(this.previous,t.previous)&&O(this.next,t.next)}},Vi=e=>new Ly(e),K3=e=>typeof e=="object"&&e!=null&&Ny in e,qy=class{constructor(){this.head=void 0,this.tail=void 0}add(t){if(t!==this.tail)if(this.tail===void 0)this.head=t,this.tail=t;else{let r=t.previous,o=t.next;o!==void 0&&(t.next=void 0,r!==void 0?(r.next=o,o.previous=r):(this.head=o,this.head.previous=void 0)),this.tail.next=t,t.previous=this.tail,this.tail=t}}remove(){let t=this.head;if(t!==void 0){let r=t.next;r!==void 0?(t.next=void 0,this.head=r,this.head.previous=void 0):(this.head=void 0,this.tail=void 0)}return t}},$3=()=>new qy,G3=(e,t,r,o,n,s)=>({map:e,keys:t,accesses:r,updating:o,hits:n,misses:s}),V3=()=>G3(Pn(),$3(),$E(),_t(!1),0,0),J3="@effect/cache/Cache",Y3=Symbol.for(J3),Z3={_Key:e=>e,_Error:e=>e,_Value:e=>e},Q3=e=>e,Tf=e=>({loadedMillis:e}),Hy=class{constructor(t,r,o,n,s){this.capacity=t,this.context=r,this.fiberId=o,this.lookup=n,this.timeToLive=s,this[t2]=Z3,this.cacheState=V3()}get(t){return _(this.getEither(t),Tu)}cacheStats(){return D(()=>Q3({hits:this.cacheState.hits,misses:this.cacheState.misses,size:cp(this.cacheState.map)}))}getOption(t){return v(()=>Be(we(this.cacheState.map,t),{onNone:()=>{let r=Vi(t);return this.trackAccess(r),this.trackMiss(),y(g())},onSome:r=>this.resolveMapValue(r)}))}getOptionComplete(t){return v(()=>Be(we(this.cacheState.map,t),{onNone:()=>{let r=Vi(t);return this.trackAccess(r),this.trackMiss(),y(g())},onSome:r=>this.resolveMapValue(r,!0)}))}contains(t){return D(()=>Dr(this.cacheState.map,t))}entryStats(t){return D(()=>{let r=we(this.cacheState.map,t);if(L(r))switch(r.value._tag){case"Complete":{let o=r.value.entryStats.loadedMillis;return x(Tf(o))}case"Pending":return g();case"Refreshing":{let o=r.value.complete.entryStats.loadedMillis;return x(Tf(o))}}return g()})}getEither(t){return v(()=>{let r=t,o,n,s=Ge(we(this.cacheState.map,r));return s===void 0&&(n=qg(this.fiberId),o=Vi(r),Dr(this.cacheState.map,r)?s=Ge(we(this.cacheState.map,r)):Ot(this.cacheState.map,r,e2(o,n))),s===void 0?(this.trackAccess(o),this.trackMiss(),_(this.lookupValueOf(t,n),B)):m(this.resolveMapValue(s),Be({onNone:()=>this.getEither(t),onSome:i=>y(K(i))}))})}invalidate(t){return D(()=>{Nn(this.cacheState.map,t)})}invalidateWhen(t,r){return D(()=>{let o=we(this.cacheState.map,t);L(o)&&o.value._tag==="Complete"&&o.value.exit._tag==="Success"&&r(o.value.exit.value)&&Nn(this.cacheState.map,t)})}invalidateAll(){return D(()=>{this.cacheState.map=Pn()})}refresh(t){return co(r=>v(()=>{let o=t,n=qg(this.fiberId),s=Ge(we(this.cacheState.map,o));if(s===void 0&&(Dr(this.cacheState.map,o)?s=Ge(we(this.cacheState.map,o)):Ot(this.cacheState.map,o,e2(Vi(o),n))),s===void 0)return ne(this.lookupValueOf(t,n));switch(s._tag){case"Complete":{if(this.hasExpired(r,s.timeToLiveMillis)){let i=Ge(we(this.cacheState.map,o));return O(i,s)&&Nn(this.cacheState.map,o),ne(this.get(t))}return ne(pf(()=>{let i=Ge(we(this.cacheState.map,o));if(O(i,s)){let a=z3(n,s);return Ot(this.cacheState.map,o,a),!0}return!1})(this.lookupValueOf(t,n)))}case"Pending":return cs(s.deferred);case"Refreshing":return cs(s.deferred)}}))}set(t,r){return co(o=>D(()=>{let n=o.unsafeCurrentTimeMillis(),s=t,i=VC(r),a=XA(Vi(s),i,Tf(n),n+Wr(rt(this.timeToLive(i))));Ot(this.cacheState.map,s,a)}))}size(){return D(()=>cp(this.cacheState.map))}values(){return D(()=>{let t=[];for(let r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&t.push(r[1].exit.value);return t})}entries(){return D(()=>{let t=[];for(let r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&t.push([r[0],r[1].exit.value]);return t})}keys(){return D(()=>{let t=[];for(let r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&t.push(r[0]);return t})}resolveMapValue(t,r=!1){return co(o=>{switch(t._tag){case"Complete":return this.trackAccess(t.key),this.trackHit(),this.hasExpired(o,t.timeToLiveMillis)?(Nn(this.cacheState.map,t.key.current),y(g())):_(t.exit,x);case"Pending":return this.trackAccess(t.key),this.trackHit(),r?y(g()):_(cs(t.deferred),x);case"Refreshing":return this.trackAccess(t.complete.key),this.trackHit(),this.hasExpired(o,t.complete.timeToLiveMillis)?r?y(g()):_(cs(t.deferred),x):_(t.complete.exit,x)}})}trackHit(){this.cacheState.hits=this.cacheState.hits+1}trackMiss(){this.cacheState.misses=this.cacheState.misses+1}trackAccess(t){if(GE(this.cacheState.accesses,t),ap(this.cacheState.updating,!1,!0)){let r=!0;for(;r;){let n=VE(this.cacheState.accesses,bh);n===bh?r=!1:this.cacheState.keys.add(n)}let o=cp(this.cacheState.map);for(r=o>this.capacity;r;){let n=this.cacheState.keys.remove();n!==void 0?Dr(this.cacheState.map,n.current)&&(Nn(this.cacheState.map,n.current),o=o-1,r=o>this.capacity):r=!1}Xt(this.cacheState.updating,!1)}}hasExpired(t,r){return t.unsafeCurrentTimeMillis()>r}lookupValueOf(t,r){return co(o=>v(()=>{let n=t;return cn(()=>G(KC(r),D(()=>{Nn(this.cacheState.map,n)})))(m(s=>{let i=o.unsafeCurrentTimeMillis(),a=Tf(i),c=XA(Vi(n),s,a,i+Wr(rt(this.timeToLive(s))));return Ot(this.cacheState.map,n,c),G(zC(r,s),s)})(ie(jt(this.context)(this.lookup(t)))))}))}};t2=Y3;var r2=(e,t,r)=>new Hy(e,Pt(),bp,t,o=>rt(r(o)));var X3="@effect/io/Schedule/Interval",jy=Symbol.for(X3),o2={[jy]:jy,startMillis:0,endMillis:0};var n2=o2;var s2=e=>V(()=>n2)(Ln(e.intervals)).startMillis;var i2=s2;var nq="Done";var a2=e=>e._tag===nq;var c2=a2;var aq,u2,cq="@effect/io/Schedule",uq=Symbol.for(cq),pq="@effect/io/Schedule/Driver",lq=Symbol.for(pq);var fq={_Env:e=>e,_In:e=>e,_Out:e=>e};aq=uq;var By=class{constructor(t,r){this.schedule=t,this.ref=r,this[u2]=fq}state(){return _(vr(this.ref),t=>t[1])}last(){return m(vr(this.ref),([t,r])=>{switch(t._tag){case"None":return wr(()=>Ro());case"Some":return y(t.value)}})}reset(){return ao(this.ref,[g(),this.schedule.initial])}next(t){return m(r=>m(o=>m(([n,s,i])=>c2(i)?G(z(g()))(ao(this.ref,[x(s),n])):ee(s)(G(Li(zs(i2(i.intervals)-o)))(ao(this.ref,[x(s),n]))))(v(()=>this.schedule.step(o,t,r))))($l))(_(vr(this.ref),r=>r[1]))}};u2=lq;var Uy=e=>_(t=>new By(e,t))(ls([g(),e.initial]));var p2=u(2,(e,t)=>Wy(e,t,(r,o)=>z(r))),Wy=u(3,(e,t,r)=>m(Uy(t),o=>fe(e,{onFailure:n=>r(n,g()),onSuccess:n=>l2(e,o,r,n)}))),l2=(e,t,r,o)=>fe(t.next(o),{onFailure:()=>ts(t.last()),onSuccess:n=>fe(e,{onFailure:s=>r(s,x(n)),onSuccess:s=>l2(e,t,r,s)})}),f2=u(2,(e,t)=>Gc(e,r=>D(()=>t(r)))),Gc=u(2,(e,t)=>m(e,r=>m(t(r),o=>o?y(r):m(Ut(),()=>Gc(e,t))))),m2=u(2,(e,t)=>zy(e,r=>D(()=>t(r)))),zy=u(2,(e,t)=>Gc(e,r=>wc(t(r)))),d2=u(2,(e,t)=>Ky(e,t,(r,o)=>z(r))),h2=u(2,(e,t)=>g2(e,t)),g2=(e,t)=>Ft(e,r=>t<0?z(r):m(Ut(),()=>g2(e,t-1))),Ky=u(3,(e,t,r)=>m(Uy(t),o=>x2(e,o,r))),x2=(e,t,r)=>Ft(e,o=>fe(t.next(o),{onFailure:()=>m(n=>r(o,n))(ts(t.last())),onSuccess:()=>x2(e,t,r)})),y2=u(2,(e,t)=>Vc(e,r=>D(()=>t(r)))),Vc=u(2,(e,t)=>Ft(e,r=>m(t(r),o=>o?z(r):m(Ut(),()=>Vc(e,t))))),b2=u(2,(e,t)=>$y(e,r=>D(()=>t(r)))),$y=u(2,(e,t)=>Vc(e,r=>wc(t(r)))),If=u(2,(e,t)=>Gy(e,void 0,t)),Gy=u(3,(e,t,r)=>m(Uy(r),o=>D2(e,t,o))),D2=(e,t,r)=>fe(r.next(t),{onFailure:()=>ts(r.last()),onSuccess:()=>m(e,o=>D2(e,o,r))});var E2,_2,O2,Jy=class{constructor(t){this.permits=t,this.waiters=new Array,this.taken=0,this.take=r=>Qr(o=>{if(this.free<r){let n=()=>{if(this.free>=r){let s=this.waiters.findIndex(i=>i===n);s!==-1&&this.waiters.splice(s,1),this.taken+=r,o(y(r))}};return this.waiters.push(n),K(D(()=>{let s=this.waiters.findIndex(i=>i===n);s!==-1&&this.waiters.splice(s,1)}))}return this.taken+=r,B(y(r))}),this.release=r=>ye(o=>(this.taken-=r,o.getFiberRef(To).scheduleTask(()=>{this.waiters.forEach(n=>n())},o.getFiberRef(ic)),q)),this.withPermits=r=>o=>Re(n=>m(n(this.take(r)),s=>uo(n(o),this.release(s))))}get free(){return this.permits-this.taken}},Nf=e=>new Jy(e),w2=e=>D(()=>Nf(e)),R2=e=>Lf(e,JA),F2=u(2,(e,t)=>_(Zy(e,t),r=>r[0])),Zy=u(2,(e,t)=>{let r=rt(t);return m(to(),o=>_(qf(g()),n=>[jt(mq(e,r,n),o),dq(n)]))}),C2=(e,t,r)=>{let o=Wr(rt(t));return _(n=>x([r+o,n]))(Bt(n=>oo(e,n))(gt()))},mq=(e,t,r)=>Re(o=>m(n=>H(n)?xi("BUG: Effect.cachedInvalidate - please report an issue at https://github.com/Effect-TS/io/issues"):o(Ne(n.value[1])))(m(n=>bq(r,s=>{switch(s._tag){case"None":return x(C2(e,t,n));case"Some":{let[i]=s.value;return i-n<=0?x(C2(e,t,n)):g()}}}))(co(n=>n.currentTimeMillis)))),dq=e=>ao(e,g()),A2=u(2,(e,t)=>Lf(e,r=>t(Ff(r)))),Lf=u(2,(e,t)=>m(uA,r=>uo(m(r.value(),t))(eb(e,r)))),v2=u(e=>Zt(e[0]),(e,t)=>t?.discard?vt(e,Wt):_(Je(e,Wt),Ff)),Qy=u(2,(e,t)=>Re(r=>m(t.fork(Ui),o=>Bt(n=>o.addFinalizer(()=>nr(s=>O(s,n.id())?q:ne(un(n)))))(bs(Rr(n=>o.close(n))(r(e))))))),Xy=e=>hn(t=>Qy(e,t)),M2=e=>xs(e),k2=e=>v(()=>m(e,xs)),Vy=Symbol.for("@effect/io/Effect/memoizeFunction.key"),Pf=class{constructor(t,r){this.a=t,this.eq=r,this[E2]=Vy}[(E2=Vy,F)](t){return typeof t=="object"&&t!==null&&Vy in t?this.eq?this.eq(this.a,t.a):O(this.a,t.a):!1}[R](){return this.eq?0:E(this.a)}},T2=(e,t)=>_(r=>o=>m(([n,s])=>ee(s)(ds(n)))(m(Ne)(r.modifyEffect(n=>{let s=we(new Pf(o,t))(n);return H(s)?_(i=>[i,Ot(new Pf(o,t),i)(n)])(Bt(i=>Wt(oo(i)(fs(e(o)))))(gt())):y([s.value,n])}))))(m(qf)(D(()=>Pn()))),I2=u(2,(e,t)=>(r=>At(r))(Af(ie(t))(ie(e)))),P2=u(2,(e,t)=>Xy(If(t)(e))),eb=u(2,(e,t)=>Ye(Ki,o=>o.zip(t))(e)),N2=u(2,(e,t)=>Jc(e,{onTimeout:g,onSuccess:x,duration:t})),L2=u(2,(e,{duration:t,onTimeout:r})=>At(Jc(e,{onTimeout:()=>wr(r),onSuccess:y,duration:t}))),q2=u(2,(e,{duration:t,onTimeout:r})=>At(Jc(e,{onTimeout:()=>ro(r),onSuccess:y,duration:t}))),Jc=u(2,(e,{duration:t,onSuccess:r,onTimeout:o})=>nr(n=>Py(e,tr(Li(t)),{onSelfWin:(s,i)=>m(s.await(),a=>a._tag==="Success"?m(s.inheritAll(),()=>ee(sr(i,n),r(a.value))):m(sr(i,n),()=>Z(a.cause))),onOtherWin:(s,i)=>m(s.await(),a=>a._tag==="Success"?m(s.inheritAll(),()=>ee(sr(i,n),o())):m(sr(i,n),()=>Z(a.cause))),otherScope:gs}))),hq="@effect/io/Ref/Synchronized",gq=Symbol.for(hq),xq={_A:e=>e},Yy=class{constructor(t,r){this.ref=t,this.withLock=r,this[_2]=xq,this[O2]=dx}modify(t){return this.modifyEffect(r=>y(t(r)))}modifyEffect(t){return this.withLock(m(([r,o])=>ee(ao(this.ref,o),r))(m(vr(this.ref),t)))}pipe(){return C(this,arguments)}};_2=gq,O2=ef;var qf=e=>D(()=>yq(e)),yq=e=>{let t=tf(e),r=Nf(1);return new Yy(t,r.withPermits(1))},bq=u(2,(e,t)=>e.modifyEffect(r=>{let o=t(r);switch(o._tag){case"None":return y([r,r]);case"Some":return _(o.value,n=>[n,n])}}));var j2="Fresh",B2="FromEffect",U2="Scoped",W2="Suspend";var z2="ZipWithPar";var K2=sr;var jf=e=>(t,r)=>{let o=Ep(),n=t,s=nx(e.fiberRefs,{fiberId:o,fiberRef:ko,value:e.context});r?.scheduler&&(s=nx(s,{fiberId:o,fiberRef:To,value:r.scheduler})),r?.updateRefs&&(s=r.updateRefs(s,o));let i=new Uc(o,X_(s,o),e.runtimeFlags),a=i._supervisor;return a!==ys&&(a.onStart(e.context,n,g(),i),i.unsafeAddObserver(c=>a.onEnd(c,i))),gs.add(e.runtimeFlags,i),i.start(n),i},tb=e=>(t,r)=>{let o=jf(e)(t);return r&&o.unsafeAddObserver(n=>{r(n)}),(n,s)=>tb(e)(K2(n??dt)(o),s?i=>s(GC(i)):void 0)},Eq=e=>t=>{let r=Y2(e)(t);if(r._tag==="Failure")throw V2(r.i0);return r.i0},Cq=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let r=new Error;Error.stackTraceLimit=t;let o=`Fiber #${e.id().id} cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work`,n="AsyncFiberException";return Object.defineProperties(r,{_tag:{value:n},message:{value:o},name:{value:n},toString:{get(){return()=>o}},[G2]:{get(){return()=>o}}}),r};var $2=Symbol.for("@effect/io/Runtime/FiberFailure"),_q=Symbol.for("@effect/io/Runtime/FiberFailure/Cause"),G2=Symbol.for("nodejs.util.inspect.custom"),V2=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let r=new Error;Error.stackTraceLimit=t;let o=vp(e);return o.length>0&&(r.name=o[0].message.split(":")[0],r.message=o[0].message.substring(r.name.length+2),r.stack=`${r.name}: ${r.message}
${o[0].stack}`),r[$2]=$2,r[_q]=e,r.toString=()=>Fo(e),r[G2]=()=>r.toString(),r};var J2=e=>{let t=e;switch(t._tag){case"Failure":case"Success":return t;case"Left":return Fr(t.left);case"Right":return ae(t.right);case"Some":return ae(t.value);case"None":return Fr(Ro())}},Y2=e=>t=>{let r=J2(t);if(r)return r;let o=new $p,n=jf(e)(t,{scheduler:o});o.flush();let s=n.unsafePoll();if(s)return s;throw Cq(n)},Oq=e=>t=>Z2(e)(t).then(r=>{switch(r._tag){case Se:return r.i0;case De:throw V2(r.i0)}}),Z2=e=>t=>new Promise(r=>{let o=J2(t);o&&r(o),jf(e)(t).unsafeAddObserver(n=>{r(n)})}),Hf=class{constructor(t,r,o){this.context=t,this.runtimeFlags=r,this.fiberRefs=o}pipe(){return C(this,arguments)}},wq=e=>new Hf(e.context,e.flags,e.fiberRefs),rb=()=>ye((e,t)=>y(new Hf(e.getFiberRef(ko),t.runtimeFlags,e.unsafeGetFiberRefs()))),Rq=Np(Or,Pp,Ip),kr=wq({context:Pt(),flags:Rq,fiberRefs:rO(new Map)}),Q2=tb(kr),X2=jf(kr),ev=Oq(kr),tv=Z2(kr),rv=Eq(kr),ov=Y2(kr),nv=e=>m(gt(),t=>m(rb(),r=>Re(o=>G(Wt(o(Xr(e(n=>tb(r)(oo(n,t))),n=>as(t,n)))),o(Ne(t))))));var sv=u(2,(e,t)=>e.modifyEffect(t));var vq="@effect/io/Layer",Mq=Symbol.for(vq),kq={_RIn:e=>e,_E:e=>e,_ROut:e=>e},Bf={[Mq]:kq,pipe(){return C(this,arguments)}};var Tq=e=>e._tag===j2,ob=class{constructor(t){this.ref=t}getOrElseMemoize(t,r){return At(sv(this.ref,o=>{let n=o.get(t);if(n!==void 0){let[s,i]=n,a=Rr(xl({onFailure:()=>q,onSuccess:()=>_i(r,i)}))(m(([c,p])=>ee(p)(ds(c)))(s));return y([a,o])}return m(s=>m(i=>_(a=>{let c=Re(l=>m(f=>m(d=>{switch(d._tag){case De:return G(W(d.i0))(G(pn(f,d))(as(i,d.i0)));case Se:return ee(d.i0[1])(G(Fi(i,d.i0))(G(_i(r,h=>m(S=>S(h))(vr(a))))(G(Sc(s,h=>h+1))(ao(a,h=>ne(Si(rf(s,S=>[S===1,S-1]))(pn(f,h))))))))}})(ie(l(m(av(t,f),d=>fs(d(this)))))))(Ds())),p=[Rr(is({onFailure:()=>q,onSuccess:()=>Sc(s,l=>l+1)}))(Ne(i)),l=>m(f=>f(l))(vr(a))];return[c,Tq(t)?o:o.set(t,p)]})(ls(()=>q)))(gt()))(ls(0))}))}},Iq=()=>_(qf(new Map),e=>new ob(e));var iv=u(2,(e,t)=>m(Iq(),r=>m(av(e,t),o=>o(r)))),av=(e,t)=>{let r=e;switch(r._tag){case"Locally":return D(()=>o=>r.f(o.getOrElseMemoize(r.self,t)));case"ExtendScope":return D(()=>o=>hn(n=>o.getOrElseMemoize(r.layer,n)));case"Fold":return D(()=>o=>te({onFailure:n=>o.getOrElseMemoize(r.failureK(n),t),onSuccess:n=>o.getOrElseMemoize(r.successK(n),t)})(o.getOrElseMemoize(r.layer,t)));case"Fresh":return D(()=>o=>iv(t)(r.layer));case"FromEffect":return D(()=>o=>r.effect);case"ProvideTo":return D(()=>o=>m(n=>jt(n)(o.getOrElseMemoize(r.second,t)))(o.getOrElseMemoize(r.first,t)));case"Scoped":return D(()=>o=>Ss(r.effect,t));case"Suspend":return D(()=>o=>o.getOrElseMemoize(r.evaluate(),t));case"ZipWith":return D(()=>o=>Mo(o.getOrElseMemoize(r.second,t),r.zipK)(o.getOrElseMemoize(r.first,t)));case"ZipWithPar":return D(()=>o=>qo(o.getOrElseMemoize(r.second,t),r.zipK,{concurrent:!0})(o.getOrElseMemoize(r.first,t)))}};var Pq=()=>Nq(to());function Nq(e){let t=Object.create(Bf);return t._tag=B2,t.effect=e,t}var Lq=u(2,(e,t)=>jq(e,t,(r,o)=>An(o)(r)));var zt=e=>qq(ee(Pt())(e)),qq=e=>{let t=Object.create(Bf);return t._tag=U2,t.effect=e,t};var Hq=e=>{let t=Object.create(Bf);return t._tag=W2,t.evaluate=e,t};var jq=u(3,(e,t,r)=>Hq(()=>{let o=Object.create(Bf);return o._tag=z2,o.first=e,o.second=t,o.zipK=r,o})),nb=u(2,(e,t)=>rr(Ds(),r=>m(iv(t,r),o=>jt(e,o)),(r,o)=>pn(r,o))),cv=u(2,(e,t)=>nb(e,Lq(Pq(),t)));var pv=e=>zt(wf(e)),lv=e=>zt(kf(e)),fv=(e,t)=>zt(vf(e,t)),mv=e=>zt(Mf(e));var sb=Yn;var Ji=_e(r2(65536,()=>_(gt(),e=>({listeners:new Lc,handle:e})),()=>Gd(60))),Yc=Y(Symbol.for("@effect/io/FiberRef/currentCacheEnabled"),()=>_e(!1)),ib=(e,t)=>m(Ce(t)?t:y(t),r=>nr(o=>{let n=new Proxy(e,{});return Fe(Yc,s=>{if(s)return Fe(Ji,a=>m(a.getEither(n),c=>{switch(c._tag){case"Left":return c.left.listeners.increment(),Ee(oC,m(ie(Ne(c.left.handle)),p=>p._tag==="Failure"&&rn(p.cause)?(c.left.listeners.decrement(),m(a.invalidateWhen(n,l=>l.handle===c.left.handle),()=>ib(n,t))):uo(Ne(c.left.handle),D(()=>c.left.listeners.decrement()))));case"Right":return c.right.listeners.increment(),Ee(fg(r,mg({request:n,result:c.right.handle,listeners:c.right.listeners,ownerId:o,state:{completed:!1}})),Re(p=>m(ie(p(Ne(c.right.handle))),l=>(c.right.listeners.decrement(),l))))}}));let i=new Lc;return i.increment(),m(gt(),a=>Ee(fg(r,mg({request:n,result:a,listeners:i,ownerId:o,state:{completed:!1}})),uo(Ne(a),D(()=>i.decrement()))))})})),dv=(e,t)=>Fe(Yc,r=>r?Fe(Ji,o=>m(o.getEither(e),n=>{switch(n._tag){case"Left":return q;case"Right":return Ng(n.right.handle,t)}})):q),hv=u(2,(e,t)=>Ae(e,Yc,t)),gv=u(2,(e,t)=>Ae(e,Ji,t));var zq=gi,Kq=Ce,$q=F2,Gq=Zy,Vq=Dx,Jq=T2,Yq=Sx,Zq=Gi,Qq=AA,Xq=vA,eH=GO,tH=VO,rH=ow,oH=wA,nH=FA,sH=XO,iH=tw,Zc=ur,aH=aw,cH=wy,uH=Ry,pH=Iw,lH=NA,fH=Pw,mH=Nw,dH=_y,hH=MA,gH=zw,xH=Kw,yH=IA,bH=WA,DH=or,SH=nv,EH=MO,CH=Qr,_H=z,OH=wr,wH=W,RH=ro,FH=bg,AH=xi,vH=nn,MH=iw,kH=ns,TH=ww,IH=Mw,PH=y,NH=qi,LH=Cx,Yi=v,qH=D,Mt=q,HH=Ut,jH=kO;var BH=Ft,UH=Xr,WH=TO,zH=EC,KH=IO,$H=PO,GH=NO,VH=LO,JH=qO,YH=gx,ZH=cw,QH=uw,XH=vw,ej=jw,tj=d2,rj=h2,oj=Ky,nj=y2,sj=Vc,ij=b2,aj=$y,cj=Cc;var uj=Xw,pj=eR,lj=Fx,fj=oR,mj=BO,dj=CC,hj=YA,gj=Xp,xj=el,yj=tr,bj=_C,Dj=cn,Sj=Zr,Ej=Re,Cj=ee,_j=sf,Oj=vO,wj=ne,Rj=an,Fj=rw,ub=_,Aj=_w,vj=tl,Mj=vo,kj=Ni,Tj=Ow,Ij=wc,Pj=zc,Nj=_A,xv=rr,Lj=Kc,qj=uo,Hj=rl,jj=Rr,Bj=LA,Uj=qA,Wj=Rf,zj=hn,Kj=Fy,$j=jA,Gj=KA,Vj=R2,Jj=OA,Yj=UO,Zj=af,Qj=fs,Xj=A2,eB=Lf,tB=sn,rB=nr,oB=Wt,nB=bs,sB=v2,iB=Qy,aB=Xy,cB=kA,uB=M2,pB=k2,lB=eb,fB=nl,mB=RC,dB=e=>zt(pr(To,e)),hB=PC,gB=IC,xB=Mg,yB=HO,bB=co,DB=e=>zt(Mr(xt,Ie(so,e))),SB=zA,EB=W_,CB=jO,_B=Li,OB=Yw,wB=Rx,RB=N2,FB=L2,AB=q2,vB=Jc,MB=K_,kB=Xg,TB=pv,IB=z_,PB=wf,NB=to,yv=JO,LB=yi,qB=rs,HB=jt,bv=wC,jB=u(2,(e,t)=>{let r=sb(kr.runtimeFlags,t.runtimeFlags),o=sb(t.runtimeFlags,kr.runtimeFlags),n=Bi(kr.fiberRefs,t.fiberRefs),s=Bi(t.fiberRefs,kr.fiberRefs);return xv(m(cb(r),()=>ab(n)),()=>bv(e,t.context),()=>m(cb(o),()=>ab(s)))}),BB=nb,UB=kw,WB=Ex,zB=cv,KB=uR,$B=cR,GB=Ax,VB=vx,JB=pR,YB=e=>yv(t=>zd(t,e)),ZB=nR,QB=WO,XB=zO,e5=KO,t5=$O;var gn=eo,r5=ie,o5=oo,n5=Rw,s5=Uw,i5=BA,a5=Qp;var c5=YO,u5=ZO,p5=_c,l5=QO,f5=tR,m5=rR,d5=pf,h5=Si,g5=sR,x5=iR,Kt=m,y5=At,b5=PA,D5=Af,S5=I2,E5=Iy,C5=cf,_5=Bt,O5=$w,w5=Gw,R5=wx,F5=Vw,A5=Jw,v5=sw,M5=yx,k5=Sw,T5=p2,I5=qw,P5=Wy,N5=f2,L5=Gc,q5=m2,H5=zy,j5=If,B5=P2,U5=Gy,W5=os,z5=xx,K5=pw,$5=Ae,G5=Ye,V5=pr,J5=Mr,ab=ds,Y5=Bw,Z5=uf,Q5=lw,X5=fw,e6=Oc,t6=sc,r6=te,o6=fe,n6=mw,s6=dw,i6=bx,a6=hw,c6=gw,u6=xw,p6=yw,l6=bw,f6=AO,m6=Dw,d6=NC,h6=e=>zt(pr(uc,e)),g6=ts,x6=Dg,y6=es,b6=Fw,D6=Aw,S6=Tw,E6=zl,C6=rb,_6=ol,cb=Di,O6=AC,w6=ky,R6=Ww,F6=_x,A6=Ox,v6=HA,M6=Ay,k6=vy,T6=LC,I6=aR,P6=on,N6=k,L6=Nf,q6=w2,H6=X2,j6=Q2,Dv=ev,B6=tv,U6=rv,W6=ov,z6=UA,K6=My,$6=$A,G6=GA,V6=VA,J6=qo,Y6=Ee,Z6=Zp,Q6=Yr,X6=bi,e8=ib,t8=dv,r8=FC,o8=e=>zt(pr(cc,e)),n8=e=>zt(pr(Yc,e)),s8=e=>zt(Ce(e)?m(e,t=>pr(Ji,t)):pr(Ji,e)),i8=hv,a8=gv,c8=mv,u8=Qw,p8=Kl,l8=$_,f8=Mf,m8=vC,d8=e=>zt(pr(pc,e)),h8=fR,g8=lR,x8=kx,y8=Mx,b8=dR,D8=hR,S8=mR,E8=Hi,C8=lv,_8=fv,O8=Tx,w8=ZA,R8=gR,F8=vf,A8=Ix,v8=kf,M8=xR,k8=yR;var Ze={};Sn(Ze,{ConfigTypeId:()=>T8,all:()=>I8,array:()=>P8,boolean:()=>N8,chunk:()=>L8,date:()=>q8,fail:()=>H8,hashMap:()=>sU,hashSet:()=>eU,integer:()=>B8,isConfig:()=>W8,logLevel:()=>U8,map:()=>z8,mapAttempt:()=>K8,mapOrFail:()=>$8,nested:()=>G8,number:()=>j8,option:()=>Y8,orElse:()=>V8,orElseIf:()=>J8,primitive:()=>Z8,repeat:()=>Q8,secret:()=>X8,string:()=>tU,succeed:()=>rU,suspend:()=>oU,sync:()=>nU,unwrap:()=>iU,validate:()=>aU,withDefault:()=>cU,withDescription:()=>uU,zip:()=>pU,zipWith:()=>lU});var T8=Hl,I8=S_,P8=u_,N8=c_,L8=jl,q8=p_,H8=l_,j8=f_,B8=m_,U8=d_,W8=Kg,z8=Lo,K8=h_,$8=Mi,G8=ar,V8=x_,J8=Bl,Y8=y_,Z8=ln,Q8=ql,X8=b_,eU=D_,tU=zg,rU=ki,oU=hc,nU=C_,sU=__,iU=$g,aU=O_,cU=w_,uU=R_,pU=F_,lU=gc;var Uf={};Sn(Uf,{Tag:()=>Ct,add:()=>Ie,empty:()=>Pt,get:()=>Ur,getOption:()=>zd,isContext:()=>GI,isTag:()=>JS,make:()=>$u,merge:()=>An,omit:()=>JI,pick:()=>VI,unsafeGet:()=>Ws});var Zi={};Sn(Zi,{Class:()=>QS,TaggedClass:()=>tP,array:()=>XI,case:()=>eP,struct:()=>Do,tagged:()=>ZS,taggedEnum:()=>rP,tuple:()=>QI,unsafeArray:()=>Kd,unsafeStruct:()=>YS});var P={};Sn(P,{Do:()=>QB,EffectTypeId:()=>zq,acquireRelease:()=>Pj,acquireReleaseInterruptible:()=>Nj,acquireUseRelease:()=>xv,addFinalizer:()=>Lj,all:()=>Zq,allSuccesses:()=>Xq,allWith:()=>Qq,allowInterrupt:()=>mj,annotateCurrentSpan:()=>g8,annotateLogs:()=>f6,annotateSpans:()=>h8,as:()=>Cj,asSome:()=>_j,asSomeError:()=>Oj,asUnit:()=>wj,async:()=>DH,asyncEffect:()=>SH,asyncEither:()=>CH,asyncOption:()=>EH,awaitAllChildren:()=>Vj,bind:()=>XB,bindTo:()=>e5,blocked:()=>Y6,cacheRequestResult:()=>t8,cached:()=>Vq,cachedFunction:()=>Jq,cachedInvalidateWithTTL:()=>Gq,cachedWithTTL:()=>$q,catch:()=>jH,catchAll:()=>BH,catchAllCause:()=>UH,catchAllDefect:()=>WH,catchSome:()=>zH,catchSomeCause:()=>KH,catchSomeDefect:()=>$H,catchTag:()=>GH,catchTags:()=>VH,cause:()=>JH,checkInterruptible:()=>dj,clock:()=>yB,clockWith:()=>bB,config:()=>MB,configProviderWith:()=>kB,context:()=>NB,contextWith:()=>yv,contextWithEffect:()=>LB,currentParentSpan:()=>y8,currentSpan:()=>x8,daemonChildren:()=>Jj,delay:()=>CB,descriptor:()=>Yj,descriptorWith:()=>Zj,die:()=>FH,dieMessage:()=>AH,dieSync:()=>vH,diffFiberRefs:()=>Qj,disconnect:()=>hj,dropUntil:()=>eH,dropWhile:()=>tH,either:()=>gn,ensuring:()=>qj,ensuringChild:()=>Xj,ensuringChildren:()=>eB,eventually:()=>YH,every:()=>rH,exists:()=>oH,exit:()=>r5,fail:()=>_H,failCause:()=>wH,failCauseSync:()=>RH,failSync:()=>OH,fiberId:()=>tB,fiberIdWith:()=>rB,filter:()=>nH,filterOrDie:()=>c5,filterOrDieMessage:()=>u5,filterOrElse:()=>p5,filterOrFail:()=>l5,findFirst:()=>sH,firstSuccessOf:()=>iH,flatMap:()=>Kt,flatMapStep:()=>X6,flatten:()=>y5,flip:()=>Rj,flipWith:()=>Fj,forEach:()=>Zc,forever:()=>v5,fork:()=>oB,forkAll:()=>sB,forkDaemon:()=>nB,forkIn:()=>iB,forkScoped:()=>aB,forkWithErrorHandler:()=>cB,fromFiber:()=>uB,fromFiberEffect:()=>pB,fromNullable:()=>M8,gen:()=>MH,getFiberRefs:()=>z5,head:()=>aH,if:()=>a5,ignore:()=>ZH,ignoreLogged:()=>QH,inheritFiberRefs:()=>K5,interrupt:()=>gj,interruptWith:()=>xj,interruptible:()=>yj,interruptibleMask:()=>bj,intoDeferred:()=>o5,isEffect:()=>Kq,isFailure:()=>Q5,isSuccess:()=>X5,iterate:()=>M5,labelMetrics:()=>F6,labelMetricsScoped:()=>M6,labelMetricsScopedSet:()=>k6,labelMetricsSet:()=>A6,let:()=>t5,linkSpans:()=>S8,locally:()=>$5,locallyScoped:()=>V5,locallyScopedWith:()=>J5,locallyWith:()=>G5,log:()=>n6,logAnnotations:()=>m6,logDebug:()=>i6,logError:()=>u6,logFatal:()=>p6,logInfo:()=>a6,logTrace:()=>s6,logWarning:()=>c6,loop:()=>k5,makeSemaphore:()=>q6,makeSpan:()=>E8,map:()=>ub,mapAccum:()=>Aj,mapBoth:()=>vj,mapError:()=>Mj,mapErrorCause:()=>kj,mapInputContext:()=>qB,match:()=>e6,matchCause:()=>t6,matchCauseEffect:()=>r6,matchEffect:()=>o6,merge:()=>Tj,mergeAll:()=>cH,metricLabels:()=>T6,negate:()=>Ij,never:()=>kH,none:()=>TH,onError:()=>Hj,onExit:()=>jj,onInterrupt:()=>Dj,once:()=>Yq,option:()=>n5,optionFromOptional:()=>k8,orDie:()=>g6,orDieWith:()=>x6,orElse:()=>y6,orElseFail:()=>b6,orElseSucceed:()=>D6,parallelErrors:()=>XH,parallelFinalizers:()=>Bj,partition:()=>uH,patchFiberRefs:()=>ab,promise:()=>IH,provideContext:()=>HB,provideLayer:()=>BB,provideService:()=>UB,provideServiceEffect:()=>WB,provideSomeContext:()=>bv,provideSomeLayer:()=>zB,provideSomeRuntime:()=>jB,race:()=>D5,raceAll:()=>b5,raceFirst:()=>S5,raceWith:()=>E5,random:()=>S6,randomWith:()=>E6,reduce:()=>pH,reduceEffect:()=>lH,reduceRight:()=>fH,reduceWhile:()=>mH,repeat:()=>T5,repeatN:()=>I5,repeatOrElse:()=>P5,repeatUntil:()=>N5,repeatUntilEffect:()=>L5,repeatWhile:()=>q5,repeatWhileEffect:()=>H5,replicate:()=>dH,replicateEffect:()=>hH,request:()=>e8,retry:()=>tj,retryN:()=>rj,retryOrElse:()=>oj,retryUntil:()=>nj,retryUntilEffect:()=>sj,retryWhile:()=>ij,retryWhileEffect:()=>aj,runCallback:()=>j6,runFork:()=>H6,runPromise:()=>Dv,runPromiseExit:()=>B6,runRequestBlock:()=>Z6,runSync:()=>U6,runSyncExit:()=>W6,runtime:()=>C6,runtimeFlags:()=>_6,sandbox:()=>ej,schedule:()=>j5,scheduleForked:()=>B5,scheduleFrom:()=>U5,scope:()=>Wj,scopeWith:()=>zj,scoped:()=>Kj,sequentialFinalizers:()=>Uj,serviceConstants:()=>VB,serviceFunction:()=>KB,serviceFunctionEffect:()=>$B,serviceFunctions:()=>GB,serviceMembers:()=>JB,serviceOption:()=>YB,setClock:()=>DB,setConfigProvider:()=>TB,setFiberRefs:()=>Y5,setParentSpan:()=>C8,setRequestBatching:()=>o8,setRequestCache:()=>s8,setRequestCaching:()=>n8,setScheduler:()=>dB,setSpan:()=>_8,setTracer:()=>c8,setTracerTiming:()=>d8,setUnhandledErrorLogLevel:()=>h6,sleep:()=>_B,some:()=>s5,spanAnnotations:()=>b8,spanLinks:()=>D8,step:()=>Q6,succeed:()=>PH,succeedNone:()=>NH,succeedSome:()=>LH,summarized:()=>C5,supervised:()=>lB,suspend:()=>Yi,sync:()=>qH,tagMetrics:()=>R6,tagMetricsScoped:()=>v6,takeUntil:()=>gH,takeWhile:()=>xH,tap:()=>_5,tapBoth:()=>O5,tapDefect:()=>w5,tapError:()=>R5,tapErrorCause:()=>A5,tapErrorTag:()=>F5,timed:()=>OB,timedWith:()=>wB,timeout:()=>RB,timeoutFail:()=>FB,timeoutFailCause:()=>AB,timeoutTo:()=>vB,tracer:()=>u8,tracerWith:()=>p8,transplant:()=>fB,try:()=>cj,tryMap:()=>uj,tryMapPromise:()=>pj,tryPromise:()=>lj,unified:()=>N6,unifiedFn:()=>P6,uninterruptible:()=>Sj,uninterruptibleMask:()=>Ej,unit:()=>Mt,unless:()=>f5,unlessEffect:()=>m5,unsafeMakeSemaphore:()=>L6,unsandbox:()=>fj,unsome:()=>i5,updateFiberRefs:()=>Z5,updateRuntimeFlags:()=>cb,updateService:()=>ZB,useSpan:()=>O8,useSpanScoped:()=>w8,using:()=>$j,validate:()=>z6,validateAll:()=>yH,validateFirst:()=>bH,validateWith:()=>K6,when:()=>d5,whenEffect:()=>h5,whenFiberRef:()=>g5,whenRef:()=>x5,whileLoop:()=>W5,withClock:()=>EB,withClockScoped:()=>SB,withConcurrency:()=>mB,withConfigProvider:()=>IB,withConfigProviderScoped:()=>PB,withEarlyRelease:()=>Gj,withLogSpan:()=>l6,withMaxFiberOps:()=>hB,withMetric:()=>I6,withParentSpan:()=>A8,withParentSpanScoped:()=>v8,withRequestBatching:()=>r8,withRequestCache:()=>a8,withRequestCaching:()=>i8,withRuntimeFlags:()=>O6,withRuntimeFlagsScoped:()=>w6,withScheduler:()=>gB,withSchedulingPriority:()=>xB,withSpan:()=>R8,withSpanScoped:()=>F8,withTracer:()=>l8,withTracerScoped:()=>f8,withTracerTiming:()=>m8,withUnhandledErrorLogLevel:()=>d6,yieldNow:()=>HH,zip:()=>$6,zipLeft:()=>G6,zipRight:()=>V6,zipWith:()=>J6});var Xc={};Sn(Xc,{SafeRefinementId:()=>_U,any:()=>AU,bigint:()=>IU,boolean:()=>MU,date:()=>PU,defined:()=>vU,discriminator:()=>Ev,discriminators:()=>fb,discriminatorsExhaustive:()=>Cv,either:()=>Wf,exhaustive:()=>wv,instanceOf:()=>_v,instanceOfUnsafe:()=>LU,is:()=>wU,nonEmptyString:()=>OU,not:()=>CU,null:()=>TU,number:()=>FU,option:()=>HU,orElse:()=>Ov,orElseAbsurd:()=>qU,record:()=>NU,string:()=>RU,tag:()=>SU,tags:()=>EU,tagsExhaustive:()=>mb,type:()=>dU,typeTags:()=>xU,undefined:()=>kU,value:()=>hU,valueTags:()=>gU,when:()=>yU,whenAnd:()=>DU,whenOr:()=>bU});var Qc=class e{constructor(t){this.cases=t,this._tag="TypeMatcher",this._input=k,this._filters=k,this._remaining=k,this._result=k}add(t){return new e([...this.cases,t])}pipe(){return C(this,arguments)}},pb=class e{constructor(t,r){this.provided=t,this.value=r,this._tag="ValueMatcher",this._input=k,this._filters=k,this._result=k}add(t){return this.value._tag==="Right"?this:t._tag==="When"&&t.guard(this.provided)===!0?new e(this.provided,B(t.evaluate(this.provided))):t._tag==="Not"&&t.guard(this.provided)===!1?new e(this.provided,B(t.evaluate(this.provided))):this}pipe(){return C(this,arguments)}},Es=class{constructor(t,r){this.guard=t,this.evaluate=r,this._tag="When"}},lb=class{constructor(t,r){this.guard=t,this.evaluate=r,this._tag="Not"}},Qi=e=>{if(typeof e=="function")return e;if(Array.isArray(e)){let t=e.map(Qi),r=t.length;return o=>{if(!Array.isArray(o))return!1;for(let n=0;n<r;n++)if(t[n](o[n])===!1)return!1;return!0}}else if(e!==null&&typeof e=="object"){let t=Object.entries(e).map(([o,n])=>[o,Qi(n)]),r=t.length;return o=>{if(typeof o!="object"||o===null)return!1;for(let n=0;n<r;n++){let[s,i]=t[n];if(!(s in o)||i(o[s])===!1)return!1}return!0}}return t=>t===e},fU=e=>{let t=e.map(Qi),r=t.length;return o=>{for(let n=0;n<r;n++)if(t[n](o)===!0)return!0;return!1}},mU=e=>{let t=e.map(Qi),r=t.length;return o=>{for(let n=0;n<r;n++)if(t[n](o)===!1)return!1;return!0}},dU=()=>new Qc([]),hU=e=>new pb(e,K(e)),gU=e=>{let t=mb(e)(new Qc([]));return r=>t(r)},xU=()=>e=>{let t=mb(e)(new Qc([]));return r=>t(r)},yU=(e,t)=>r=>r.add(new Es(Qi(e),t)),bU=(...e)=>t=>{let r=e[e.length-1],o=e.slice(0,-1);return t.add(new Es(fU(o),r))},DU=(...e)=>t=>{let r=e[e.length-1],o=e.slice(0,-1);return t.add(new Es(mU(o),r))},Ev=e=>(...t)=>{let r=t[t.length-1],o=t.slice(0,-1),n=o.length===1?s=>s[e]===o[0]:s=>o.includes(s[e]);return s=>s.add(new Es(n,r))},fb=e=>t=>{let r=[];for(let n in t){let s=a=>a[e]===n,i=t[n];i&&r.push(new Es(s,i))}let o=r.length;return n=>{let s=n;for(let i=0;i<o;i++)s=s.add(r[i]);return s}},Cv=e=>t=>{let r=fb(e)(t);return o=>wv(r(o))},SU=Ev("_tag"),EU=fb("_tag"),mb=Cv("_tag"),CU=(e,t)=>r=>r.add(new lb(Qi(e),t)),_U=Symbol.for("@effect/match/SafeRefinementId"),OU=e=>typeof e=="string"&&e.length>0,wU=(...e)=>{let t=e.length;return r=>{for(let o=0;o<t;o++)if(r===e[o])return!0;return!1}},RU=xa,FU=_n,AU=()=>!0,vU=e=>e!=null,MU=Cu,kU=ya;var TU=_D;var IU=Is,PU=_u,NU=ba,_v=e=>t=>t instanceof e,LU=_v,Ov=e=>t=>{let r=Wf(t);return Ea(r)?r._tag==="Right"?r.right:e(r.left):o=>{let n=r(o);return n._tag==="Right"?n.right:e(n.left)}},qU=e=>Ov(()=>{throw new Error("absurd")})(e),Wf=e=>{if(e._tag==="ValueMatcher")return e.value;let t=e.cases.length;return r=>{for(let o=0;o<t;o++){let n=e.cases[o];if(n._tag==="When"&&n.guard(r)===!0)return B(n.evaluate(r));if(n._tag==="Not"&&n.guard(r)===!1)return B(n.evaluate(r))}return K(r)}},HU=e=>{let t=Wf(e);return Ea(t)?Ca(t,{onLeft:()=>g(),onRight:x}):r=>Ca(t(r),{onLeft:()=>g(),onRight:o=>x(o)})},wv=e=>{let t=Wf(e);if(Ea(t)){if(t._tag==="Right")return t.right;throw new Error("@effect/match: exhaustive absurd")}return r=>{let o=t(r);if(o._tag==="Right")return o.right;throw new Error("@effect/match: exhaustive absurd")}};var lr={};Sn(lr,{Do:()=>H1,TypeId:()=>KD,all:()=>ZD,ap:()=>E1,as:()=>VD,asUnit:()=>h1,bind:()=>q1,bindTo:()=>N1,composeK:()=>b1,contains:()=>wd,containsWith:()=>eS,divide:()=>T1,exists:()=>A1,filter:()=>O1,filterMap:()=>QD,firstSomeOf:()=>f1,flatMap:()=>gr,flatMapNullable:()=>x1,flatten:()=>Cd,fromIterable:()=>u1,fromNullable:()=>tt,gen:()=>B1,getEquivalence:()=>w1,getLeft:()=>p1,getOrElse:()=>V,getOrNull:()=>Sd,getOrThrow:()=>Ed,getOrThrowWith:()=>GD,getOrUndefined:()=>Ge,getOrder:()=>R1,getRight:()=>$D,isNone:()=>H,isOption:()=>Dd,isSome:()=>L,let:()=>L1,lift2:()=>Oa,liftNullable:()=>m1,liftPredicate:()=>XD,liftThrowable:()=>d1,map:()=>re,match:()=>Be,multiply:()=>M1,multiplyCompact:()=>P1,none:()=>g,orElse:()=>wn,orElseEither:()=>l1,partitionMap:()=>_1,product:()=>YD,productMany:()=>S1,reduceCompact:()=>C1,some:()=>x,subtract:()=>k1,sum:()=>v1,sumCompact:()=>I1,tap:()=>JD,toArray:()=>Od,toRefinement:()=>c1,unit:()=>g1,zipLeft:()=>D1,zipRight:()=>y1,zipWith:()=>_d});var zf={};Sn(zf,{append:()=>Pu,appendAll:()=>sS,appendAllNonEmpty:()=>Rd,cartesian:()=>zI,cartesianWith:()=>HS,chop:()=>_I,chopNonEmpty:()=>Uu,chunksOf:()=>OI,chunksOfNonEmpty:()=>_S,compact:()=>Pd,contains:()=>ES,containsWith:()=>Ma,copy:()=>kd,dedupe:()=>qd,dedupeAdjacent:()=>LS,dedupeAdjacentWith:()=>NS,dedupeNonEmpty:()=>CI,dedupeNonEmptyWith:()=>Bu,dedupeWith:()=>PS,difference:()=>AI,differenceWith:()=>vS,drop:()=>uI,dropRight:()=>pI,dropWhile:()=>lI,empty:()=>jr,every:()=>LI,extend:()=>HI,filter:()=>MI,filterMap:()=>Us,filterMapWhile:()=>kS,findFirst:()=>lS,findFirstIndex:()=>uS,findLast:()=>fS,findLastIndex:()=>pS,flatMap:()=>Fn,flatMapNonEmpty:()=>MS,flatMapNullable:()=>PI,flatten:()=>Ta,flattenNonEmpty:()=>vI,forEach:()=>WI,fromIterable:()=>I,fromNullable:()=>Nd,fromOption:()=>oS,fromRecord:()=>G1,get:()=>aS,getEquivalence:()=>Ld,getOrder:()=>UI,group:()=>wI,groupBy:()=>RI,groupWith:()=>OS,head:()=>Aa,headNonEmpty:()=>oe,init:()=>nI,initNonEmpty:()=>va,insertAt:()=>fI,intersection:()=>AS,intersectionWith:()=>FS,intersperse:()=>bI,intersperseNonEmpty:()=>bS,isEmptyArray:()=>iS,isEmptyReadonlyArray:()=>wa,isNonEmptyArray:()=>Ra,isNonEmptyReadonlyArray:()=>se,join:()=>Br,last:()=>Fd,lastNonEmpty:()=>Bs,length:()=>eI,liftEither:()=>NI,liftNullable:()=>II,liftOption:()=>TI,liftPredicate:()=>kI,make:()=>rS,makeBy:()=>js,map:()=>xr,mapAccum:()=>qS,mapNonEmpty:()=>Rn,match:()=>V1,matchLeft:()=>J1,matchRight:()=>Y1,max:()=>BI,min:()=>jI,modify:()=>mS,modifyNonEmptyHead:()=>DS,modifyNonEmptyLast:()=>SS,modifyOption:()=>qu,of:()=>Et,partition:()=>TS,partitionMap:()=>Id,prepend:()=>It,prependAll:()=>nS,prependAllNonEmpty:()=>Z1,range:()=>K1,reduce:()=>pt,reduceRight:()=>Ia,remove:()=>dS,replace:()=>mI,replaceOption:()=>dI,replicate:()=>$1,reverse:()=>Hu,reverseNonEmpty:()=>hI,rotate:()=>EI,rotateNonEmpty:()=>Md,scan:()=>Q1,scanRight:()=>X1,separate:()=>IS,setNonEmptyHead:()=>DI,setNonEmptyLast:()=>SI,some:()=>qI,sort:()=>Hr,sortBy:()=>xI,sortByNonEmpty:()=>gS,sortNonEmpty:()=>hS,sortWith:()=>gI,span:()=>cI,splitAt:()=>CS,splitNonEmptyAt:()=>Wu,tail:()=>oI,tailNonEmpty:()=>Ue,take:()=>sI,takeRight:()=>iI,takeWhile:()=>aI,unappend:()=>rI,unfold:()=>zu,union:()=>RS,unionNonEmpty:()=>FI,unionNonEmptyWith:()=>Td,unionWith:()=>wS,unprepend:()=>tI,unsafeGet:()=>Lu,unzip:()=>xS,unzipNonEmpty:()=>yS,zip:()=>ju,zipNonEmpty:()=>yI,zipNonEmptyWith:()=>vd,zipWith:()=>Ad});var Kf="@effect/schema/ArbitraryHookId",db="@effect/schema/PrettyHookId",hb=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return hb(e,t.from)}},eu=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),$f=e=>{let t=!1,r;return()=>(t||(r=e(),t=!0),r)};var gb=e=>({_tag:"ParseError",errors:e}),fr=(e,t,r)=>({_tag:"Type",expected:e,actual:t,message:tt(r)}),Fv={_tag:"Forbidden"},Ho=(e,t)=>({_tag:"Index",index:e,errors:t}),po=(e,t)=>({_tag:"Key",key:e,errors:t}),Gf={_tag:"Missing"},xb=e=>({_tag:"Unexpected",actual:e}),yb=e=>({_tag:"UnionMember",errors:e}),Te=B,yt=e=>K(gb([e])),Qe=e=>K(gb(e)),lo=e=>{let t=e;if(t._tag==="Left"||t._tag==="Right")return t},tu=(e,t)=>{let r=e;return r._tag==="Left"?r:r._tag==="Right"?t(r.right):Kt(e,t)},Av=(e,t)=>{let r=e;return r._tag==="Left"?r:r._tag==="Right"?B(t(r.right)):ub(e,t)};var Yf="@effect/schema/TypeAnnotationId",Zf="@effect/schema/MessageAnnotationId",Xi="@effect/schema/IdentifierAnnotationId",bt="@effect/schema/TitleAnnotationId",jo="@effect/schema/DescriptionAnnotationId",Db="@effect/schema/ExamplesAnnotationId",nu="@effect/schema/JSONSchemaAnnotationId",kv="@effect/schema/DocumentationAnnotationId",_s=e=>t=>Object.prototype.hasOwnProperty.call(t.annotations,e)?x(t.annotations[e]):g(),ea=(e,t,r,o={})=>({_tag:"Declaration",typeParameters:e,type:t,decode:r,annotations:o});var Sb=e=>({_tag:"Literal",literal:e,annotations:{}}),Cs=e=>e._tag==="Literal";var jU=e=>e._tag==="UniqueSymbol",BU={_tag:"UndefinedKeyword",annotations:{[bt]:"undefined"}};var UU={_tag:"VoidKeyword",annotations:{[bt]:"void"}};var su={_tag:"NeverKeyword",annotations:{[bt]:"never"}};var ta={_tag:"UnknownKeyword",annotations:{[bt]:"unknown"}},WU=e=>e._tag==="UnknownKeyword",Tv={_tag:"AnyKeyword",annotations:{[bt]:"any"}},zU=e=>e._tag==="AnyKeyword",Qf={_tag:"StringKeyword",annotations:{[bt]:"string"}},ou=e=>e._tag==="StringKeyword",Iv={_tag:"NumberKeyword",annotations:{[bt]:"number"}},Jf=e=>e._tag==="NumberKeyword",Pv={_tag:"BooleanKeyword",annotations:{[bt]:"boolean"}},vv=e=>e._tag==="BooleanKeyword",KU={_tag:"BigIntKeyword",annotations:{[bt]:"bigint"}},Mv=e=>e._tag==="BigIntKeyword",Eb={_tag:"SymbolKeyword",annotations:{[bt]:"symbol"}},bb=e=>e._tag==="SymbolKeyword",$U={_tag:"ObjectKeyword",annotations:{[bt]:"object"}};var iu=(e,t)=>({type:e,isOptional:t}),Os=(e,t,r,o={})=>({_tag:"Tuple",elements:e,rest:t,isReadonly:r,annotations:o});var ze=(e,t,r,o,n={})=>({name:e,type:t,isOptional:r,isReadonly:o,annotations:n}),Nv=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return Nv(e.from);default:return!1}},ra=(e,t,r)=>{if(Nv(e))return{parameter:e,type:t,isReadonly:r};throw new Error("An index signature parameter type must be 'string', 'symbol', a template literal type or a refinement of the previous types")},Bo=(e,t,r={})=>{let o={};for(let s=0;s<e.length;s++){let i=e[s].name;if(Object.prototype.hasOwnProperty.call(o,i))throw new Error(`Duplicate property signature ${String(i)}`);o[i]=null}let n={string:!1,symbol:!1};for(let s=0;s<t.length;s++){let i=em(t[s].parameter);if(ou(i)){if(n.string)throw new Error("Duplicate index signature for type `string`");n.string=!0}else if(bb(i)){if(n.symbol)throw new Error("Duplicate index signature for type `symbol`");n.symbol=!0}}return{_tag:"TypeLiteral",propertySignatures:GU(e),indexSignatures:t,annotations:r}};var Uo=(e,t={})=>{let r=ZU(e);switch(r.length){case 0:return su;case 1:return r[0];default:return{_tag:"Union",types:YU(r),annotations:t}}};var au=(e,t={})=>({_tag:"Lazy",f:$f(e),annotations:t});var cu=(e,t,r,o={})=>({_tag:"Refinement",from:e,decode:t,isReversed:r,annotations:o}),Lv=e=>e._tag==="Refinement",uu=(e,t,r,o)=>({from:e,to:t,decode:r,encode:o}),Xf=(e,t,r,o,n,s={})=>({_tag:"Transform",from:e,to:t,decode:r,encode:o,propertySignatureTransformations:n,annotations:s}),qv=(e,t,r,o,n={})=>Xf(e,t,r,o,[],n),Hv=(e,t,r,o={})=>Xf(e,t,n=>{for(let s=0;s<r.length;s++){let i=r[s],a=i.from,c=Object.prototype.hasOwnProperty.call(n,a)?x(n[a]):g();delete n[a];let p=i.decode(c);L(p)&&(n[i.to]=p.value)}return Te(n)},n=>{for(let s=0;s<r.length;s++){let i=r[s],a=i.to,c=Object.prototype.hasOwnProperty.call(n,a)?x(n[a]):g();delete n[a];let p=i.encode(c);L(p)&&(n[i.from]=p.value)}return Te(n)},r,o);var jv=(e,t)=>({...e,annotations:{...e.annotations,...t}}),Cb=(e,t,r)=>({...e,annotations:{...e.annotations,[t]:r}});var Bv=e=>e.map(t=>ze(t.name,Le(t.type),t.isOptional,t.isReadonly,t.annotations)),Uv=e=>e.map(t=>ra(t.parameter,Le(t.type),t.isReadonly)),Le=e=>{switch(e._tag){case"Declaration":return ea(e.typeParameters.map(Le),Le(e.type),e.decode,e.annotations);case"Tuple":return Os(e.elements.map(t=>iu(Le(t.type),t.isOptional)),re(e.rest,Rn(Le)),e.isReadonly,e.annotations);case"TypeLiteral":return Bo(Bv(e.propertySignatures),Uv(e.indexSignatures),e.annotations);case"Union":return Uo(e.types.map(Le),e.annotations);case"Lazy":return au(()=>Le(e.f()),e.annotations);case"Refinement":return cu(Le(e.from),e.decode,!1,e.annotations);case"Transform":return Le(e.to)}return e},mr=e=>{switch(e._tag){case"Declaration":return ea(e.typeParameters.map(mr),mr(e.type),e.decode,e.annotations);case"Tuple":return Os(e.elements.map(t=>iu(mr(t.type),t.isOptional)),re(e.rest,Rn(mr)),e.isReadonly);case"TypeLiteral":return Bo(e.propertySignatures.map(t=>ze(t.name,mr(t.type),t.isOptional,t.isReadonly)),e.indexSignatures.map(t=>ra(t.parameter,mr(t.type),t.isReadonly)));case"Union":return Uo(e.types.map(mr));case"Lazy":return au(()=>mr(e.f()));case"Refinement":case"Transform":return mr(e.from)}return e},Wv=e=>{switch(e._tag){case"Declaration":return Wv(e.type);case"NeverKeyword":return 0;case"Literal":case"UndefinedKeyword":case"VoidKeyword":case"UniqueSymbol":return 1;case"BooleanKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3;case"ObjectKeyword":return 5;case"UnknownKeyword":case"AnyKeyword":return 6;default:return 4}},GU=Hr(et(Tt,Cn(e=>Wv(e.type)))),zv=DD(Tt,Tt,Tt),VU=ha(zv),Kv=[0,0,0],JU=e=>e.reduce(VU,Kv),ru=e=>{switch(e._tag){case"Tuple":{let t=e.elements.length,r=L(e.rest)?e.rest.value.length:0;return[2,t,r]}case"TypeLiteral":{let t=e.propertySignatures.length,r=e.indexSignatures.length;return t+r===0?[-4,0,0]:[4,t,r]}case"Declaration":{let[t,r,o]=ru(e.type);return[6,r,o]}case"Lazy":return[8,0,0];case"Union":return JU(e.types.map(ru));case"Refinement":{let[t,r,o]=ru(e.from);return[t+1,r,o]}case"Transform":return ru(e.from);case"ObjectKeyword":return[-2,0,0];case"UnknownKeyword":case"AnyKeyword":return[-4,0,0];default:return Kv}},YU=Hr(yD(Cn(zv,ru))),ZU=e=>{let t=et(e,Fn(o=>{switch(o._tag){case"NeverKeyword":return[];case"Union":return o.types;default:return[o]}}));if(t.some(zU))return[Tv];if(t.some(WU))return[ta];let r;return(r=t.findIndex(ou))!==-1&&(t=t.filter((o,n)=>n===r||!ou(o)&&!(Cs(o)&&typeof o.literal=="string"))),(r=t.findIndex(Jf))!==-1&&(t=t.filter((o,n)=>n===r||!Jf(o)&&!(Cs(o)&&typeof o.literal=="number"))),(r=t.findIndex(vv))!==-1&&(t=t.filter((o,n)=>n===r||!vv(o)&&!(Cs(o)&&typeof o.literal=="boolean"))),(r=t.findIndex(Mv))!==-1&&(t=t.filter((o,n)=>n===r||!Mv(o)&&!(Cs(o)&&typeof o.literal=="bigint"))),(r=t.findIndex(bb))!==-1&&(t=t.filter((o,n)=>n===r||!bb(o)&&!jU(o))),t},em=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return em(e.from)}};var fo=(e,t=[])=>({value:e,forest:t}),$v=e=>QU(fo("error(s) found",e.map(om))),QU=e=>e.value+Gv(`
`,e.forest),Gv=(e,t)=>{let r="",o=t.length,n;for(let s=0;s<o;s++){n=t[s];let i=s===o-1;r+=e+(i?"\u2514":"\u251C")+"\u2500 "+n.value,r+=Gv(e+(o>1&&!i?"\u2502  ":"   "),n.forest)}return r},pu=e=>{if(e==null||typeof e=="number"||typeof e=="symbol"||e instanceof Date)return String(e);if(typeof e=="bigint")return String(e)+"n";try{return JSON.stringify(e)}catch{return String(e)}},XU=e=>{switch(e.type._tag){case"StringKeyword":return"${string}";case"NumberKeyword":return"${number}"}},eW=e=>e.head+e.spans.map(t=>XU(t)+t.literal).join(""),tW=_s(Zf),rW=_s(bt),oW=_s(Xi),nW=_s(jo),Tr=e=>et(oW(e),wn(()=>rW(e)),wn(()=>nW(e))),rm=e=>{switch(e._tag){case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"UndefinedKeyword":case"SymbolKeyword":case"ObjectKeyword":case"AnyKeyword":case"UnknownKeyword":case"VoidKeyword":case"NeverKeyword":return V(Tr(e),()=>e._tag);case"Literal":return V(Tr(e),()=>pu(e.literal));case"UniqueSymbol":return V(Tr(e),()=>pu(e.symbol));case"Union":return e.types.map(rm).join(" or ");case"TemplateLiteral":return V(Tr(e),()=>eW(e));case"Tuple":return V(Tr(e),()=>"<anonymous tuple or array schema>");case"TypeLiteral":return V(Tr(e),()=>"<anonymous type literal schema>");case"Enums":return V(Tr(e),()=>e.enums.map((t,r)=>JSON.stringify(r)).join(" | "));case"Lazy":return V(Tr(e),()=>"<anonymous lazy schema>");case"Declaration":return V(Tr(e),()=>"<anonymous declaration schema>");case"Refinement":return V(Tr(e),()=>"<anonymous refinement schema>");case"Transform":return V(Tr(e),()=>`${rm(e.from)} -> ${rm(e.to)}`)}},om=e=>{switch(e._tag){case"Type":return fo(et(tW(e.expected),re(t=>t(e.actual)),wn(()=>e.message),V(()=>`Expected ${rm(e.expected)}, actual ${pu(e.actual)}`)));case"Forbidden":return fo("is forbidden");case"Index":{let t=e.errors.map(om);return t.length===1&&t[0].forest.length!==0?fo(`[${e.index}]${t[0].value}`,t[0].forest):fo(`[${e.index}]`,t)}case"Unexpected":return fo("is unexpected");case"Key":{let t=e.errors.map(om);return t.length===1&&t[0].forest.length!==0?fo(`[${pu(e.key)}]${t[0].value}`,t[0].forest):fo(`[${pu(e.key)}]`,t)}case"Missing":return fo("is missing");case"UnionMember":return fo("union member",e.errors.map(om))}};var Jv=e=>{let t=Dt(e);return(r,o)=>t(r,{...o,isEffectAllowed:!0})};var Ob=e=>Dt(e.ast);var lu=e=>Jv(e.ast);var fu=e=>Jv(Ir(e.ast)),Dt=(e,t=!0)=>{switch(e._tag){case"Refinement":if(e.isReversed){let r=Dt(Le(e),t),o=Dt(Ir(Yv(e.from)),!1);return(n,s)=>nm(tu(r(n,s),i=>o(i,s)),s)}else{let r=Dt(e.from,t);return(o,n)=>nm(tu(r(o,n),s=>e.decode(s,n)),n)}case"Transform":{let r=Dt(e.from,t),o=Dt(e.to,!1);return(n,s)=>nm(tu(r(n,s),i=>tu(e.decode(i,s),a=>o(a,s))),s)}case"Declaration":{let r=e.decode(...e.typeParameters);return(o,n)=>nm(r(o,n),n)}case"Literal":return kt(e,r=>r===e.literal);case"UniqueSymbol":return kt(e,r=>r===e.symbol);case"UndefinedKeyword":return kt(e,ya);case"VoidKeyword":return kt(e,ya);case"NeverKeyword":return kt(e,OD);case"UnknownKeyword":case"AnyKeyword":return Te;case"StringKeyword":return kt(e,xa);case"NumberKeyword":return kt(e,_n);case"BooleanKeyword":return kt(e,Cu);case"BigIntKeyword":return kt(e,Is);case"SymbolKeyword":return kt(e,ED);case"ObjectKeyword":return kt(e,ge);case"Enums":return kt(e,r=>e.enums.some(([o,n])=>n===r));case"TemplateLiteral":{let r=aW(e);return kt(e,o=>xa(o)&&r.test(o))}case"Tuple":{let r=e.elements.map(s=>Dt(s.type,t)),o=et(e.rest,re(Rn(s=>Dt(s)))),n=e.elements.filter(s=>!s.isOptional).length;return L(e.rest)&&(n+=e.rest.value.length-1),(s,i)=>{if(!Array.isArray(s))return yt(fr(iW,s));let a=i?.errors==="all",c=[],p=0,l=s.length;for(let w=l;w<=n-1;w++){let A=Ho(w,[Gf]);if(a){c.push([p++,A]);continue}else return yt(A)}if(H(e.rest))for(let w=e.elements.length;w<=l-1;w++){let A=Ho(w,[xb(s[w])]);if(a){c.push([p++,A]);continue}else return Qe($t(Xe(c),A))}let f=[],d=0,h;for(;d<r.length;d++)if(l<d+1){if(e.elements[d].isOptional)continue}else{let w=r[d],A=w(s[d],i),N=lo(A);if(N){if(xe(N)){let U=Ho(d,N.left.errors);if(a){c.push([p++,U]);continue}else return Qe($t(Xe(c),U))}f.push([p++,N.right])}else{let U=p++,$=d;h||(h=[]),h.push(({es:ue,output:Oe})=>Kt(gn(A),He=>{if(xe(He)){let he=Ho($,He.left.errors);return a?(ue.push([U,he]),Mt):Qe($t(Xe(ue),he))}return Oe.push([U,He.right]),Mt}))}}if(L(o)){let w=oe(o.value),A=Ue(o.value);for(;d<l-A.length;d++){let N=w(s[d],i),U=lo(N);if(U)if(xe(U)){let $=Ho(d,U.left.errors);if(a){c.push([p++,$]);continue}else return Qe($t(Xe(c),$))}else f.push([p++,U.right]);else{let $=p++,ue=d;h||(h=[]),h.push(({es:Oe,output:He})=>Kt(gn(N),he=>{if(xe(he)){let Nr=Ho(ue,he.left.errors);return a?(Oe.push([$,Nr]),Mt):Qe($t(Xe(Oe),Nr))}else return He.push([$,he.right]),Mt}))}}for(let N=0;N<A.length;N++)if(d+=N,!(l<d+1)){let U=A[N](s[d],i),$=lo(U);if($){if(xe($)){let ue=Ho(d,$.left.errors);if(a){c.push([p++,ue]);continue}else return Qe($t(Xe(c),ue))}f.push([p++,$.right])}else{let ue=p++,Oe=d;h||(h=[]),h.push(({es:He,output:he})=>Kt(gn(U),Nr=>{if(xe(Nr)){let go=Ho(Oe,Nr.left.errors);return a?(He.push([ue,go]),Mt):Qe($t(Xe(He),go))}return he.push([ue,Nr.right]),Mt}))}}}let S=({es:w,output:A})=>Ra(w)?Qe(Xe(w)):Te(Xe(A));if(h&&h.length>0){let w=h;return Yi(()=>{let A={es:Array.from(c),output:Array.from(f)};return Kt(Zc(w,N=>N(A),{concurrency:"unbounded",discard:!0}),()=>S(A))})}return S({output:f,es:c})}}case"TypeLiteral":{if(e.propertySignatures.length===0&&e.indexSignatures.length===0)return kt(e,wD);let r=e.propertySignatures.map(i=>Dt(i.type,t)),o=e.indexSignatures.map(i=>[Dt(i.parameter,t),Dt(i.type,t)]),n=Dt(Uo(e.indexSignatures.map(i=>em(i.parameter)))),s={};for(let i=0;i<r.length;i++)s[e.propertySignatures[i].name]=null;return(i,a)=>{if(!ba(i))return yt(fr(Vv,i));let c=a?.errors==="all",p=[],l=0;if(a?.onExcessProperty==="error"){for(let w of eu(i))if(!Object.prototype.hasOwnProperty.call(s,w)){let A=n(w),N=lo(A);if(N&&xe(N)){let U=po(w,[xb(i[w])]);if(c){p.push([l++,U]);continue}else return Qe($t(Xe(p),U))}}}let d={},h;for(let w=0;w<r.length;w++){let A=e.propertySignatures[w],N=r[w],U=A.name;if(Object.prototype.hasOwnProperty.call(i,U)){let $=N(i[U],a),ue=lo($);if(ue){if(xe(ue)){let Oe=po(U,ue.left.errors);if(c){p.push([l++,Oe]);continue}else return Qe($t(Xe(p),Oe))}d[U]=ue.right}else{let Oe=l++,He=U;h||(h=[]),h.push(({es:he,output:Nr})=>Kt(gn($),go=>{if(xe(go)){let bu=po(He,go.left.errors);return c?(he.push([Oe,bu]),Mt):Qe($t(Xe(he),bu))}return Nr[He]=go.right,Mt}))}}else if(!A.isOptional){let $=po(U,[Gf]);if(c){p.push([l++,$]);continue}else return yt($)}}for(let w=0;w<o.length;w++){let A=o[w][0],N=o[w][1],U=hb(i,e.indexSignatures[w].parameter);for(let $ of U){if(Object.prototype.hasOwnProperty.call(s,$))continue;let ue=lo(A($,a));if(ue&&xe(ue)){let he=po($,ue.left.errors);if(c){p.push([l++,he]);continue}else return Qe($t(Xe(p),he))}let Oe=N(i[$],a),He=lo(Oe);if(He)if(xe(He)){let he=po($,He.left.errors);if(c){p.push([l++,he]);continue}else return Qe($t(Xe(p),he))}else d[$]=He.right;else{let he=l++,Nr=$;h||(h=[]),h.push(({es:go,output:bu})=>Kt(gn(Oe),od=>{if(xe(od)){let dD=po(Nr,od.left.errors);return c?(go.push([he,dD]),Mt):Qe($t(Xe(go),dD))}else return bu[$]=od.right,Mt}))}}}let S=({es:w,output:A})=>Ra(w)?Qe(Xe(w)):Te(A);if(h&&h.length>0){let w=h;return Yi(()=>{let A={es:Array.from(p),output:Object.assign({},d)};return Kt(Zc(w,N=>N(A),{concurrency:"unbounded",discard:!0}),()=>S(A))})}return S({es:p,output:d})}}case"Union":{let r=sW(e.types),o=eu(r.keys),n=o.length,s=new Map;for(let i=0;i<e.types.length;i++)s.set(e.types[i],Dt(e.types[i],!0));return(i,a)=>{let c=[],p=0,l=[];if(n>0)if(ba(i))for(let h=0;h<n;h++){let S=o[h],w=r.keys[S].buckets;if(Object.prototype.hasOwnProperty.call(i,S)){let A=String(i[S]);Object.prototype.hasOwnProperty.call(w,A)?l=l.concat(w[A]):c.push([p++,po(S,[fr(r.keys[S].ast,i[S])])])}else c.push([p++,po(S,[Gf])])}else c.push([p++,fr(Vv,i)]);r.otherwise.length>0&&(l=l.concat(r.otherwise));let f;for(let h=0;h<l.length;h++){let S=s.get(l[h])(i,a),w=!f||f.length===0?lo(S):void 0;if(w){if(qr(w))return Te(w.right);c.push([p++,yb(w.left.errors)])}else{let A=p++;f||(f=[]),f.push(N=>Yi(()=>"finalResult"in N?Mt:Kt(gn(S),U=>(qr(U)?N.finalResult=Te(U.right):N.es.push([A,yb(U.left.errors)]),Mt))))}}let d=h=>Ra(h)?Qe(Xe(h)):yt(fr(su,i));if(f&&f.length>0){let h=f;return Yi(()=>{let S={es:Array.from(c)};return Kt(Zc(h,w=>w(S),{concurrency:1,discard:!0}),()=>"finalResult"in S?S.finalResult:d(S.es))})}return d(c)}}case"Lazy":{let r=$f(()=>Dt(e.f(),t));return(o,n)=>r()(o,n)}}},kt=(e,t)=>r=>t(r)?Te(r):yt(fr(e,r)),_b=e=>{switch(e._tag){case"Declaration":return _b(e.type);case"TypeLiteral":{let t=[];for(let r=0;r<e.propertySignatures.length;r++){let o=e.propertySignatures[r],n=mr(o.type);Cs(n)&&!o.isOptional&&t.push([o.name,n])}return t}case"Refinement":case"Transform":return _b(e.from)}return[]},sW=e=>{let t={},r=[];for(let o=0;o<e.length;o++){let n=e[o],s=_b(n);if(s.length>0)for(let i=0;i<s.length;i++){let[a,c]=s[i],p=String(c.literal);t[a]=t[a]||{buckets:{},ast:su};let l=t[a].buckets;if(Object.prototype.hasOwnProperty.call(l,p)){if(i<s.length-1)continue;l[p].push(n),t[a].ast=Uo([t[a].ast,c])}else{l[p]=[n],t[a].ast=Uo([t[a].ast,c]);break}}else r.push(n)}return{keys:t,otherwise:r}},Yv=e=>Lv(e)?Yv(e.from):e,nm=(e,t)=>{let r=lo(e);return r||(t?.isEffectAllowed===!0?e:yt(Fv))},iW=Os([],x([ta]),!0,{[jo]:"a generic array"}),Vv=Bo([],[ra(Qf,ta,!0),ra(Eb,ta,!0)],{[jo]:"a generic object"}),$t=(e,t)=>(e.push(t),e),aW=e=>{let t=`^${e.head}`;for(let r of e.spans)ou(r.type)?t+=".*":Jf(r.type)&&(t+="-?\\d+(\\.\\d+)?"),t+=r.literal;return t+="$",new RegExp(t)};function Xe(e){return e.sort(([t],[r])=>t>r?1:t<r?-1:0).map(([t,r])=>r)}var Ir=e=>{switch(e._tag){case"Declaration":return ea(e.typeParameters.map(Ir),e.type,e.decode,e.annotations);case"Tuple":return Os(e.elements.map(t=>iu(Ir(t.type),t.isOptional)),re(e.rest,Rn(Ir)),e.isReadonly);case"TypeLiteral":return Bo(e.propertySignatures.map(t=>ze(t.name,Ir(t.type),t.isOptional,t.isReadonly,t.annotations)),e.indexSignatures.map(t=>ra(t.parameter,Ir(t.type),t.isReadonly)));case"Union":return Uo(e.types.map(Ir));case"Lazy":return au(()=>Ir(e.f()));case"Refinement":return cu(e.from,e.decode,!e.isReversed,e.annotations);case"Transform":return Xf(Ir(e.to),Ir(e.from),e.encode,e.decode,e.propertySignatureTransformations.map(t=>uu(t.to,t.from,t.encode,t.decode)))}return e};var mW=Symbol.for("@effect/schema/Schema");var dW=e=>Ke(Le(e.ast)),wb=class{constructor(t){Jt(this,"ast");Jt(this,"_id",mW);Jt(this,"From");Jt(this,"To");this.ast=t}pipe(){return C(this,arguments)}},Ke=e=>new wb(e);var hW=e=>Ke(Sb(e)),xn=(...e)=>yn(...e.map(t=>hW(t)));var Rb=(e,t,r,o)=>Ke(ea(e.map(n=>n.ast),t.ast,(...n)=>r(...n.map(Ke)),o)),yn=(...e)=>Ke(Uo(e.map(t=>t.ast))),gW=e=>yn(bW,e);var ws=e=>Ke(Os([],x([e.ast]),!0));var sm=class e{constructor(t,r,o){Jt(this,"_from");Jt(this,"_annotations");Jt(this,"_optional");Jt(this,"From");Jt(this,"FromIsOptional");Jt(this,"To");Jt(this,"ToIsOptional");this._from=t,this._annotations=r,this._optional=o}optional(){if(this._optional)throw new Error("duplicate optional configuration");return new e(this._from,this._annotations,{to:"optional"})}withDefault(t){if(this._optional&&this._optional.to!=="optional")throw new Error("duplicate optional configuration");return new e(this._from,this._annotations,{to:"default",value:t})}toOption(){if(this._optional&&this._optional.to!=="optional")throw new Error("duplicate optional configuration");return new e(this._from,this._annotations,{to:"Option"})}},xW=(e,t)=>new sm(e.ast,t),im=(e,t)=>xW(e,t).optional(),St=e=>{let t=eu(e),r=[],o=[],n=[],s=[];for(let i=0;i<t.length;i++){let a=t[i],c=e[a];if(c instanceof sm){let p=c._optional;if(p)switch(p.to){case"optional":{r.push(ze(a,c._from,!0,!0,c._annotations)),o.push(ze(a,c._from,!0,!0)),n.push(ze(a,Le(c._from),!0,!0,c._annotations));break}case"default":{o.push(ze(a,c._from,!0,!0)),n.push(ze(a,Le(c._from),!1,!0,c._annotations)),s.push(uu(a,a,wn(()=>x(p.value())),k));break}case"Option":{o.push(ze(a,c._from,!0,!0)),n.push(ze(a,iM(Ke(Le(c._from))).ast,!1,!0,c._annotations)),s.push(uu(a,a,x,Cd));break}}else r.push(ze(a,c._from,!1,!0,c._annotations)),o.push(ze(a,c._from,!1,!0)),n.push(ze(a,Le(c._from),!1,!0,c._annotations))}else r.push(ze(a,c.ast,!1,!0)),o.push(ze(a,c.ast,!1,!0)),n.push(ze(a,Le(c.ast),!1,!0))}return s.length>0?Ke(Hv(Bo(o,[]),Bo(n,[]),s)):Ke(Bo(r,[]))};var Qv=e=>{let t={};if(e?.typeId!==void 0){let r=e?.typeId;typeof r=="object"?(t[Yf]=r.id,t[r.id]=r.params):t[Yf]=r}return e?.message!==void 0&&(t[Zf]=e?.message),e?.identifier!==void 0&&(t[Xi]=e?.identifier),e?.title!==void 0&&(t[bt]=e?.title),e?.description!==void 0&&(t[jo]=e?.description),e?.examples!==void 0&&(t[Db]=e?.examples),e?.documentation!==void 0&&(t[kv]=e?.documentation),e?.jsonSchema!==void 0&&(t[nu]=e?.jsonSchema),e?.arbitrary!==void 0&&(t[Kf]=e?.arbitrary),t};function Fb(e,t){return r=>{let o=s=>e(s)?Te(s):yt(fr(n,s)),n=cu(r.ast,o,!1,Qv(t));return Ke(n)}}var am=u(4,(e,t,r,o)=>Ke(qv(e.ast,t.ast,r,o))),yW=u(4,(e,t,r,o)=>am(e,t,n=>B(r(n)),n=>B(o(n))));var Xv=e=>t=>Ke(jv(t.ast,e));var eM=e=>t=>Ke(Cb(t.ast,jo,e)),tM=e=>t=>Ke(Cb(t.ast,Db,e));var bW=Ke(Sb(null));var dr=Ke(Qf),cm=Ke(Iv),rM=Ke(Pv);var DW=()=>e=>e.date(),SW=()=>e=>`new Date(${JSON.stringify(e)})`,oM=Rb([],St({}),()=>e=>_u(e)?Te(e):yt(fr(oM.ast,e)),{[Xi]:"Date",[db]:SW,[Kf]:DW}),EW="@effect/schema/ValidDateTypeId",CW=e=>t=>t.pipe(Fb(r=>!isNaN(r.getTime()),{typeId:EW,description:"a valid Date",...e})),_W=oM.pipe(CW()),nM=e=>am(e,_W,t=>Te(new Date(t)),t=>Te(t.toISOString()));var Zv="@effect/schema/InstanceOfTypeId",sM=(e,t)=>{let r=Qv(t),o=Rb([],St({}),()=>n=>n instanceof e?Te(n):yt(fr(o.ast,n)),{[Yf]:Zv,[Zv]:{constructor:e},[jo]:`an instance of ${e.name}`,...r});return o},OW=e=>t=>t.oneof(t.constant(g()),e(t).map(x)),wW=e=>Be({onNone:()=>"none()",onSome:t=>`some(${e(t)})`}),RW=e=>yn(St({_tag:xn("None")}),St({_tag:xn("Some"),value:e})),iM=e=>{let t=Rb([e],RW(e),r=>{let o=Ob(r);return(n,s)=>Dd(n)?H(n)?Te(g()):Av(o(n.value,s),x):yt(fr(t.ast,n))},{[Xi]:"Option",[db]:wW,[Kf]:OW});return t};var mu=e=>yW(gW(e),dW(iM(e)),tt,Sd);var FW="@effect/schema/MaxLengthTypeId",Ab=(e,t)=>r=>r.pipe(Fb(o=>o.length<=e,{typeId:FW,description:`a string at most ${e} character(s) long`,jsonSchema:{maxLength:e},...t})),AW="@effect/schema/MinLengthTypeId",vb=(e,t)=>r=>r.pipe(Fb(o=>o.length>=e,{typeId:AW,description:`a string at least ${e} character(s) long`,jsonSchema:{minLength:e},...t}));var Mb=En(require("fs/promises")),pM=En(require("@actions/glob"));var um=require("@actions/core");var qe=class extends Zi.TaggedClass("GenericError"){},cM=e=>P.sync(()=>{(0,um.error)(e.message),(0,um.debug)(`cause: ${e.error}`),process.exitCode=1});var lM=En(require("path")),du=e=>t=>t.pipe(Xv({[nu]:{..._s(nu)(t.ast).pipe(lr.getOrNull),...e}})),vW=e=>t=>t.pipe(tM(e),du({examples:e})),bn=e=>t=>t.pipe(eM(e),du({description:e})),MW=Ze.string("INPUT_FILE").pipe(Ze.map(e=>({_tag:"File",path:e})),Ze.orElse(()=>Ze.string("JSON").pipe(Ze.map(e=>({_tag:"Json",stringified:e})))),Ze.orElse(()=>et(Ze.all({key:Ze.string("KEY"),value:Ze.number("VALUE")}),Ze.map(({key:e,value:t})=>({_tag:"KeyVal",key:e,value:t}))))),kW=Ze.all({metricsInput:MW,trackFileSizeGlob:Ze.string("TRACK_FILE_SIZE").pipe(Ze.option)}).pipe(Ze.nested("INPUT")),fM=e=>P.try({try:()=>JSON.parse(e),catch:t=>new qe({message:"Failed to parse JSON",error:t})}),TW=yn(xn("lower-is-better").pipe(bn("if value is _lower_ than the previous run, the trend is _good_. otherwise, the trend is bad")),xn("higher-is-better").pipe(bn("if value is _higher_ than the previous run, the trend is _good_. otherwise, the trend is bad"))).pipe(bn("The acceptable trend for the given metric")),IW=et(dr,bn("A unique string that represents this metric across runs"),Ab(120),vb(1),vb(1)),PW=et(cm,bn("The numeric value of the metric")),NW=et(dr,nM,bn("the date to apply sorting by. defaults to the commit time"),du({format:"date-time"})),LW=et(dr,Ab(32),bn("The units of the metric"),vW(["ms","ns","bytes","kb","mb"])),pm=St({key:IW,value:PW,sortDate:NW.pipe(im),units:LW.pipe(im),trend:TW.pipe(im)}).pipe(du({additionalProperties:!0})),KZ=St({metrics:pm.pipe(ws)}),mM=yn(St({metrics:ws(pm).pipe(bn("A list of metrics to report"))}).pipe(du({additionalProperties:!0})),pm.pipe(ws),pm),$Z=fu(mM),dM=e=>lu(mM)(e).pipe(P.map(t=>"metrics"in t?t.metrics:t),P.map(t=>[t].flat()),P.mapError(t=>new qe({error:t,message:`Failed to parse given JSON:
${$v(t.errors)}`}))),qW=e=>P.tryPromise({try:()=>Mb.default.readFile(e,"utf-8"),catch:t=>new qe({message:"Failed to read file",error:t})}).pipe(P.flatMap(fM),P.flatMap(dM)),hM=e=>P.gen(function*(t){let r=yield*t(P.tryPromise({try:()=>pM.create(e),catch:n=>new qe({message:"Failed to parse glob syntax",error:n})}));return yield*t(P.tryPromise({try:()=>r.glob(),catch:n=>new qe({message:"Failed to iterate through glob",error:n})}))}),HW=e=>P.gen(function*(t){let r=yield*t(hM(e));return(yield*t(P.all(r.map(qW),{concurrency:5}))).flat()}),jW=et(Xc.type(),Xc.tagsExhaustive({File:({path:e})=>HW(e),Json:({stringified:e})=>fM(e).pipe(P.flatMap(dM)),KeyVal:({key:e,value:t})=>P.succeed([{key:e,value:t}])})),gM=P.gen(function*(e){let t=yield*e(P.config(kW),P.mapError(n=>new qe({error:n,message:"Failed to read input"}))),r=yield*e(jW(t.metricsInput)),o=yield*e(t.trackFileSizeGlob,lr.match({onNone:()=>P.succeed([]),onSome:n=>BW(n)}));return{...t,metrics:[...r,...o]}}),BW=e=>P.gen(function*(t){let o=(yield*t(hM(e))).map(n=>P.gen(function*(s){let i=yield*s(P.tryPromise({try:()=>Mb.default.stat(n),catch:p=>new qe({error:p,message:`Failed to get file size for ${n}`})}));if(!i.isFile())return lr.none();let a=i.size.valueOf()/1024,c=lM.relative(process.cwd(),n);return lr.some({key:c,value:Number(a),units:"kB",trend:"lower-is-better"})}));return yield*t(P.all(o,{concurrency:10}),P.map(n=>zf.filterMap(n,k)))});var xM=e=>e;var yM=(e=0)=>t=>`\x1B[${t+e}m`,bM=(e=0)=>t=>`\x1B[${38+e};5;${t}m`,DM=(e=0)=>(t,r,o)=>`\x1B[${38+e};2;${t};${r};${o}m`,me={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},VZ=Object.keys(me.modifier),WW=Object.keys(me.color),zW=Object.keys(me.bgColor),JZ=[...WW,...zW];function KW(){let e=new Map;for(let[t,r]of Object.entries(me)){for(let[o,n]of Object.entries(r))me[o]={open:`\x1B[${n[0]}m`,close:`\x1B[${n[1]}m`},r[o]=me[o],e.set(n[0],n[1]);Object.defineProperty(me,t,{value:r,enumerable:!1})}return Object.defineProperty(me,"codes",{value:e,enumerable:!1}),me.color.close="\x1B[39m",me.bgColor.close="\x1B[49m",me.color.ansi=yM(),me.color.ansi256=bM(),me.color.ansi16m=DM(),me.bgColor.ansi=yM(10),me.bgColor.ansi256=bM(10),me.bgColor.ansi16m=DM(10),Object.defineProperties(me,{rgbToAnsi256:{value(t,r,o){return t===r&&r===o?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(o/255*5)},enumerable:!1},hexToRgb:{value(t){let r=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!r)return[0,0,0];let[o]=r;o.length===3&&(o=[...o].map(s=>s+s).join(""));let n=Number.parseInt(o,16);return[n>>16&255,n>>8&255,n&255]},enumerable:!1},hexToAnsi256:{value:t=>me.rgbToAnsi256(...me.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value(t){if(t<8)return 30+t;if(t<16)return 90+(t-8);let r,o,n;if(t>=232)r=((t-232)*10+8)/255,o=r,n=r;else{t-=16;let a=t%36;r=Math.floor(t/36)/5,o=Math.floor(a/6)/5,n=a%6/5}let s=Math.max(r,o,n)*2;if(s===0)return 30;let i=30+(Math.round(n)<<2|Math.round(o)<<1|Math.round(r));return s===2&&(i+=60),i},enumerable:!1},rgbToAnsi:{value:(t,r,o)=>me.ansi256ToAnsi(me.rgbToAnsi256(t,r,o)),enumerable:!1},hexToAnsi:{value:t=>me.ansi256ToAnsi(me.hexToAnsi256(t)),enumerable:!1}}),me}var $W=KW(),Pr=$W;var fm=En(require("process"),1),EM=En(require("os"),1),kb=En(require("tty"),1);function hr(e,t=globalThis.Deno?globalThis.Deno.args:fm.default.argv){let r=e.startsWith("-")?"":e.length===1?"-":"--",o=t.indexOf(r+e),n=t.indexOf("--");return o!==-1&&(n===-1||o<n)}var{env:be}=fm.default,lm;hr("no-color")||hr("no-colors")||hr("color=false")||hr("color=never")?lm=0:(hr("color")||hr("colors")||hr("color=true")||hr("color=always"))&&(lm=1);function GW(){if("FORCE_COLOR"in be)return be.FORCE_COLOR==="true"?1:be.FORCE_COLOR==="false"?0:be.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(be.FORCE_COLOR,10),3)}function VW(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function JW(e,{streamIsTTY:t,sniffFlags:r=!0}={}){let o=GW();o!==void 0&&(lm=o);let n=r?lm:o;if(n===0)return 0;if(r){if(hr("color=16m")||hr("color=full")||hr("color=truecolor"))return 3;if(hr("color=256"))return 2}if("TF_BUILD"in be&&"AGENT_NAME"in be)return 1;if(e&&!t&&n===void 0)return 0;let s=n||0;if(be.TERM==="dumb")return s;if(fm.default.platform==="win32"){let i=EM.default.release().split(".");return Number(i[0])>=10&&Number(i[2])>=10586?Number(i[2])>=14931?3:2:1}if("CI"in be)return"GITHUB_ACTIONS"in be||"GITEA_ACTIONS"in be?3:["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(i=>i in be)||be.CI_NAME==="codeship"?1:s;if("TEAMCITY_VERSION"in be)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(be.TEAMCITY_VERSION)?1:0;if(be.COLORTERM==="truecolor"||be.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in be){let i=Number.parseInt((be.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(be.TERM_PROGRAM){case"iTerm.app":return i>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(be.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(be.TERM)||"COLORTERM"in be?1:s}function SM(e,t={}){let r=JW(e,{streamIsTTY:e&&e.isTTY,...t});return VW(r)}var YW={stdout:SM({isTTY:kb.default.isatty(1)}),stderr:SM({isTTY:kb.default.isatty(2)})},CM=YW;function _M(e,t,r){let o=e.indexOf(t);if(o===-1)return e;let n=t.length,s=0,i="";do i+=e.slice(s,o)+t+r,s=o+n,o=e.indexOf(t,s);while(o!==-1);return i+=e.slice(s),i}function OM(e,t,r,o){let n=0,s="";do{let i=e[o-1]==="\r";s+=e.slice(n,i?o-1:o)+t+(i?`\r
`:`
`)+r,n=o+1,o=e.indexOf(`
`,n)}while(o!==-1);return s+=e.slice(n),s}var{stdout:wM,stderr:RM}=CM,Tb=Symbol("GENERATOR"),oa=Symbol("STYLER"),hu=Symbol("IS_EMPTY"),FM=["ansi","ansi","ansi256","ansi16m"],na=Object.create(null),ZW=(e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let r=wM?wM.level:0;e.level=t.level===void 0?r:t.level},mm=class{constructor(t){return AM(t)}},AM=e=>{let t=(...r)=>r.join(" ");return ZW(t,e),Object.setPrototypeOf(t,gu.prototype),t};function gu(e){return AM(e)}Object.setPrototypeOf(gu.prototype,Function.prototype);for(let[e,t]of Object.entries(Pr))na[e]={get(){let r=dm(this,Pb(t.open,t.close,this[oa]),this[hu]);return Object.defineProperty(this,e,{value:r}),r}};na.visible={get(){let e=dm(this,this[oa],!0);return Object.defineProperty(this,"visible",{value:e}),e}};var Ib=(e,t,r,...o)=>e==="rgb"?t==="ansi16m"?Pr[r].ansi16m(...o):t==="ansi256"?Pr[r].ansi256(Pr.rgbToAnsi256(...o)):Pr[r].ansi(Pr.rgbToAnsi(...o)):e==="hex"?Ib("rgb",t,r,...Pr.hexToRgb(...o)):Pr[r][e](...o),QW=["rgb","hex","ansi256"];for(let e of QW){na[e]={get(){let{level:r}=this;return function(...o){let n=Pb(Ib(e,FM[r],"color",...o),Pr.color.close,this[oa]);return dm(this,n,this[hu])}}};let t="bg"+e[0].toUpperCase()+e.slice(1);na[t]={get(){let{level:r}=this;return function(...o){let n=Pb(Ib(e,FM[r],"bgColor",...o),Pr.bgColor.close,this[oa]);return dm(this,n,this[hu])}}}}var XW=Object.defineProperties(()=>{},{...na,level:{enumerable:!0,get(){return this[Tb].level},set(e){this[Tb].level=e}}}),Pb=(e,t,r)=>{let o,n;return r===void 0?(o=e,n=t):(o=r.openAll+e,n=t+r.closeAll),{open:e,close:t,openAll:o,closeAll:n,parent:r}},dm=(e,t,r)=>{let o=(...n)=>e4(o,n.length===1?""+n[0]:n.join(" "));return Object.setPrototypeOf(o,XW),o[Tb]=e,o[oa]=t,o[hu]=r,o},e4=(e,t)=>{if(e.level<=0||!t)return e[hu]?"":t;let r=e[oa];if(r===void 0)return t;let{openAll:o,closeAll:n}=r;if(t.includes("\x1B"))for(;r!==void 0;)t=_M(t,r.close,r.open),r=r.parent;let s=t.indexOf(`
`);return s!==-1&&(t=OM(t,n,o,s)),o+t+n};Object.defineProperties(gu.prototype,na);var rQ=gu(),oQ=gu({level:RM?RM.level:0});var Rs=Uf.Tag(),vM=P.sync(()=>new mm({level:2}));function MM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,o)}return r}function kM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MM(Object(r),!0).forEach(function(o){t4(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MM(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function t4(e,t,r){return t=r4(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r4(e){var t=o4(e,"string");return typeof t=="symbol"?t:String(t)}function o4(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TM=IM({});function IM(e){return t.withOptions=r=>IM(kM(kM({},e),r)),t;function t(r,...o){let n=typeof r=="string"?[r]:r.raw,{escapeSpecialCharacters:s=Array.isArray(r)}=e,i="";for(let p=0;p<n.length;p++){let l=n[p];s&&(l=l.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\{/g,"{")),i+=l,p<o.length&&(i+=o[p])}let a=i.split(`
`),c=null;for(let p of a){let l=p.match(/^(\s+)\S+/);if(l){let f=l[1].length;c?c=Math.min(c,f):c=f}}if(c!==null){let p=c;i=a.map(l=>l[0]===" "||l[0]==="	"?l.slice(p):l).join(`
`)}return i.trim().replace(/\\n/g,`
`)}}var PM=require("@actions/core"),Lb=class extends Zi.TaggedClass("IdTokenError"){},NM=e=>P.gen(function*(t){let r=yield*t(Rs),o=r.cyan("`id-token`"),n=TM`
      Failed to read GitHub Actions ID token.

      This means you probably forgot to add permissions for ${o} in your workflow/job definition.
      The ${o} permissions allows GitHub to sign your requests to the Benchy API. This does not
      give GitHub access to your Benchy account: it's merely a way to prove that the request is coming
      from your GitHub workflow.

      An example of a workflow with the ${o} permission:

      \`\`\`yaml
       jobs:
         test:
           runs-on: ubuntu-latest
      ${r.green("+    permissions:")}
      ${r.green("+      id-token: write")}
           steps:
             # ...
      \`\`\`

      For more information about the ${o} permisison, see the GitHub documentation on OpenID Connect: https://docs.github.com/en/actions/deployment/security-hardening-your-deployments/about-security-hardening-with-openid-connect#overview-of-openid-connect
   `;return yield*t(P.fail(new qe({message:n,error:e.error})))}),LM=P.tryPromise({try:()=>(0,PM.getIDToken)(),catch:e=>new Lb({error:e})});var UM=require("@actions/http-client");var WM=require("@actions/core"),zM=require("util");var qb=St({value:cm,units:mu(dr)}),HM=am(dr,sM(URL),e=>{try{return Te(new URL(e))}catch{return yt({_tag:"Unexpected",actual:e})}},e=>Te(e.href)),jM=St({key:dr,storedValue:mu(qb),currentValue:qb,sparkline:dr,diff:mu(qb),trend:mu(St({alt:dr,url:HM,good:rM})),chartUrl:HM}),lQ=fu(jM),n4=St({error:xn(!0),message:dr}),s4=St({error:xn(!1),data:St({warnings:ws(dr),metrics:ws(jM)})}),i4=yn(n4,s4),BM=lu(i4);var KM=P.gen(function*(e){let t=yield*e(LM);return new UM.HttpClient("benchy-action",[],{headers:{Authorization:`Bearer ${t}`}})}),a4=e=>P.tryPromise({try:async()=>({...e,body:await e.readBody()}),catch:t=>new qe({message:"Failed to read response body",error:t})}).pipe(P.flatMap(t=>P.try({try:()=>({...e,json:JSON.parse(t.body)}),catch:r=>new qe({message:"Failed to parse JSON of response body",error:r})})),P.mapError(t=>new qe({error:t.error,message:`HTTP ${e.message.statusCode}: ${t.message}`})),P.map(t=>t.json)),$M=(e,t)=>P.gen(function*(r){let o=yield*r(P.tryPromise({try:()=>e.post("https://benchy.hagever.com/api/metrics",JSON.stringify({metrics:t})),catch:a=>new qe({message:"Failed to send metrics",error:a})})),n=yield*r(a4(o)),s=yield*r(BM(n),P.mapError(a=>new qe({error:a,message:"Response is malformed"})));if(s.error)return yield*r(P.fail(new qe({error:new Error(`HTTP ${o.message.statusCode}: ${s.message}`),message:s.message})));let i={...o,body:s};return yield*r(P.sync(()=>{(0,WM.debug)(`got response: ${(0,zM.inspect)(i,{depth:10,colors:!0})}`)})),i});var TT=require("@actions/core");var MT=En(vT());var kT=e=>P.gen(function*(t){let r=yield*t(Rs),o=yield*t(Bz),n=[["",r.bold("change"),r.bold("current"),r.bold("diff"),""]];for(let s of e){let i=lr.match(s.trend,{onNone:()=>r.reset,onSome:a=>a.good?r.green:r.red});n.push([i(s.key),i(o(s.currentValue)),lr.match(s.storedValue,{onNone:()=>"",onSome:a=>i(o(a))}),lr.match(s.diff,{onNone:()=>"",onSome:a=>i(o(a))}),i(s.sparkline)])}return(0,MT.table)(n)}),Bz=Rs.pipe(P.map(e=>t=>{let r=lr.match(t.units,{onNone:()=>"",onSome:n=>e.dim(n)});return`${Math.round(t.value*1e3)/1e3}${r}`}));var Wz=P.gen(function*(e){let t=yield*e(gM),r=yield*e(KM),o=yield*e($M(r,t.metrics));for(let s of o.body.data.warnings)yield*e(P.sync(()=>(0,TT.warning)(s)));let n=kT(o.body.data.metrics);yield*e(P.sync(()=>console.log(n)))});Wz.pipe(P.catchTag("IdTokenError",e=>NM(e)),P.catchTag("GenericError",e=>cM(e)),xM,P.provideServiceEffect(Rs,vM),P.runPromise);
