"use strict";var kk=Object.create;var iu=Object.defineProperty;var Tk=Object.getOwnPropertyDescriptor;var Ik=Object.getOwnPropertyNames;var Pk=Object.getPrototypeOf,Nk=Object.prototype.hasOwnProperty;var Lk=(e,t,r)=>t in e?iu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var q=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Os=(e,t)=>{for(var r in t)iu(e,r,{get:t[r],enumerable:!0})},qk=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Ik(t))!Nk.call(e,n)&&n!==r&&iu(e,n,{get:()=>t[n],enumerable:!(o=Tk(t,n))||o.enumerable});return e};var xn=(e,t,r)=>(r=e!=null?kk(Pk(e)):{},qk(t||!e||!e.__esModule?iu(r,"default",{value:e,enumerable:!0}):r,e));var $t=(e,t,r)=>(Lk(e,typeof t!="symbol"?t+"":t,r),r);var $v=q((GY,Kv)=>{"use strict";Kv.exports=({onlyFirst:e=!1}={})=>{let t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}});var Yf=q((VY,Gv)=>{"use strict";var lU=$v();Gv.exports=e=>typeof e=="string"?e.replace(lU(),""):e});var db=q((JY,mb)=>{"use strict";var Vv=e=>Number.isNaN(e)?!1:e>=4352&&(e<=4447||e===9001||e===9002||11904<=e&&e<=12871&&e!==12351||12880<=e&&e<=19903||19968<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65131||65281<=e&&e<=65376||65504<=e&&e<=65510||110592<=e&&e<=110593||127488<=e&&e<=127569||131072<=e&&e<=262141);mb.exports=Vv;mb.exports.default=Vv});var Yv=q((YY,Jv)=>{"use strict";Jv.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}});var Xi=q((ZY,hb)=>{"use strict";var fU=Yf(),mU=db(),dU=Yv(),Zv=e=>{if(typeof e!="string"||e.length===0||(e=fU(e),e.length===0))return 0;e=e.replace(dU(),"  ");let t=0;for(let r=0;r<e.length;r++){let o=e.codePointAt(r);o<=31||o>=127&&o<=159||o>=768&&o<=879||(o>65535&&r++,t+=mU(o)?2:1)}return t};hb.exports=Zv;hb.exports.default=Zv});var eM=q((QY,Xv)=>{"use strict";var Qv="[\uD800-\uDBFF][\uDC00-\uDFFF]",hU=e=>e&&e.exact?new RegExp(`^${Qv}$`):new RegExp(Qv,"g");Xv.exports=hU});var rM=q((XY,tM)=>{"use strict";tM.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var gb=q((eZ,nM)=>{"use strict";var ou=rM(),oM={};for(let e of Object.keys(ou))oM[ou[e]]=e;var M={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};nM.exports=M;for(let e of Object.keys(M)){if(!("channels"in M[e]))throw new Error("missing channels property: "+e);if(!("labels"in M[e]))throw new Error("missing channel labels property: "+e);if(M[e].labels.length!==M[e].channels)throw new Error("channel and label counts mismatch: "+e);let{channels:t,labels:r}=M[e];delete M[e].channels,delete M[e].labels,Object.defineProperty(M[e],"channels",{value:t}),Object.defineProperty(M[e],"labels",{value:r})}M.rgb.hsl=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255,n=Math.min(t,r,o),s=Math.max(t,r,o),i=s-n,a,c;s===n?a=0:t===s?a=(r-o)/i:r===s?a=2+(o-t)/i:o===s&&(a=4+(t-r)/i),a=Math.min(a*60,360),a<0&&(a+=360);let p=(n+s)/2;return s===n?c=0:p<=.5?c=i/(s+n):c=i/(2-s-n),[a,c*100,p*100]};M.rgb.hsv=function(e){let t,r,o,n,s,i=e[0]/255,a=e[1]/255,c=e[2]/255,p=Math.max(i,a,c),l=p-Math.min(i,a,c),f=function(d){return(p-d)/6/l+1/2};return l===0?(n=0,s=0):(s=l/p,t=f(i),r=f(a),o=f(c),i===p?n=o-r:a===p?n=1/3+t-o:c===p&&(n=2/3+r-t),n<0?n+=1:n>1&&(n-=1)),[n*360,s*100,p*100]};M.rgb.hwb=function(e){let t=e[0],r=e[1],o=e[2],n=M.rgb.hsl(e)[0],s=1/255*Math.min(t,Math.min(r,o));return o=1-1/255*Math.max(t,Math.max(r,o)),[n,s*100,o*100]};M.rgb.cmyk=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255,n=Math.min(1-t,1-r,1-o),s=(1-t-n)/(1-n)||0,i=(1-r-n)/(1-n)||0,a=(1-o-n)/(1-n)||0;return[s*100,i*100,a*100,n*100]};function gU(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}M.rgb.keyword=function(e){let t=oM[e];if(t)return t;let r=1/0,o;for(let n of Object.keys(ou)){let s=ou[n],i=gU(e,s);i<r&&(r=i,o=n)}return o};M.keyword.rgb=function(e){return ou[e]};M.rgb.xyz=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,o=o>.04045?((o+.055)/1.055)**2.4:o/12.92;let n=t*.4124+r*.3576+o*.1805,s=t*.2126+r*.7152+o*.0722,i=t*.0193+r*.1192+o*.9505;return[n*100,s*100,i*100]};M.rgb.lab=function(e){let t=M.rgb.xyz(e),r=t[0],o=t[1],n=t[2];r/=95.047,o/=100,n/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,o=o>.008856?o**(1/3):7.787*o+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;let s=116*o-16,i=500*(r-o),a=200*(o-n);return[s,i,a]};M.hsl.rgb=function(e){let t=e[0]/360,r=e[1]/100,o=e[2]/100,n,s,i;if(r===0)return i=o*255,[i,i,i];o<.5?n=o*(1+r):n=o+r-o*r;let a=2*o-n,c=[0,0,0];for(let p=0;p<3;p++)s=t+1/3*-(p-1),s<0&&s++,s>1&&s--,6*s<1?i=a+(n-a)*6*s:2*s<1?i=n:3*s<2?i=a+(n-a)*(2/3-s)*6:i=a,c[p]=i*255;return c};M.hsl.hsv=function(e){let t=e[0],r=e[1]/100,o=e[2]/100,n=r,s=Math.max(o,.01);o*=2,r*=o<=1?o:2-o,n*=s<=1?s:2-s;let i=(o+r)/2,a=o===0?2*n/(s+n):2*r/(o+r);return[t,a*100,i*100]};M.hsv.rgb=function(e){let t=e[0]/60,r=e[1]/100,o=e[2]/100,n=Math.floor(t)%6,s=t-Math.floor(t),i=255*o*(1-r),a=255*o*(1-r*s),c=255*o*(1-r*(1-s));switch(o*=255,n){case 0:return[o,c,i];case 1:return[a,o,i];case 2:return[i,o,c];case 3:return[i,a,o];case 4:return[c,i,o];case 5:return[o,i,a]}};M.hsv.hsl=function(e){let t=e[0],r=e[1]/100,o=e[2]/100,n=Math.max(o,.01),s,i;i=(2-r)*o;let a=(2-r)*n;return s=r*n,s/=a<=1?a:2-a,s=s||0,i/=2,[t,s*100,i*100]};M.hwb.rgb=function(e){let t=e[0]/360,r=e[1]/100,o=e[2]/100,n=r+o,s;n>1&&(r/=n,o/=n);let i=Math.floor(6*t),a=1-o;s=6*t-i,i&1&&(s=1-s);let c=r+s*(a-r),p,l,f;switch(i){default:case 6:case 0:p=a,l=c,f=r;break;case 1:p=c,l=a,f=r;break;case 2:p=r,l=a,f=c;break;case 3:p=r,l=c,f=a;break;case 4:p=c,l=r,f=a;break;case 5:p=a,l=r,f=c;break}return[p*255,l*255,f*255]};M.cmyk.rgb=function(e){let t=e[0]/100,r=e[1]/100,o=e[2]/100,n=e[3]/100,s=1-Math.min(1,t*(1-n)+n),i=1-Math.min(1,r*(1-n)+n),a=1-Math.min(1,o*(1-n)+n);return[s*255,i*255,a*255]};M.xyz.rgb=function(e){let t=e[0]/100,r=e[1]/100,o=e[2]/100,n,s,i;return n=t*3.2406+r*-1.5372+o*-.4986,s=t*-.9689+r*1.8758+o*.0415,i=t*.0557+r*-.204+o*1.057,n=n>.0031308?1.055*n**(1/2.4)-.055:n*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,n=Math.min(Math.max(0,n),1),s=Math.min(Math.max(0,s),1),i=Math.min(Math.max(0,i),1),[n*255,s*255,i*255]};M.xyz.lab=function(e){let t=e[0],r=e[1],o=e[2];t/=95.047,r/=100,o/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;let n=116*r-16,s=500*(t-r),i=200*(r-o);return[n,s,i]};M.lab.xyz=function(e){let t=e[0],r=e[1],o=e[2],n,s,i;s=(t+16)/116,n=r/500+s,i=s-o/200;let a=s**3,c=n**3,p=i**3;return s=a>.008856?a:(s-16/116)/7.787,n=c>.008856?c:(n-16/116)/7.787,i=p>.008856?p:(i-16/116)/7.787,n*=95.047,s*=100,i*=108.883,[n,s,i]};M.lab.lch=function(e){let t=e[0],r=e[1],o=e[2],n;n=Math.atan2(o,r)*360/2/Math.PI,n<0&&(n+=360);let i=Math.sqrt(r*r+o*o);return[t,i,n]};M.lch.lab=function(e){let t=e[0],r=e[1],n=e[2]/360*2*Math.PI,s=r*Math.cos(n),i=r*Math.sin(n);return[t,s,i]};M.rgb.ansi16=function(e,t=null){let[r,o,n]=e,s=t===null?M.rgb.hsv(e)[2]:t;if(s=Math.round(s/50),s===0)return 30;let i=30+(Math.round(n/255)<<2|Math.round(o/255)<<1|Math.round(r/255));return s===2&&(i+=60),i};M.hsv.ansi16=function(e){return M.rgb.ansi16(M.hsv.rgb(e),e[2])};M.rgb.ansi256=function(e){let t=e[0],r=e[1],o=e[2];return t===r&&r===o?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(o/255*5)};M.ansi16.rgb=function(e){let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];let r=(~~(e>50)+1)*.5,o=(t&1)*r*255,n=(t>>1&1)*r*255,s=(t>>2&1)*r*255;return[o,n,s]};M.ansi256.rgb=function(e){if(e>=232){let s=(e-232)*10+8;return[s,s,s]}e-=16;let t,r=Math.floor(e/36)/5*255,o=Math.floor((t=e%36)/6)/5*255,n=t%6/5*255;return[r,o,n]};M.rgb.hex=function(e){let r=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r};M.hex.rgb=function(e){let t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let r=t[0];t[0].length===3&&(r=r.split("").map(a=>a+a).join(""));let o=parseInt(r,16),n=o>>16&255,s=o>>8&255,i=o&255;return[n,s,i]};M.rgb.hcg=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255,n=Math.max(Math.max(t,r),o),s=Math.min(Math.min(t,r),o),i=n-s,a,c;return i<1?a=s/(1-i):a=0,i<=0?c=0:n===t?c=(r-o)/i%6:n===r?c=2+(o-t)/i:c=4+(t-r)/i,c/=6,c%=1,[c*360,i*100,a*100]};M.hsl.hcg=function(e){let t=e[1]/100,r=e[2]/100,o=r<.5?2*t*r:2*t*(1-r),n=0;return o<1&&(n=(r-.5*o)/(1-o)),[e[0],o*100,n*100]};M.hsv.hcg=function(e){let t=e[1]/100,r=e[2]/100,o=t*r,n=0;return o<1&&(n=(r-o)/(1-o)),[e[0],o*100,n*100]};M.hcg.rgb=function(e){let t=e[0]/360,r=e[1]/100,o=e[2]/100;if(r===0)return[o*255,o*255,o*255];let n=[0,0,0],s=t%1*6,i=s%1,a=1-i,c=0;switch(Math.floor(s)){case 0:n[0]=1,n[1]=i,n[2]=0;break;case 1:n[0]=a,n[1]=1,n[2]=0;break;case 2:n[0]=0,n[1]=1,n[2]=i;break;case 3:n[0]=0,n[1]=a,n[2]=1;break;case 4:n[0]=i,n[1]=0,n[2]=1;break;default:n[0]=1,n[1]=0,n[2]=a}return c=(1-r)*o,[(r*n[0]+c)*255,(r*n[1]+c)*255,(r*n[2]+c)*255]};M.hcg.hsv=function(e){let t=e[1]/100,r=e[2]/100,o=t+r*(1-t),n=0;return o>0&&(n=t/o),[e[0],n*100,o*100]};M.hcg.hsl=function(e){let t=e[1]/100,o=e[2]/100*(1-t)+.5*t,n=0;return o>0&&o<.5?n=t/(2*o):o>=.5&&o<1&&(n=t/(2*(1-o))),[e[0],n*100,o*100]};M.hcg.hwb=function(e){let t=e[1]/100,r=e[2]/100,o=t+r*(1-t);return[e[0],(o-t)*100,(1-o)*100]};M.hwb.hcg=function(e){let t=e[1]/100,o=1-e[2]/100,n=o-t,s=0;return n<1&&(s=(o-n)/(1-n)),[e[0],n*100,s*100]};M.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};M.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};M.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};M.gray.hsl=function(e){return[0,0,e[0]]};M.gray.hsv=M.gray.hsl;M.gray.hwb=function(e){return[0,100,e[0]]};M.gray.cmyk=function(e){return[0,0,0,e[0]]};M.gray.lab=function(e){return[e[0],0,0]};M.gray.hex=function(e){let t=Math.round(e[0]/100*255)&255,o=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(o.length)+o};M.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}});var iM=q((tZ,sM)=>{"use strict";var Zf=gb();function xU(){let e={},t=Object.keys(Zf);for(let r=t.length,o=0;o<r;o++)e[t[o]]={distance:-1,parent:null};return e}function yU(e){let t=xU(),r=[e];for(t[e].distance=0;r.length;){let o=r.pop(),n=Object.keys(Zf[o]);for(let s=n.length,i=0;i<s;i++){let a=n[i],c=t[a];c.distance===-1&&(c.distance=t[o].distance+1,c.parent=o,r.unshift(a))}}return t}function bU(e,t){return function(r){return t(e(r))}}function DU(e,t){let r=[t[e].parent,e],o=Zf[t[e].parent][e],n=t[e].parent;for(;t[n].parent;)r.unshift(t[n].parent),o=bU(Zf[t[n].parent][n],o),n=t[n].parent;return o.conversion=r,o}sM.exports=function(e){let t=yU(e),r={},o=Object.keys(t);for(let n=o.length,s=0;s<n;s++){let i=o[s];t[i].parent!==null&&(r[i]=DU(i,t))}return r}});var cM=q((rZ,aM)=>{"use strict";var xb=gb(),SU=iM(),ea={},EU=Object.keys(xb);function CU(e){let t=function(...r){let o=r[0];return o==null?o:(o.length>1&&(r=o),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function _U(e){let t=function(...r){let o=r[0];if(o==null)return o;o.length>1&&(r=o);let n=e(r);if(typeof n=="object")for(let s=n.length,i=0;i<s;i++)n[i]=Math.round(n[i]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}EU.forEach(e=>{ea[e]={},Object.defineProperty(ea[e],"channels",{value:xb[e].channels}),Object.defineProperty(ea[e],"labels",{value:xb[e].labels});let t=SU(e);Object.keys(t).forEach(o=>{let n=t[o];ea[e][o]=_U(n),ea[e][o].raw=CU(n)})});aM.exports=ea});var dM=q((oZ,mM)=>{"use strict";var uM=(e,t)=>(...r)=>`\x1B[${e(...r)+t}m`,pM=(e,t)=>(...r)=>{let o=e(...r);return`\x1B[${38+t};5;${o}m`},lM=(e,t)=>(...r)=>{let o=e(...r);return`\x1B[${38+t};2;${o[0]};${o[1]};${o[2]}m`},Qf=e=>e,fM=(e,t,r)=>[e,t,r],ta=(e,t,r)=>{Object.defineProperty(e,t,{get:()=>{let o=r();return Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0}),o},enumerable:!0,configurable:!0})},yb,ra=(e,t,r,o)=>{yb===void 0&&(yb=cM());let n=o?10:0,s={};for(let[i,a]of Object.entries(yb)){let c=i==="ansi16"?"ansi":i;i===t?s[c]=e(r,n):typeof a=="object"&&(s[c]=e(a[t],n))}return s};function OU(){let e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(let[r,o]of Object.entries(t)){for(let[n,s]of Object.entries(o))t[n]={open:`\x1B[${s[0]}m`,close:`\x1B[${s[1]}m`},o[n]=t[n],e.set(s[0],s[1]);Object.defineProperty(t,r,{value:o,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="\x1B[39m",t.bgColor.close="\x1B[49m",ta(t.color,"ansi",()=>ra(uM,"ansi16",Qf,!1)),ta(t.color,"ansi256",()=>ra(pM,"ansi256",Qf,!1)),ta(t.color,"ansi16m",()=>ra(lM,"rgb",fM,!1)),ta(t.bgColor,"ansi",()=>ra(uM,"ansi16",Qf,!0)),ta(t.bgColor,"ansi256",()=>ra(pM,"ansi256",Qf,!0)),ta(t.bgColor,"ansi16m",()=>ra(lM,"rgb",fM,!0)),t}Object.defineProperty(mM,"exports",{enumerable:!0,get:OU})});var em=q((nZ,yM)=>{"use strict";var wU=db(),RU=eM(),hM=dM(),xM=["\x1B","\x9B"],Xf=e=>`${xM[0]}[${e}m`,gM=(e,t,r)=>{let o=[];e=[...e];for(let n of e){let s=n;n.includes(";")&&(n=n.split(";")[0][0]+"0");let i=hM.codes.get(Number.parseInt(n,10));if(i){let a=e.indexOf(i.toString());a===-1?o.push(Xf(t?i:s)):e.splice(a,1)}else if(t){o.push(Xf(0));break}else o.push(Xf(s))}if(t&&(o=o.filter((n,s)=>o.indexOf(n)===s),r!==void 0)){let n=Xf(hM.codes.get(Number.parseInt(r,10)));o=o.reduce((s,i)=>i===n?[i,...s]:[...s,i],[])}return o.join("")};yM.exports=(e,t,r)=>{let o=[...e],n=[],s=typeof r=="number"?r:o.length,i=!1,a,c=0,p="";for(let[l,f]of o.entries()){let d=!1;if(xM.includes(f)){let h=/\d[^m]*/.exec(e.slice(l,l+18));a=h&&h.length>0?h[0]:void 0,c<s&&(i=!0,a!==void 0&&n.push(a))}else i&&f==="m"&&(i=!1,d=!0);if(!i&&!d&&c++,!RU({exact:!0}).test(f)&&wU(f.codePointAt())&&(c++,typeof r!="number"&&s++),c>t&&c<=s)p+=f;else if(c===t&&!i&&a!==void 0)p=gM(n);else if(c>=s){p+=gM(n,!0,a);break}}return p}});var bb=q(tm=>{"use strict";Object.defineProperty(tm,"__esModule",{value:!0});tm.getBorderCharacters=void 0;var FU=e=>{if(e==="honeywell")return{topBody:"\u2550",topJoin:"\u2564",topLeft:"\u2554",topRight:"\u2557",bottomBody:"\u2550",bottomJoin:"\u2567",bottomLeft:"\u255A",bottomRight:"\u255D",bodyLeft:"\u2551",bodyRight:"\u2551",bodyJoin:"\u2502",headerJoin:"\u252C",joinBody:"\u2500",joinLeft:"\u255F",joinRight:"\u2562",joinJoin:"\u253C",joinMiddleDown:"\u252C",joinMiddleUp:"\u2534",joinMiddleLeft:"\u2524",joinMiddleRight:"\u251C"};if(e==="norc")return{topBody:"\u2500",topJoin:"\u252C",topLeft:"\u250C",topRight:"\u2510",bottomBody:"\u2500",bottomJoin:"\u2534",bottomLeft:"\u2514",bottomRight:"\u2518",bodyLeft:"\u2502",bodyRight:"\u2502",bodyJoin:"\u2502",headerJoin:"\u252C",joinBody:"\u2500",joinLeft:"\u251C",joinRight:"\u2524",joinJoin:"\u253C",joinMiddleDown:"\u252C",joinMiddleUp:"\u2534",joinMiddleLeft:"\u2524",joinMiddleRight:"\u251C"};if(e==="ramac")return{topBody:"-",topJoin:"+",topLeft:"+",topRight:"+",bottomBody:"-",bottomJoin:"+",bottomLeft:"+",bottomRight:"+",bodyLeft:"|",bodyRight:"|",bodyJoin:"|",headerJoin:"+",joinBody:"-",joinLeft:"|",joinRight:"|",joinJoin:"|",joinMiddleDown:"+",joinMiddleUp:"+",joinMiddleLeft:"+",joinMiddleRight:"+"};if(e==="void")return{topBody:"",topJoin:"",topLeft:"",topRight:"",bottomBody:"",bottomJoin:"",bottomLeft:"",bottomRight:"",bodyLeft:"",bodyRight:"",bodyJoin:"",headerJoin:"",joinBody:"",joinLeft:"",joinRight:"",joinJoin:"",joinMiddleDown:"",joinMiddleUp:"",joinMiddleLeft:"",joinMiddleRight:""};throw new Error('Unknown border template "'+e+'".')};tm.getBorderCharacters=FU});var ze=q(G=>{"use strict";var Db=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(G,"__esModule",{value:!0});G.isCellInRange=G.areCellEqual=G.calculateRangeCoordinate=G.findOriginalRowIndex=G.flatten=G.extractTruncates=G.sumArray=G.sequence=G.distributeUnevenly=G.countSpaceSequence=G.groupBySizes=G.makeBorderConfig=G.splitAnsi=G.normalizeString=void 0;var AU=Db(em()),vU=Db(Xi()),MU=Db(Yf()),kU=bb(),TU=e=>e.replace(/\r\n/g,`
`);G.normalizeString=TU;var IU=e=>{let t=(0,MU.default)(e).split(`
`).map(vU.default),r=[],o=0;return t.forEach(n=>{r.push(n===0?"":(0,AU.default)(e,o,o+n)),o+=n+1}),r};G.splitAnsi=IU;var PU=e=>({...(0,kU.getBorderCharacters)("honeywell"),...e});G.makeBorderConfig=PU;var NU=(e,t)=>{let r=0;return t.map(o=>{let n=e.slice(r,r+o);return r+=o,n})};G.groupBySizes=NU;var LU=e=>{var t,r;return(r=(t=e.match(/\s+/g))===null||t===void 0?void 0:t.length)!==null&&r!==void 0?r:0};G.countSpaceSequence=LU;var qU=(e,t)=>Array.from({length:t}).fill(Math.floor(e/t)).map((o,n)=>o+(n<e%t?1:0));G.distributeUnevenly=qU;var HU=(e,t)=>Array.from({length:t-e+1},(r,o)=>o+e);G.sequence=HU;var BU=e=>e.reduce((t,r)=>t+r,0);G.sumArray=BU;var jU=e=>e.columns.map(({truncate:t})=>t);G.extractTruncates=jU;var UU=e=>[].concat(...e);G.flatten=UU;var WU=(e,t)=>(0,G.flatten)(e.map((o,n)=>Array.from({length:o},()=>n)))[t];G.findOriginalRowIndex=WU;var zU=e=>{let{row:t,col:r,colSpan:o=1,rowSpan:n=1}=e;return{bottomRight:{col:r+o-1,row:t+n-1},topLeft:{col:r,row:t}}};G.calculateRangeCoordinate=zU;var KU=(e,t)=>e.row===t.row&&e.col===t.col;G.areCellEqual=KU;var $U=(e,{topLeft:t,bottomRight:r})=>t.row<=e.row&&e.row<=r.row&&t.col<=e.col&&e.col<=r.col;G.isCellInRange=$U});var Eb=q(oa=>{"use strict";var GU=oa&&oa.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oa,"__esModule",{value:!0});oa.alignString=void 0;var VU=GU(Xi()),bM=ze(),Sb=(e,t)=>e+" ".repeat(t),JU=(e,t)=>" ".repeat(t)+e,YU=(e,t)=>" ".repeat(Math.floor(t/2))+e+" ".repeat(Math.ceil(t/2)),ZU=(e,t)=>{let r=(0,bM.countSpaceSequence)(e);if(r===0)return Sb(e,t);let o=(0,bM.distributeUnevenly)(t,r);if(Math.max(...o)>3)return Sb(e,t);let n=0;return e.replace(/\s+/g,s=>s+" ".repeat(o[n++]))},QU=(e,t,r)=>{let o=(0,VU.default)(e);if(o===t)return e;if(o>t)throw new Error("Subject parameter value width cannot be greater than the container width.");if(o===0)return" ".repeat(t);let n=t-o;return r==="left"?Sb(e,n):r==="right"?JU(e,n):r==="justify"?ZU(e,n):YU(e,n)};oa.alignString=QU});var Cb=q(rm=>{"use strict";Object.defineProperty(rm,"__esModule",{value:!0});rm.alignTableData=void 0;var XU=Eb(),eW=(e,t)=>e.map((r,o)=>r.map((n,s)=>{var i;let{width:a,alignment:c}=t.columns[s];return((i=t.spanningCellManager)===null||i===void 0?void 0:i.getContainingRange({col:s,row:o},{mapped:!0}))?n:(0,XU.alignString)(n,a,c)}));rm.alignTableData=eW});var EM=q(na=>{"use strict";var SM=na&&na.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(na,"__esModule",{value:!0});na.wrapString=void 0;var DM=SM(em()),tW=SM(Xi()),rW=(e,t)=>{let r=e,o=[];do o.push((0,DM.default)(r,0,t)),r=(0,DM.default)(r,t).trim();while((0,tW.default)(r));return o};na.wrapString=rW});var _M=q(sa=>{"use strict";var CM=sa&&sa.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sa,"__esModule",{value:!0});sa.wrapWord=void 0;var oW=CM(em()),nW=CM(Yf()),sW=(e,t)=>{let r=(0,nW.default)(e),o=[],n=new RegExp("(^.{1,"+String(Math.max(t,1))+"}(\\s+|$))|(^.{1,"+String(Math.max(t-1,1))+"}(\\\\|/|_|\\.|,|;|-))");do{let s,i=n.exec(r);if(i){s=i[0],r=r.slice(s.length);let a=s.trim().length,c=s.length-a;o.push([a,c])}else s=r.slice(0,t),r=r.slice(t),o.push([s.length,0])}while(r.length);return o},iW=(e,t)=>{let r=[],o=0;return sW(e,t).forEach(([n,s])=>{r.push((0,oW.default)(e,o,o+n)),o+=n+s}),r};sa.wrapWord=iW});var nm=q(om=>{"use strict";Object.defineProperty(om,"__esModule",{value:!0});om.wrapCell=void 0;var aW=ze(),cW=EM(),uW=_M(),pW=(e,t,r)=>{let o=(0,aW.splitAnsi)(e);for(let n=0;n<o.length;){let s;r?s=(0,uW.wrapWord)(o[n],t):s=(0,cW.wrapString)(o[n],t),o.splice(n,1,...s),n+=s.length}return o};om.wrapCell=pW});var OM=q(sm=>{"use strict";Object.defineProperty(sm,"__esModule",{value:!0});sm.calculateCellHeight=void 0;var lW=nm(),fW=(e,t,r=!1)=>(0,lW.wrapCell)(e,t,r).length;sm.calculateCellHeight=fW});var _b=q(im=>{"use strict";Object.defineProperty(im,"__esModule",{value:!0});im.calculateRowHeights=void 0;var mW=OM(),wM=ze(),dW=(e,t)=>{let r=[];for(let[o,n]of e.entries()){let s=1;n.forEach((i,a)=>{var c;let p=(c=t.spanningCellManager)===null||c===void 0?void 0:c.getContainingRange({col:a,row:o});if(!p){let h=(0,mW.calculateCellHeight)(i,t.columns[a].width,t.columns[a].wrapWord);s=Math.max(s,h);return}let{topLeft:l,bottomRight:f,height:d}=p;if(o===f.row){let h=(0,wM.sumArray)(r.slice(l.row)),S=f.row-l.row,w=(0,wM.sequence)(l.row+1,f.row).filter(I=>{var j;return!(!((j=t.drawHorizontalLine)===null||j===void 0)&&j.call(t,I,e.length))}).length,A=d-h-S+w;s=Math.max(s,A)}}),r.push(s)}return r};im.calculateRowHeights=dW});var cm=q(am=>{"use strict";Object.defineProperty(am,"__esModule",{value:!0});am.drawContent=void 0;var hW=e=>{let{contents:t,separatorGetter:r,drawSeparator:o,spanningCellManager:n,rowIndex:s,elementType:i}=e,a=t.length,c=[];return o(0,a)&&c.push(r(0,a)),t.forEach((p,l)=>{if((!i||i==="border"||i==="row")&&c.push(p),i==="cell"&&s===void 0&&c.push(p),i==="cell"&&s!==void 0){let f=n?.getContainingRange({col:l,row:s});(!f||l===f.topLeft.col)&&c.push(p)}if(l+1<a&&o(l+1,a)){let f=r(l+1,a);if(i==="cell"&&s!==void 0){let d={col:l+1,row:s},h=n?.getContainingRange(d);(!h||h.topLeft.col===d.col)&&c.push(f)}else c.push(f)}}),o(a,a)&&c.push(r(a,a)),c.join("")};am.drawContent=hW});var Ob=q(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.createTableBorderGetter=fe.drawBorderBottom=fe.drawBorderJoin=fe.drawBorderTop=fe.drawBorder=fe.createSeparatorGetter=fe.drawBorderSegments=void 0;var gW=cm(),xW=(e,t)=>{let{separator:r,horizontalBorderIndex:o,spanningCellManager:n}=t;return e.map((s,i)=>{let a=r.body.repeat(s);if(o===void 0)return a;let c=n?.getContainingRange({col:i,row:o});if(!c)return a;let{topLeft:p}=c;return o===p.row?a:i!==p.col?"":c.extractBorderContent(o)})};fe.drawBorderSegments=xW;var yW=e=>{let{separator:t,spanningCellManager:r,horizontalBorderIndex:o,rowCount:n}=e;return(s,i)=>{let a=r?.inSameRange;if(o!==void 0&&a){let c={col:s,row:o-1},p={col:s-1,row:o},l={col:s-1,row:o-1},f={col:s,row:o},d=[[l,c],[c,f],[f,p],[p,l]];if(s===0)return a(f,c)&&t.bodyJoinOuter?t.bodyJoinOuter:t.left;if(s===i)return a(l,p)&&t.bodyJoinOuter?t.bodyJoinOuter:t.right;if(o===0)return a(f,p)?t.body:t.join;if(o===n)return a(c,l)?t.body:t.join;let h=d.map(S=>a(...S)).filter(Boolean).length;if(h===0)return t.join;if(h===4)return"";if(h===2)return a(...d[1])&&a(...d[3])&&t.bodyJoinInner?t.bodyJoinInner:t.body;if(h===1){if(!t.joinRight||!t.joinLeft||!t.joinUp||!t.joinDown)throw new Error(`Can not get border separator for position [${o}, ${s}]`);return a(...d[0])?t.joinDown:a(...d[1])?t.joinLeft:a(...d[2])?t.joinUp:t.joinRight}throw new Error("Invalid case")}return s===0?t.left:s===i?t.right:t.join}};fe.createSeparatorGetter=yW;var bW=(e,t)=>{let r=(0,fe.drawBorderSegments)(e,t),{drawVerticalLine:o,horizontalBorderIndex:n,spanningCellManager:s}=t;return(0,gW.drawContent)({contents:r,drawSeparator:o,elementType:"border",rowIndex:n,separatorGetter:(0,fe.createSeparatorGetter)(t),spanningCellManager:s})+`
`};fe.drawBorder=bW;var DW=(e,t)=>{let{border:r}=t,o=(0,fe.drawBorder)(e,{...t,separator:{body:r.topBody,join:r.topJoin,left:r.topLeft,right:r.topRight}});return o===`
`?"":o};fe.drawBorderTop=DW;var SW=(e,t)=>{let{border:r}=t;return(0,fe.drawBorder)(e,{...t,separator:{body:r.joinBody,bodyJoinInner:r.bodyJoin,bodyJoinOuter:r.bodyLeft,join:r.joinJoin,joinDown:r.joinMiddleDown,joinLeft:r.joinMiddleLeft,joinRight:r.joinMiddleRight,joinUp:r.joinMiddleUp,left:r.joinLeft,right:r.joinRight}})};fe.drawBorderJoin=SW;var EW=(e,t)=>{let{border:r}=t;return(0,fe.drawBorder)(e,{...t,separator:{body:r.bottomBody,join:r.bottomJoin,left:r.bottomLeft,right:r.bottomRight}})};fe.drawBorderBottom=EW;var CW=(e,t)=>(r,o)=>{let n={...t,horizontalBorderIndex:r};return r===0?(0,fe.drawBorderTop)(e,n):r===o?(0,fe.drawBorderBottom)(e,n):(0,fe.drawBorderJoin)(e,n)};fe.createTableBorderGetter=CW});var wb=q(um=>{"use strict";Object.defineProperty(um,"__esModule",{value:!0});um.drawRow=void 0;var _W=cm(),OW=(e,t)=>{let{border:r,drawVerticalLine:o,rowIndex:n,spanningCellManager:s}=t;return(0,_W.drawContent)({contents:e,drawSeparator:o,elementType:"cell",rowIndex:n,separatorGetter:(i,a)=>i===0?r.bodyLeft:i===a?r.bodyRight:r.bodyJoin,spanningCellManager:s})+`
`};um.drawRow=OW});var FM=q((xZ,RM)=>{"use strict";RM.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var o,n,s;if(Array.isArray(t)){if(o=t.length,o!=r.length)return!1;for(n=o;n--!==0;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(s=Object.keys(t),o=s.length,o!==Object.keys(r).length)return!1;for(n=o;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[n]))return!1;for(n=o;n--!==0;){var i=s[n];if(!e(t[i],r[i]))return!1}return!0}return t!==t&&r!==r}});var vM=q(Rb=>{"use strict";Object.defineProperty(Rb,"__esModule",{value:!0});var AM=FM();AM.code='require("ajv/dist/runtime/equal").default';Rb.default=AM});var NM=q(Ab=>{"use strict";Ab["config.json"]=IM;var wW={$id:"config.json",$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{border:{$ref:"shared.json#/definitions/borders"},header:{type:"object",properties:{content:{type:"string"},alignment:{$ref:"shared.json#/definitions/alignment"},wrapWord:{type:"boolean"},truncate:{type:"integer"},paddingLeft:{type:"integer"},paddingRight:{type:"integer"}},required:["content"],additionalProperties:!1},columns:{$ref:"shared.json#/definitions/columns"},columnDefault:{$ref:"shared.json#/definitions/column"},drawVerticalLine:{typeof:"function"},drawHorizontalLine:{typeof:"function"},singleLine:{typeof:"boolean"},spanningCells:{type:"array",items:{type:"object",properties:{col:{type:"integer",minimum:0},row:{type:"integer",minimum:0},colSpan:{type:"integer",minimum:1},rowSpan:{type:"integer",minimum:1},alignment:{$ref:"shared.json#/definitions/alignment"},verticalAlignment:{$ref:"shared.json#/definitions/verticalAlignment"},wrapWord:{type:"boolean"},truncate:{type:"integer"},paddingLeft:{type:"integer"},paddingRight:{type:"integer"}},required:["row","col"],additionalProperties:!1}}},additionalProperties:!1},MM={type:"object",properties:{topBody:{$ref:"#/definitions/border"},topJoin:{$ref:"#/definitions/border"},topLeft:{$ref:"#/definitions/border"},topRight:{$ref:"#/definitions/border"},bottomBody:{$ref:"#/definitions/border"},bottomJoin:{$ref:"#/definitions/border"},bottomLeft:{$ref:"#/definitions/border"},bottomRight:{$ref:"#/definitions/border"},bodyLeft:{$ref:"#/definitions/border"},bodyRight:{$ref:"#/definitions/border"},bodyJoin:{$ref:"#/definitions/border"},headerJoin:{$ref:"#/definitions/border"},joinBody:{$ref:"#/definitions/border"},joinLeft:{$ref:"#/definitions/border"},joinRight:{$ref:"#/definitions/border"},joinJoin:{$ref:"#/definitions/border"},joinMiddleUp:{$ref:"#/definitions/border"},joinMiddleDown:{$ref:"#/definitions/border"},joinMiddleLeft:{$ref:"#/definitions/border"},joinMiddleRight:{$ref:"#/definitions/border"}},additionalProperties:!1},Fb=Object.prototype.hasOwnProperty;function b(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(typeof e!="string"){let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[a]:s.push(a),i++}return b.errors=s,i===0}function pm(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let a in e)if(!Fb.call(MM.properties,a)){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}e.topBody!==void 0&&(b(e.topBody,{instancePath:t+"/topBody",parentData:e,parentDataProperty:"topBody",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.topJoin!==void 0&&(b(e.topJoin,{instancePath:t+"/topJoin",parentData:e,parentDataProperty:"topJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.topLeft!==void 0&&(b(e.topLeft,{instancePath:t+"/topLeft",parentData:e,parentDataProperty:"topLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.topRight!==void 0&&(b(e.topRight,{instancePath:t+"/topRight",parentData:e,parentDataProperty:"topRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomBody!==void 0&&(b(e.bottomBody,{instancePath:t+"/bottomBody",parentData:e,parentDataProperty:"bottomBody",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomJoin!==void 0&&(b(e.bottomJoin,{instancePath:t+"/bottomJoin",parentData:e,parentDataProperty:"bottomJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomLeft!==void 0&&(b(e.bottomLeft,{instancePath:t+"/bottomLeft",parentData:e,parentDataProperty:"bottomLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomRight!==void 0&&(b(e.bottomRight,{instancePath:t+"/bottomRight",parentData:e,parentDataProperty:"bottomRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bodyLeft!==void 0&&(b(e.bodyLeft,{instancePath:t+"/bodyLeft",parentData:e,parentDataProperty:"bodyLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bodyRight!==void 0&&(b(e.bodyRight,{instancePath:t+"/bodyRight",parentData:e,parentDataProperty:"bodyRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bodyJoin!==void 0&&(b(e.bodyJoin,{instancePath:t+"/bodyJoin",parentData:e,parentDataProperty:"bodyJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.headerJoin!==void 0&&(b(e.headerJoin,{instancePath:t+"/headerJoin",parentData:e,parentDataProperty:"headerJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinBody!==void 0&&(b(e.joinBody,{instancePath:t+"/joinBody",parentData:e,parentDataProperty:"joinBody",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinLeft!==void 0&&(b(e.joinLeft,{instancePath:t+"/joinLeft",parentData:e,parentDataProperty:"joinLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinRight!==void 0&&(b(e.joinRight,{instancePath:t+"/joinRight",parentData:e,parentDataProperty:"joinRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinJoin!==void 0&&(b(e.joinJoin,{instancePath:t+"/joinJoin",parentData:e,parentDataProperty:"joinJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleUp!==void 0&&(b(e.joinMiddleUp,{instancePath:t+"/joinMiddleUp",parentData:e,parentDataProperty:"joinMiddleUp",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleDown!==void 0&&(b(e.joinMiddleDown,{instancePath:t+"/joinMiddleDown",parentData:e,parentDataProperty:"joinMiddleDown",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleLeft!==void 0&&(b(e.joinMiddleLeft,{instancePath:t+"/joinMiddleLeft",parentData:e,parentDataProperty:"joinMiddleLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleRight!==void 0&&(b(e.joinMiddleRight,{instancePath:t+"/joinMiddleRight",parentData:e,parentDataProperty:"joinMiddleRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length))}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return pm.errors=s,i===0}var kM={type:"string",enum:["left","right","center","justify"]},bZ=vM().default;function Es(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(typeof e!="string"){let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[a]:s.push(a),i++}if(!(e==="left"||e==="right"||e==="center"||e==="justify")){let a={instancePath:t,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:kM.enum},message:"must be equal to one of the allowed values"};s===null?s=[a]:s.push(a),i++}return Es.errors=s,i===0}var xm=new RegExp("^[0-9]+$","u");function uo(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(typeof e!="string"){let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[a]:s.push(a),i++}if(!(e==="left"||e==="right"||e==="center"||e==="justify")){let a={instancePath:t,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:kM.enum},message:"must be equal to one of the allowed values"};s===null?s=[a]:s.push(a),i++}return uo.errors=s,i===0}var TM={type:"string",enum:["top","middle","bottom"]};function po(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(typeof e!="string"){let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[a]:s.push(a),i++}if(!(e==="top"||e==="middle"||e==="bottom")){let a={instancePath:t,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:TM.enum},message:"must be equal to one of the allowed values"};s===null?s=[a]:s.push(a),i++}return po.errors=s,i===0}function zt(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let a in e)if(!(a==="alignment"||a==="verticalAlignment"||a==="width"||a==="wrapWord"||a==="truncate"||a==="paddingLeft"||a==="paddingRight")){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}if(e.alignment!==void 0&&(uo(e.alignment,{instancePath:t+"/alignment",parentData:e,parentDataProperty:"alignment",rootData:n})||(s=s===null?uo.errors:s.concat(uo.errors),i=s.length)),e.verticalAlignment!==void 0&&(po(e.verticalAlignment,{instancePath:t+"/verticalAlignment",parentData:e,parentDataProperty:"verticalAlignment",rootData:n})||(s=s===null?po.errors:s.concat(po.errors),i=s.length)),e.width!==void 0){let a=e.width;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/width",schemaPath:"#/properties/width/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}if(typeof a=="number"&&isFinite(a)&&(a<1||isNaN(a))){let c={instancePath:t+"/width",schemaPath:"#/properties/width/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};s===null?s=[c]:s.push(c),i++}}if(e.wrapWord!==void 0&&typeof e.wrapWord!="boolean"){let a={instancePath:t+"/wrapWord",schemaPath:"#/properties/wrapWord/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[a]:s.push(a),i++}if(e.truncate!==void 0){let a=e.truncate;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/truncate",schemaPath:"#/properties/truncate/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}if(e.paddingLeft!==void 0){let a=e.paddingLeft;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/paddingLeft",schemaPath:"#/properties/paddingLeft/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}if(e.paddingRight!==void 0){let a=e.paddingRight;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/paddingRight",schemaPath:"#/properties/paddingRight/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return zt.errors=s,i===0}function lm(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0,a=i,c=!1,p=null,l=i;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let h in e)if(!xm.test(h)){let S={instancePath:t,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties"};s===null?s=[S]:s.push(S),i++}for(let h in e)xm.test(h)&&(zt(e[h],{instancePath:t+"/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:e,parentDataProperty:h,rootData:n})||(s=s===null?zt.errors:s.concat(zt.errors),i=s.length))}else{let h={instancePath:t,schemaPath:"#/oneOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[h]:s.push(h),i++}var d=l===i;d&&(c=!0,p=0);let f=i;if(Array.isArray(e)){let h=e.length;for(let S=0;S<h;S++)zt(e[S],{instancePath:t+"/"+S,parentData:e,parentDataProperty:S,rootData:n})||(s=s===null?zt.errors:s.concat(zt.errors),i=s.length)}else{let h={instancePath:t,schemaPath:"#/oneOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[h]:s.push(h),i++}var d=f===i;if(d&&c?(c=!1,p=[p,1]):d&&(c=!0,p=1),c)i=a,s!==null&&(a?s.length=a:s=null);else{let h={instancePath:t,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:p},message:"must match exactly one schema in oneOf"};s===null?s=[h]:s.push(h),i++}return lm.errors=s,i===0}function fm(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let a in e)if(!(a==="alignment"||a==="verticalAlignment"||a==="width"||a==="wrapWord"||a==="truncate"||a==="paddingLeft"||a==="paddingRight")){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}if(e.alignment!==void 0&&(uo(e.alignment,{instancePath:t+"/alignment",parentData:e,parentDataProperty:"alignment",rootData:n})||(s=s===null?uo.errors:s.concat(uo.errors),i=s.length)),e.verticalAlignment!==void 0&&(po(e.verticalAlignment,{instancePath:t+"/verticalAlignment",parentData:e,parentDataProperty:"verticalAlignment",rootData:n})||(s=s===null?po.errors:s.concat(po.errors),i=s.length)),e.width!==void 0){let a=e.width;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/width",schemaPath:"#/properties/width/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}if(typeof a=="number"&&isFinite(a)&&(a<1||isNaN(a))){let c={instancePath:t+"/width",schemaPath:"#/properties/width/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};s===null?s=[c]:s.push(c),i++}}if(e.wrapWord!==void 0&&typeof e.wrapWord!="boolean"){let a={instancePath:t+"/wrapWord",schemaPath:"#/properties/wrapWord/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[a]:s.push(a),i++}if(e.truncate!==void 0){let a=e.truncate;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/truncate",schemaPath:"#/properties/truncate/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}if(e.paddingLeft!==void 0){let a=e.paddingLeft;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/paddingLeft",schemaPath:"#/properties/paddingLeft/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}if(e.paddingRight!==void 0){let a=e.paddingRight;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/paddingRight",schemaPath:"#/properties/paddingRight/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return fm.errors=s,i===0}function mm(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(typeof e!="string"){let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[a]:s.push(a),i++}if(!(e==="top"||e==="middle"||e==="bottom")){let a={instancePath:t,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:TM.enum},message:"must be equal to one of the allowed values"};s===null?s=[a]:s.push(a),i++}return mm.errors=s,i===0}function IM(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let a in e)if(!(a==="border"||a==="header"||a==="columns"||a==="columnDefault"||a==="drawVerticalLine"||a==="drawHorizontalLine"||a==="singleLine"||a==="spanningCells")){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}if(e.border!==void 0&&(pm(e.border,{instancePath:t+"/border",parentData:e,parentDataProperty:"border",rootData:n})||(s=s===null?pm.errors:s.concat(pm.errors),i=s.length)),e.header!==void 0){let a=e.header;if(a&&typeof a=="object"&&!Array.isArray(a)){if(a.content===void 0){let c={instancePath:t+"/header",schemaPath:"#/properties/header/required",keyword:"required",params:{missingProperty:"content"},message:"must have required property 'content'"};s===null?s=[c]:s.push(c),i++}for(let c in a)if(!(c==="content"||c==="alignment"||c==="wrapWord"||c==="truncate"||c==="paddingLeft"||c==="paddingRight")){let p={instancePath:t+"/header",schemaPath:"#/properties/header/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties"};s===null?s=[p]:s.push(p),i++}if(a.content!==void 0&&typeof a.content!="string"){let c={instancePath:t+"/header/content",schemaPath:"#/properties/header/properties/content/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[c]:s.push(c),i++}if(a.alignment!==void 0&&(Es(a.alignment,{instancePath:t+"/header/alignment",parentData:a,parentDataProperty:"alignment",rootData:n})||(s=s===null?Es.errors:s.concat(Es.errors),i=s.length)),a.wrapWord!==void 0&&typeof a.wrapWord!="boolean"){let c={instancePath:t+"/header/wrapWord",schemaPath:"#/properties/header/properties/wrapWord/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[c]:s.push(c),i++}if(a.truncate!==void 0){let c=a.truncate;if(!(typeof c=="number"&&!(c%1)&&!isNaN(c)&&isFinite(c))){let p={instancePath:t+"/header/truncate",schemaPath:"#/properties/header/properties/truncate/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[p]:s.push(p),i++}}if(a.paddingLeft!==void 0){let c=a.paddingLeft;if(!(typeof c=="number"&&!(c%1)&&!isNaN(c)&&isFinite(c))){let p={instancePath:t+"/header/paddingLeft",schemaPath:"#/properties/header/properties/paddingLeft/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[p]:s.push(p),i++}}if(a.paddingRight!==void 0){let c=a.paddingRight;if(!(typeof c=="number"&&!(c%1)&&!isNaN(c)&&isFinite(c))){let p={instancePath:t+"/header/paddingRight",schemaPath:"#/properties/header/properties/paddingRight/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[p]:s.push(p),i++}}}else{let c={instancePath:t+"/header",schemaPath:"#/properties/header/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[c]:s.push(c),i++}}if(e.columns!==void 0&&(lm(e.columns,{instancePath:t+"/columns",parentData:e,parentDataProperty:"columns",rootData:n})||(s=s===null?lm.errors:s.concat(lm.errors),i=s.length)),e.columnDefault!==void 0&&(fm(e.columnDefault,{instancePath:t+"/columnDefault",parentData:e,parentDataProperty:"columnDefault",rootData:n})||(s=s===null?fm.errors:s.concat(fm.errors),i=s.length)),e.drawVerticalLine!==void 0&&typeof e.drawVerticalLine!="function"){let a={instancePath:t+"/drawVerticalLine",schemaPath:"#/properties/drawVerticalLine/typeof",keyword:"typeof",params:{},message:'must pass "typeof" keyword validation'};s===null?s=[a]:s.push(a),i++}if(e.drawHorizontalLine!==void 0&&typeof e.drawHorizontalLine!="function"){let a={instancePath:t+"/drawHorizontalLine",schemaPath:"#/properties/drawHorizontalLine/typeof",keyword:"typeof",params:{},message:'must pass "typeof" keyword validation'};s===null?s=[a]:s.push(a),i++}if(e.singleLine!==void 0&&typeof e.singleLine!="boolean"){let a={instancePath:t+"/singleLine",schemaPath:"#/properties/singleLine/typeof",keyword:"typeof",params:{},message:'must pass "typeof" keyword validation'};s===null?s=[a]:s.push(a),i++}if(e.spanningCells!==void 0){let a=e.spanningCells;if(Array.isArray(a)){let c=a.length;for(let p=0;p<c;p++){let l=a[p];if(l&&typeof l=="object"&&!Array.isArray(l)){if(l.row===void 0){let f={instancePath:t+"/spanningCells/"+p,schemaPath:"#/properties/spanningCells/items/required",keyword:"required",params:{missingProperty:"row"},message:"must have required property 'row'"};s===null?s=[f]:s.push(f),i++}if(l.col===void 0){let f={instancePath:t+"/spanningCells/"+p,schemaPath:"#/properties/spanningCells/items/required",keyword:"required",params:{missingProperty:"col"},message:"must have required property 'col'"};s===null?s=[f]:s.push(f),i++}for(let f in l)if(!Fb.call(wW.properties.spanningCells.items.properties,f)){let d={instancePath:t+"/spanningCells/"+p,schemaPath:"#/properties/spanningCells/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties"};s===null?s=[d]:s.push(d),i++}if(l.col!==void 0){let f=l.col;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/col",schemaPath:"#/properties/spanningCells/items/properties/col/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}if(typeof f=="number"&&isFinite(f)&&(f<0||isNaN(f))){let d={instancePath:t+"/spanningCells/"+p+"/col",schemaPath:"#/properties/spanningCells/items/properties/col/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"};s===null?s=[d]:s.push(d),i++}}if(l.row!==void 0){let f=l.row;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/row",schemaPath:"#/properties/spanningCells/items/properties/row/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}if(typeof f=="number"&&isFinite(f)&&(f<0||isNaN(f))){let d={instancePath:t+"/spanningCells/"+p+"/row",schemaPath:"#/properties/spanningCells/items/properties/row/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"};s===null?s=[d]:s.push(d),i++}}if(l.colSpan!==void 0){let f=l.colSpan;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/colSpan",schemaPath:"#/properties/spanningCells/items/properties/colSpan/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}if(typeof f=="number"&&isFinite(f)&&(f<1||isNaN(f))){let d={instancePath:t+"/spanningCells/"+p+"/colSpan",schemaPath:"#/properties/spanningCells/items/properties/colSpan/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};s===null?s=[d]:s.push(d),i++}}if(l.rowSpan!==void 0){let f=l.rowSpan;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/rowSpan",schemaPath:"#/properties/spanningCells/items/properties/rowSpan/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}if(typeof f=="number"&&isFinite(f)&&(f<1||isNaN(f))){let d={instancePath:t+"/spanningCells/"+p+"/rowSpan",schemaPath:"#/properties/spanningCells/items/properties/rowSpan/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};s===null?s=[d]:s.push(d),i++}}if(l.alignment!==void 0&&(Es(l.alignment,{instancePath:t+"/spanningCells/"+p+"/alignment",parentData:l,parentDataProperty:"alignment",rootData:n})||(s=s===null?Es.errors:s.concat(Es.errors),i=s.length)),l.verticalAlignment!==void 0&&(mm(l.verticalAlignment,{instancePath:t+"/spanningCells/"+p+"/verticalAlignment",parentData:l,parentDataProperty:"verticalAlignment",rootData:n})||(s=s===null?mm.errors:s.concat(mm.errors),i=s.length)),l.wrapWord!==void 0&&typeof l.wrapWord!="boolean"){let f={instancePath:t+"/spanningCells/"+p+"/wrapWord",schemaPath:"#/properties/spanningCells/items/properties/wrapWord/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[f]:s.push(f),i++}if(l.truncate!==void 0){let f=l.truncate;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/truncate",schemaPath:"#/properties/spanningCells/items/properties/truncate/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}}if(l.paddingLeft!==void 0){let f=l.paddingLeft;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/paddingLeft",schemaPath:"#/properties/spanningCells/items/properties/paddingLeft/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}}if(l.paddingRight!==void 0){let f=l.paddingRight;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/paddingRight",schemaPath:"#/properties/spanningCells/items/properties/paddingRight/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}}}else{let f={instancePath:t+"/spanningCells/"+p,schemaPath:"#/properties/spanningCells/items/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[f]:s.push(f),i++}}}else{let c={instancePath:t+"/spanningCells",schemaPath:"#/properties/spanningCells/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[c]:s.push(c),i++}}}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return IM.errors=s,i===0}Ab["streamConfig.json"]=PM;function dm(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let a in e)if(!Fb.call(MM.properties,a)){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}e.topBody!==void 0&&(b(e.topBody,{instancePath:t+"/topBody",parentData:e,parentDataProperty:"topBody",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.topJoin!==void 0&&(b(e.topJoin,{instancePath:t+"/topJoin",parentData:e,parentDataProperty:"topJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.topLeft!==void 0&&(b(e.topLeft,{instancePath:t+"/topLeft",parentData:e,parentDataProperty:"topLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.topRight!==void 0&&(b(e.topRight,{instancePath:t+"/topRight",parentData:e,parentDataProperty:"topRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomBody!==void 0&&(b(e.bottomBody,{instancePath:t+"/bottomBody",parentData:e,parentDataProperty:"bottomBody",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomJoin!==void 0&&(b(e.bottomJoin,{instancePath:t+"/bottomJoin",parentData:e,parentDataProperty:"bottomJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomLeft!==void 0&&(b(e.bottomLeft,{instancePath:t+"/bottomLeft",parentData:e,parentDataProperty:"bottomLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomRight!==void 0&&(b(e.bottomRight,{instancePath:t+"/bottomRight",parentData:e,parentDataProperty:"bottomRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bodyLeft!==void 0&&(b(e.bodyLeft,{instancePath:t+"/bodyLeft",parentData:e,parentDataProperty:"bodyLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bodyRight!==void 0&&(b(e.bodyRight,{instancePath:t+"/bodyRight",parentData:e,parentDataProperty:"bodyRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bodyJoin!==void 0&&(b(e.bodyJoin,{instancePath:t+"/bodyJoin",parentData:e,parentDataProperty:"bodyJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.headerJoin!==void 0&&(b(e.headerJoin,{instancePath:t+"/headerJoin",parentData:e,parentDataProperty:"headerJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinBody!==void 0&&(b(e.joinBody,{instancePath:t+"/joinBody",parentData:e,parentDataProperty:"joinBody",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinLeft!==void 0&&(b(e.joinLeft,{instancePath:t+"/joinLeft",parentData:e,parentDataProperty:"joinLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinRight!==void 0&&(b(e.joinRight,{instancePath:t+"/joinRight",parentData:e,parentDataProperty:"joinRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinJoin!==void 0&&(b(e.joinJoin,{instancePath:t+"/joinJoin",parentData:e,parentDataProperty:"joinJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleUp!==void 0&&(b(e.joinMiddleUp,{instancePath:t+"/joinMiddleUp",parentData:e,parentDataProperty:"joinMiddleUp",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleDown!==void 0&&(b(e.joinMiddleDown,{instancePath:t+"/joinMiddleDown",parentData:e,parentDataProperty:"joinMiddleDown",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleLeft!==void 0&&(b(e.joinMiddleLeft,{instancePath:t+"/joinMiddleLeft",parentData:e,parentDataProperty:"joinMiddleLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleRight!==void 0&&(b(e.joinMiddleRight,{instancePath:t+"/joinMiddleRight",parentData:e,parentDataProperty:"joinMiddleRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length))}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return dm.errors=s,i===0}function hm(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0,a=i,c=!1,p=null,l=i;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let h in e)if(!xm.test(h)){let S={instancePath:t,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties"};s===null?s=[S]:s.push(S),i++}for(let h in e)xm.test(h)&&(zt(e[h],{instancePath:t+"/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:e,parentDataProperty:h,rootData:n})||(s=s===null?zt.errors:s.concat(zt.errors),i=s.length))}else{let h={instancePath:t,schemaPath:"#/oneOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[h]:s.push(h),i++}var d=l===i;d&&(c=!0,p=0);let f=i;if(Array.isArray(e)){let h=e.length;for(let S=0;S<h;S++)zt(e[S],{instancePath:t+"/"+S,parentData:e,parentDataProperty:S,rootData:n})||(s=s===null?zt.errors:s.concat(zt.errors),i=s.length)}else{let h={instancePath:t,schemaPath:"#/oneOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[h]:s.push(h),i++}var d=f===i;if(d&&c?(c=!1,p=[p,1]):d&&(c=!0,p=1),c)i=a,s!==null&&(a?s.length=a:s=null);else{let h={instancePath:t,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:p},message:"must match exactly one schema in oneOf"};s===null?s=[h]:s.push(h),i++}return hm.errors=s,i===0}function gm(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let a in e)if(!(a==="alignment"||a==="verticalAlignment"||a==="width"||a==="wrapWord"||a==="truncate"||a==="paddingLeft"||a==="paddingRight")){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}if(e.alignment!==void 0&&(uo(e.alignment,{instancePath:t+"/alignment",parentData:e,parentDataProperty:"alignment",rootData:n})||(s=s===null?uo.errors:s.concat(uo.errors),i=s.length)),e.verticalAlignment!==void 0&&(po(e.verticalAlignment,{instancePath:t+"/verticalAlignment",parentData:e,parentDataProperty:"verticalAlignment",rootData:n})||(s=s===null?po.errors:s.concat(po.errors),i=s.length)),e.width!==void 0){let a=e.width;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/width",schemaPath:"#/properties/width/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}if(typeof a=="number"&&isFinite(a)&&(a<1||isNaN(a))){let c={instancePath:t+"/width",schemaPath:"#/properties/width/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};s===null?s=[c]:s.push(c),i++}}if(e.wrapWord!==void 0&&typeof e.wrapWord!="boolean"){let a={instancePath:t+"/wrapWord",schemaPath:"#/properties/wrapWord/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[a]:s.push(a),i++}if(e.truncate!==void 0){let a=e.truncate;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/truncate",schemaPath:"#/properties/truncate/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}if(e.paddingLeft!==void 0){let a=e.paddingLeft;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/paddingLeft",schemaPath:"#/properties/paddingLeft/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}if(e.paddingRight!==void 0){let a=e.paddingRight;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/paddingRight",schemaPath:"#/properties/paddingRight/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return gm.errors=s,i===0}function PM(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.columnDefault===void 0){let a={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"columnDefault"},message:"must have required property 'columnDefault'"};s===null?s=[a]:s.push(a),i++}if(e.columnCount===void 0){let a={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"columnCount"},message:"must have required property 'columnCount'"};s===null?s=[a]:s.push(a),i++}for(let a in e)if(!(a==="border"||a==="columns"||a==="columnDefault"||a==="columnCount"||a==="drawVerticalLine")){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}if(e.border!==void 0&&(dm(e.border,{instancePath:t+"/border",parentData:e,parentDataProperty:"border",rootData:n})||(s=s===null?dm.errors:s.concat(dm.errors),i=s.length)),e.columns!==void 0&&(hm(e.columns,{instancePath:t+"/columns",parentData:e,parentDataProperty:"columns",rootData:n})||(s=s===null?hm.errors:s.concat(hm.errors),i=s.length)),e.columnDefault!==void 0&&(gm(e.columnDefault,{instancePath:t+"/columnDefault",parentData:e,parentDataProperty:"columnDefault",rootData:n})||(s=s===null?gm.errors:s.concat(gm.errors),i=s.length)),e.columnCount!==void 0){let a=e.columnCount;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/columnCount",schemaPath:"#/properties/columnCount/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}if(typeof a=="number"&&isFinite(a)&&(a<1||isNaN(a))){let c={instancePath:t+"/columnCount",schemaPath:"#/properties/columnCount/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};s===null?s=[c]:s.push(c),i++}}if(e.drawVerticalLine!==void 0&&typeof e.drawVerticalLine!="function"){let a={instancePath:t+"/drawVerticalLine",schemaPath:"#/properties/drawVerticalLine/typeof",keyword:"typeof",params:{},message:'must pass "typeof" keyword validation'};s===null?s=[a]:s.push(a),i++}}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return PM.errors=s,i===0}});var vb=q(ia=>{"use strict";var RW=ia&&ia.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ia,"__esModule",{value:!0});ia.validateConfig=void 0;var FW=RW(NM()),AW=(e,t)=>{let r=FW.default[e];if(!r(t)&&r.errors){let o=r.errors.map(n=>({message:n.message,params:n.params,schemaPath:n.schemaPath}));throw console.log("config",t),console.log("errors",o),new Error("Invalid config.")}};ia.validateConfig=AW});var LM=q(ym=>{"use strict";Object.defineProperty(ym,"__esModule",{value:!0});ym.makeStreamConfig=void 0;var vW=ze(),MW=vb(),kW=(e,t={},r)=>Array.from({length:e}).map((o,n)=>({alignment:"left",paddingLeft:1,paddingRight:1,truncate:Number.POSITIVE_INFINITY,verticalAlignment:"top",wrapWord:!1,...r,...t[n]})),TW=e=>{if((0,MW.validateConfig)("streamConfig.json",e),e.columnDefault.width===void 0)throw new Error("Must provide config.columnDefault.width when creating a stream.");return{drawVerticalLine:()=>!0,...e,border:(0,vW.makeBorderConfig)(e.border),columns:kW(e.columnCount,e.columns,e.columnDefault)}};ym.makeStreamConfig=TW});var Dm=q(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.mapDataUsingRowHeights=Cs.padCellVertically=void 0;var IW=ze(),PW=nm(),bm=e=>new Array(e).fill(""),NW=(e,t,r)=>{let o=t-e.length;return r==="top"?[...e,...bm(o)]:r==="bottom"?[...bm(o),...e]:[...bm(Math.floor(o/2)),...e,...bm(Math.ceil(o/2))]};Cs.padCellVertically=NW;var LW=(e,t,r)=>{let o=e[0].length,n=e.map((s,i)=>{let a=t[i],c=Array.from({length:a},()=>new Array(o).fill(""));return s.forEach((p,l)=>{var f;let d=(f=r.spanningCellManager)===null||f===void 0?void 0:f.getContainingRange({col:l,row:i});if(d){d.extractCellContent(i).forEach((w,A)=>{c[A][l]=w});return}let h=(0,PW.wrapCell)(p,r.columns[l].width,r.columns[l].wrapWord);(0,Cs.padCellVertically)(h,a,r.columns[l].verticalAlignment).forEach((w,A)=>{c[A][l]=w})}),c});return(0,IW.flatten)(n)};Cs.mapDataUsingRowHeights=LW});var Sm=q(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.padTableData=_s.padString=void 0;var qW=(e,t,r)=>" ".repeat(t)+e+" ".repeat(r);_s.padString=qW;var HW=(e,t)=>e.map((r,o)=>r.map((n,s)=>{var i;if((i=t.spanningCellManager)===null||i===void 0?void 0:i.getContainingRange({col:s,row:o},{mapped:!0}))return n;let{paddingLeft:c,paddingRight:p}=t.columns[s];return(0,_s.padString)(n,c,p)}));_s.padTableData=HW});var Mb=q(Em=>{"use strict";Object.defineProperty(Em,"__esModule",{value:!0});Em.stringifyTableData=void 0;var BW=ze(),jW=e=>e.map(t=>t.map(r=>(0,BW.normalizeString)(String(r))));Em.stringifyTableData=jW});var ik=q((nu,aa)=>{"use strict";var UW=30,WW="...",kb=1/0,zW=17976931348623157e292,qM=0/0,KW="[object RegExp]",$W="[object Symbol]",GW=/^\s+|\s+$/g,VW=/\w*$/,JW=/^[-+]0x[0-9a-f]+$/i,YW=/^0b[01]+$/i,ZW=/^0o[0-7]+$/i,Lb="\\ud800-\\udfff",GM="\\u0300-\\u036f\\ufe20-\\ufe23",VM="\\u20d0-\\u20f0",JM="\\ufe0e\\ufe0f",QW="["+Lb+"]",Tb="["+GM+VM+"]",Ib="\\ud83c[\\udffb-\\udfff]",XW="(?:"+Tb+"|"+Ib+")",YM="[^"+Lb+"]",ZM="(?:\\ud83c[\\udde6-\\uddff]){2}",QM="[\\ud800-\\udbff][\\udc00-\\udfff]",XM="\\u200d",ek=XW+"?",tk="["+JM+"]?",e4="(?:"+XM+"(?:"+[YM,ZM,QM].join("|")+")"+tk+ek+")*",t4=tk+ek+e4,r4="(?:"+[YM+Tb+"?",Tb,ZM,QM,QW].join("|")+")",Pb=RegExp(Ib+"(?="+Ib+")|"+r4+t4,"g"),o4=RegExp("["+XM+Lb+GM+VM+JM+"]"),n4=parseInt,rk=typeof global=="object"&&global&&global.Object===Object&&global,s4=typeof self=="object"&&self&&self.Object===Object&&self,i4=rk||s4||Function("return this")(),ok=typeof nu=="object"&&nu&&!nu.nodeType&&nu,HM=ok&&typeof aa=="object"&&aa&&!aa.nodeType&&aa,a4=HM&&HM.exports===ok,BM=a4&&rk.process,jM=function(){try{return BM&&BM.binding("util")}catch{}}(),UM=jM&&jM.isRegExp,c4=p4("length");function u4(e){return e.split("")}function p4(e){return function(t){return t?.[e]}}function l4(e){return function(t){return e(t)}}function qb(e){return o4.test(e)}function f4(e){return qb(e)?d4(e):c4(e)}function m4(e){return qb(e)?h4(e):u4(e)}function d4(e){for(var t=Pb.lastIndex=0;Pb.test(e);)t++;return t}function h4(e){return e.match(Pb)||[]}var g4=Object.prototype,nk=g4.toString,WM=i4.Symbol,zM=WM?WM.prototype:void 0,KM=zM?zM.toString:void 0;function x4(e){return Cm(e)&&nk.call(e)==KW}function y4(e,t,r){var o=-1,n=e.length;t<0&&(t=-t>n?0:n+t),r=r>n?n:r,r<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(n);++o<n;)s[o]=e[o+t];return s}function Nb(e){if(typeof e=="string")return e;if(sk(e))return KM?KM.call(e):"";var t=e+"";return t=="0"&&1/e==-kb?"-0":t}function b4(e,t,r){var o=e.length;return r=r===void 0?o:r,!t&&r>=o?e:y4(e,t,r)}function Cm(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function D4(e){return!!e&&typeof e=="object"}var S4=UM?l4(UM):x4;function sk(e){return typeof e=="symbol"||D4(e)&&nk.call(e)==$W}function E4(e){if(!e)return e===0?e:0;if(e=_4(e),e===kb||e===-kb){var t=e<0?-1:1;return t*zW}return e===e?e:0}function C4(e){var t=E4(e),r=t%1;return t===t?r?t-r:t:0}function _4(e){if(typeof e=="number")return e;if(sk(e))return qM;if(Cm(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Cm(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(GW,"");var r=YW.test(e);return r||ZW.test(e)?n4(e.slice(2),r?2:8):JW.test(e)?qM:+e}function $M(e){return e==null?"":Nb(e)}function O4(e,t){var r=UW,o=WW;if(Cm(t)){var n="separator"in t?t.separator:n;r="length"in t?C4(t.length):r,o="omission"in t?Nb(t.omission):o}e=$M(e);var s=e.length;if(qb(e)){var i=m4(e);s=i.length}if(r>=s)return e;var a=r-f4(o);if(a<1)return o;var c=i?b4(i,0,a).join(""):e.slice(0,a);if(n===void 0)return c+o;if(i&&(a+=c.length-a),S4(n)){if(e.slice(a).search(n)){var p,l=c;for(n.global||(n=RegExp(n.source,$M(VW.exec(n))+"g")),n.lastIndex=0;p=n.exec(l);)var f=p.index;c=c.slice(0,f===void 0?a:f)}}else if(e.indexOf(Nb(n),a)!=a){var d=c.lastIndexOf(n);d>-1&&(c=c.slice(0,d))}return c+o}aa.exports=O4});var _m=q(Bo=>{"use strict";var w4=Bo&&Bo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bo,"__esModule",{value:!0});Bo.truncateTableData=Bo.truncateString=void 0;var R4=w4(ik()),F4=(e,t)=>(0,R4.default)(e,{length:t,omission:"\u2026"});Bo.truncateString=F4;var A4=(e,t)=>e.map(r=>r.map((o,n)=>(0,Bo.truncateString)(o,t[n])));Bo.truncateTableData=A4});var uk=q(wm=>{"use strict";Object.defineProperty(wm,"__esModule",{value:!0});wm.createStream=void 0;var v4=Cb(),M4=_b(),Om=Ob(),ak=wb(),k4=LM(),T4=Dm(),I4=Sm(),P4=Mb(),N4=_m(),L4=ze(),ck=(e,t)=>{let r=(0,P4.stringifyTableData)(e);r=(0,N4.truncateTableData)(r,(0,L4.extractTruncates)(t));let o=(0,M4.calculateRowHeights)(r,t);return r=(0,T4.mapDataUsingRowHeights)(r,o,t),r=(0,v4.alignTableData)(r,t),r=(0,I4.padTableData)(r,t),r},q4=(e,t,r)=>{let n=ck([e],r).map(i=>(0,ak.drawRow)(i,r)).join(""),s;s="",s+=(0,Om.drawBorderTop)(t,r),s+=n,s+=(0,Om.drawBorderBottom)(t,r),s=s.trimEnd(),process.stdout.write(s)},H4=(e,t,r)=>{let n=ck([e],r).map(a=>(0,ak.drawRow)(a,r)).join(""),s="",i=(0,Om.drawBorderBottom)(t,r);i!==`
`&&(s="\r\x1B[K"),s+=(0,Om.drawBorderJoin)(t,r),s+=n,s+=i,s=s.trimEnd(),process.stdout.write(s)},B4=e=>{let t=(0,k4.makeStreamConfig)(e),r=Object.values(t.columns).map(n=>n.width+n.paddingLeft+n.paddingRight),o=!0;return{write:n=>{if(n.length!==t.columnCount)throw new Error("Row cell count does not match the config.columnCount.");o?(o=!1,q4(n,r,t)):H4(n,r,t)}}};wm.createStream=B4});var pk=q(Rm=>{"use strict";Object.defineProperty(Rm,"__esModule",{value:!0});Rm.calculateOutputColumnWidths=void 0;var j4=e=>e.columns.map(t=>t.paddingLeft+t.width+t.paddingRight);Rm.calculateOutputColumnWidths=j4});var lk=q(Fm=>{"use strict";Object.defineProperty(Fm,"__esModule",{value:!0});Fm.drawTable=void 0;var U4=Ob(),W4=cm(),z4=wb(),K4=ze(),$4=(e,t,r,o)=>{let{drawHorizontalLine:n,singleLine:s}=o,i=(0,K4.groupBySizes)(e,r).map((a,c)=>a.map(p=>(0,z4.drawRow)(p,{...o,rowIndex:c})).join(""));return(0,W4.drawContent)({contents:i,drawSeparator:(a,c)=>(a===0||a===c||!s)&&n(a,c),elementType:"row",rowIndex:-1,separatorGetter:(0,U4.createTableBorderGetter)(t,{...o,rowCount:i.length}),spanningCellManager:o.spanningCellManager})};Fm.drawTable=$4});var fk=q(Am=>{"use strict";Object.defineProperty(Am,"__esModule",{value:!0});Am.injectHeaderConfig=void 0;var G4=(e,t)=>{var r;let o=(r=t.spanningCells)!==null&&r!==void 0?r:[],n=t.header,s=[...e];if(n){o=o.map(({row:c,...p})=>({...p,row:c+1}));let{content:i,...a}=n;o.unshift({alignment:"center",col:0,colSpan:e[0].length,paddingLeft:1,paddingRight:1,row:0,wrapWord:!1,...a}),s.unshift([i,...Array.from({length:e[0].length-1}).fill("")])}return[s,o]};Am.injectHeaderConfig=G4});var dk=q(jo=>{"use strict";var V4=jo&&jo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jo,"__esModule",{value:!0});jo.calculateMaximumColumnWidths=jo.calculateMaximumCellWidth=void 0;var J4=V4(Xi()),mk=ze(),Y4=e=>Math.max(...e.split(`
`).map(J4.default));jo.calculateMaximumCellWidth=Y4;var Z4=(e,t=[])=>{let r=new Array(e[0].length).fill(0),o=t.map(mk.calculateRangeCoordinate),n=(s,i)=>o.some(a=>(0,mk.isCellInRange)({col:i,row:s},a));return e.forEach((s,i)=>{s.forEach((a,c)=>{n(i,c)||(r[c]=Math.max(r[c],(0,jo.calculateMaximumCellWidth)(a)))})}),r};jo.calculateMaximumColumnWidths=Z4});var gk=q(gn=>{"use strict";var Q4=gn&&gn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gn,"__esModule",{value:!0});gn.alignVerticalRangeContent=gn.wrapRangeContent=void 0;var X4=Q4(Xi()),e9=Eb(),t9=Dm(),r9=Sm(),o9=_m(),hk=ze(),n9=nm(),s9=(e,t,r)=>{let{topLeft:o,paddingRight:n,paddingLeft:s,truncate:i,wrapWord:a,alignment:c}=e,p=r.rows[o.row][o.col],l=t-s-n;return(0,n9.wrapCell)((0,o9.truncateString)(p,i),l,a).map(f=>{let d=(0,e9.alignString)(f,l,c);return(0,r9.padString)(d,s,n)})};gn.wrapRangeContent=s9;var i9=(e,t,r)=>{let{rows:o,drawHorizontalLine:n,rowHeights:s}=r,{topLeft:i,bottomRight:a,verticalAlignment:c}=e;if(s.length===0)return[];let p=(0,hk.sumArray)(s.slice(i.row,a.row+1)),l=a.row-i.row,f=(0,hk.sequence)(i.row+1,a.row).filter(h=>!n(h,o.length)).length,d=p+l-f;return(0,t9.padCellVertically)(t,d,c).map(h=>h.length===0?" ".repeat((0,X4.default)(t[0])):h)};gn.alignVerticalRangeContent=i9});var xk=q(vm=>{"use strict";Object.defineProperty(vm,"__esModule",{value:!0});vm.calculateSpanningCellWidth=void 0;var Hb=ze(),a9=(e,t)=>{let{columnsConfig:r,drawVerticalLine:o}=t,{topLeft:n,bottomRight:s}=e,i=(0,Hb.sumArray)(r.slice(n.col,s.col+1).map(({width:l})=>l)),a=n.col===s.col?r[n.col].paddingRight+r[s.col].paddingLeft:(0,Hb.sumArray)(r.slice(n.col,s.col+1).map(({paddingLeft:l,paddingRight:f})=>l+f)),c=s.col-n.col,p=(0,Hb.sequence)(n.col+1,s.col).filter(l=>!o(l,r.length)).length;return i+a+c-p};vm.calculateSpanningCellWidth=a9});var yk=q(Mm=>{"use strict";Object.defineProperty(Mm,"__esModule",{value:!0});Mm.makeRangeConfig=void 0;var c9=ze(),u9=(e,t)=>{var r;let{topLeft:o,bottomRight:n}=(0,c9.calculateRangeCoordinate)(e);return{...{...t[o.col],...e,paddingRight:(r=e.paddingRight)!==null&&r!==void 0?r:t[n.col].paddingRight},bottomRight:n,topLeft:o}};Mm.makeRangeConfig=u9});var Sk=q(km=>{"use strict";Object.defineProperty(km,"__esModule",{value:!0});km.createSpanningCellManager=void 0;var bk=gk(),p9=xk(),l9=yk(),ca=ze(),Bb=(e,t)=>t.find(r=>(0,ca.isCellInRange)(e,r)),Dk=(e,t)=>{let r=(0,p9.calculateSpanningCellWidth)(e,t),o=(0,bk.wrapRangeContent)(e,r,t),n=(0,bk.alignVerticalRangeContent)(e,o,t);return{...e,extractBorderContent:a=>{let{topLeft:c}=e,p=(0,ca.sumArray)(t.rowHeights.slice(c.row,a))+(a-c.row-1);return n[p]},extractCellContent:a=>{let{topLeft:c}=e,{drawHorizontalLine:p,rowHeights:l}=t,f=a-c.row,d=(0,ca.sequence)(c.row+1,a).filter(S=>!p?.(S,l.length)).length,h=(0,ca.sumArray)(l.slice(c.row,a))+f-d;return n.slice(h,h+l[a])},height:o.length,width:r}},f9=(e,t,r)=>{let o=Bb(e,r),n=Bb(t,r);return o&&n?(0,ca.areCellEqual)(o.topLeft,n.topLeft):!1},m9=e=>{let{row:t,col:r}=e.topLeft;return`${t}/${r}`},d9=e=>{let{spanningCellConfigs:t,columnsConfig:r}=e,o=t.map(i=>(0,l9.makeRangeConfig)(i,r)),n={},s=[];return{getContainingRange:(i,a)=>{var c;let p=a?.mapped?(0,ca.findOriginalRowIndex)(s,i.row):i.row,l=Bb({...i,row:p},o);if(!l)return;if(s.length===0)return Dk(l,{...e,rowHeights:s});let f=m9(l);return(c=n[f])!==null&&c!==void 0||(n[f]=Dk(l,{...e,rowHeights:s})),n[f]},inSameRange:(i,a)=>f9(i,a,o),rowHeights:s,setRowHeights:i=>{s=i}}};km.createSpanningCellManager=d9});var Ek=q(Im=>{"use strict";Object.defineProperty(Im,"__esModule",{value:!0});Im.validateSpanningCellConfig=void 0;var jb=ze(),Tm=(e,t,r)=>e<=r&&r<=t,h9=(e,t)=>{let[r,o]=[e.length,e[0].length];t.forEach((i,a)=>{let{colSpan:c,rowSpan:p}=i;if(c===void 0&&p===void 0)throw new Error(`Expect at least colSpan or rowSpan is provided in config.spanningCells[${a}]`);if(c!==void 0&&c<1)throw new Error(`Expect colSpan is not equal zero, instead got: ${c} in config.spanningCells[${a}]`);if(p!==void 0&&p<1)throw new Error(`Expect rowSpan is not equal zero, instead got: ${p} in config.spanningCells[${a}]`)});let n=t.map(jb.calculateRangeCoordinate);n.forEach(({topLeft:i,bottomRight:a},c)=>{if(!Tm(0,o-1,i.col)||!Tm(0,r-1,i.row)||!Tm(0,o-1,a.col)||!Tm(0,r-1,a.row))throw new Error(`Some cells in config.spanningCells[${c}] are out of the table`)});let s=Array.from({length:r},()=>Array.from({length:o}));n.forEach(({topLeft:i,bottomRight:a},c)=>{(0,jb.sequence)(i.row,a.row).forEach(p=>{(0,jb.sequence)(i.col,a.col).forEach(l=>{if(s[p][l]!==void 0)throw new Error(`Spanning cells in config.spanningCells[${s[p][l]}] and config.spanningCells[${c}] are overlap each other`);s[p][l]=c})})})};Im.validateSpanningCellConfig=h9});var Ck=q(Pm=>{"use strict";Object.defineProperty(Pm,"__esModule",{value:!0});Pm.makeTableConfig=void 0;var g9=dk(),x9=Sk(),y9=ze(),b9=vb(),D9=Ek(),S9=(e,t,r,o)=>{let n=(0,g9.calculateMaximumColumnWidths)(e,o);return e[0].map((s,i)=>({alignment:"left",paddingLeft:1,paddingRight:1,truncate:Number.POSITIVE_INFINITY,verticalAlignment:"top",width:n[i],wrapWord:!1,...r,...t?.[i]}))},E9=(e,t={},r)=>{var o,n,s,i,a;(0,b9.validateConfig)("config.json",t),(0,D9.validateSpanningCellConfig)(e,(o=t.spanningCells)!==null&&o!==void 0?o:[]);let c=(n=r??t.spanningCells)!==null&&n!==void 0?n:[],p=S9(e,t.columns,t.columnDefault,c),l=(s=t.drawVerticalLine)!==null&&s!==void 0?s:()=>!0,f=(i=t.drawHorizontalLine)!==null&&i!==void 0?i:()=>!0;return{...t,border:(0,y9.makeBorderConfig)(t.border),columns:p,drawHorizontalLine:f,drawVerticalLine:l,singleLine:(a=t.singleLine)!==null&&a!==void 0?a:!1,spanningCellManager:(0,x9.createSpanningCellManager)({columnsConfig:p,drawHorizontalLine:f,drawVerticalLine:l,rows:e,spanningCellConfigs:c})}};Pm.makeTableConfig=E9});var _k=q(Nm=>{"use strict";Object.defineProperty(Nm,"__esModule",{value:!0});Nm.validateTableData=void 0;var C9=ze(),_9=e=>{if(!Array.isArray(e))throw new TypeError("Table data must be an array.");if(e.length===0)throw new Error("Table must define at least one row.");if(e[0].length===0)throw new Error("Table must define at least one column.");let t=e[0].length;for(let r of e){if(!Array.isArray(r))throw new TypeError("Table row data must be an array.");if(r.length!==t)throw new Error("Table must have a consistent number of cells.");for(let o of r)if(/[\u0001-\u0006\u0008\u0009\u000B-\u001A]/.test((0,C9.normalizeString)(String(o))))throw new Error("Table data must not contain control characters.")}};Nm.validateTableData=_9});var Ok=q(Lm=>{"use strict";Object.defineProperty(Lm,"__esModule",{value:!0});Lm.table=void 0;var O9=Cb(),w9=pk(),R9=_b(),F9=lk(),A9=fk(),v9=Ck(),M9=Dm(),k9=Sm(),T9=Mb(),I9=_m(),P9=ze(),N9=_k(),L9=(e,t={})=>{(0,N9.validateTableData)(e);let r=(0,T9.stringifyTableData)(e),[o,n]=(0,A9.injectHeaderConfig)(r,t),s=(0,v9.makeTableConfig)(o,t,n);r=(0,I9.truncateTableData)(o,(0,P9.extractTruncates)(s));let i=(0,R9.calculateRowHeights)(r,s);s.spanningCellManager.setRowHeights(i),r=(0,M9.mapDataUsingRowHeights)(r,i,s),r=(0,O9.alignTableData)(r,s),r=(0,k9.padTableData)(r,s);let a=(0,w9.calculateOutputColumnWidths)(s);return(0,F9.drawTable)(r,a,i,s)};Lm.table=L9});var Rk=q(wk=>{"use strict";Object.defineProperty(wk,"__esModule",{value:!0})});var Fk=q(Kt=>{"use strict";var q9=Kt&&Kt.__createBinding||(Object.create?function(e,t,r,o){o===void 0&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){o===void 0&&(o=r),e[o]=t[r]}),H9=Kt&&Kt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&q9(t,e,r)};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.getBorderCharacters=Kt.createStream=Kt.table=void 0;var B9=uk();Object.defineProperty(Kt,"createStream",{enumerable:!0,get:function(){return B9.createStream}});var j9=bb();Object.defineProperty(Kt,"getBorderCharacters",{enumerable:!0,get:function(){return j9.getBorderCharacters}});var U9=Ok();Object.defineProperty(Kt,"table",{enumerable:!0,get:function(){return U9.table}});H9(Rk(),Kt)});var Wb=e=>typeof e=="function",u=function(e,t){if(typeof e=="function")return function(){return e(arguments)?t.apply(this,arguments):r=>t(r,...arguments)};switch(e){case 0:return t;case 1:return function(r){return arguments.length>=1?t(r):function(){return t(r)}};case 2:return function(r,o){return arguments.length>=2?t(r,o):function(n){return t(n,r)}};case 3:return function(r,o,n){return arguments.length>=3?t(r,o,n):function(s){return t(s,r,o)}};case 4:return function(r,o,n,s){return arguments.length>=4?t(r,o,n,s):function(i){return t(i,r,o,n)}};case 5:return function(r,o,n,s,i){return arguments.length>=5?t(r,o,n,s,i):function(a){return t(a,r,o,n,s)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);let r=arguments;return function(o){return t(o,...r)}}}};var P=e=>e;var ws=e=>()=>e,Ir=ws(!0),Gt=ws(!1),Hm=ws(null),au=ws(void 0),Rs=au;function Qe(e,t,r,o,n,s,i,a,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return r(t(e));case 4:return o(r(t(e)));case 5:return n(o(r(t(e))));case 6:return s(n(o(r(t(e)))));case 7:return i(s(n(o(r(t(e))))));case 8:return a(i(s(n(o(r(t(e)))))));case 9:return c(a(i(s(n(o(r(t(e))))))));default:{let p=arguments[0];for(let l=1;l<arguments.length;l++)p=arguments[l](p);return p}}}var Fs=e=>(t,r)=>t===r||e(t,r);var zb=u(2,(e,t)=>Fs((r,o)=>e(t(r),t(o))));var Kb=e=>Fs((t,r)=>{if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(!e(t[o],r[o]))return!1;return!0});var As=e=>(t,r)=>t===r?0:e(t,r);var $b=As((e,t)=>e<t?-1:1);var Gb=e=>As((t,r)=>e(r,t));var ua=u(2,(e,t)=>As((r,o)=>e(t(r),t(o))));var Hk=e=>As((t,r)=>{let o=Math.min(t.length,r.length),n=0;for(let s of e){if(n>=o)break;let i=s(t[n],r[n]);if(i!==0)return i;n++}return 0});var Vb=(...e)=>Hk(e);var Bm=e=>u(2,(t,r)=>e(t,r)===1);var jm=e=>u(2,(t,r)=>t===r||e(t,r)>-1?t:r);var pa=e=>typeof e=="string",yn=e=>typeof e=="number",pu=e=>typeof e=="boolean",vs=e=>typeof e=="bigint",Jb=e=>typeof e=="symbol",Yb=Wb,la=e=>e===void 0;var Zb=e=>e===null;var Qb=e=>!1;var de=e=>typeof e=="object"&&e!=null||Yb(e);var bn=e=>e==null,Xb=e=>e!=null;var lu=e=>e instanceof Date,Vt=e=>de(e)&&Symbol.iterator in e,fa=e=>de(e)&&!Array.isArray(e);var eD=e=>!e;var tD,rD=Symbol.for("@effect/data/Gen/GenKind"),Um=class{constructor(t){this.value=t,this[tD]=rD}get _F(){return P}get _R(){return t=>t}get _O(){return t=>t}get _E(){return t=>t}[(tD=rD,Symbol.iterator)](){return new Wm(this)}},Wm=class e{constructor(t){this.self=t,this.called=!1}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new e(this.self)}};var oD=()=>function(){let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return new Um(e)};var Uk=335903614,Wk=4150755663,zk=1481765933,Kk=1284865837,$k=9007199254740992,Gk=134217728,Ms=class{constructor(t,r,o,n){return bn(r)&&bn(t)?(r=Math.random()*4294967295>>>0,t=0):bn(r)&&(r=t,t=0),bn(n)&&bn(o)?(n=this._state?this._state[3]:Wk,o=this._state?this._state[2]:Uk):bn(n)&&(n=o,o=0),this._state=new Int32Array([0,0,o>>>0,((n||0)|1)>>>0]),this._next(),nD(this._state,this._state[0],this._state[1],t>>>0,r>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(t){this._state[0]=t[0],this._state[1]=t[1],this._state[2]=t[2],this._state[3]=t[3]|1}integer(t){if(!t)return this._next();if(t=t>>>0,!(t&t-1))return this._next()&t-1;let r=0,o=(-t>>>0)%t>>>0;for(r=this._next();r<o;r=this._next());return r%t}number(){let t=(this._next()&67108863)*1,r=(this._next()&134217727)*1;return(t*Gk+r)/$k}_next(){let t=this._state[0]>>>0,r=this._state[1]>>>0;Vk(this._state,t,r,zk,Kk),nD(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let o=t>>>18,n=(r>>>18|t<<14)>>>0;o=(o^t)>>>0,n=(n^r)>>>0;let s=(n>>>27|o<<5)>>>0,i=t>>>27,a=(-i>>>0&31)>>>0;return(s>>>i|s<<a)>>>0}};function Vk(e,t,r,o,n){let s=(r>>>16)*(n&65535)>>>0,i=(r&65535)*(n>>>16)>>>0,a=(r&65535)*(n&65535)>>>0,c=(r>>>16)*(n>>>16)+((i>>>16)+(s>>>16))>>>0;i=i<<16>>>0,a=a+i>>>0,a>>>0<i>>>0&&(c=c+1>>>0),s=s<<16>>>0,a=a+s>>>0,a>>>0<s>>>0&&(c=c+1>>>0),c=c+Math.imul(r,o)>>>0,c=c+Math.imul(t,n)>>>0,e[0]=c,e[1]=a}function nD(e,t,r,o,n){let s=t+o>>>0,i=r+n>>>0;i>>>0<r>>>0&&(s=s+1|0),e[0]=s,e[1]=i}var Km=Symbol.for("@effect/data/Global/globalStoreId");Km in globalThis||(globalThis[Km]=new Map);var zm=globalThis[Km],V=(e,t)=>(zm.has(e)||zm.set(e,t()),zm.get(e));var $m=V(Symbol.for("@effect/data/Hash/randomHashCache"),()=>new WeakMap),Zk=V(Symbol.for("@effect/data/Hash/pcgr"),()=>new Ms),R=Symbol.for("@effect/data/Hash"),E=e=>{switch(typeof e){case"number":return mu(e);case"bigint":return qe(e.toString(10));case"boolean":return qe(String(e));case"symbol":return qe(String(e));case"string":return qe(e);case"undefined":return qe("undefined");case"function":case"object":return e===null?qe("null"):Qk(e)?e[R]():Uo(e);default:throw new Error("Bug in Equal.hash")}},Uo=e=>($m.has(e)||$m.set(e,mu(Zk.integer(Number.MAX_SAFE_INTEGER))),$m.get(e)),k=e=>t=>t*53^e,fu=e=>e&3221225471|e>>>1&1073741824,Qk=e=>typeof e=="object"&&e!==null&&R in e,mu=e=>{if(e!==e||e===1/0)return 0;let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return fu(e)},qe=e=>{let t=5381,r=e.length;for(;r;)t=t*33^e.charCodeAt(--r);return fu(t)},Xk=(e,t)=>{let r=12289;for(let o=0;o<t.length;o++)r^=k(E(e[t[o]]))(qe(t[o]));return fu(r)},da=e=>Xk(e,Object.keys(e)),mo=e=>{let t=6151;for(let r=0;r<e.length;r++)t=k(E(e[r]))(t);return fu(t)};var F=Symbol.for("@effect/data/Equal");function O(){return arguments.length===1?e=>sD(e,arguments[0]):sD(arguments[0],arguments[1])}function sD(e,t){if(e===t)return!0;let r=typeof e;return r!==typeof t?!1:(r==="object"||r==="function")&&e!==null&&t!==null&&ks(e)&&ks(t)?E(e)===E(t)&&e[F](t):!1}var ks=e=>typeof e=="object"&&e!==null&&F in e,du=()=>(e,t)=>E(e)===E(t)&&O(e,t);var Wo=Symbol.for("@effect/io/Effect"),zo={_R:e=>e,_E:e=>e,_A:e=>e};var C=(e,t)=>{switch(t.length){case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let r=e;for(let o=0,n=t.length;o<n;o++)r=t[o](r);return r}}};var iD,aD,hu=Symbol.for("@effect/data/Option"),Gm=class{[(iD=Wo,F)](t){return cD(t)&&Jm(t)&&O(t.i0,this.i0)}[R](){return E(this.i0)}toString(){return`Some(${String(this.i0)})`}toJSON(){return{_tag:this._tag,value:this.i0}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}get[hu](){return{_A:t=>t}}get value(){return this.i0}constructor(t){this.i0=t,this._tag="Some",this._id=hu,this.i1=void 0,this.i2=void 0,this[iD]=zo}pipe(){return C(this,arguments)}},Vm=class{constructor(){this._tag="None",this._id=hu,this.i0=void 0,this.i1=void 0,this.i2=void 0,this[aD]=zo}[(aD=Wo,F)](t){return cD(t)&&gu(t)}[R](){return E(this._tag)}toString(){return"None()"}toJSON(){return{_tag:this._tag}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}get[hu](){return{_A:t=>t}}pipe(){return C(this,arguments)}},cD=e=>typeof e=="object"&&e!=null&&"_tag"in e&&(e._tag==="None"||e._tag==="Some")&&ks(e),gu=e=>e._tag==="None",Jm=e=>e._tag==="Some",Ts=new Vm,Is=e=>new Gm(e);var pD,lD,xu=Symbol.for("@effect/data/Either"),Ym=class{[(pD=Wo,F)](t){return fD(t)&&yu(t)&&O(t.i0,this.i0)}[R](){return E(this.i0)}get right(){return this.i0}constructor(t){this.i0=t,this._tag="Right",this._id=xu,this.i1=void 0,this.i2=void 0,this[pD]=zo}get[xu](){return{_E:t=>t,_A:t=>t}}toString(){return`right(${String(this.i0)})`}toJSON(){return{_tag:this._tag,right:this.i0}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},Zm=class{[(lD=Wo,F)](t){return fD(t)&&Ps(t)&&O(t.i0,this.i0)}[R](){return E(this.i0)}get[xu](){return{_E:t=>t,_A:t=>t}}get left(){return this.i0}constructor(t){this.i0=t,this._tag="Left",this._id=xu,this.i1=void 0,this.i2=void 0,this[lD]=zo}toString(){return`left(${String(this.i0)})`}toJSON(){return{_tag:this._tag,left:this.i0}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},fD=e=>typeof e=="object"&&e!=null&&"_tag"in e&&(e._tag==="Left"||e._tag==="Right")&&ks(e),Ps=e=>e._tag==="Left",yu=e=>e._tag==="Right",bu=e=>new Zm(e),Du=e=>new Ym(e),Qm=e=>yu(e)?Ts:Is(e.left),Xm=e=>Ps(e)?Ts:Is(e.right);var eT=Symbol.for("@effect/data/Either"),H=Du,z=bu;var ha=e=>de(e)&&"_id"in e&&e._id===eT,Re=Ps,Pr=yu;var ga=u(2,(e,{onLeft:t,onRight:r})=>Re(e)?t(e.left):r(e.right)),Su=ga({onLeft:P,onRight:P});var dD=u(2,(e,t)=>e+t),hD=u(2,(e,t)=>e*t),gD=u(2,(e,t)=>e-t),xD=u(2,(e,t)=>e/t);var vt=$b;var yD=Symbol.for("@effect/data/Option"),g=()=>Ts,x=Is,ed=e=>de(e)&&"_id"in e&&e._id===yD,B=gu,N=Jm,He=u(2,(e,{onNone:t,onSome:r})=>B(e)?t():r(e.value)),nT=e=>t=>N(e(t)),sT=e=>{for(let t of e)return x(t);return g()},bD=Xm,iT=Qm,J=u(2,(e,t)=>B(e)?t():e.value),Dn=u(2,(e,t)=>B(e)?t():e),aT=u(2,(e,t)=>B(e)?te(t(),Du):te(e,bu)),cT=e=>{let t=g();for(t of e)if(N(t))return t;return t},Xe=e=>e==null?g():x(e),uT=e=>(...t)=>Xe(e(...t)),td=J(Hm),Ke=J(au),pT=e=>(...t)=>{try{return x(e(...t))}catch{return g()}},DD=u(2,(e,t)=>{if(N(e))return e.value;throw t()}),rd=DD(()=>new Error("getOrThrow called on a None")),te=u(2,(e,t)=>B(e)?g():x(t(e.value))),SD=u(2,(e,t)=>te(e,()=>t)),lT=SD(void 0),fT=x(void 0),mr=u(2,(e,t)=>B(e)?g():t(e.value)),mT=u(2,(e,t)=>B(e)?g():Xe(t(e.value))),od=mr(P),dT=u(2,(e,t)=>mr(e,()=>t)),hT=u(2,(e,t)=>r=>mr(e(r),t)),gT=u(2,(e,t)=>ED(e,()=>t)),ED=u(2,(e,t)=>mr(e,r=>te(t(r),()=>r))),CD=(e,t)=>N(e)&&N(t)?x([e.value,t.value]):g(),xT=(e,t)=>{if(B(e))return g();let r=[e.value];for(let o of t){if(B(o))return g();r.push(o.value)}return x(r)},_D=e=>{if(Symbol.iterator in e){let r=[];for(let o of e){if(B(o))return g();r.push(o.value)}return x(r)}let t={};for(let r of Object.keys(e)){let o=e[r];if(B(o))return g();t[r]=o.value}return x(t)},nd=u(3,(e,t,r)=>te(CD(e,t),([o,n])=>r(o,n))),yT=u(2,(e,t)=>nd(e,t,(r,o)=>r(o))),bT=u(3,(e,t,r)=>{let o=t;for(let n of e)N(n)&&(o=r(o,n.value));return o}),OD=e=>B(e)?[]:[e.value],DT=u(2,(e,t)=>{if(B(e))return[g(),g()];let r=t(e.value);return Ps(r)?[x(r.left),g()]:[g(),x(r.right)]}),wD=u(2,(e,t)=>B(e)?g():t(e.value)),ST=u(2,(e,t)=>wD(e,r=>t(r)?Is(r):Ts)),ET=e=>Fs((t,r)=>t===r||(B(t)?B(r):B(r)?!1:e(t.value,r.value))),CT=e=>As((t,r)=>N(t)?N(r)?e(t.value,r.value):1:-1),ya=e=>u(2,(t,r)=>nd(t,r,e)),RD=e=>t=>e(t)?x(t):g(),FD=e=>u(2,(t,r)=>B(t)?!1:e(t.value,r)),_T=du(),sd=FD(_T),OT=u(2,(e,t)=>B(e)?!1:t(e.value)),wT=ya(dD),RT=ya(hD),FT=ya(gD),AT=ya(xD),vT=e=>{let t=0;for(let r of e)N(r)&&(t+=r.value);return t},MT=e=>{let t=1;for(let r of e)if(N(r)){let o=r.value;if(o===0)return 0;t*=o}return t},kT=u(2,(e,t)=>te(e,r=>({[t]:r}))),TT=u(3,(e,t,r)=>te(e,o=>Object.assign({},o,{[t]:r(o)})));var IT=u(3,(e,t,r)=>mr(e,o=>te(r(o),n=>Object.assign({},o,{[t]:n})))),PT=x({}),NT=oD(),LT=e=>{let t=e(NT),r=t.next();if(r.done)return x(void 0);{let o=r.value.value;if(B(o))return o;for(;!r.done;)if(r=t.next(o.value),!r.done&&(o=r.value.value,B(o)))return o;return x(r.value)}};var id=e=>e.length>0;var ad=(e,t)=>{let r=Math.max(1,Math.floor(e)),o=[t(0)];for(let n=1;n<r;n++)o.push(t(n));return o};var re=e=>Array.isArray(e)?e:Array.from(e);var dr=u(2,(e,t)=>[t,...e]);var AD=u(2,(e,t)=>[...e,t]);var HT=e=>e.length===0,cd=HT,Eu=id,Nr=id;var vD=(e,t)=>e<0||e>=t.length;var BT=u(2,(e,t)=>{let r=Math.floor(t);return vD(r,e)?g():x(e[r])}),ud=u(2,(e,t)=>{let r=Math.floor(t);if(vD(r,e))throw new Error(`Index ${r} out of bounds`);return e[r]});var Cu=BT(0),Fe=ud(0),MD=e=>Nr(e)?x(jT(e)):g(),jT=e=>e[e.length-1];var Jt=e=>e.slice(1);var pd=e=>Array.from(e).reverse();var Sn=u(2,(e,t)=>{let r=Array.from(e);return r.sort(t),r});var ld=u(2,(e,t)=>kD(e,t,(r,o)=>[r,o])),kD=u(3,(e,t,r)=>{let o=re(e),n=re(t);return Nr(o)&&Nr(n)?UT(n,r)(o):[]});var UT=u(3,(e,t,r)=>{let o=[r(Fe(e),Fe(t))],n=Math.min(e.length,t.length);for(let s=1;s<n;s++)o[s]=r(e[s],t[s]);return o});var WT=u(2,(e,t)=>{let r=[Fe(e)],o=Jt(e);for(let n of o)r.every(s=>!t(n,s))&&r.push(n);return r});var En=()=>[],Mt=e=>[e],ho=u(2,(e,t)=>e.map(t)),Ns=ho,_u=u(2,(e,t)=>{if(cd(e))return[];let r=[];for(let o=0;o<e.length;o++)r.push(...t(e[o],o));return r});var Ou=_u(P);var ba=u(2,(e,t)=>{let r=re(e),o=[];for(let n=0;n<r.length;n++){let s=t(r[n],n);N(s)&&o.push(s.value)}return o});var TD=ba(P);var Dt=u(3,(e,t,r)=>re(e).reduce((o,n,s)=>r(o,n,s),t)),wu=u(3,(e,t,r)=>re(e).reduceRight((o,n,s)=>r(o,n,s),t));var fd=(e,t)=>{let r=[],o=e,n;for(;N(n=t(o));){let[s,i]=n.value;r.push(s),o=i}return r};var ID=Kb;var zT=u(2,(e,t)=>{let r=re(e);return Nr(r)?WT(t)(r):[]}),PD=zT(du());var go=u(2,(e,t)=>re(e).join(t));var ND,md=Symbol.for("@effect/data/Context/Tag"),Ru=class{[(ND=Wo,F)](t){return this===t}[R](){return Uo(this)}get[md](){return{_S:t=>t,_I:t=>t}}constructor(t){this._tag="Tag",this.i0=void 0,this.i1=void 0,this.i2=void 0,this[ND]=zo;let r=Error.stackTraceLimit;if(Error.stackTraceLimit=3,this.creationError=new Error,Error.stackTraceLimit=r,typeof t<"u")return this.i0=t,V(t,()=>this)}get stack(){return this.creationError.stack}toString(){return JSON.stringify(this)}toJSON(){return{_tag:"Tag",identifier:this.i0,stack:this.stack}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}of(t){return t}context(t){return gd(this,t)}},dd=Symbol.for("@effect/data/Context"),hr=class{[F](t){if(hd(t)&&this.unsafeMap.size===t.unsafeMap.size){for(let r of this.unsafeMap.keys())if(!t.unsafeMap.has(r)||!O(this.unsafeMap.get(r),t.unsafeMap.get(r)))return!1;return!0}return!1}[R](){return mu(this.unsafeMap.size)}constructor(t){this.unsafeMap=t,this._id=dd,this._S=r=>r}pipe(){return C(this,arguments)}},KT=e=>{let t=new Error(`Service not found${e.i0?`: ${String(e.i0)}`:""}`);if(e.stack){let r=e.stack.split(`
`);if(r.length>2){let o=r[3].match(/at (.*)/);o&&(t.message=t.message+` (defined at ${o[1]})`)}}if(t.stack){let r=t.stack.split(`
`);r.splice(1,3),t.stack=r.join(`
`)}return t},hd=e=>typeof e=="object"&&e!==null&&"_id"in e&&e._id===dd,LD=e=>typeof e=="object"&&e!==null&&md in e,qD=()=>new hr(new Map),gd=(e,t)=>new hr(new Map([[e,t]])),HD=u(3,(e,t,r)=>{let o=new Map(e.unsafeMap);return o.set(t,r),new hr(o)}),xd=u(2,(e,t)=>{if(!e.unsafeMap.has(t))throw KT(t);return e.unsafeMap.get(t)}),BD=xd,jD=u(2,(e,t)=>e.unsafeMap.has(t)?x(e.unsafeMap.get(t)):g()),UD=u(2,(e,t)=>{let r=new Map(e.unsafeMap);for(let[o,n]of t.unsafeMap)r.set(o,n);return new hr(r)}),WD=(...e)=>t=>{let r=new Set(e),o=new Map;for(let[n,s]of t.unsafeMap.entries())r.has(n)&&o.set(n,s);return new hr(o)},zD=(...e)=>t=>{let r=new Map(t.unsafeMap);for(let o of e)r.delete(o);return new hr(r)};var et=e=>new Ru(e);var GT=hd,KD=LD,kt=qD,Fu=gd,Te=HD,Lr=BD,Ls=xd,yd=jD,Cn=UD,VT=WD,JT=zD;var YT=(()=>{let e={[R](){return mo(this)},[F](t){return Array.isArray(t)&&this.length===t.length?this.every((r,o)=>O(r,t[o])):!1}};return Object.setPrototypeOf(e,Array.prototype)})(),ZT=(()=>{let e={[R](){return da(this)},[F](t){let r=Object.keys(this),o=Object.keys(t);if(r.length!==o.length)return!1;for(let n of r)if(!(n in t&&O(this[n],t[n])))return!1;return!0}};return Object.setPrototypeOf(e,Object.prototype)})(),xo=e=>$D(Object.assign({},e)),$D=e=>Object.setPrototypeOf(e,ZT),QT=(...e)=>bd(e),XT=e=>bd(e.slice(0)),bd=e=>Object.setPrototypeOf(e,YT),e1=()=>e=>xo(e===void 0?{}:e);var GD=e=>t=>xo(t===void 0?{_tag:e}:{...t,_tag:e}),t1=e=>{class t extends VD{constructor(){super(...arguments),this._tag=e}}return t},VD=(()=>{class e{constructor(r){r&&Object.assign(this,r)}[R](){return da(this)}[F](r){let o=Object.keys(this),n=Object.keys(r);if(o.length!==n.length)return!1;for(let s of o)if(!(s in r&&O(this[s],r[s])))return!1;return!0}}return e})(),r1=()=>GD;var QD=Symbol.for("@effect/data/Duration"),n1=BigInt(1e3),JD=BigInt(1e9),YD=/^(-?\d+(?:\.\d+)?)\s+(nanos|micros|millis|seconds|minutes|hours|days|weeks)$/,tt=e=>{if(XD(e))return e;if(yn(e))return qs(e);if(vs(e))return Au(e);{YD.lastIndex=0;let t=YD.exec(e);if(t){let[r,o,n]=t,s=Number(o);switch(n){case"nanos":return Au(BigInt(o));case"micros":return i1(BigInt(o));case"millis":return qs(s);case"seconds":return Sd(s);case"minutes":return a1(s);case"hours":return c1(s);case"days":return u1(s);case"weeks":return p1(s)}}}throw new Error("Invalid duration input")},ZD={_tag:"Millis",millis:0},s1={_tag:"Infinity"},gr=class{constructor(t){this._id=QD,yn(t)?isNaN(t)||t<0?this.value=ZD:Number.isFinite(t)?Number.isInteger(t)?this.value={_tag:"Millis",millis:t}:this.value={_tag:"Nanos",nanos:BigInt(Math.round(t*1e6))}:this.value=s1:t<BigInt(0)?this.value=ZD:this.value={_tag:"Nanos",nanos:t}}[R](){return da(this.value)}[F](t){return XD(t)&&m1(this,t)}toString(){switch(this.value._tag){case"Millis":return`Duration("${this.value.millis} millis")`;case"Nanos":return`Duration("${this.value.nanos} nanos")`;case"Infinity":return"Duration(Infinity)"}}toJSON(){return this.value._tag==="Nanos"?{_tag:"Duration",value:{_tag:"Nanos",hrtime:l1(this)}}:{_tag:"Duration",value:this.value}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},XD=e=>de(e)&&"_id"in e&&e._id===QD,Dd=new gr(0);var Au=e=>new gr(e),i1=e=>new gr(e*n1),qs=e=>new gr(e),Sd=e=>new gr(e*1e3),a1=e=>new gr(e*6e4),c1=e=>new gr(e*36e5),u1=e=>new gr(e*864e5),p1=e=>new gr(e*6048e5),qr=e=>{let t=tt(e);switch(t.value._tag){case"Infinity":return 1/0;case"Nanos":return Number(t.value.nanos)/1e6;case"Millis":return t.value.millis}};var l1=e=>{let t=tt(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/JD),Number(t.value.nanos%JD)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}};var eS=u(3,(e,t,r)=>{let o=tt(e),n=tt(t);if(o.value._tag==="Infinity"||n.value._tag==="Infinity")return r.onMillis(qr(o),qr(n));if(o.value._tag==="Nanos"||n.value._tag==="Nanos"){let s=o.value._tag==="Nanos"?o.value.nanos:BigInt(Math.round(o.value.millis*1e6)),i=n.value._tag==="Nanos"?n.value.nanos:BigInt(Math.round(n.value.millis*1e6));return r.onNanos(s,i)}return r.onMillis(o.value.millis,n.value.millis)});var f1=(e,t)=>eS(e,t,{onMillis:(r,o)=>r===o,onNanos:(r,o)=>r===o});var Ed=u(2,(e,t)=>eS(e,t,{onMillis:(r,o)=>r>=o,onNanos:(r,o)=>r>=o})),m1=u(2,(e,t)=>f1(tt(e),tt(t)));var Cd=Math.pow(2,5),tS=Cd-1,rS=Cd/2,oS=Cd/4;function d1(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Ko(e,t){return t>>>e&tS}function $o(e){return 1<<e}function vu(e,t){return d1(e&t-1)}function On(e,t,r,o){let n=o;if(!e){let s=o.length;n=new Array(s);for(let i=0;i<s;++i)n[i]=o[i]}return n[t]=r,n}function _d(e,t,r){let o=r.length-1,n=0,s=0,i=r;if(e)n=s=t;else for(i=new Array(o);n<t;)i[s++]=r[n++];for(++n;n<=o;)i[s++]=r[n++];return e&&(i.length=o),i}function nS(e,t,r,o){let n=o.length;if(e){let c=n;for(;c>=t;)o[c--]=o[c];return o[t]=r,o}let s=0,i=0,a=new Array(n+1);for(;s<t;)a[i++]=o[s++];for(a[t]=r;s<n;)a[++i]=o[s++];return a}var Mu=class{constructor(t,r){this.value=t,this.previous=r}};var Hr=class e{constructor(){this._tag="EmptyNode"}modify(t,r,o,n,s,i){let a=o(g());return B(a)?new e:(++i.value,new Hs(t,n,s,a))}};function Yt(e){return e instanceof Hr}function h1(e){return Yt(e)||e._tag==="LeafNode"||e._tag==="CollisionNode"}function ku(e,t){return Yt(e)?!1:t===e.edit}var Hs=class e{constructor(t,r,o,n){this.edit=t,this.hash=r,this.key=o,this.value=n,this._tag="LeafNode"}modify(t,r,o,n,s,i){if(O(s,this.key)){let c=o(this.value);return c===this.value?this:B(c)?(--i.value,new Hr):ku(this,t)?(this.value=c,this):new e(t,n,s,c)}let a=o(g());return B(a)?this:(++i.value,sS(t,r,this.hash,this,n,new e(t,n,s,a)))}},Od=class e{constructor(t,r,o){this.edit=t,this.hash=r,this.children=o,this._tag="CollisionNode"}modify(t,r,o,n,s,i){if(n===this.hash){let c=ku(this,t),p=this.updateCollisionList(c,t,this.hash,this.children,o,s,i);return p===this.children?this:p.length>1?new e(t,this.hash,p):p[0]}let a=o(g());return B(a)?this:(++i.value,sS(t,r,this.hash,this,n,new Hs(t,n,s,a)))}updateCollisionList(t,r,o,n,s,i,a){let c=n.length;for(let l=0;l<c;++l){let f=n[l];if("key"in f&&O(i,f.key)){let d=f.value,h=s(d);return h===d?n:B(h)?(--a.value,_d(t,l,n)):On(t,l,new Hs(r,o,i,h),n)}}let p=s(g());return B(p)?n:(++a.value,On(t,c,new Hs(r,o,i,p),n))}},Da=class e{constructor(t,r,o){this.edit=t,this.mask=r,this.children=o,this._tag="IndexedNode"}modify(t,r,o,n,s,i){let a=this.mask,c=this.children,p=Ko(r,n),l=$o(p),f=vu(a,l),d=a&l,h=ku(this,t);if(!d){let j=new Hr().modify(t,r+5,o,n,s,i);return j?c.length>=rS?x1(t,p,j,a,c):new e(t,a|l,nS(h,f,j,c)):this}let S=c[f],w=S.modify(t,r+5,o,n,s,i);if(S===w)return this;let A=a,I;if(Yt(w)){if(A&=~l,!A)return new Hr;if(c.length<=2&&h1(c[f^1]))return c[f^1];I=_d(h,f,c)}else I=On(h,f,w,c);return h?(this.mask=A,this.children=I,this):new e(t,A,I)}},wd=class e{constructor(t,r,o){this.edit=t,this.size=r,this.children=o,this._tag="ArrayNode"}modify(t,r,o,n,s,i){let a=this.size,c=this.children,p=Ko(r,n),l=c[p],f=(l||new Hr).modify(t,r+5,o,n,s,i);if(l===f)return this;let d=ku(this,t),h;if(Yt(l)&&!Yt(f))++a,h=On(d,p,f,c);else if(!Yt(l)&&Yt(f)){if(--a,a<=oS)return g1(t,a,p,c);h=On(d,p,new Hr,c)}else h=On(d,p,f,c);return d?(this.size=a,this.children=h,this):new e(t,a,h)}};function g1(e,t,r,o){let n=new Array(t-1),s=0,i=0;for(let a=0,c=o.length;a<c;++a)if(a!==r){let p=o[a];p&&!Yt(p)&&(n[s++]=p,i|=1<<a)}return new Da(e,i,n)}function x1(e,t,r,o,n){let s=[],i=o,a=0;for(let c=0;i;++c)i&1&&(s[c]=n[a++]),i>>>=1;return s[t]=r,new wd(e,a+1,s)}function y1(e,t,r,o,n,s){if(r===n)return new Od(e,r,[s,o]);let i=Ko(t,r),a=Ko(t,n);if(i===a)return c=>new Da(e,$o(i)|$o(a),[c]);{let c=i<a?[o,s]:[s,o];return new Da(e,$o(i)|$o(a),c)}}function sS(e,t,r,o,n,s){let i,a=t;for(;;){let c=y1(e,a,r,o,n,s);if(typeof c=="function")i=new Mu(c,i),a=a+5;else{let p=c;for(;i!=null;)p=i.value(p),i=i.previous;return p}}}var Rd=Symbol.for("@effect/data/HashMap"),Sa=class{constructor(t,r,o,n){this._editable=t,this._edit=r,this._root=o,this._size=n,this._id=Rd}[Symbol.iterator](){return new Tu(this,(t,r)=>[t,r])}[R](){let t=E("HashMap");for(let r of this)t^=k(E(r[0]))(E(r[1]));return t}[F](t){if(uS(t)){if(t._size!==this._size)return!1;for(let r of this){let o=Pu(r[0],E(r[0]))(t);if(B(o))return!1;if(!O(r[1],o.value))return!1}return!0}return!1}toString(){return`HashMap(${Array.from(this).map(([t,r])=>`[${String(t)}, ${String(r)}]`).join(", ")})`}toJSON(){return{_tag:"HashMap",values:Array.from(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},Tu=class e{constructor(t,r){this.map=t,this.f=r,this.v=iS(this.map._root,this.f,void 0)}next(){if(B(this.v))return{done:!0,value:void 0};let t=this.v.value;return this.v=Iu(t.cont),{done:!1,value:t.value}}[Symbol.iterator](){return new e(this.map,this.f)}},Iu=e=>e?aS(e[0],e[1],e[2],e[3],e[4]):g(),iS=(e,t,r=void 0)=>{switch(e._tag){case"LeafNode":return N(e.value)?x({value:t(e.key,e.value.value),cont:r}):Iu(r);case"CollisionNode":case"ArrayNode":case"IndexedNode":{let o=e.children;return aS(o.length,o,0,t,r)}default:return Iu(r)}},aS=(e,t,r,o,n)=>{for(;r<e;){let s=t[r++];if(s&&!Yt(s))return iS(s,o,[e,t,r,o,n])}return Iu(n)},js=()=>new Sa(!1,0,new Hr,0),cS=(...e)=>Fd(e),Fd=e=>{let t=Lu(js());for(let r of e)wn(r[0],r[1])(t);return fS(t)},uS=e=>de(e)&&"_id"in e&&e._id===Rd,pS=e=>e&&Yt(e._root),lS=u(2,(e,t)=>Pu(e,t,E(t))),Pu=u(3,(e,t,r)=>{let o=e._root,n=0;for(;;)switch(o._tag){case"LeafNode":return O(t,o.key)?o.value:g();case"CollisionNode":{if(r===o.hash){let s=o.children;for(let i=0,a=s.length;i<a;++i){let c=s[i];if("key"in c&&O(t,c.key))return c.value}}return g()}case"IndexedNode":{let s=Ko(n,r),i=$o(s);if(o.mask&i){o=o.children[vu(o.mask,i)],n+=5;break}return g()}case"ArrayNode":{if(o=o.children[Ko(n,r)],o){n+=5;break}return g()}default:return g()}});var Ad=u(2,(e,t)=>N(Pu(e,t,E(t))));var wn=u(3,(e,t,r)=>vd(e,t,()=>x(r))),D1=u(3,(e,t,r)=>e._editable?(e._root=t,e._size=r,e):t===e._root?e:new Sa(e._editable,e._edit,t,r)),Nu=e=>new Tu(e,t=>t);var Us=e=>e._size,Lu=e=>new Sa(!0,e._edit+1,e._root,e._size),fS=e=>(e._editable=!1,e);var vd=u(3,(e,t,r)=>mS(e,t,E(t),r)),mS=u(4,(e,t,r,o)=>{let n={value:e._size},s=e._root.modify(e._editable?e._edit:NaN,0,o,r,t,n);return D1(s,n.value)(e)});var Ea=u(2,(e,t)=>vd(e,t,g));var dS=u(2,(e,t)=>Ws(e,js(),(r,o,n)=>wn(r,n,t(o,n))));var qu=u(2,(e,t)=>Ws(e,void 0,(r,o,n)=>t(o,n))),Ws=u(3,(e,t,r)=>{let o=e._root;if(o._tag==="LeafNode")return N(o.value)?r(t,o.value.value,o.key):t;if(o._tag==="EmptyNode")return t;let n=[o.children],s;for(;s=n.pop();)for(let i=0,a=s.length;i<a;){let c=s[i++];c&&!Yt(c)&&(c._tag==="LeafNode"?N(c.value)&&(t=r(t,c.value.value,c.key)):n.push(c.children))}return t});var Md=Symbol.for("@effect/data/HashSet"),zs=class{constructor(t){this._keyMap=t,this._id=Md}[Symbol.iterator](){return Nu(this._keyMap)}[R](){return k(E(this._keyMap))(E("HashSet"))}[F](t){return gS(t)?Us(this._keyMap)===Us(t._keyMap)&&O(this._keyMap,t._keyMap):!1}toString(){return`HashSet(${Array.from(this).map(String).join(", ")})`}toJSON(){return{_tag:"HashSet",values:Array.from(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},gS=e=>de(e)&&"_id"in e&&e._id===Md,Ca=()=>new zs(js()),xS=e=>{let t=Hu(Ca());for(let r of e)Ks(t,r);return Bu(t)},yS=(...e)=>{let t=Hu(Ca());for(let r of e)Ks(t,r);return Bu(t)},bS=u(2,(e,t)=>Ad(e._keyMap,t));var DS=e=>Us(e._keyMap),Hu=e=>new zs(Lu(e._keyMap)),Bu=e=>(e._keyMap._editable=!1,e),kd=u(2,(e,t)=>{let r=Hu(e);return t(r),Bu(r)}),Ks=u(2,(e,t)=>e._keyMap._editable?(wn(t,!0)(e._keyMap),e):new zs(wn(t,!0)(e._keyMap))),Td=u(2,(e,t)=>e._keyMap._editable?(Ea(t)(e._keyMap),e):new zs(Ea(t)(e._keyMap))),SS=u(2,(e,t)=>kd(e,r=>{for(let o of t)Td(r,o)}));var ES=u(2,(e,t)=>kd(Ca(),r=>{CS(e,o=>Ks(r,o));for(let o of t)Ks(r,o)}));var CS=u(2,(e,t)=>qu(e._keyMap,(r,o)=>t(o))),_S=u(3,(e,t,r)=>Ws(e._keyMap,t,(o,n,s)=>r(o,s)));var yo=js,OS=cS,ju=Fd,wS=pS,_a=lS;var Br=wn,Id=Nu;var Uu=Us;var RS=Ea;var FS=dS;var AS=qu,Pd=Ws;var E1=Symbol.for("@effect/data/MutableRef"),Nd=class{constructor(t){this.current=t,this._T=r=>r,this._id=E1}toString(){return`MutableRef(${String(this.current)})`}toJSON(){return{_tag:"MutableRef",current:this.current}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},St=e=>new Nd(e),Wu=u(3,(e,t,r)=>O(t,e.current)?(e.current=r,!0):!1);var It=e=>e.current;var vS=e=>_1(e,t=>t+1),Zt=u(2,(e,t)=>(e.current=t,e)),C1=u(2,(e,t)=>(e.current=t,e.current)),Ld=u(2,(e,t)=>Zt(e,t(It(e)))),_1=u(2,(e,t)=>C1(e,t(It(e))));var O1=Symbol.for("@effect/data/MutableHashMap"),qd=class{constructor(){this._id=O1,this.backingMap=St(yo())}[Symbol.iterator](){return this.backingMap.current[Symbol.iterator]()}toString(){return`MutableHashMap(${Array.from(this).map(([t,r])=>`[${String(t)}, ${String(r)}]`).join(", ")})`}toJSON(){return{_tag:"MutableHashMap",values:Array.from(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},An=()=>new qd;var Ce=u(2,(e,t)=>_a(e.backingMap.current,t)),xr=u(2,(e,t)=>N(Ce(e,t)));var vn=u(2,(e,t)=>(Ld(e.backingMap,RS(t)),e)),Et=u(3,(e,t,r)=>(Ld(e.backingMap,Br(t,r)),e)),zu=e=>Uu(It(e.backingMap));var MS=Symbol.for("@effect/data/Chunk");function w1(e,t,r,o,n){for(let s=t;s<Math.min(e.length,t+n);s++)r[o+s-t]=e[s];return r}var kS=[],R1=e=>Fs((t,r)=>ut(t).every((o,n)=>e(o,Go(r,n)))),F1=R1(O),ce=class{constructor(t){switch(this.backing=t,this._id=MS,t._tag){case"IEmpty":{this.length=0,this.depth=0,this.left=this,this.right=this;break}case"IConcat":{this.length=t.left.length+t.right.length,this.depth=1+Math.max(t.left.depth,t.right.depth),this.left=t.left,this.right=t.right;break}case"IArray":{this.length=t.array.length,this.depth=0,this.left=yr,this.right=yr;break}case"ISingleton":{this.length=1,this.depth=0,this.left=yr,this.right=yr;break}case"ISlice":{this.length=t.length,this.depth=t.chunk.depth+1,this.left=yr,this.right=yr;break}}}toString(){return`Chunk(${ut(this).map(String).join(", ")})`}toJSON(){return{_tag:"Chunk",values:ut(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}[F](t){return TS(t)&&F1(this,t)}[R](){return mo(ut(this))}[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return kS[Symbol.iterator]();default:return ut(this)[Symbol.iterator]()}}pipe(){return C(this,arguments)}},TS=e=>de(e)&&"_id"in e&&e._id===MS,yr=new ce({_tag:"IEmpty"}),pt=()=>yr;var Ae=e=>new ce({_tag:"ISingleton",a:e}),jr=e=>TS(e)?e:new ce({_tag:"IArray",array:re(e)}),Bd=(e,t,r)=>{switch(e.backing._tag){case"IArray":{w1(e.backing.array,0,t,r,e.length);break}case"IConcat":{Bd(e.left,t,r),Bd(e.right,t,r+e.left.length);break}case"ISingleton":{t[r]=e.backing.a;break}case"ISlice":{let o=0,n=r;for(;o<e.length;)t[n]=Go(e,o),o+=1,n+=1;break}}},ut=e=>{switch(e.backing._tag){case"IEmpty":return kS;case"IArray":return e.backing.array;default:{let t=new Array(e.length);return Bd(e,t,0),e.backing={_tag:"IArray",array:t},e.left=yr,e.right=yr,e.depth=0,t}}},bo=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return new ce({_tag:"IArray",array:pd(e.backing.array)});case"IConcat":return new ce({_tag:"IConcat",left:bo(e.backing.right),right:bo(e.backing.left)});case"ISlice":return Pt(pd(ut(e)))}},A1=u(2,(e,t)=>t<0||t>=e.length?g():x(Go(e,t))),Pt=e=>new ce({_tag:"IArray",array:e});var Go=u(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(t!==0)throw new Error("Index out of bounds");return e.backing.a}case"IArray":{if(t>=e.length||t<0)throw new Error("Index out of bounds");return e.backing.array[t]}case"IConcat":return t<e.left.length?Go(e.left,t):Go(e.right,t-e.left.length);case"ISlice":return Go(e.backing.chunk,t+e.backing.offset)}}),Ku=u(2,(e,t)=>IS(e,Ae(t))),Ie=u(2,(e,t)=>IS(Ae(t),e)),jd=u(2,(e,t)=>{if(t<=0)return yr;if(t>=e.length)return e;switch(e.backing._tag){case"ISlice":return new ce({_tag:"ISlice",chunk:e.backing.chunk,length:t,offset:e.backing.offset});case"IConcat":return t>e.left.length?new ce({_tag:"IConcat",left:e.left,right:jd(e.right,t-e.left.length)}):jd(e.left,t);default:return new ce({_tag:"ISlice",chunk:e,offset:0,length:t})}}),$s=u(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return yr;switch(e.backing._tag){case"ISlice":return new ce({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":return t>e.left.length?$s(e.right,t-e.left.length):new ce({_tag:"IConcat",left:$s(e.left,t),right:e.right});default:return new ce({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}});var br=u(2,(e,t)=>{if(e.backing._tag==="IEmpty")return t;if(t.backing._tag==="IEmpty")return e;let r=t.depth-e.depth;if(Math.abs(r)<=1)return new ce({_tag:"IConcat",left:e,right:t});if(r<-1)if(e.left.depth>=e.right.depth){let o=br(e.right,t);return new ce({_tag:"IConcat",left:e.left,right:o})}else{let o=br(e.right.right,t);if(o.depth===e.depth-3){let n=new ce({_tag:"IConcat",left:e.right.left,right:o});return new ce({_tag:"IConcat",left:e.left,right:n})}else{let n=new ce({_tag:"IConcat",left:e.left,right:e.right.left});return new ce({_tag:"IConcat",left:n,right:o})}}else if(t.right.depth>=t.left.depth){let o=br(e,t.left);return new ce({_tag:"IConcat",left:o,right:t.right})}else{let o=br(e,t.left.left);if(o.depth===t.depth-3){let n=new ce({_tag:"IConcat",left:o,right:t.left.right});return new ce({_tag:"IConcat",left:n,right:t.right})}else{let n=new ce({_tag:"IConcat",left:t.left.right,right:t.right});return new ce({_tag:"IConcat",left:o,right:n})}}}),IS=u(2,(e,t)=>br(e,t));var Gs=e=>e.length===0,rt=e=>e.length>0,Mn=A1(0),kn=e=>Go(e,0),ot=kn;var PS=e=>Go(e,e.length-1),Ud=u(2,(e,t)=>e.backing._tag==="ISingleton"?Ae(t(e.backing.a,0)):Pt(ho((r,o)=>t(r,o))(ut(e))));var $u=u(2,(e,t)=>Pt(Sn(ut(e),t)));var v1=u(2,(e,t)=>[jd(e,t),$s(e,t)]);var NS=u(2,(e,t)=>{let r=0;for(let o of ut(e)){if(t(o))break;r++}return v1(e,r)});var nt=e=>$s(e,1);var LS=e=>Pt(PD(ut(e)));var M1=Symbol.for("@effect/data/MutableList"),Wd=class{constructor(){this._id=M1,this.head=void 0,this.tail=void 0,this._length=0}[Symbol.iterator](){let t=!1,r=this.head;return{next(){if(t)return this.return();if(r==null)return t=!0,this.return();let o=r.value;return r=r.next,{done:t,value:o}},return(o){return t||(t=!0),{done:!0,value:o}}}}toString(){return`MutableList(${Array.from(this).map(String).join(", ")})`}toJSON(){return{_tag:"MutableList",values:Array.from(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},zd=class{constructor(t){this.value=t,this.removed=!1,this.prev=void 0,this.next=void 0}},qS=()=>new Wd;var HS=e=>Kd(e)===0,Kd=e=>e._length;var BS=u(2,(e,t)=>{let r=new zd(t);return e.head===void 0&&(e.head=r),e.tail===void 0||(e.tail.next=r,r.prev=e.tail),e.tail=r,e._length+=1,e}),jS=e=>{let t=e.head;if(t!==void 0)return k1(e,t),t.value};var k1=(e,t)=>{t.removed||(t.removed=!0,t.prev!==void 0&&t.next!==void 0?(t.prev.next=t.next,t.next.prev=t.prev):t.prev!==void 0?(e.tail=t.prev,t.prev.next=void 0):t.next!==void 0?(e.head=t.next,t.next.prev=void 0):(e.tail=void 0,e.head=void 0),e._length>0&&(e._length-=1))};var I1=Symbol.for("@effect/data/MutableQueue"),Gd=Symbol.for("@effect/data/mutable/MutableQueue/Empty"),$d=class{constructor(t=void 0){this.capacity=t,this._tag="Bounded",this._id=I1,this.queue=qS()}[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()}toString(){return`MutableQueue(${Array.from(this).map(String).join(", ")})`}toJSON(){return{_tag:"MutableQueue",values:Array.from(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}};var US=()=>new $d;var WS=u(2,(e,t)=>{let r=Kd(e.queue);return e.capacity!==void 0&&r===e.capacity?!1:(BS(t)(e.queue),!0)});var zS=u(2,(e,t)=>HS(e.queue)?t:jS(e.queue));var Vs=Symbol.for("@effect/data/Differ/ContextPatch");function Ur(e){return e}var Vd=class{constructor(){this._tag="Empty",this._Input=Ur,this._Output=Ur,this._id=Vs}[R](){return qe("ContextPatch(Empty)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id}},Jd=class{constructor(t,r){this.first=t,this.second=r,this._tag="AndThen",this._id=Vs,this._Input=Ur,this._Output=Ur}[R](){return qe("ContextPatch(AndThen)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.first,t.first)&&O(this.second,t.second)}},Yd=class{constructor(t,r){this.tag=t,this.service=r,this._tag="AddService",this._id=Vs,this._Input=Ur,this._Output=Ur}[R](){return qe("ContextPatch(AddService)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.tag,t.tag)&&O(this.service,t.service)}},Zd=class{constructor(t){this.tag=t,this._tag="RemoveService",this._id=Vs,this._Input=Ur,this._Output=Ur}[R](){return qe("ContextPatch(RemoveService)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.tag,t.tag)}},Qd=class{constructor(t,r){this.tag=t,this.update=r,this._tag="UpdateService",this._id=Vs,this._Input=Ur,this._Output=Ur}[R](){return qe("ContextPatch(AndThen)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.tag,t.tag)&&O(this.update,t.update)}},Xd=()=>new Vd,KS=(e,t)=>{let r=new Map(e.unsafeMap),o=Xd();for(let[n,s]of t.unsafeMap.entries())if(r.has(n)){let i=r.get(n);r.delete(n),O(i,s)||(o=Oa(new Qd(n,()=>s))(o))}else r.delete(n),o=Oa(new Yd(n,s))(o);for(let[n]of r.entries())o=Oa(new Zd(n))(o);return o},Oa=u(2,(e,t)=>new Jd(e,t)),$S=u(2,(e,t)=>{let r=!1,o=Ae(e),n=new Map(t.unsafeMap);for(;rt(o);){let i=ot(o),a=nt(o);switch(i._tag){case"Empty":{o=a;break}case"AddService":{n.set(i.tag,i.service),o=a;break}case"AndThen":{o=Ie(Ie(a,i.second),i.first);break}case"RemoveService":{n.delete(i.tag),o=a;break}case"UpdateService":{n.set(i.tag,i.update(n.get(i.tag))),r=!0,o=a;break}}}if(!r)return new hr(n);let s=new Map;for(let[i]of t.unsafeMap)n.has(i)&&(s.set(i,n.get(i)),n.delete(i));for(let[i,a]of n)s.set(i,a);return new hr(s)});var Gu=Xd,GS=KS,VS=Oa,JS=$S;var st=Ca,Ct=xS,Do=yS,ZS=bS;var So=DS;var Wr=Ks,eh=Td,th=SS;var it=ES;var Tn=_S;var wa=Symbol.for("@effect/data/Differ/HashSetPatch");function Ju(e){return e}var rh=class{constructor(){this._tag="Empty",this._Value=Ju,this._id=wa}[R](){return qe("HashSetPatch(Empty)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id}},oh=class{constructor(t,r){this.first=t,this.second=r,this._tag="AndThen",this._Value=Ju,this._id=wa}[R](){return qe("HashSetPatch(AndThen)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.first,t.first)&&O(this.second,t.second)}},nh=class{constructor(t){this.value=t,this._tag="Add",this._Value=Ju,this._id=wa}[R](){return qe("HashSetPatch(Add)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.value,t.value)}},sh=class{constructor(t){this.value=t,this._tag="Remove",this._Value=Ju,this._id=wa}[R](){return qe("HashSetPatch(Remove)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.value,t.value)}},ih=()=>new rh,QS=(e,t)=>{let[r,o]=Tn([e,ih()],([n,s],i)=>ZS(i)(n)?[eh(i)(n),s]:[n,Vu(new nh(i))(s)])(t);return Tn(o,(n,s)=>Vu(new sh(s))(n))(r)},Vu=u(2,(e,t)=>new oh(e,t)),XS=u(2,(e,t)=>{let r=t,o=Ae(e);for(;rt(o);){let n=ot(o),s=nt(o);switch(n._tag){case"Empty":{o=s;break}case"AndThen":{o=Ie(n.first)(Ie(n.second)(s));break}case"Add":{r=Wr(n.value)(r),o=s;break}case"Remove":r=eh(n.value)(r),o=s}}return r});var Yu=ih,eE=QS,tE=Vu,rE=XS;var nE=Symbol.for("@effect/data/Differ"),ah=class{constructor(t){this._id=nE,this._P=P,this._V=P,this.empty=t.empty,this.diff=t.diff,this.combine=t.combine,this.patch=t.patch}},Ra=e=>new ah(e),sE=()=>Ra({empty:Gu(),combine:(e,t)=>VS(t)(e),diff:(e,t)=>GS(e,t),patch:(e,t)=>JS(t)(e)});var iE=()=>Ra({empty:Yu(),combine:(e,t)=>tE(t)(e),diff:(e,t)=>eE(e,t),patch:(e,t)=>rE(t)(e)});var aE=()=>cE((e,t)=>t),cE=e=>Ra({empty:P,combine:(t,r)=>t===P?r:r===P?t:o=>r(t(o)),diff:(t,r)=>O(t,r)?P:ws(r),patch:(t,r)=>e(r,t(r))});var uE=u(3,(e,t,r)=>e.diff(t,r)),pE=u(3,(e,t,r)=>e.combine(t,r)),lE=u(3,(e,t,r)=>e.patch(t,r)),Zu=Ra,fE=sE;var mE=iE;var dE=aE;var ph=Symbol.for("@effect/data/List"),Fa=e=>Array.from(e),B1=e=>zb(ID(e),Fa),j1=B1(O),Js=class{constructor(t,r){this.head=t,this.tail=r,this._tag="Cons",this._id=ph}toString(){return`List.Cons(${Fa(this).map(String).join(", ")})`}toJSON(){return{_tag:"List.Cons",values:Fa(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}[F](t){return hE(t)&&this._tag===t._tag&&j1(this,t)}[R](){return mo(Fa(this))}[Symbol.iterator](){let t=!1,r=this;return{next(){if(t)return this.return();if(r._tag==="Nil")return t=!0,this.return();let o=r.head;return r=r.tail,{done:t,value:o}},return(o){return t||(t=!0),{done:!0,value:o}}}}pipe(){return C(this,arguments)}},uh=class{constructor(){this._tag="Nil",this._id=ph}toString(){return"List.Nil"}toJSON(){return{_tag:"List.Nil"}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}[R](){return mo(Fa(this))}[F](t){return hE(t)&&this._tag===t._tag}[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}}pipe(){return C(this,arguments)}},hE=e=>de(e)&&"_id"in e&&e._id===ph,_t=e=>e._tag==="Nil",Aa=e=>e._tag==="Cons";var gE=new uh,U1=()=>gE,Eo=(e,t)=>new Js(e,t),Dr=U1,va=e=>new Js(e,gE);var xE=u(2,(e,t)=>W1(t,e));var Vo=u(2,(e,t)=>Eo(t,e)),W1=u(2,(e,t)=>{if(_t(e))return t;if(_t(t))return e;{let r=new Js(t.head,e),o=r,n=t.tail;for(;!_t(n);){let s=new Js(n.head,e);o.tail=s,o=s,n=n.tail}return r}});var yE=u(2,(e,t)=>{let r=e;for(;!_t(r);){if(t(r.head))return x(r.head);r=r.tail}return g()});var Qu=e=>_t(e)?g():x(e.head);var bE=u(3,(e,t,r)=>{let o=t,n=e;for(;!_t(n);)o=r(o,n.head),n=n.tail;return o});var DE=e=>{let t=Dr(),r=e;for(;!_t(r);)t=Vo(t,r.head),r=r.tail;return t};var SE,EE,CE,ep="@effect/io/Fiber/Id",Jo=Symbol.for(ep),Ma="None",lh="Runtime",fh="Composite",mh=class{constructor(){this[SE]=Jo,this._tag=Ma}[(SE=Jo,R)](){return k(E(this._tag))(E(ep))}[F](t){return rp(t)&&t._tag===Ma}},dh=class{constructor(t,r){this.id=t,this.startTimeMillis=r,this[EE]=Jo,this._tag=lh}[(EE=Jo,R)](){return k(E(this.startTimeMillis))(k(E(this.id))(k(E(this._tag))(E(ep))))}[F](t){return rp(t)&&t._tag===lh&&this.id===t.id&&this.startTimeMillis===t.startTimeMillis}},hh=class{constructor(t,r){this.left=t,this.right=r,this[CE]=Jo,this._tag=fh}[(CE=Jo,R)](){return k(E(this.right))(k(E(this.left))(k(E(this._tag))(E(ep))))}[F](t){return rp(t)&&t._tag===fh&&O(this.left,t.left)&&O(this.right,t.right)}},tp=new mh;var rp=e=>typeof e=="object"&&e!=null&&Jo in e;var OE=u(2,(e,t)=>e._tag===Ma?t:t._tag===Ma?e:new hh(e,t));var Xu=e=>{switch(e._tag){case Ma:return st();case lh:return Do(e.id);case fh:return it(Xu(e.right))(Xu(e.left))}},_E=V(Symbol.for("@effect/io/Fiber/Id/_fiberCounter"),()=>St(0));var op=e=>Array.from(Xu(e)).map(r=>`#${r}`).join(",");var wE=()=>{let e=It(_E);return Zt(e+1)(_E),new dh(e,new Date().getTime())};var lt=tp;var gh=OE;var FE=op;var np=wE;var In="Die",Yo="Empty",Pn="Fail",Qs="Interrupt",Nn="Annotated",Ln="Parallel",qn="Sequential";var IE="@effect/io/Cause",Sh=Symbol.for(IE),K1={_E:e=>e},Bn={[Sh]:K1,[R](){return k(E(G1(this)))(E(IE))},[F](e){return cp(e)&&$1(this,e)},pipe(){return C(this,arguments)},toJSON(){return{_tag:"Cause",errors:fp(this)}},toString(){return Oo(this)},[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}},ft=(()=>{let e=Object.create(Bn);return e._tag=Yo,e})(),jn=e=>{let t=Object.create(Bn);return t._tag=Pn,t.error=e,t},$e=e=>{let t=Object.create(Bn);return t._tag=In,t.defect=e,t},Sr=e=>{let t=Object.create(Bn);return t._tag=Qs,t.fiberId=e,t},Zo=(e,t)=>{let r=Object.create(Bn);return r._tag=Nn,r.cause=e,r.annotation=t,r},Be=(e,t)=>{let r=Object.create(Bn);return r._tag=Ln,r.left=e,r.right=t,r},ve=(e,t)=>{let r=Object.create(Bn);return r._tag=qn,r.left=e,r.right=t,r},cp=e=>typeof e=="object"&&e!=null&&Sh in e,Eh=e=>e._tag===Yo;var up=e=>e._tag===In;var Ch=e=>e._tag===Yo?!0:Hn(e,!0,(t,r)=>{switch(r._tag){case Yo:return x(t);case In:case Pn:case Qs:return x(!1);default:return g()}});var Qo=e=>lp(void 0,J1)(e),ka=e=>bo(Hn(e,pt(),(t,r)=>r._tag===Pn?x(Ie(r.error)(t)):g())),pp=e=>bo(Hn(e,pt(),(t,r)=>r._tag===In?x(Ie(r.defect)(t)):g())),Ta=e=>Hn(e,st(),(t,r)=>r._tag===Qs?x(Wr(r.fiberId)(t)):g()),PE=e=>Ia(e,t=>t._tag===Pn?x(t.error):g()),Co=e=>{let t=PE(e);switch(t._tag){case"None":return H(e);case"Some":return z(t.value)}};var _h=e=>ei(e,{onEmpty:g(),onFail:()=>g(),onDie:t=>x($e(t)),onInterrupt:()=>g(),onAnnotated:(t,r)=>te(o=>Zo(o,r))(t),onSequential:(t,r)=>N(t)&&N(r)?x(ve(t.value,r.value)):N(t)&&B(r)?x(t.value):B(t)&&N(r)?x(r.value):g(),onParallel:(t,r)=>N(t)&&N(r)?x(Be(t.value,r.value)):N(t)&&B(r)?x(t.value):B(t)&&N(r)?x(r.value):g()}),NE=e=>ei(e,{onEmpty:g(),onFail:t=>x($e(t)),onDie:t=>x($e(t)),onInterrupt:()=>g(),onAnnotated:(t,r)=>te(o=>Zo(o,r))(t),onSequential:(t,r)=>N(t)&&N(r)?x(ve(t.value,r.value)):N(t)&&B(r)?x(t.value):B(t)&&N(r)?x(r.value):g(),onParallel:(t,r)=>N(t)&&N(r)?x(Be(t.value,r.value)):N(t)&&B(r)?x(t.value):B(t)&&N(r)?x(r.value):g()});var Xs=e=>ei(e,{onEmpty:ft,onFail:()=>ft,onDie:t=>$e(t),onInterrupt:t=>Sr(t),onAnnotated:(t,r)=>Eh(t)?t:Zo(t,r),onSequential:ve,onParallel:Be}),LE=e=>ei(e,{onEmpty:ft,onFail:t=>$e(t),onDie:t=>$e(t),onInterrupt:t=>Sr(t),onAnnotated:(t,r)=>Eh(t)?t:Zo(t,r),onSequential:(t,r)=>ve(t,r),onParallel:(t,r)=>Be(t,r)});var qE=u(2,(e,t)=>ei(e,{onEmpty:ft,onFail:r=>t(r),onDie:r=>$e(r),onInterrupt:r=>Sr(r),onAnnotated:(r,o)=>Zo(r,o),onSequential:(r,o)=>ve(r,o),onParallel:(r,o)=>Be(r,o)})),Oh=e=>qE(e,P);var $1=(e,t)=>{let r=Ae(e),o=Ae(t);for(;rt(r)&&rt(o);){let[n,s]=Hn([st(),pt()],([c,p],l)=>{let[f,d]=xh(l);return x([it(f)(c),br(d)(p)])})(ot(r)),[i,a]=Hn([st(),pt()],([c,p],l)=>{let[f,d]=xh(l);return x([it(f)(c),br(d)(p)])})(ot(o));if(!O(n,i))return!1;r=s,o=a}return!0},G1=e=>V1(Ae(e),pt()),V1=(e,t)=>{for(;;){let[r,o]=Dt([st(),pt()],([s,i],a)=>{let[c,p]=xh(a);return[it(c)(s),br(p)(i)]})(e),n=So(r)>0?Ie(r)(t):t;if(Gs(o))return bo(n);e=o,t=n}throw new Error("BUG: Cause.flattenCauseLoop - please report an issue at https://github.com/Effect-TS/io/issues")};var Ia=u(2,(e,t)=>{let r=[e];for(;r.length>0;){let o=r.pop(),n=t(o);switch(n._tag){case"None":{switch(o._tag){case qn:case Ln:{r.push(o.right),r.push(o.left);break}case Nn:{r.push(o.cause);break}}break}case"Some":return n}}return g()});var xh=e=>{let t=e,r=[],o=st(),n=pt();for(;t!==void 0;)switch(t._tag){case Yo:{if(r.length===0)return[o,n];t=r.pop();break}case Pn:{if(r.length===0)return[Wr(t.error)(o),n];o=Wr(t.error)(o),t=r.pop();break}case In:{if(r.length===0)return[Wr(t.defect)(o),n];o=Wr(t.defect)(o),t=r.pop();break}case Qs:{if(r.length===0)return[Wr(t.fiberId)(o),n];o=Wr(t.fiberId)(o),t=r.pop();break}case Nn:{t=t.cause;break}case qn:{switch(t.left._tag){case Yo:{t=t.right;break}case qn:{t=ve(t.left.left,ve(t.left.right,t.right));break}case Ln:{t=Be(ve(t.left.left,t.right),ve(t.left.right,t.right));break}case Nn:{t=ve(t.left.cause,t.right);break}default:{n=Ie(t.right)(n),t=t.left;break}}break}case Ln:{r.push(t.right),t=t.left;break}}throw new Error("BUG: Cause.evaluateCauseLoop - please report an issue at https://github.com/Effect-TS/io/issues")};var J1={emptyCase:Ir,failCase:Gt,dieCase:Gt,interruptCase:Ir,annotatedCase:(e,t)=>t,sequentialCase:(e,t,r)=>t&&r,parallelCase:(e,t,r)=>t&&r};var AE="SequentialCase",vE="ParallelCase",ME="AnnotatedCase",ei=u(2,(e,{onAnnotated:t,onDie:r,onEmpty:o,onFail:n,onInterrupt:s,onParallel:i,onSequential:a})=>lp(e,void 0,{emptyCase:()=>o,failCase:(c,p)=>n(p),dieCase:(c,p)=>r(p),interruptCase:(c,p)=>s(p),annotatedCase:(c,p,l)=>t(p,l),sequentialCase:(c,p,l)=>a(p,l),parallelCase:(c,p,l)=>i(p,l)})),Hn=u(3,(e,t,r)=>{let o=t,n=e,s=[];for(;n!==void 0;){let i=r(o,n);switch(o=N(i)?i.value:o,n._tag){case qn:{s.push(n.right),n=n.left;break}case Ln:{s.push(n.right),n=n.left;break}case Nn:{n=n.cause;break}default:{n=void 0;break}}n===void 0&&s.length>0&&(n=s.pop())}return o}),lp=u(3,(e,t,r)=>{let o=[e],n=[];for(;o.length>0;){let i=o.pop();switch(i._tag){case Yo:{n.push(H(r.emptyCase(t)));break}case Pn:{n.push(H(r.failCase(t,i.error)));break}case In:{n.push(H(r.dieCase(t,i.defect)));break}case Qs:{n.push(H(r.interruptCase(t,i.fiberId)));break}case Nn:{o.push(i.cause),n.push(z({_tag:ME,annotation:i.annotation}));break}case qn:{o.push(i.right),o.push(i.left),n.push(z({_tag:AE}));break}case Ln:{o.push(i.right),o.push(i.left),n.push(z({_tag:vE}));break}}}let s=[];for(;n.length>0;){let i=n.pop();switch(i._tag){case"Left":{switch(i.left._tag){case AE:{let a=s.pop(),c=s.pop(),p=r.sequentialCase(t,a,c);s.push(p);break}case vE:{let a=s.pop(),c=s.pop(),p=r.parallelCase(t,a,c);s.push(p);break}case ME:{let a=s.pop(),c=r.annotatedCase(t,a,i.left.annotation);s.push(c);break}}break}case"Right":{s.push(i.right);break}}}if(s.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/io/issues");return s.pop()}),Pa=(e,t)=>{let r={value:t,enumerable:!0},o={...e,toString(){return`${this._tag}: ${this.message}`}};return n=>Object.create(o,{_tag:r,message:{value:n,enumerable:!0}})},yh=Symbol.for("@effect/io/Cause/errors/RuntimeException"),wh=Pa({[yh]:yh},"RuntimeException");var sp=Symbol.for("@effect/io/Cause/errors/InterruptedException"),Y1=Pa({[sp]:sp},"InterruptedException"),Rh=e=>typeof e=="object"&&e!=null&&sp in e,bh=Symbol.for("@effect/io/Cause/errors/IllegalArgument"),ti=Pa({[bh]:bh},"IllegalArgumentException");var ip=Symbol.for("@effect/io/Cause/errors/NoSuchElement"),_o=Pa({[ip]:ip},"NoSuchElementException"),Fh=e=>typeof e=="object"&&e!=null&&ip in e,Dh=Symbol.for("@effect/io/Cause/errors/InvalidHubCapacityException"),oK=Pa({[Dh]:Dh},"InvalidHubCapacityException");var ap=Symbol.for("@effect/io/Cause/SpanAnnotation"),Z1=e=>typeof e=="object"&&e!==null&&ap in e,HE=e=>({_tag:"SpanAnnotation",[ap]:ap,span:e});var kE=e=>{if(typeof e=="object"&&e!=null&&"toString"in e&&typeof e.toString=="function"&&e.toString!==Object.prototype.toString)return e.toString();if(typeof e=="string")return`Error: ${e}`;if(typeof e=="object"&&e!==null&&"message"in e&&typeof e.message=="string"){let t=JSON.parse(JSON.stringify(e)),r=new Set(Object.keys(t));if(r.delete("name"),r.delete("message"),r.delete("_tag"),r.size===0)return`${"name"in e&&typeof e.name=="string"?e.name:"Error"}${"_tag"in e&&typeof e._tag=="string"?`(${e._tag})`:""}: ${e.message}`}return`Error: ${JSON.stringify(e)}`},TE=e=>e instanceof Error?[kE(e),e.stack?.split(`
`).filter(t=>!t.startsWith("Error")).join(`
`)]:[kE(e),void 0];var Q1=e=>{let t=e.split(`
`),r=[];for(let o=0;o<t.length;o++){if(t[o].includes("EffectPrimitive")||t[o].includes("Generator.next")||t[o].includes("FiberRuntime"))return r.join(`
`);r.push(t[o])}return r.join(`
`)},Oo=e=>{if(Qo(e))return"All fibers interrupted without errors.";let t=fp(e).map(r=>{let o=r.message;if(r.stack&&(o+=`\r
${Q1(r.stack)}`),r.span){let n=r.span,s=0;for(;n&&n._tag==="Span"&&s<10;)o+=`\r
    at ${n.name}`,n=Ke(n.parent),s++}return o}).join(`\r
\r
`);return t.includes(`\r
`)?`\r
${t}\r
`:t},fp=e=>lp(e,void 0,{emptyCase:()=>[],dieCase:(t,r)=>{let o=TE(r);return[{message:o[0],stack:o[1],span:void 0}]},failCase:(t,r)=>{let o=TE(r);return[{message:o[0],stack:o[1],span:void 0}]},interruptCase:()=>[],parallelCase:(t,r,o)=>[...r,...o],sequentialCase:(t,r,o)=>[...r,...o],annotatedCase:(t,r,o)=>Z1(o)?r.map(n=>({...n,span:n.span??o.span})):r});var BE=Oo;var Na=255,jE=8,mp=e=>e&Na,dp=e=>e>>jE&Na,Wn=(e,t)=>(e&Na)+((t&e&Na)<<jE),hp=Wn(0,0),UE=e=>Wn(e,e),WE=e=>Wn(e,0);var zE=u(2,(e,t)=>Wn(mp(e)&~t,dp(e)));var Ah=u(2,(e,t)=>e|t);var KE=e=>~e>>>0&Na;var GE=0,Er=1,vh=2,gp=4,La=16,xp=32;var Mh=e=>qa(e,xp);var kh=u(2,(e,t)=>e|t);var zr=e=>ri(e)&&!VE(e),ri=e=>qa(e,Er);var qa=u(2,(e,t)=>(e&t)!==0),yp=(...e)=>e.reduce((t,r)=>t|r,0),Th=yp(GE);var Ha=e=>qa(e,gp);var VE=e=>qa(e,La);var zn=u(2,(e,t)=>Wn(e^t,t)),oi=u(2,(e,t)=>e&(KE(mp(t))|dp(t))|mp(t)&dp(t));var Ih=Zu({empty:hp,diff:(e,t)=>zn(e,t),combine:(e,t)=>Ah(t)(e),patch:(e,t)=>oi(t,e)});var Dp=hp;var Ph=UE,Nh=WE;var Lh=zE;var YE,ZE,QE,XE={_tag:"Empty"},Kn=(e,t)=>({_tag:"Par",left:e,right:t}),Sp=(e,t)=>({_tag:"Seq",left:e,right:t}),Bh=(e,t)=>({_tag:"Single",dataSource:e,blockedRequest:t});var e0=e=>{let t=va(e),r=Dr();for(;;){let[o,n]=bE(t,[t0(),Dr()],([s,i],a)=>{let[c,p]=oI(a);return[r0(s,c),xE(i,p)]});if(r=nI(r,o),_t(n))return DE(r);t=n}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/query/issues")},oI=e=>{let t=e,r=t0(),o=Dr(),n=Dr();for(;;)switch(t._tag){case"Empty":{if(_t(o))return[r,n];t=o.head,o=o.tail;break}case"Par":{o=Eo(t.right,o),t=t.left;break}case"Seq":{let s=t.left,i=t.right;switch(s._tag){case"Empty":{t=i;break}case"Par":{let a=s.left,c=s.right;t=Kn(Sp(a,i),Sp(c,i));break}case"Seq":{let a=s.left,c=s.right;t=Sp(a,Sp(c,i));break}case"Single":{t=s,n=Eo(i,n);break}}break}case"Single":{if(r=r0(r,uI(t.dataSource,t.blockedRequest)),_t(o))return[r,n];t=o.head,o=o.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/query/issues")},nI=(e,t)=>{if(_t(e))return va(qh(t));if(pI(t))return e;let r=gI(e.head),o=lI(t);return r.length===1&&o.length===1&&O(r[0],o[0])?Eo(hI(e.head,qh(t)),e.tail):Eo(qh(t),e)},sI=Symbol.for("@effect/io/RequestBlock.Entry"),Hh=class{constructor(t,r,o,n,s){this.request=t,this.result=r,this.listeners=o,this.ownerId=n,this.state=s,this[YE]=iI}};YE=sI;var iI={_R:e=>e};var jh=e=>new Hh(e.request,e.result,e.listeners,e.ownerId,e.state),aI=Symbol.for("@effect/io/RequestBlockParallel"),cI={_R:e=>e},Ba=class{constructor(t){this.map=t,this[ZE]=cI}};ZE=aI;var t0=()=>new Ba(yo()),uI=(e,t)=>new Ba(OS([e,Array.of(t)])),r0=(e,t)=>new Ba(Pd(e.map,t.map,(r,o,n)=>Br(r,n,He(_a(r,n),{onNone:()=>o,onSome:s=>[...s,...o]})))),pI=e=>wS(e.map),lI=e=>Array.from(Id(e.map)),qh=e=>dI(FS(e.map,t=>Array.of(t)));var fI=Symbol.for("@effect/io/RequestBlockSequential"),mI={_R:e=>e},Ep=class{constructor(t){this.map=t,this[QE]=mI}};QE=fI;var dI=e=>new Ep(e),hI=(e,t)=>new Ep(Pd(t.map,e.map,(r,o,n)=>Br(r,n,He(_a(r,n),{onNone:()=>[],onSome:s=>[...s,...o]}))));var gI=e=>Array.from(Id(e.map)),o0=e=>Array.from(e.map);var $n="Pending",ja="Done";var xI="@effect/io/Deferred",i0=Symbol.for(xI),a0={_E:e=>e,_A:e=>e},Cp=e=>({_tag:$n,joiners:e}),Uh=e=>({_tag:ja,effect:e});var ni="Async",c0="Commit",xe="Failure",si="OnFailure",ii="OnSuccess",ai="OnSuccessAndFailure",ye="Success",_p="Sync",u0="Tag",wo="UpdateRuntimeFlags",ci="While",Op="WithRuntime",ui="Yield",Ua="RevertFlags";var Rp=class{constructor(){this.buckets=[]}scheduleTask(t,r){let o,n;for(n=0;n<this.buckets.length&&this.buckets[n][0]<=r;n++)o=this.buckets[n];if(o)o[1].push(t);else{let s=[];for(let i=0;i<n;i++)s.push(this.buckets[i]);s.push([r,[t]]);for(let i=n;i<this.buckets.length;i++)s.push(this.buckets[i]);this.buckets=s}}},Wh=class{constructor(t){this.maxNextTickBeforeTimer=t,this.running=!1,this.tasks=new Rp}starveInternal(t){let r=this.tasks.buckets;this.tasks.buckets=[];for(let[o,n]of r)for(let s=0;s<n.length;s++)n[s]();this.tasks.buckets.length===0?this.running=!1:this.starve(t)}starve(t=0){t>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(t+1))}scheduleTask(t,r){this.tasks.scheduleTask(t,r),this.running||(this.running=!0,this.starve())}},zh=V(Symbol.for("@effect/io/Scheduler/defaultScheduler"),()=>new Wh(2048)),Fp=class{constructor(){this.tasks=new Rp,this.deferred=!1}scheduleTask(t,r){this.deferred?zh.scheduleTask(t,r):this.tasks.scheduleTask(t,r)}flush(){for(;this.tasks.buckets.length>0;){let t=this.tasks.buckets;this.tasks.buckets=[];for(let[r,o]of t)for(let n=0;n<o.length;n++)o[n]()}this.deferred=!0}};var l0,f0,m0,d0,bI="@effect/io/Effect/Error",Kh=Symbol.for(bI),g0=e=>typeof e=="object"&&e!=null&&Kh in e,x0=e=>({[Kh]:Kh,_tag:"EffectError",cause:e}),be=(e,t)=>{let r=new Me("Blocked");return r.i0=e,r.i1=t,r},Tp=e=>{let t=new Me("RunBlocked");return t.i0=e,t},pi=Symbol.for("@effect/io/Effect"),vp=class{constructor(t,r){this.patch=t,this.op=r,this._tag=Ua}},Me=class{constructor(t){this._tag=t,this.i0=void 0,this.i1=void 0,this.i2=void 0,this.trace=void 0,this[l0]=$h}[(l0=pi,F)](t){return this===t}[R](){return Uo(this)}pipe(){return C(this,arguments)}},Mp=class{constructor(t){this._tag=t,this.i0=void 0,this.i1=void 0,this.i2=void 0,this.trace=void 0,this[f0]=$h}[(f0=pi,F)](t){return this===t}[R](){return Uo(this)}get cause(){return this.i0}pipe(){return C(this,arguments)}toJSON(){return{_tag:this._tag,cause:this.cause.toJSON()}}toString(){return BE(this.cause)}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}},kp=class{constructor(t){this._tag=t,this.i0=void 0,this.i1=void 0,this.i2=void 0,this.trace=void 0,this[m0]=$h}[(m0=pi,F)](t){return this===t}[R](){return Uo(this)}get value(){return this.i0}pipe(){return C(this,arguments)}toJSON(){return{_tag:this._tag,value:this.value}}toString(){return`Success: ${String(this.value)}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}},$h={_R:e=>e,_E:e=>e,_A:e=>e},De=e=>typeof e=="object"&&e!=null&&pi in e,he=e=>{let t=new Me(Op);return t.i0=e,t},er=u(3,(e,t,r)=>_e(o=>m(e,n=>m(ne(v(()=>o(t(n)))),s=>v(()=>r(n,s)).pipe(ee({onFailure:i=>{switch(s._tag){case xe:return U(Be(s.i0,i));case ye:return U(i)}},onSuccess:()=>s})))))),X=u(2,(e,t)=>m(e,()=>y(t))),oe=e=>X(e,void 0),tr=(e,t=lt)=>v(()=>{let r,o,n=new Me(ni);if(e.length!==1){let s=new AbortController;o=s,n.i0=i=>{r=e(i,s.signal)}}else n.i0=s=>{r=e(s)};return n.i1=t,on(n,()=>(o&&o.abort(),r??L))}),Gr=(e,t=lt)=>tr(r=>{let o=e(r);if(Pr(o))r(o.right);else return o.left},t),Vr=u(2,(e,t)=>{let r=new Me(si);return r.i0=e,r.i1=t,r}),Ot=u(2,(e,t)=>pe(e,{onFailure:t,onSuccess:y})),Xo=e=>(...t)=>e(...t),y0=u(2,(e,t)=>ee(e,{onFailure:Xo(r=>{let o=Co(r);switch(o._tag){case"Left":return J(()=>U(r))(t(o.left));case"Right":return U(o.right)}}),onSuccess:y})),b0=e=>he((t,r)=>e(ri(r.runtimeFlags))),Gh=e=>U($e(e)),li=e=>Zr(()=>$e(wh(e))),en=e=>Zr(()=>$e(e())),Jr=e=>pe(e,{onFailure:t=>y(z(t)),onSuccess:t=>y(H(t))}),Yr=()=>v(()=>at(Ao)),fi=e=>m(Yr(),e),ne=e=>za(e,{onFailure:Y,onSuccess:se}),W=e=>U(jn(e)),Cr=e=>Zr(()=>jn(e())),U=e=>{let t=new Mp(xe);return t.i0=e,t},Zr=e=>m(D(e),U),tn=he(e=>y(e.id())),rr=e=>he(t=>e(t.id())),m=u(2,(e,t)=>{let r=new Me(ii);return r.i0=e,r.i1=t,r}),Kr=e=>{let t=new Me("OnStep");return t.i0=e,t.i1=se,t},mi=(e,t)=>{let r=new Me("OnStep");return r.i0=e,r.i1=t,r},wt=e=>m(e,P),rn=e=>pe(e,{onFailure:y,onSuccess:W}),za=u(2,(e,{onFailure:t,onSuccess:r})=>ee(e,{onFailure:o=>y(t(o)),onSuccess:o=>y(r(o))})),ee=u(2,(e,{onFailure:t,onSuccess:r})=>{let o=new Me(ai);return o.i0=e,o.i1=t,o.i2=r,o}),pe=u(2,(e,{onFailure:t,onSuccess:r})=>ee(e,{onFailure:o=>{let n=ka(o);return pp(o).length>0?U(LE(o)):n.length>0?t(kn(n)):U(o)},onSuccess:r})),Ge=u(2,(e,t)=>v(()=>{let r=re(e),o=new Array(r.length),n=0;return X(Zn({while:()=>n<r.length,body:()=>t(r[n],n),step:s=>{o[n++]=s}}),o)})),Rt=u(2,(e,t)=>v(()=>{let r=re(e),o=0;return Zn({while:()=>o<r.length,body:()=>t(r[o],o),step:()=>{o++}})})),Ip=u(e=>typeof e[0]=="boolean"||De(e[0]),(e,{onFalse:t,onTrue:r})=>typeof e=="boolean"?e?r:t:m(e,Xo(o=>o?r:t))),Pp=m(tn,e=>Np(e)),Np=e=>U(Sr(e)),Xt=e=>{let t=new Me(wo);t.i0=Ph(Er);let r=o=>o._tag==="Blocked"?be(o.i0,Xt(o.i1)):o;return t.i1=()=>mi(e,r),t},D0=e=>{let t=new Me(wo);t.i0=Ph(Er);let r=o=>o._tag==="Blocked"?be(o.i0,Xt(o.i1)):o;return t.i1=o=>ri(o)?Kr(e(Xt)):Kr(e($r)),m(t,r)},Qr=u(2,(e,t)=>_e(r=>m(ne(r(e)),o=>lg(t,o)))),_=u(2,(e,t)=>m(e,r=>D(()=>t(r)))),Lp=u(2,(e,{onFailure:t,onSuccess:r})=>pe(e,{onFailure:o=>Cr(()=>t(o)),onSuccess:o=>D(()=>r(o))})),Ro=u(2,(e,t)=>ee(e,{onFailure:r=>{let o=Co(r);switch(o._tag){case"Left":return Cr(()=>t(o.left));case"Right":return U(o.right)}},onSuccess:y})),qp=u(2,(e,t)=>_r(e,Xo(r=>Yp(r)?L:t(r.i0)))),_r=u(2,(e,t)=>_e(r=>ee(r(e),{onFailure:o=>{let n=Y(o);return ee(t(n),{onFailure:s=>Y(ve(o,s)),onSuccess:()=>n})},onSuccess:o=>{let n=se(o);return $(t(n),n)}}))),on=u(2,(e,t)=>_r(e,Xp({onFailure:r=>Qo(r)?oe(t(Ta(r))):L,onSuccess:()=>L}))),Vn=u(2,(e,t)=>DI(e,t,y)),Jn=e=>Vh(e,P),Vh=u(2,(e,t)=>pe(e,{onFailure:r=>Gh(t(r)),onSuccess:y})),S0=(e,t)=>re(e).reduceRight(([r,o],n)=>{let s=t(n);switch(s._tag){case"Left":return[[s.left,...r],o];case"Right":return[r,[s.right,...o]]}},[new Array,new Array]),Lt=u(2,(e,t)=>we(Ao,t)(e)),E0=u(2,(e,t)=>Ve(Ao,r=>Cn(r,t))(e)),Yn=u(2,(e,t)=>fi(r=>Lt(e,t(r)))),Hp=he((e,t)=>y(t.runtimeFlags)),y=e=>{let t=new kp(ye);return t.i0=e,t},v=e=>m(D(e),P),D=e=>{let t=new Me(_p);return t.i0=e,t},qt=u(2,(e,t)=>m(e,r=>X(t(r),r))),Bp=e=>he(t=>{let r=t.getFiberRef(Wa),o=J(()=>t.scope())(r);return e(we(Wa,x(o)))}),DI=u(3,(e,t,r)=>ee(e,{onFailure:o=>pp(o).length>0?U(rd(NE(o))):t(),onSuccess:r})),$r=e=>{let t=new Me(wo);t.i0=Nh(Er),t.i1=()=>mi(e,r);let r=o=>o._tag==="Blocked"?be(o.i0,$r(o.i1)):o;return t},_e=e=>{let t=new Me(wo);t.i0=Nh(Er);let r=o=>o._tag==="Blocked"?be(o.i0,$r(o.i1)):o;return t.i1=o=>ri(o)?Kr(e(Xt)):Kr(e($r)),m(t,r)},L=y(void 0),di=e=>{let t=new Me(wo);return t.i0=e,t.i1=void 0,t},hi=u(2,(e,t)=>m(t,r=>r?_(x)(e):y(g()))),Zn=e=>{let t=new Me(ci);return t.i0=e.while,t.i1=e.body,t.i2=e.step,t},C0=u(2,(e,t)=>we(e,$p,t)),_0=u(2,(e,t)=>we(e,Ga,t)),O0=u(2,(e,t)=>{let r=new Me(wo);return r.i0=t,r.i1=()=>e,r}),w0=u(2,(e,t)=>we(e,Ja,t)),Ht=e=>{let t=new Me(ui);return typeof e?.priority<"u"?sg(e.priority)(t):t},jp=u(2,(e,t)=>m(e,r=>_(t,o=>[r,o])));var gi=u(2,(e,t)=>m(e,r=>X(t,r))),$=u(2,(e,t)=>m(e,()=>t)),Fo=u(3,(e,t,r)=>m(e,o=>_(t,n=>r(o,n)))),Qn=Gr(()=>{let e=setInterval(()=>{},2147483647);return z(D(()=>clearInterval(e)))}),nn=e=>m(tn,t=>or(t)(e)),or=u(2,(e,t)=>m(e.interruptAsFork(t),()=>e.await())),Jh={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return C(this,arguments)}},Yh={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return C(this,arguments)}},Zh={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return C(this,arguments)}},Qh={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return C(this,arguments)}},Up={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return C(this,arguments)}},Wp={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return C(this,arguments)}},Xh={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return C(this,arguments)}},eg={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return C(this,arguments)}},tg=[Jh,Xh,Wp,Up,Qh,Zh,Yh,eg],SI="@effect/io/FiberRef",EI=Symbol.for(SI),CI={_A:e=>e},at=e=>R0(e,t=>[t,t]);var Oe=u(2,(e,t)=>m(at(e),t)),Gn=u(2,(e,t)=>R0(e,()=>[void 0,t]));var R0=u(2,(e,t)=>he(r=>{let[o,n]=t(r.getFiberRef(e));return r.setFiberRef(e,n),y(o)}));var _I="@effect/io/RequestResolver",F0=Symbol.for(_I),OI={_R:e=>e,_A:e=>e},h0=class e{constructor(t,r){this.runAll=t,this.target=r,this[d0]=OI,this.runAll=t}[(d0=F0,R)](){return this.target?E(this.target):Uo(this)}[F](t){return this.target?wI(t)&&O(this.target,t.target):this===t}identified(...t){return new e(this.runAll,jr(t))}pipe(){return C(this,arguments)}},wI=e=>typeof e=="object"&&e!=null&&F0 in e;var we=u(3,(e,t,r)=>m(er(gi(at(t),Gn(t,r)),()=>Kr(e),o=>Gn(t,o)),o=>o._tag==="Blocked"?be(o.i0,we(o.i1,t,r)):o)),Ve=u(3,(e,t,r)=>Oe(t,o=>we(e,t,r(o)))),Se=(e,t)=>xi(e,{differ:dE(),fork:t?.fork??P,join:t?.join}),rg=e=>xi(e,{differ:mE(),fork:Yu()}),zp=e=>xi(e,{differ:fE(),fork:Gu()}),xi=(e,t)=>({[EI]:CI,initial:e,diff:(r,o)=>uE(r,o)(t.differ),combine:(r,o)=>pE(r,o)(t.differ),patch:r=>o=>lE(r,o)(t.differ),fork:t.fork,join:t.join??((r,o)=>o),pipe(){return C(this,arguments)}}),A0=e=>xi(e,{differ:Ih,fork:Dp}),Ao=zp(kt()),Ka=Se(0),og=Se(2048),$a=V(Symbol.for("@effect/io/FiberRef/currentLogAnnotation"),()=>Se(yo())),ng=Se(Up),Kp=V(Symbol.for("@effect/io/FiberRef/currentLogSpan"),()=>Se(Dr())),vo=V(Symbol.for("@effect/io/FiberRef/currentScheduler"),()=>Se(zh)),v0=u(2,(e,t)=>we(e,vo,t)),sg=u(2,(e,t)=>we(e,Ka,t)),M0=u(2,(e,t)=>we(e,og,t)),$p=V(Symbol.for("@effect/io/FiberRef/currentConcurrency"),()=>Se("unbounded")),Ga=V(Symbol.for("@effect/io/FiberRef/currentRequestBatching"),()=>Se(!0)),Va=V(Symbol.for("@effect/io/FiberRef/currentUnhandledErrorLogLevel"),()=>Se(x(Wp))),k0=u(2,(e,t)=>we(e,Va,t)),Mo=rg(st()),T0=at(Mo),Wa=V(Symbol.for("@effect/io/FiberRef/currentForkScopeOverride"),()=>Se(g(),{fork:()=>g(),join:(e,t)=>e})),Xn=V(Symbol.for("@effect/io/FiberRef/currentInterruptedCause"),()=>Se(ft,{fork:()=>ft,join:(e,t)=>e})),ko=V(Symbol.for("@effect/io/FiberRef/currentTracerSpan"),()=>Se(Dr())),Ja=V(Symbol.for("@effect/io/FiberRef/currentTracerTiming"),()=>Se(!0)),Gp=V(Symbol.for("@effect/io/FiberRef/currentTracerSpanAnnotations"),()=>Se(yo())),Vp=V(Symbol.for("@effect/io/FiberRef/currentTracerSpanLinks"),()=>Se(pt())),Jp=Symbol.for("@effect/io/Scope"),ig=Symbol.for("@effect/io/CloseableScope");var yi=(e,t)=>e.addFinalizer(t),sn=(e,t)=>e.close(t),ag=(e,t)=>e.fork(t),cg=u(2,(e,t)=>_(FI(e,t),He({onNone:()=>()=>L,onSome:r=>o=>RI(r,o)(e)}))),RI=u(3,(e,t,r)=>v(()=>{switch(e.state._tag){case"Exited":return L;case"Running":{let o=e.state.finalizers.get(t);return e.state.finalizers.delete(t),o!=null?e.state.update(o)(r):L}}})),FI=u(2,(e,t)=>v(()=>{switch(e.state._tag){case"Exited":return e.state.nextKey+=1,X(t(e.state.exit),g());case"Running":{let r=e.state.nextKey;return e.state.finalizers.set(r,t),e.state.nextKey+=1,y(x(r))}}}));var I0=D(()=>({state:{_tag:"Running",nextKey:0,finalizers:new Map,update:P}}));var ug=e=>e._tag==="Failure",Yp=e=>e._tag==="Success";var P0=u(2,(e,t)=>{switch(e._tag){case xe:return Y(e.i0);case ye:return se(t)}}),Ya=e=>P0(e,void 0);var bi=(e,t)=>AI(e,t?.parallel?Be:ve),Zp=e=>Y($e(e));var Or=e=>Y(jn(e)),Y=e=>{let t=new Mp(xe);return t.i0=e,t},N0=u(2,(e,t)=>{switch(e._tag){case xe:return Y(e.i0);case ye:return t(e.i0)}});var L0=e=>N0(P)(e);var Qp=e=>Y(Sr(e)),Ap=u(2,(e,t)=>{switch(e._tag){case xe:return Y(e.i0);case ye:return se(t(e.i0))}});var Xp=u(2,(e,{onFailure:t,onSuccess:r})=>{switch(e._tag){case xe:return t(e.i0);case ye:return r(e.i0)}}),es=u(2,(e,{onFailure:t,onSuccess:r})=>{switch(e._tag){case xe:return t(e.i0);case ye:return r(e.i0)}}),se=e=>{let t=new kp(ye);return t.i0=e,t};var Xr=se(void 0);var Za=u(3,(e,t,{onFailure:r,onSuccess:o})=>{switch(e._tag){case xe:switch(t._tag){case ye:return Y(e.i0);case xe:return Y(r(e.i0,t.i0))}case ye:switch(t._tag){case ye:return se(o(e.i0,t.i0));case xe:return Y(t.i0)}}}),AI=(e,t)=>{let r=jr(e);return rt(r)?x(Ap(o=>Array.from(o))(Ap(bo)(Dt(Ap(Ae)(ot(r)),(o,n)=>Za(n,{onSuccess:(s,i)=>Ie(i)(s),onFailure:t})(o))(nt(r))))):g()},Di=e=>({[i0]:a0,state:St(Cp([])),blockingOn:e,pipe(){return C(this,arguments)}}),mt=()=>m(tn,e=>q0(e)),q0=e=>D(()=>Di(e)),Pe=e=>Gr(t=>{let r=It(e.state);switch(r._tag){case ja:return H(r.effect);case $n:return Zt(Cp([t,...r.joiners]))(e.state),z(vI(e,t))}},e.blockingOn),pg=u(2,(e,t)=>Qr(t,e)),Si=u(2,(e,t)=>D(()=>{let r=It(e.state);switch(r._tag){case ja:return!1;case $n:{Zt(Uh(t))(e.state);for(let o=0;o<r.joiners.length;o++)r.joiners[o](t);return!0}}})),lg=u(2,(e,t)=>Si(e,t)),Qa=u(2,(e,t)=>Si(e,W(t)));var ts=u(2,(e,t)=>Si(e,U(t)));var H0=e=>m(tn,t=>Si(e,Np(t)));var Ei=u(2,(e,t)=>Si(e,y(t)));var Ci=(e,t)=>{let r=It(e.state);if(r._tag===$n){Zt(Uh(t))(e.state);for(let o=r.joiners.length-1;o>=0;o--)r.joiners[o](t)}},vI=(e,t)=>D(()=>{let r=It(e.state);r._tag===$n&&Zt(Cp(r.joiners.filter(o=>o!==t)))(e.state)});var rs=Pe;var B0=lg;var j0=H0;var fg=Di;var W0=L0;var z0=se;var V0,MI="@effect/io/Clock",dg=Symbol.for(MI),eo=et(dg),kI=2**31-1,$0={unsafeSchedule(e,t){let r=qr(t);if(r>kI)return Gt;let o=!1,n=setTimeout(()=>{o=!0,e()},r);return()=>(clearTimeout(n),!o)}},G0=function(){let e=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*e;let t="timeOrigin"in performance&&typeof performance.timeOrigin=="number"?BigInt(Math.round(performance.timeOrigin*1e6)):BigInt(Date.now())*e;return()=>t+BigInt(Math.round(performance.now()*1e6))}(),TI=function(){let e=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!e)return G0;let t=G0()-e.bigint();return()=>t+e.bigint()}(),mg=class{constructor(){this[V0]=dg,this.currentTimeMillis=D(()=>this.unsafeCurrentTimeMillis()),this.currentTimeNanos=D(()=>this.unsafeCurrentTimeNanos())}unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return TI()}scheduler(){return y($0)}sleep(t){return Gr(r=>{let o=$0.unsafeSchedule(()=>r(L),t);return z(oe(D(o)))})}};V0=dg;var J0=()=>new mg;var el="And",tl="Or",rl="InvalidData",ol="MissingData",nl="SourceUnavailable",sl="Unsupported";var PI="@effect/io/Config/Error",hg=Symbol.for(PI),_i={[hg]:hg},il=(e,t)=>{let r=Object.create(_i);return r._tag=el,r.left=e,r.right=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),r},al=(e,t)=>{let r=Object.create(_i);return r._tag=tl,r.left=e,r.right=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),r},to=(e,t,r={pathDelim:"."})=>{let o=Object.create(_i);return o._tag=rl,o.path=e,o.message=t,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Invalid data at ${go(r.pathDelim)(this.path)}: "${this.message}")`}}),o},wr=(e,t,r={pathDelim:"."})=>{let o=Object.create(_i);return o._tag=ol,o.path=e,o.message=t,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Missing data at ${go(r.pathDelim)(this.path)}: "${this.message}")`}}),o},Z0=(e,t,r,o={pathDelim:"."})=>{let n=Object.create(_i);return n._tag=nl,n.path=e,n.message=t,n.cause=r,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Source unavailable at ${go(o.pathDelim)(this.path)}: "${this.message}")`}}),n},cl=(e,t,r={pathDelim:"."})=>{let o=Object.create(_i);return o._tag=sl,o.path=e,o.message=t,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${go(r.pathDelim)(this.path)}: "${this.message}")`}}),o};var To=u(2,(e,t)=>{switch(e._tag){case el:return il(To(t)(e.left),To(t)(e.right));case tl:return al(To(t)(e.left),To(t)(e.right));case rl:return to([...t,...e.path],e.message);case ol:return wr([...t,...e.path],e.message);case nl:return Z0([...t,...e.path],e.message,e.cause);case sl:return cl([...t,...e.path],e.message)}}),NI={andCase:(e,t,r)=>t&&r,orCase:(e,t,r)=>t&&r,invalidDataCase:Gt,missingDataCase:Ir,sourceUnavailableCase:Gt,unsupportedCase:Gt},Q0=u(3,(e,t,r)=>{let o=[e],n=[];for(;o.length>0;){let i=o.pop();switch(i._tag){case el:{o.push(i.right),o.push(i.left),n.push(z({_tag:"AndCase"}));break}case tl:{o.push(i.right),o.push(i.left),n.push(z({_tag:"OrCase"}));break}case rl:{n.push(H(r.invalidDataCase(t,i.path,i.message)));break}case ol:{n.push(H(r.missingDataCase(t,i.path,i.message)));break}case nl:{n.push(H(r.sourceUnavailableCase(t,i.path,i.message,i.cause)));break}case sl:{n.push(H(r.unsupportedCase(t,i.path,i.message)));break}}}let s=[];for(;n.length>0;){let i=n.pop();switch(i._tag){case"Left":{switch(i.left._tag){case"AndCase":{let a=s.pop(),c=s.pop(),p=r.andCase(t,a,c);s.push(p);break}case"OrCase":{let a=s.pop(),c=s.pop(),p=r.orCase(t,a,c);s.push(p);break}}break}case"Right":{s.push(i.right);break}}}if(s.length===0)throw new Error("BUG: ConfigError.reduceWithContext - please report an issue at https://github.com/Effect-TS/io/issues");return s.pop()}),X0=e=>Q0(e,void 0,NI);var gg=X0;var eC="@effect/io/Config/Secret",xg=Symbol.for(eC),qI={[xg]:xg,[R](){return k(mo(this.raw))(E(eC))},[F](e){return HI(e)&&this.raw.length===e.raw.length&&this.raw.every((t,r)=>O(t,e.raw[r]))}},HI=e=>typeof e=="object"&&e!=null&&xg in e,BI=e=>{let t=Object.create(qI);return Object.defineProperty(t,"toString",{enumerable:!1,value(){return"ConfigSecret(<redacted>)"}}),Object.defineProperty(t,"raw",{enumerable:!1,value:e}),t};var tC=e=>BI(e.split("").map(t=>t.charCodeAt(0)));var pl="Constant",ll="Fail",Xa="Fallback",fl="Described",ml="Lazy",dl="MapOrFail",hl="Nested",gl="Primitive",xl="Sequence",yl="HashMap",bl="ZipWith";var UI="@effect/io/Config",Sl=Symbol.for(UI),WI={_A:e=>e},nr={[Sl]:WI,pipe(){return C(this,arguments)}},nC=e=>{let t=an("a boolean property",r=>{switch(r){case"true":case"yes":case"on":case"1":return H(!0);case"false":case"no":case"off":case"0":return H(!1);default:{let o=to([],`Expected a boolean value, but received ${r}`);return z(o)}}});return e===void 0?t:sr(e)(t)},sC=(e,t)=>Io(ut)(El(e,t)),El=(e,t)=>Io(t===void 0?Dl(e):sr(t)(Dl(e)),Pt),iC=e=>{let t=an("a date property",r=>{let o=Date.parse(r);return Number.isNaN(o)?z(to([],`Expected a date value but received ${r}`)):H(new Date(o))});return e===void 0?t:sr(e)(t)},aC=e=>{let t=Object.create(nr);return t._tag=ll,t.message=e,t.parse=()=>z(cl([],e)),t},cC=e=>{let t=an("a number property",r=>{let o=Number.parseFloat(r);return Number.isNaN(o)?z(to([],`Expected an number value but received ${r}`)):H(o)});return e===void 0?t:sr(e)(t)},uC=e=>{let t=an("an integer property",r=>{let o=Number.parseInt(r,10);return Number.isNaN(o)?z(to([],`Expected an integer value but received ${r}`)):H(o)});return e===void 0?t:sr(e)(t)},pC=e=>{let t=Oi(yg(),r=>{let o=r.toUpperCase(),n=tg.find(s=>s.label===o);return n===void 0?z(to([],`Expected a log level, but found: ${r}`)):H(n)});return e===void 0?t:sr(t,e)},Io=u(2,(e,t)=>Oi(e,r=>H(t(r)))),lC=u(2,(e,t)=>Oi(e,r=>{try{return H(t(r))}catch(o){return z(to([],o instanceof Error?o.message:`${o}`))}})),Oi=u(2,(e,t)=>{let r=Object.create(nr);return r._tag=dl,r.original=e,r.mapOrFail=t,r}),fC=e=>t=>wr([],`Expected ${t.description} with name ${e}`),sr=u(2,(e,t)=>{let r=Object.create(nr);return r._tag=hl,r.name=t,r.config=e,r}),mC=u(2,(e,t)=>{let r=Object.create(nr);return r._tag=Xa,r.first=e,r.second=ec(t),r.condition=Ir,r}),Cl=u(2,(e,t)=>{let r=Object.create(nr);return r._tag=Xa,r.first=e,r.second=ec(t.orElse),r.condition=t.if,r}),dC=e=>Cl({orElse:()=>wi(g()),if:gg})(Io(x)(e)),an=(e,t)=>{let r=Object.create(nr);return r._tag=gl,r.description=e,r.parse=t,r},Dl=e=>{let t=Object.create(nr);return t._tag=xl,t.config=e,t},hC=e=>{let t=an("a secret property",r=>H(tC(r)));return e===void 0?t:sr(e)(t)},gC=(e,t)=>{let r=Io(El(e),Ct);return t===void 0?r:sr(t)(r)},yg=e=>{let t=an("a text property",H);return e===void 0?t:sr(e)(t)},xC=e=>Array.isArray(e)?oC(e):Symbol.iterator in e?oC([...e]):yC(e),yC=e=>{let t=Object.entries(e),r=Io(n=>({[t[0][0]]:n}))(t[0][1]);if(t.length===1)return r;let o=t.slice(1);for(let[n,s]of o)r=tc(s,(i,a)=>({...i,[n]:a}))(r);return r},wi=e=>{let t=Object.create(nr);return t._tag=pl,t.value=e,t.parse=()=>H(e),t},ec=e=>{let t=Object.create(nr);return t._tag=ml,t.config=e,t},bC=e=>ec(()=>wi(e())),DC=(e,t)=>{let r=Object.create(nr);return r._tag=yl,r.valueConfig=e,t===void 0?r:sr(t)(r)},bg=e=>typeof e=="object"&&e!=null&&Sl in e,oC=e=>{if(e.length===0)return wi([]);if(e.length===1)return Io(e[0],r=>[r]);let t=Io(e[0],r=>[r]);for(let r=1;r<e.length;r++){let o=e[r];t=tc(o,(n,s)=>[...n,s])(t)}return t},Dg=e=>bg(e)?e:yC(Object.fromEntries(Object.entries(e).map(([t,r])=>[t,Dg(r)]))),SC=u(2,(e,{message:t,validation:r})=>Oi(e,o=>r(o)?H(o):z(to([],t)))),EC=u(2,(e,t)=>Cl(e,{orElse:()=>wi(t),if:gg})),CC=u(2,(e,t)=>{let r=Object.create(nr);return r._tag=fl,r.config=e,r.description=t,r}),_C=u(2,(e,t)=>tc(e,t,(r,o)=>[r,o])),tc=u(3,(e,t,r)=>{let o=Object.create(nr);return o._tag=bl,o.left=e,o.right=t,o.zip=r,o});var wC={_tag:"Empty"};var _l=u(2,(e,t)=>{let r=va(t),o=e;for(;Aa(r);){let n=r.head;switch(n._tag){case"Empty":{r=r.tail;break}case"AndThen":{r=Eo(n.first,Eo(n.second,r.tail));break}case"MapName":{o=ho(o,n.f),r=r.tail;break}case"Nested":{o=dr(o,n.name),r=r.tail;break}case"Unnested":{if(sd(n.name)(Cu(o)))o=Jt(o),r=r.tail;else return z(wr(o,`Expected ${n.name} to be in path in ConfigProvider#unnested`));break}}}return H(o)});var Ol=(e,t)=>[...e,...t],KI="@effect/io/Config/Provider",Sg=Symbol.for(KI),Ri=et(Sg),$I="@effect/io/Config/Provider/Flat",RC=Symbol.for($I),GI=e=>({[Sg]:Sg,pipe(){return C(this,arguments)},...e}),VI=e=>({[RC]:RC,patch:e.patch,load:(t,r,o=!0)=>e.load(t,r,o),enumerateChildren:e.enumerateChildren}),JI=e=>GI({load:t=>m(ir(e,En(),t,!1),r=>He(Cu(r),{onNone:()=>W(wr(En(),`Expected a single value having structure: ${t}`)),onSome:y})),flattened:e}),FC=(e={})=>{let{pathDelim:t,seqDelim:r}=Object.assign({},{pathDelim:"_",seqDelim:","},e),o=c=>go(t)(c),n=c=>c.split(t),s=()=>typeof process<"u"&&"env"in process&&typeof process.env=="object"?process.env:{};return JI(VI({load:(c,p,l=!0)=>{let f=o(c),d=s(),h=f in d?x(d[f]):g();return m(S=>XI(S,c,p,r,l))(Ro(()=>wr(c,`Expected ${f} to exist in the process context`))(h))},enumerateChildren:c=>D(()=>{let p=s(),l=Object.keys(p),d=Array.from(l).map(h=>n(h.toUpperCase())).filter(h=>{for(let S=0;S<c.length;S++){let w=ud(S)(c),A=h[S];if(A===void 0||w!==A)return!1}return!0}).flatMap(h=>h.slice(c.length,c.length+1));return Ct(d)}),patch:wC}))};var YI=(e,t,r,o)=>{let n=fd(r.length,c=>c>=o.length?g():x([e(c),c+1])),s=fd(o.length,c=>c>=r.length?g():x([t(c),c+1])),i=Ol(r,n),a=Ol(o,s);return[i,a]},ir=(e,t,r,o)=>{let n=r;switch(n._tag){case pl:return y(Mt(n.value));case fl:return v(()=>ir(e,t,n.config,o));case ll:return W(wr(t,n.message));case Xa:return Ot(s=>n.condition(s)?Ot(i=>W(al(s,i)))(ir(e,t,n.second,o)):W(s))(v(()=>ir(e,t,n.first,o)));case ml:return v(()=>ir(e,t,n.config(),o));case dl:return v(()=>m(Ge(s=>Ro(To(t))(n.mapOrFail(s))))(ir(e,t,n.original,o)));case hl:return v(()=>ir(e,Ol(t,Mt(n.name)),n.config,o));case gl:return m(s=>m(i=>{if(i.length===0){let a=J(()=>"<n/a>")(MD(s));return W(fC(a))}return y(i)})(e.load(s,n,o)))(_l(t,e.patch));case xl:return m(s=>m(i=>i.length===0?v(()=>_(ir(e,s,n.config,!0),Mt)):_(a=>{let c=Ou(a);return c.length===0?Mt(En()):Mt(c)})(Ge(i,a=>ir(e,AD(t,`[${a}]`),n.config,!0))))(m(rP)(e.enumerateChildren(s))))(_l(t,e.patch));case yl:return v(()=>m(s=>m(i=>_(a=>{if(a.length===0)return Mt(yo());let c=a.map(p=>Array.from(p));return ho(p=>ju(ld(re(i),p)))(eP(c))})(Ge(a=>ir(e,Ol(s,Mt(a)),n.valueConfig,o))(i)))(e.enumerateChildren(s)))(_l(t,e.patch)));case bl:return v(()=>m(s=>m(i=>{if(Re(s)&&Re(i))return W(il(s.left,i.left));if(Re(s)&&Pr(i))return W(s.left);if(Pr(s)&&Re(i))return W(i.left);if(Pr(s)&&Pr(i)){let a=go(".")(t),c=ZI(t,a),[p,l]=YI(c,c,ho(H)(s.right),ho(H)(i.right));return Ge(([f,d])=>_(([h,S])=>n.zip(h,S))(jp(f,d)))(ld(l)(p))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/io/issues")})(Jr(ir(e,t,n.right,o))))(Jr(ir(e,t,n.left,o))))}},ZI=(e,t)=>r=>z(wr(e,`The element at index ${r} in a sequence at path "${t}" was missing`));var QI=(e,t)=>e.split(new RegExp(`\\s*${tP(t)}\\s*`)),XI=(e,t,r,o,n)=>n?Ro(To(t))(Ge(s=>r.parse(s.trim()))(QI(e,o))):Ro(To(t))(_(Mt)(r.parse(e))),eP=e=>Object.keys(e[0]).map(t=>e.map(r=>r[t])),tP=e=>e.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&"),rP=e=>_(Su)(Jr(Lp({onFailure:()=>En(),onSuccess:Sn(vt)})(Ge(e,nP))));var oP=/^(\[(\d+)\])$/,nP=e=>{let t=e.match(oP);if(t!==null){let r=t[2];return mr(sP)(r!==void 0&&r.length>0?x(r):g())}return g()};var sP=e=>{let t=Number.parseInt(e);return Number.isNaN(t)?g():x(t)};var Eg=Symbol("@effect/io/Console"),AC=et(Eg),vC={[Eg]:Eg,assert(e,...t){return D(()=>{console.assert(e,...t)})},clear:D(()=>{console.clear()}),count(e){return D(()=>{console.count(e)})},countReset(e){return D(()=>{console.countReset(e)})},debug(...e){return D(()=>{console.debug(...e)})},dir(e,t){return D(()=>{console.dir(e,t)})},dirxml(...e){return D(()=>{console.dirxml(...e)})},error(...e){return D(()=>{console.error(...e)})},group(e){return e?.collapsed?D(()=>console.groupCollapsed(e?.label)):D(()=>console.group(e?.label))},groupEnd:D(()=>{console.groupEnd()}),info(...e){return D(()=>{console.info(...e)})},log(...e){return D(()=>{console.log(...e)})},table(e,t){return D(()=>{console.table(e,t)})},time(e){return D(()=>console.time(e))},timeEnd(e){return D(()=>console.timeEnd(e))},timeLog(e,...t){return D(()=>{console.timeLog(e,...t)})},trace(...e){return D(()=>{console.trace(...e)})},warn(...e){return D(()=>{console.warn(...e)})},withGroup(e,t){return er(t?.collapsed?D(()=>console.groupCollapsed(t?.label)):D(()=>console.group(t?.label)),()=>e,()=>D(()=>console.groupEnd()))},withTime(e,t){return er(D(()=>console.time(t)),()=>e,()=>D(()=>console.timeEnd(t)))}};var MC,cP="@effect/io/Random",_g=Symbol.for(cP),Og=et(_g),Cg=class{constructor(t){this.seed=t,this[MC]=_g,this.PRNG=new Ms(t)}next(){return D(()=>this.PRNG.number())}nextBoolean(){return _(this.next(),t=>t>.5)}nextInt(){return D(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(t,r){return _(this.next(),o=>(r-t)*o+t)}nextIntBetween(t,r){return D(()=>this.PRNG.integer(r-t)+t)}shuffle(t){return uP(t,r=>this.nextIntBetween(0,r+1))}};MC=_g;var uP=(e,t)=>v(()=>m(r=>{let o=[];for(let n=r.length;n>=2;n=n-1)o.push(n);return X(jr(r))(Rt(n=>_(s=>pP(r,n-1,s))(t(n)))(o))})(D(()=>Array.from(e)))),pP=(e,t,r)=>{let o=e[t];return e[t]=e[r],e[r]=o,e},kC=e=>new Cg(e);var TC=Symbol.for("@effect/io/Tracer"),fP=e=>({[TC]:TC,...e}),Fi=et(Symbol.for("@effect/io/Tracer")),mP=V("@effect/io/Tracer/SpanId.ids",()=>St(0)),wg=class{constructor(t,r,o,n,s){this.name=t,this.parent=r,this.context=o,this.links=n,this.startTime=s,this._tag="Span",this.traceId="native",this.events=[],this.end=(i,a)=>{this.status={_tag:"Ended",endTime:i,exit:a,startTime:this.status.startTime}},this.attribute=(i,a)=>{this.attributes.set(i,a)},this.event=(i,a,c)=>{this.events.push([i,a,c??{}])},this.status={_tag:"Started",startTime:s},this.attributes=new Map,this.spanId=`span${vS(mP)}`}},IC=fP({span:(e,t,r,o,n)=>new wg(e,t,r,o,n)});var dP=Te(Fi,IC)(Te(Ri,FC())(Te(Og,kC(Math.random()*4294967296>>>0))(Te(AC,vC)(Te(eo,J0())(kt()))))),dt=zp(dP),NC=e=>{let t=tt(e);return rc(r=>r.sleep(t))},rc=e=>Oe(dt,t=>e(Lr(t,eo))),LC=rc(e=>e.currentTimeMillis),qC=rc(e=>e.currentTimeNanos),HC=u(2,(e,t)=>Ve(dt,Te(eo,t))(e)),BC=u(2,(e,t)=>Ve(dt,Te(Ri,t))(e)),Rg=e=>Oe(dt,t=>e(Lr(t,Ri))),jC=e=>Rg(t=>t.load(e));var wl=e=>Oe(dt,t=>e(Lr(t,Og)));var Rl=e=>Oe(dt,t=>e(Lr(t,Fi))),UC=u(2,(e,t)=>Ve(dt,Te(Fi,t))(e));var Fg=NC,Fl=LC,Ag=qC,WC=rc;var KC;function $C(e){return new os(e)}var vg=Symbol.for("@effect/io/FiberRefs"),os=class{constructor(t){this.locals=t,this[KC]=vg}pipe(){return C(this,arguments)}};KC=vg;var hP=(e,t,r,o=!1)=>{let n=e,s=t,i=r,a=o,c;for(;c===void 0;)if(Nr(s)&&Nr(i)){let p=Fe(s)[0],l=Jt(s),f=Fe(i)[0],d=Fe(i)[1],h=Jt(i);p.startTimeMillis<f.startTimeMillis?(i=h,a=!0):p.startTimeMillis>f.startTimeMillis?s=l:p.id<f.id?(i=h,a=!0):p.id>f.id?s=l:c=[d,a]}else c=[n.initial,!0];return c},Al=u(3,(e,t,r)=>{let o=new Map(e.locals);for(let[n,s]of r.locals){let i=Fe(s)[1];if(!O(Fe(s)[0],t)){if(!o.has(n)){if(O(i,n.initial))continue;o.set(n,[[t,n.join(n.initial,i)]]);continue}let a=o.get(n),[c,p]=hP(n,a,s);if(p){let l=n.diff(c,i),f=Fe(a)[1],d=n.join(f,n.patch(l)(f));if(!O(f,d)){let h,S=Fe(a)[0];O(S,t)?h=dr([S,d])(Jt(a)):h=dr([t,d])(a),o.set(n,h)}}}}return new os(new Map(o))}),vl=u(2,(e,t)=>{let r=new Map;for(let[o,n]of e.locals.entries()){let s=Fe(n)[1],i=o.patch(o.fork)(s);O(s,i)?r.set(o,n):r.set(o,dr([t,i])(n))}return new os(r)}),GC=e=>Ct(e.locals.keys()),VC=e=>Rt(GC(e),t=>Gn(t,Ai(e,t))),nc=u(2,(e,t)=>{let r=new Map(e.locals);return r.delete(t),new os(r)}),sc=u(2,(e,t)=>e.locals.has(t)?x(Fe(e.locals.get(t))[1]):g()),Ai=u(2,(e,t)=>J(()=>t.initial)(sc(e,t))),ns=u(2,(e,{fiberId:t,fiberRef:r,value:o})=>{let n=e.locals.has(r)?e.locals.get(r):En(),s;if(cd(n))s=Mt([t,o]);else{let[a,c]=Fe(n);if(O(a,t)){if(O(c,o))return e;s=dr([t,o])(Jt(n))}else s=dr([t,o])(n)}let i=new Map(e.locals);return new os(i.set(r,s))});var JC=vl;var YC=Al,ZC=VC,kg=ns,QC=$C;var e_="Empty",t_="Add",r_="Remove",o_="Update",n_="AndThen",s_={_tag:e_},kl=(e,t)=>{let r=new Map(e.locals),o=s_;for(let[n,s]of t.locals.entries()){let i=Fe(s)[1],a=r.get(n);if(a!==void 0){let c=Fe(a)[1];O(c,i)||(o=Ml({_tag:o_,fiberRef:n,patch:n.diff(c,i)})(o))}else o=Ml({_tag:t_,fiberRef:n,value:i})(o);r.delete(n)}for(let[n]of r.entries())o=Ml({_tag:r_,fiberRef:n})(o);return o},Ml=u(2,(e,t)=>({_tag:n_,first:e,second:t})),Tl=u(3,(e,t,r)=>{let o=r,n=Mt(e);for(;Nr(n);){let s=Fe(n),i=Jt(n);switch(s._tag){case e_:{n=i;break}case t_:{o=ns(o,{fiberId:t,fiberRef:s.fiberRef,value:s.value}),n=i;break}case r_:{o=nc(o,s.fiberRef),n=i;break}case o_:{let a=Ai(o,s.fiberRef);o=ns(o,{fiberId:t,fiberRef:s.fiberRef,value:s.fiberRef.patch(s.patch)(a)}),n=i;break}case n_:{n=dr(s.first)(dr(s.second)(i));break}}}return o});var a_,c_="@effect/io/Metric/Label",Tg=Symbol.for(c_),Ig=class{constructor(t,r){this.key=t,this.value=r,this[a_]=Tg}[(a_=Tg,R)](){return k(E(this.value))(k(E(this.key))(E(c_)))}[F](t){return gP(t)&&this.key===t.key&&this.value===t.value}pipe(){return C(this,arguments)}},Il=(e,t)=>new Ig(e,t),gP=e=>typeof e=="object"&&e!=null&&Tg in e;var Pl=class e{constructor(t){this.self=t,this.called=!1}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new e(this.self)}};var yP=Jh,Pg=Yh,Ng=Zh,Lg=Qh,qg=Up,Hg=Wp,Bg=Xh,bP=eg;var DP=ua(e=>e.ordinal)(vt);var p_=Bm(DP);var l_=e=>{switch(e){case"All":return yP;case"Debug":return Hg;case"Error":return Ng;case"Fatal":return Pg;case"Info":return qg;case"Trace":return Bg;case"None":return bP;case"Warning":return Lg}};var m_=(e,t)=>({label:e,startTime:t}),d_=e=>t=>`${t.label.replace(/[\s="]/g,"_")}=${e-t.startTime}ms`;var h_=m_,g_=d_;var y_,Nl=Symbol.for("@effect/io/Ref"),Ug={_A:e=>e},jg=class{constructor(t){this.ref=t,this[y_]=Ug}modify(t){return D(()=>{let r=It(this.ref),[o,n]=t(r);return r!==n&&Zt(n)(this.ref),o})}pipe(){return C(this,arguments)}};y_=Nl;var Ll=e=>new jg(St(e)),ss=e=>D(()=>Ll(e)),Rr=e=>e.modify(t=>[t,t]),ro=u(2,(e,t)=>e.modify(()=>[void 0,t])),b_=u(2,(e,t)=>e.modify(r=>[r,t]));var ql=u(2,(e,t)=>e.modify(t));var ic=u(2,(e,t)=>e.modify(r=>[void 0,t(r)]));var ac=ss,Bl=Rr,D_=b_;var S_=ql;var E_=ic;var __=Rl;var O_=u(e=>De(e[0]),function(){let e=arguments;return Ve(e[0],$a,typeof e[1]=="string"?Br(e[1],e[2]):t=>Object.entries(e[1]).reduce((r,[o,n])=>Br(r,o,n),t))}),jl=e=>_(e,x),w_=e=>Ro(e,x),R_=(e,t=lt)=>Gr(r=>{let o=e(r);switch(o._tag){case"None":return z(L);case"Some":return H(o.value)}},t),cc=e=>{let t,r;return typeof e=="function"?t=e:(t=e.try,r=e.catch),D(()=>{try{return t()}catch(o){throw x0(jn(r?r(o):o))}})},F_=u(3,(e,t,r)=>Ot(e,o=>typeof o=="object"&&o!=null&&t in o&&o[t]===r.failure?r.onFailure(o):W(o))),A_=u(2,(e,t)=>Vr(e,Xo(r=>{let o=Ia(r,n=>up(n)?x(n):g());switch(o._tag){case"None":return U(r);case"Some":return t(o.value.defect)}}))),v_=u(2,(e,t)=>ee(e,{onFailure:r=>{let o=t(r);switch(o._tag){case"None":return U(r);case"Some":return o.value}},onSuccess:y})),M_=u(2,(e,t)=>Vr(e,Xo(r=>{let o=Ia(r,n=>up(n)?x(n):g());switch(o._tag){case"None":return U(r);case"Some":{let n=t(o.value.defect);return n._tag==="Some"?n.value:U(r)}}}))),k_=u(3,(e,t,r)=>Ot(e,o=>de(o)&&"_tag"in o&&o._tag===t?r(o):W(o))),T_=u(2,(e,t)=>Ot(e,r=>{let o=Object.keys(t);return de(r)&&"_tag"in r&&o.includes(r._tag)?t[r._tag](r):W(r)})),I_=e=>za(e,{onFailure:P,onSuccess:()=>ft}),oo=WC,P_=oo(y),N_=u(2,(e,t)=>$(Fg(t),e)),Ul=e=>he((t,r)=>e({id:t.id(),status:r,interruptors:Ta(t.getFiberRef(Xn))})),L_=Ul(e=>So(e.interruptors)>0?Pp:L),q_=Ul(y),is=e=>Wl(e,Kg,kl),H_=y({}),B_=u(3,(e,t,r)=>m(e,o=>_(r(o),n=>({...o,[t]:n})))),j_=u(2,(e,t)=>_(e,r=>({[t]:r}))),U_=u(3,(e,t,r)=>_(e,o=>({...o,[t]:r(o)}))),W_=u(2,(e,t)=>v(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!1),i=0;for(;(n=r.next())&&!n.done;){let a=n.value,c=i++;s=m(s,p=>p?(o.push(a),y(!0)):t(a,c))}return _(s,()=>o)})),z_=u(2,(e,t)=>v(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!0),i=0;for(;(n=r.next())&&!n.done;){let a=n.value,c=i++;s=m(s,p=>_(p?t(a,c):y(!1),l=>(l||o.push(a),l)))}return _(s,()=>o)})),K_=e=>_(Yr(),e),zg=e=>Vn(e,()=>m(Ht(),()=>zg(e)));var $_=u(3,(e,t,r)=>uc(e,t,()=>en(r))),G_=u(3,(e,t,r)=>uc(e,t,()=>li(r))),uc=u(3,(e,t,r)=>m(e,o=>t(o)?y(o):r(o))),V_=u(3,(e,t,r)=>uc(e,t,o=>Cr(()=>r(o)))),J_=u(2,(e,t)=>v(()=>{let r=e[Symbol.iterator](),o=r.next();return o.done?y(g()):Y_(r,0,t,o.value)})),Y_=(e,t,r,o)=>m(r(o,t),n=>{if(n)return y(x(o));let s=e.next();return s.done?y(g()):Y_(e,t+1,r,s.value)}),Z_=e=>v(()=>{let t=jr(e);return rt(t)?Dt(ot(t),(r,o)=>Vn(r,()=>o))(nt(t)):en(()=>ti("Received an empty collection of effects"))}),Q_=u(2,(e,t)=>rn(t(rn(e)))),pc=u(2,(e,{onFailure:t,onSuccess:r})=>pe(e,{onFailure:o=>y(t(o)),onSuccess:o=>y(r(o))})),X_=u(2,(e,t)=>v(()=>eO(e[Symbol.iterator](),0,t))),eO=(e,t,r)=>{let o=e.next();return o.done?y(!0):m(r(o.value,t),n=>n?eO(e,t+1,r):y(n))},tO=e=>{let t=m(m(e,()=>Ht()),()=>t);return t},Wg=class{constructor(t){this.value=t}[Symbol.iterator](){return new Pl(this)}},CP=function(){let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return new Wg(e)},rO=e=>v(()=>{let t=e(CP),r=t.next(),o=n=>n.done?y(n.value):m(s=>o(t.next(s)))(n.value.value);return o(r)}),Kg=he(e=>y(e.unsafeGetFiberRefs())),oO=e=>pe(e,{onFailure:t=>W(x(t)),onSuccess:t=>{let o=t[Symbol.iterator]().next();return o.done?W(g()):y(o.value)}}),nO=e=>pc(e,{onFailure:Rs,onSuccess:Rs}),sO=e=>ee(e,{onFailure:t=>Gg(t,"An error was silently ignored because it is not anticipated to be useful"),onSuccess:()=>L}),iO=e=>zl((t,r)=>YC(r,t,e)),aO=e=>pc(e,{onFailure:Ir,onSuccess:Gt}),cO=e=>pc(e,{onFailure:Gt,onSuccess:Ir}),$g=(e,t)=>v(()=>t.while(e)?m(t.body(e),r=>$g(r,t)):y(e)),as=e=>(t,r)=>{let o=Xe(e),n,s;return cp(t)?(s=t,n=r??""):(n=t,s=r??ft),he(i=>(i.log(n,s,o),L))},uO=as(),pO=as(Bg),Gg=as(Hg),lO=as(qg),fO=as(Lg),mO=as(Ng),dO=as(Pg),hO=u(2,(e,t)=>m(Fl,r=>Ve(e,Kp,Vo(h_(t,r))))),gO=at($a),xO=(e,t)=>t.discard?bO(e,t.while,t.step,t.body):_(yO(e,t.while,t.step,t.body),r=>Array.from(r)),yO=(e,t,r,o)=>v(()=>t(e)?m(o(e),n=>_(yO(r(e),t,r,o),Vo(n))):D(()=>Dr())),bO=(e,t,r,o)=>v(()=>t(e)?m(o(e),()=>bO(r(e),t,r,o)):L),DO=u(3,(e,t,r)=>v(()=>{let o=e[Symbol.iterator](),n=[],s=y(t),i,a=0;for(;!(i=o.next()).done;){let c=a++;s=m(s,p=>_(r(p,i.value,c),([l,f])=>(n.push(f),l)))}return _(s,c=>[c,n])})),vi=u(2,(e,t)=>ee(e,{onFailure:r=>Zr(()=>t(r)),onSuccess:y})),Vg=e=>m(t=>_(r=>$(r,m(([o,n])=>X(cs(o),n))(Pe(t))))(Jg(Qr(t)(is(e)))))(mt()),SO=e=>pe(e,{onFailure:t=>y(t),onSuccess:y}),lc=e=>_(e,t=>!t),EO=e=>pe(e,{onFailure:t=>W(x(t)),onSuccess:t=>{switch(t._tag){case"None":return L;case"Some":return W(g())}}}),Jg=e=>_(ac(!0),t=>oe(hi(e,D_(t,!1)))),CO=e=>pe(e,{onFailure:()=>y(g()),onSuccess:t=>y(x(t))}),_O=u(2,(e,t)=>Vn(e,()=>Cr(t))),OO=u(2,(e,t)=>Vn(e,()=>D(t))),wO=e=>ee(e,{onFailure:t=>{let r=Array.from(ka(t));return r.length===0?U(t):W(r)},onSuccess:y}),cs=e=>zl((t,r)=>Tl(t,r)(e)),RO=e=>e.length>=1?tr((t,r)=>{e(r).then(o=>t(se(o))).catch(o=>t(Zp(o)))}):tr(t=>{e().then(r=>t(se(r))).catch(r=>t(Zp(r)))}),FO=u(3,(e,t,r)=>Yg(e,t,y(r))),Yg=u(3,(e,t,r)=>fi(o=>m(r,n=>Lt(e,Te(t,n)(o))))),AO=wl(y),vO=u(3,(e,t,r)=>re(e).reduce((o,n,s)=>m(o,i=>r(i,n,s)),y(t))),MO=u(3,(e,t,r)=>re(e).reduceRight((o,n,s)=>m(o,i=>r(n,i,s)),y(t))),kO=u(3,(e,t,r)=>m(D(()=>e[Symbol.iterator]()),o=>TO(o,0,t,r.while,r.body))),TO=(e,t,r,o,n)=>{let s=e.next();return!s.done&&o(r)?m(n(r,s.value,t),i=>TO(e,t+1,i,o,n)):y(r)},IO=u(2,(e,t)=>v(()=>PO(e,t))),PO=(e,t)=>m(e,r=>t<=0?y(r):$(Ht(),PO(e,t-1))),NO=e=>ee(e,{onFailure:W,onSuccess:y}),LO=e=>v(()=>ZC(e)),Mi=Fg,qO=e=>pe(e,{onFailure:t=>W(x(t)),onSuccess:t=>{switch(t._tag){case"None":return W(g());case"Some":return y(t.value)}}}),ki=y(g()),Zg=e=>y(x(e)),Wl=u(3,(e,t,r)=>m(t,o=>m(e,n=>_(t,s=>[r(o,s),n])))),HO=u(3,(e,t,r)=>Qg(e,[Il(t,r)])),Qg=u(2,(e,t)=>Xg(e,Ct(t))),Xg=u(2,(e,t)=>Ve(Mo,r=>it(t)(r))(e)),BO=u(2,(e,t)=>v(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!1),i=0;for(;(n=r.next())&&!n.done;){let a=n.value,c=i++;s=m(s,p=>p?y(!0):(o.push(a),t(a,c)))}return _(s,()=>o)})),jO=u(2,(e,t)=>v(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!0),i=0;for(;(n=r.next())&&!n.done;){let a=n.value,c=i++;s=m(s,p=>_(l=>(l&&o.push(a),l))(p?t(a,c):y(!1)))}return _(s,()=>o)})),UO=u(2,(e,{onFailure:t,onSuccess:r})=>ee(e,{onFailure:o=>{let n=Co(o);switch(n._tag){case"Left":return $(t(n.left),U(o));case"Right":return U(o)}},onSuccess:o=>X(r(o),o)})),WO=u(2,(e,t)=>Vr(e,r=>He(_h(r),{onNone:()=>U(r),onSome:o=>$(t(o),U(r))}))),ex=u(2,(e,t)=>ee(e,{onFailure:r=>{let o=Co(r);switch(o._tag){case"Left":return $(t(o.left),U(r));case"Right":return U(r)}},onSuccess:y})),zO=u(3,(e,t,r)=>ex(e,o=>de(o)&&"_tag"in o&&o._tag===t?r(o):L)),KO=u(2,(e,t)=>ee(e,{onFailure:r=>$(t(r),U(r)),onSuccess:y})),$O=e=>tx(e,Ag),tx=u(2,(e,t)=>Wl(e,t,(r,o)=>Au(o-r))),GO=__,VO=GO(y),rx=e=>{let t,r;return typeof e=="function"?t=e:(t=e.try,r=e.catch),t.length>=1?v(()=>{let o=new AbortController;return m(cc(()=>t(o.signal)),n=>tr(s=>(n.then(i=>s(se(i))).catch(i=>s(Or(r?r(i):i))),D(()=>o.abort()))))}):m(cc(e),o=>tr(n=>{o.then(s=>n(se(s))).catch(s=>n(Or(r?r(s):s)))}))},JO=u(2,(e,t)=>m(e,r=>cc({try:()=>t.try(r),catch:t.catch}))),YO=u(2,(e,t)=>m(e,r=>rx({try:t.try.length>=1?o=>t.try(r,o):()=>t.try(r),catch:t.catch}))),ZO=u(2,(e,t)=>v(()=>t()?ki:jl(e))),QO=u(2,(e,t)=>m(t,r=>r?ki:jl(e))),XO=e=>vi(e,Oh),zl=e=>he(t=>(t.setFiberRefs(e(t.id(),t.unsafeGetFiberRefs())),L)),ew=u(3,(e,t,r)=>Yn(e,o=>Te(o,t,r(Ls(o,t))))),Kl=u(2,(e,t)=>v(()=>t()?_(e,x):y(g()))),tw=u(3,(e,t,r)=>m(at(t),o=>r(o)?_(e,n=>[o,x(n)]):y([o,g()]))),rw=u(3,(e,t,r)=>m(Bl(t),o=>r(o)?_(e,n=>[o,x(n)]):y([o,g()]))),ow=u(2,(e,t)=>t(e)),nw=(e,t)=>(...r)=>m(e,o=>t(o)(...r)),sw=(e,t)=>(...r)=>_(e,o=>t(o)(...r)),ox=e=>new Proxy({},{get(t,r,o){return(...n)=>m(e,s=>s[r](...n))}}),nx=e=>new Proxy({},{get(t,r,o){return m(e,n=>n[r])}}),iw=e=>({functions:ox(e),constants:nx(e)}),aw=function(){let e=arguments;return m(ix,t=>t._tag==="Some"?D(()=>{if(typeof e[0]=="string")t.value.attribute(e[0],e[1]);else for(let r in e[0])t.value.attribute(r,e[0][r])}):L)},cw=u(e=>De(e[0]),function(){let e=arguments;return Ve(e[0],Gp,typeof e[1]=="string"?Br(e[1],e[2]):t=>Object.entries(e[1]).reduce((r,[o,n])=>Br(r,o,n),t))}),sx=_(at(ko),Qu),ix=_(at(ko),yE(e=>e._tag==="Span")),_P=BigInt(0),$l=Oe(Ja,e=>e?Ag:y(_P)),uw=u(e=>De(e[0]),(e,t,r)=>Ve(e,Vp,Ku({_tag:"SpanLink",span:t,attributes:r??{}}))),Ti=(e,t)=>GO(r=>m(t?.parent?Zg(t.parent):t?.root?ki:sx,o=>m(at(Gp),n=>m(at(Vp),s=>m($l,i=>D(()=>{let a=t?.links?[...ut(s),...t.links]:ut(s),c=r.span(e,o,t?.context??kt(),a,i);return AS(n,(p,l)=>c.attribute(l,p)),Object.entries(t?.attributes??{}).forEach(([p,l])=>c.attribute(p,l)),c})))))),pw=at(Gp),lw=at(Vp),ax=(e,...t)=>{let r=t.length===1?void 0:t[0],o=t[t.length-1];return er(Ti(e,r),o,(n,s)=>m($l,i=>D(()=>n.end(i,s))))},cx=u(2,(e,t)=>Ve(e,ko,Vo(t))),fw=u(e=>typeof e[0]!="string",(e,t,r)=>ax(t,r??{},o=>cx(e,o))),mw=e=>v(()=>{let t=e();return t==null?W(_o()):y(t)}),dw=e=>Ot(_(e,x),t=>Fh(t)?ki:W(t));var hw,gw,xw,Gl="@effect/io/Fiber/Status",cn=Symbol.for(Gl),ux="Done",yw="Running",bw="Suspended",px=class{constructor(){this[hw]=cn,this._tag=ux}[(hw=cn,R)](){return k(E(this._tag))(E(Gl))}[F](t){return Vl(t)&&t._tag===ux}},lx=class{constructor(t){this.runtimeFlags=t,this[gw]=cn,this._tag=yw}[(gw=cn,R)](){return k(E(this.runtimeFlags))(k(E(this._tag))(E(Gl)))}[F](t){return Vl(t)&&t._tag===yw&&this.runtimeFlags===t.runtimeFlags}},fx=class{constructor(t,r){this.runtimeFlags=t,this.blockingOn=r,this[xw]=cn,this._tag=bw}[(xw=cn,R)](){return k(E(this.blockingOn))(k(E(this.runtimeFlags))(k(E(this._tag))(E(Gl))))}[F](t){return Vl(t)&&t._tag===bw&&this.runtimeFlags===t.runtimeFlags&&O(this.blockingOn,t.blockingOn)}},Dw=new px,Sw=e=>new lx(e),Ew=(e,t)=>new fx(e,t),Vl=e=>typeof e=="object"&&e!=null&&cn in e,Cw=e=>e._tag===ux;var _w=Dw,mx=Sw,Ow=Ew;var ww=Cw;var Pi=kl;var dx=Tl;var Jl=V(Symbol.for("@effect/io/FiberRef/currentRequestMap"),()=>Se(new Map));var hx=(e,t,r,o)=>{switch(e?.concurrency){case void 0:return t();case"unbounded":return r();case"inherit":return Oe($p,n=>n==="unbounded"?r():n>1?o(n):t());default:return e.concurrency>1?o(e.concurrency):t()}},fc=(e,t,r)=>{switch(e?.concurrency){case void 0:return t();case"unbounded":return r();case"inherit":return Oe($p,o=>o==="unbounded"||o>1?r():t());default:return e.concurrency>1?r():t()}};var Fw="Sequential",Aw="Parallel";var Ni={_tag:Fw},vw={_tag:Aw};var Mw=e=>e._tag===Fw,kw=e=>e._tag===Aw;var Yl="InterruptSignal",Zl="Stateful",Ql="Resume",Xl="YieldNow",gx=e=>({_tag:Yl,cause:e}),Li=e=>({_tag:Zl,onFiber:e}),us=e=>({_tag:Ql,effect:e}),Iw=()=>({_tag:Xl});var Nw,Lw,AP="@effect/io/Fiber/Scope",ef=Symbol.for(AP),xx=class{constructor(){this[Nw]=ef,this.fiberId=lt,this.roots=new Set}add(t,r){this.roots.add(r),r.unsafeAddObserver(()=>{this.roots.delete(r)})}};Nw=ef;var yx=class{constructor(t,r){this.fiberId=t,this.parent=r,this[Lw]=ef}add(t,r){this.parent.tell(Li(o=>{o.addChild(r),r.unsafeAddObserver(()=>{o.removeChild(r)})}))}};Lw=ef;var qw=e=>new yx(e.id(),e),ps=V(Symbol.for("@effect/io/FiberScope/Global"),()=>new xx);var vP="@effect/io/Fiber",mc=Symbol.for(vP),dc={_E:e=>e,_A:e=>e},MP={[mc]:dc,pipe(){return C(this,arguments)}},kP="@effect/io/Fiber",Bw=Symbol.for(kP);var bx=e=>e.await();var jw=e=>e.inheritAll();var Uw=u(2,(e,t)=>e.interruptAsFork(t)),ls=e=>gi(wt(e.await()),e.inheritAll());var oG={...MP,id:()=>lt,await:()=>Qn,children:()=>y([]),inheritAll:()=>Qn,poll:()=>y(g()),interruptAsFork:()=>Qn};var un="@effect/io/Fiber/Current";var TP="@effect/io/Logger",zw=Symbol.for(TP),Kw={_Message:e=>e,_Output:e=>e},tf=e=>({[zw]:Kw,log:e,pipe(){return C(this,arguments)}});var iG={[zw]:Kw,log:Rs,pipe(){return C(this,arguments)}};var $w=tf(({annotations:e,cause:t,date:r,fiberId:o,logLevel:n,message:s,spans:i})=>{let a=r.getTime(),p=[`timestamp=${r.toISOString()}`,`level=${n.label}`,`fiber=${op(o)}`].join(" "),l=IP(s);if(l.length>0&&(p=p+" message=",p=Dx(l,p)),t!=null&&t!=ft&&(p=p+" cause=",p=Dx(Oo(t),p)),Aa(i)){p=p+" ";let f=!0;for(let d of i)f?f=!1:p=p+" ",p=p+g_(a)(d)}if(Uu(e)>0){p=p+" ";let f=!0;for(let[d,h]of e)f?f=!1:p=p+" ",p=p+LP(d),p=p+"=",p=Dx(String(h),p)}return p}),IP=e=>{try{return typeof e=="object"?JSON.stringify(e):String(e)}catch{return String(e)}},PP=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,NP=/^[^\s"=]+$/,Dx=(e,t)=>t+(e.match(NP)?e:PP(e));var LP=e=>e.replace(/[\s="]/g,"_");var Gw,Vw="@effect/io/Metric/Boundaries",Sx=Symbol.for(Vw),Ex=class{constructor(t){this.values=t,this[Gw]=Sx}[(Gw=Sx,R)](){return k(E(this.values))(E(Vw))}[F](t){return HP(t)&&O(this.values,t.values)}pipe(){return C(this,arguments)}},HP=e=>typeof e=="object"&&e!=null&&Sx in e,BP=e=>{let t=LS(br(Ae(Number.POSITIVE_INFINITY))(e));return new Ex(t)};var Jw=e=>BP(Pt(ad(e.count-1,t=>e.start*Math.pow(e.factor,t))));var Yw,Zw,Qw,Xw,eR,tR,rR,oR,nR,sR,UP="@effect/io/Metric/KeyType",hc=Symbol.for(UP),uR="effect/io/Metric/KeyType/Counter",Cx=Symbol.for(uR),pR="effect/io/Metric/KeyType/Frequency",_x=Symbol.for(pR),lR="effect/io/Metric/KeyType/Gauge",Ox=Symbol.for(lR),fR="effect/io/Metric/KeyType/Histogram",wx=Symbol.for(fR),mR="effect/io/Metric/KeyType/Summary",Rx=Symbol.for(mR),gc={_In:e=>e,_Out:e=>e},Fx=class{constructor(){this[Yw]=gc,this[Zw]=Cx}[(Yw=hc,Zw=Cx,R)](){return E(uR)}[F](t){return vx(t)}pipe(){return C(this,arguments)}},iR=class{constructor(){this[Qw]=gc,this[Xw]=_x}[(Qw=hc,Xw=_x,R)](){return E(pR)}[F](t){return Mx(t)}pipe(){return C(this,arguments)}},aR=class{constructor(){this[eR]=gc,this[tR]=Ox}[(eR=hc,tR=Ox,R)](){return E(lR)}[F](t){return kx(t)}pipe(){return C(this,arguments)}},Ax=class{constructor(t){this.boundaries=t,this[rR]=gc,this[oR]=wx}[(rR=hc,oR=wx,R)](){return k(E(this.boundaries))(E(fR))}[F](t){return Tx(t)&&O(this.boundaries,t.boundaries)}pipe(){return C(this,arguments)}},cR=class{constructor(t,r,o,n){this.maxAge=t,this.maxSize=r,this.error=o,this.quantiles=n,this[nR]=gc,this[sR]=Rx}[(nR=hc,sR=Rx,R)](){return k(E(this.quantiles))(k(E(this.error))(k(E(this.maxSize))(k(E(this.maxAge))(E(mR)))))}[F](t){return Ix(t)&&O(this.maxAge,t.maxAge)&&this.maxSize===t.maxSize&&this.error===t.error&&O(this.quantiles,t.quantiles)}pipe(){return C(this,arguments)}},dR=new Fx;var hR=e=>new Ax(e);var vx=e=>typeof e=="object"&&e!=null&&Cx in e,Mx=e=>typeof e=="object"&&e!=null&&_x in e,kx=e=>typeof e=="object"&&e!=null&&Ox in e,Tx=e=>typeof e=="object"&&e!=null&&wx in e,Ix=e=>typeof e=="object"&&e!=null&&Rx in e;var xR,WP="@effect/io/Metric/Key",yR=Symbol.for(WP),zP={_Type:e=>e},xc=class{constructor(t,r,o,n=st()){this.name=t,this.keyType=r,this.description=o,this.tags=n,this[xR]=zP}[(xR=yR,R)](){return k(E(this.tags))(k(E(this.description))(k(E(this.keyType))(E(this.name))))}[F](t){return KP(t)&&this.name===t.name&&O(this.keyType,t.keyType)&&O(this.description,t.description)&&O(this.tags,t.tags)}pipe(){return C(this,arguments)}},KP=e=>typeof e=="object"&&e!=null&&yR in e,bR=(e,t)=>new xc(e,dR,Xe(t));var DR=(e,t,r)=>new xc(e,hR(t),Xe(r));var SR=u(2,(e,t)=>So(t)===0?e:new xc(e.name,e.keyType,e.description,it(t)(e.tags)));var ER,CR,_R,OR,wR,RR,FR,AR,vR,MR,GP="@effect/io/Metric/State",yc=Symbol.for(GP),kR="effect/io/Metric/State/Counter",Px=Symbol.for(kR),TR="effect/io/Metric/State/Frequency",Nx=Symbol.for(TR),IR="effect/io/Metric/State/Gauge",Lx=Symbol.for(IR),PR="effect/io/Metric/State/Histogram",qx=Symbol.for(PR),NR="effect/io/Metric/State/Summary",Hx=Symbol.for(NR),bc={_A:e=>e},Bx=class{constructor(t){this.count=t,this[ER]=bc,this[CR]=Px}[(ER=yc,CR=Px,R)](){return k(E(this.count))(E(kR))}[F](t){return VP(t)&&this.count===t.count}pipe(){return C(this,arguments)}},jx=class{constructor(t){this.occurrences=t,this[_R]=bc,this[OR]=Nx}[(_R=yc,OR=Nx,R)](){return k(E(this.occurrences))(E(TR))}[F](t){return JP(t)&&O(this.occurrences,t.occurrences)}pipe(){return C(this,arguments)}},Ux=class{constructor(t){this.value=t,this[wR]=bc,this[RR]=Lx}[(wR=yc,RR=Lx,R)](){return k(E(this.value))(E(IR))}[F](t){return YP(t)&&this.value===t.value}pipe(){return C(this,arguments)}},Wx=class{constructor(t,r,o,n,s){this.buckets=t,this.count=r,this.min=o,this.max=n,this.sum=s,this[FR]=bc,this[AR]=qx}[(FR=yc,AR=qx,R)](){return k(E(this.sum))(k(E(this.max))(k(E(this.min))(k(E(this.count))(k(E(this.buckets))(E(PR))))))}[F](t){return ZP(t)&&O(this.buckets,t.buckets)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return C(this,arguments)}},zx=class{constructor(t,r,o,n,s,i){this.error=t,this.quantiles=r,this.count=o,this.min=n,this.max=s,this.sum=i,this[vR]=bc,this[MR]=Hx}[(vR=yc,MR=Hx,R)](){return k(E(this.sum))(k(E(this.max))(k(E(this.min))(k(E(this.count))(k(E(this.quantiles))(k(E(this.error))(E(NR)))))))}[F](t){return QP(t)&&this.error===t.error&&O(this.quantiles,t.quantiles)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return C(this,arguments)}},LR=e=>new Bx(e),qR=e=>new jx(e),HR=e=>new Ux(e),BR=e=>new Wx(e.buckets,e.count,e.min,e.max,e.sum),jR=e=>new zx(e.error,e.quantiles,e.count,e.min,e.max,e.sum);var VP=e=>typeof e=="object"&&e!=null&&Px in e,JP=e=>typeof e=="object"&&e!=null&&Nx in e,YP=e=>typeof e=="object"&&e!=null&&Lx in e,ZP=e=>typeof e=="object"&&e!=null&&qx in e,QP=e=>typeof e=="object"&&e!=null&&Hx in e;var eN="@effect/io/Metric/Hook",tN=Symbol.for(eN),rN={_In:e=>e,_Out:e=>e},Dc=e=>({[tN]:rN,pipe(){return C(this,arguments)},...e});var WR=e=>{let t=0;return Dc({get:()=>LR(t),update:r=>{t=t+r}})},zR=e=>{let t=0,r=new Map,o=s=>{t=t+1;let i=r.get(s)??0;r.set(s,i+1)},n=()=>ju(r.entries());return Dc({get:()=>qR(n()),update:o})},KR=(e,t)=>{let r=t;return Dc({get:()=>HR(r),update:o=>{r=o}})},$R=e=>{let t=e.keyType.boundaries.values,r=t.length,o=new Uint32Array(r+1),n=new Float32Array(r),s=0,i=0,a=Number.MAX_VALUE,c=Number.MIN_VALUE;Ud((f,d)=>{n[d]=f})($u(vt)(t));let p=f=>{let d=0,h=r;for(;d!==h;){let S=Math.floor(d+(h-d)/2),w=n[S];f<=w?h=S:d=S,h===d+1&&(f<=n[d]?h=d:d=h)}o[d]=o[d]+1,s=s+1,i=i+f,f<a&&(a=f),f>c&&(c=f)},l=()=>{let f=Array(r),d=0;for(let h=0;h<r;h++){let S=n[h],w=o[h];d=d+w,f[h]=[S,d]}return Pt(f)};return Dc({get:()=>BR({buckets:l(),count:s,min:a,max:c,sum:i}),update:p})},GR=e=>{let{error:t,maxAge:r,maxSize:o,quantiles:n}=e.keyType,s=$u(vt)(n),i=Array(o),a=0,c=0,p=0,l=Number.MAX_VALUE,f=Number.MIN_VALUE,d=S=>{let w=[],A=0;for(;A!==o-1;){let I=i[A];if(I!=null){let[j,K]=I,ae=qs(S-j);Ed(ae,Dd)&&ae<=r&&w.push(K)}A=A+1}return oN(t,s,$u(vt)(Pt(w)))},h=(S,w)=>{if(o>0){a=a+1;let A=a%o;i[A]=[w,S]}c=c+1,p=p+S,S<l&&(l=S),S>f&&(f=S)};return Dc({get:()=>jR({error:t,quantiles:d(Date.now()),count:c,min:l,max:f,sum:p}),update:([S,w])=>h(S,w)})},oN=(e,t,r)=>{let o=r.length;if(Gs(t))return pt();let n=kn(t),s=$s(1)(t),i=Dt(Ae(UR(e,o,g(),0,n,r)),(a,c)=>{let p=kn(a);return Ku(UR(e,o,p.value,p.consumed,c,p.rest))(a)})(s);return Ud(a=>[a.quantile,a.value])(i)},UR=(e,t,r,o,n,s)=>{let i=e,a=t,c=r,p=o,l=n,f=s,d=e,h=t,S=r,w=o,A=n,I=s;for(;;){if(Gs(f))return{quantile:l,value:g(),consumed:p,rest:pt()};if(l===1)return{quantile:l,value:x(PS(f)),consumed:p+f.length,rest:pt()};let j=NS(me=>me>kn(f))(f),K=l*a,ae=i/2*K,Ee=p+j[0].length,Le=Math.abs(Ee-K);if(Ee<K-ae){d=i,h=a,S=Mn(f),w=Ee,A=l,I=j[1],i=d,a=h,c=S,p=w,l=A,f=I;continue}if(Ee>K+ae)return{quantile:l,value:c,consumed:p,rest:f};switch(c._tag){case"None":{d=i,h=a,S=Mn(f),w=Ee,A=l,I=j[1],i=d,a=h,c=S,p=w,l=A,f=I;continue}case"Some":{let me=Math.abs(K-c.value);if(Le<me){d=i,h=a,S=Mn(f),w=Ee,A=l,I=j[1],i=d,a=h,c=S,p=w,l=A,f=I;continue}return{quantile:l,value:x(c.value),consumed:p,rest:f}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/io/issues")};var sN="@effect/io/Metric/Pair",iN=Symbol.for(sN),aN={_Type:e=>e};var VR=(e,t)=>({[iN]:aN,metricKey:e,metricState:t,pipe(){return C(this,arguments)}});var JR,uN="@effect/io/Metric/Registry",YR=Symbol.for(uN),Kx=class{constructor(){this[JR]=YR,this.map=An()}snapshot(){let t=[];for(let[r,o]of this.map)t.push(VR(r,o.get()));return Ct(t)}get(t){let r=Ke(Ce(t)(this.map));if(r==null){if(vx(t.keyType))return this.getCounter(t);if(kx(t.keyType))return this.getGauge(t);if(Mx(t.keyType))return this.getFrequency(t);if(Tx(t.keyType))return this.getHistogram(t);if(Ix(t.keyType))return this.getSummary(t);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/io/issues")}else return r}getCounter(t){let r=Ke(Ce(t)(this.map));if(r==null){let o=WR(t);xr(t)(this.map)||Et(t,o)(this.map),r=o}return r}getFrequency(t){let r=Ke(Ce(t)(this.map));if(r==null){let o=zR(t);xr(t)(this.map)||Et(t,o)(this.map),r=o}return r}getGauge(t){let r=Ke(Ce(t)(this.map));if(r==null){let o=KR(t,0);xr(t)(this.map)||Et(t,o)(this.map),r=o}return r}getHistogram(t){let r=Ke(Ce(t)(this.map));if(r==null){let o=$R(t);xr(t)(this.map)||Et(t,o)(this.map),r=o}return r}getSummary(t){let r=Ke(Ce(t)(this.map));if(r==null){let o=GR(t);xr(t)(this.map)||Et(t,o)(this.map),r=o}return r}};JR=YR;var ZR=()=>new Kx;var lN="@effect/io/Metric",fN=Symbol.for(lN),mN={_Type:e=>e,_In:e=>e,_Out:e=>e},dN=V(Symbol.for("@effect/io/Metric/globalMetricRegistry"),()=>ZR()),hN=function(e,t,r){return Object.assign(n=>qt(n,s=>D(()=>t(s,st()))),{[fN]:mN,keyType:e,unsafeUpdate:t,unsafeValue:r,pipe(){return C(this,arguments)}})};var Sc=(e,t)=>QR(bR(e,t));var QR=e=>{let t=r=>{let o=SR(r)(e);return dN.get(o)};return hN(e.keyType,(r,o)=>t(o).update(r),r=>t(r).get())};var XR=(e,t,r)=>QR(DR(e,t,r));var eF=u(2,(e,t)=>Oe(Jl,r=>D(()=>{if(r.has(e)){let o=r.get(e);o.state.completed||(o.state.completed=!0,Ci(o.result,t))}})));var Ec=class{constructor(){this.count=0,this.observers=new Set}addObserver(t){this.observers.add(t)}removeObserver(t){this.observers.delete(t)}increment(){this.count++,this.observers.forEach(t=>t(this.count))}decrement(){this.count--,this.observers.forEach(t=>t(this.count))}};var tF,rF,oF,nF,xN,yN="@effect/io/Supervisor",_c=Symbol.for(yN),rf={_T:e=>e},Cc=class e{constructor(t,r){this.underlying=t,this.value0=r,this[tF]=rf}value(){return this.value0()}onStart(t,r,o,n){this.underlying.onStart(t,r,o,n)}onEnd(t,r){this.underlying.onEnd(t,r)}onEffect(t,r){this.underlying.onEffect(t,r)}onSuspend(t){this.underlying.onSuspend(t)}onResume(t){this.underlying.onResume(t)}map(t){return new e(this,()=>_(t)(this.value()))}zip(t){return new pn(this,t)}onRun(t,r){return this.underlying.onRun(t,r)}};tF=_c;var pn=class e{constructor(t,r){this.left=t,this.right=r,this[rF]=rf}value(){return jp(this.left.value(),this.right.value())}onStart(t,r,o,n){this.left.onStart(t,r,o,n),this.right.onStart(t,r,o,n)}onEnd(t,r){this.left.onEnd(t,r),this.right.onEnd(t,r)}onEffect(t,r){this.left.onEffect(t,r),this.right.onEffect(t,r)}onSuspend(t){this.left.onSuspend(t),this.right.onSuspend(t)}onResume(t){this.left.onResume(t),this.right.onResume(t)}map(t){return new Cc(this,()=>_(t)(this.value()))}zip(t){return new e(this,t)}onRun(t,r){return this.right.onRun(()=>this.left.onRun(t,r),r)}};rF=_c;var $x=class{constructor(){this[oF]=rf,this.fibers=new Set}value(){return D(()=>Array.from(this.fibers))}onStart(t,r,o,n){this.fibers.add(n)}onEnd(t,r){this.fibers.delete(r)}onEffect(t,r){}onSuspend(t){}onResume(t){}map(t){return new Cc(this,()=>_(t)(this.value()))}zip(t){return new pn(this,t)}onRun(t,r){return t()}};oF=_c;var Gx=class{constructor(t){this.effect=t,this[nF]=rf}value(){return this.effect}onStart(t,r,o,n){}onEnd(t,r){}onEffect(t,r){}onSuspend(t){}onResume(t){}map(t){return new Cc(this,()=>_(t)(this.value()))}zip(t){return new pn(this,t)}onRun(t,r){return t()}};nF=_c;xN=_c;var bN=()=>new $x,sF=D(bN),DN=e=>new Gx(e),fs=DN(L);var iF="Empty",aF="AddSupervisor",cF="RemoveSupervisor",uF="AndThen",qi={_tag:iF},nf=(e,t)=>({_tag:uF,first:e,second:t}),SN=(e,t)=>EN(t,Ae(e)),EN=(e,t)=>{let r=e,o=t;for(;rt(o);){let n=ot(o);switch(n._tag){case iF:{o=nt(o);break}case aF:{r=r.zip(n.supervisor),o=nt(o);break}case cF:{r=Vx(r,n.supervisor),o=nt(o);break}case uF:{o=Ie(n.first)(Ie(n.second)(nt(o)));break}}}return r},Vx=(e,t)=>O(e,t)?fs:e instanceof pn?Vx(e.left,t).zip(Vx(e.right,t)):e,sf=e=>O(e,fs)?st():e instanceof pn?it(sf(e.right))(sf(e.left)):Do(e),CN=(e,t)=>{if(O(e,t))return qi;let r=sf(e),o=sf(t),n=Tn(qi,(i,a)=>nf(i,{_tag:aF,supervisor:a}))(th(r)(o)),s=Tn(qi,(i,a)=>nf(i,{_tag:cF,supervisor:a}))(th(o)(r));return nf(n,s)},pF=Zu({empty:qi,patch:SN,combine:nf,diff:CN});var lF,fF,ON=Sc("effect_fiber_started"),mF=Sc("effect_fiber_active"),wN=Sc("effect_fiber_successes"),RN=Sc("effect_fiber_failures"),FN=XR("effect_fiber_lifetimes",Jw({start:1,factor:2,count:100})),Oc="Continue",AN="Done",dF="Yield",vN={_E:e=>e,_A:e=>e},wc=e=>{throw new Error(`BUG: FiberRuntime - ${JSON.stringify(e)} - please report an issue at https://github.com/Effect-TS/io/issues`)},af={[ii]:(e,t,r)=>t.i1(r),OnStep:(e,t,r)=>t.i1(se(r)),[ai]:(e,t,r)=>t.i2(r),[Ua]:(e,t,r)=>(e.patchRuntimeFlags(e._runtimeFlags,t.patch),zr(e._runtimeFlags)&&e.isInterrupted()?Y(e.getInterruptedCause()):se(r)),[ci]:(e,t,r)=>(t.i2(r),t.i0()?(e.pushStack(t),t.i1()):L)},MN={[Yl]:(e,t,r,o)=>(e.processNewInterruptSignal(o.cause),zr(t)?Y(o.cause):r),[Ql]:(e,t,r,o)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[Zl]:(e,t,r,o)=>(o.onFiber(e,mx(t)),r),[Xl]:(e,t,r,o)=>m(Ht(),()=>r)},kN=e=>Rt(e0(e),t=>Bi(o0(t),([r,o])=>{let n=new Map;for(let s of o)for(let i of s)n.set(i.request,i);return we(WN(r.runAll(o),o.flat()),Jl,n)},!1)),Rc=class{pipe(){return C(this,arguments)}constructor(t,r,o){if(this[lF]=dc,this[fF]=vN,this._queue=new Array,this._children=null,this._observers=new Array,this._running=!1,this._stack=[],this._asyncInterruptor=null,this._asyncBlockingOn=null,this._exitValue=null,this._steps=[!1],this.run=()=>{this.drainQueueOnCurrentThread()},this._runtimeFlags=o,this._fiberId=t,this._fiberRefs=r,this._supervisor=this.getFiberRef(Hi),Ha(o)){let n=this.getFiberRef(Mo);ON.unsafeUpdate(1,n),mF.unsafeUpdate(1,n)}}id(){return this._fiberId}resume(t){this.tell(us(t))}status(){return this.ask((t,r)=>r)}runtimeFlags(){return this.ask((t,r)=>ww(r)?t._runtimeFlags:r.runtimeFlags)}scope(){return qw(this)}children(){return this.ask(t=>Array.from(t.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(Xn)}fiberRefs(){return this.ask(t=>t.unsafeGetFiberRefs())}ask(t){return v(()=>{let r=Di(this._fiberId);return this.tell(Li((o,n)=>{Ci(r,D(()=>t(o,n)))})),Pe(r)})}tell(t){this._queue.push(t),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}await(){return tr(t=>{let r=o=>t(y(o));return this.tell(Li((o,n)=>{o._exitValue!==null?r(this._exitValue):o.unsafeAddObserver(r)})),D(()=>this.tell(Li((o,n)=>{o.unsafeRemoveObserver(r)})))},this.id())}inheritAll(){return he((t,r)=>{let o=t.id(),n=t.unsafeGetFiberRefs(),s=r.runtimeFlags,i=this.unsafeGetFiberRefs(),a=Al(n,o,i);t.setFiberRefs(a);let c=t.getFiberRef(gF),p=Lh(La)(Lh(Er)(zn(s,c)));return di(p)})}poll(){return D(()=>Xe(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(t){return D(()=>this.tell(gx(Sr(t))))}unsafeAddObserver(t){this._exitValue!==null?t(this._exitValue):this._observers.push(t)}unsafeRemoveObserver(t){this._observers=this._observers.filter(r=>r!==t)}unsafeGetFiberRefs(){return this.setFiberRef(gF,this._runtimeFlags),this._fiberRefs}unsafeDeleteFiberRef(t){this._fiberRefs=nc(this._fiberRefs,t)}getFiberRef(t){return this._fiberRefs.locals.has(t)?this._fiberRefs.locals.get(t)[0][1]:t.initial}setFiberRef(t,r){this._fiberRefs=ns(this._fiberRefs,{fiberId:this._fiberId,fiberRef:t,value:r}),t===Hi&&(this._supervisor=r)}setFiberRefs(t){this._fiberRefs=t,this._supervisor=this.getFiberRef(Hi)}addChild(t){this.getChildren().add(t)}removeChild(t){this.getChildren().delete(t)}drainQueueOnCurrentThread(){let t=!0;for(;t;){let r=Oc,o=globalThis[un];globalThis[un]=this;try{for(;r===Oc;)r=this._queue.length===0?AN:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[un]=o}this._queue.length>0&&!this._running?(this._running=!0,r===dF?(this.drainQueueLaterOnExecutor(),t=!1):t=!0):t=!1}}drainQueueLaterOnExecutor(){this.getFiberRef(vo).scheduleTask(this.run,this.getFiberRef(Ka))}drainQueueWhileRunning(t,r){let o=r;for(;this._queue.length>0;){let n=this._queue.splice(0,1)[0];o=MN[n._tag](this,t,o,n)}return o}isInterrupted(){return!Ch(this.getFiberRef(Xn))}addInterruptedCause(t){let r=this.getFiberRef(Xn);this.setFiberRef(Xn,ve(r,t))}processNewInterruptSignal(t){this.addInterruptedCause(t),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let t=!1;for(let r of this._children)r.tell(gx(Sr(this.id()))),t=!0;return t}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){let t=this._children.values();this._children=null;let r=!1;return Zn({while:()=>!r,body:()=>{let n=t.next();return n.done?D(()=>{r=!0}):oe(n.value.await())},step:()=>{}})}return null}reportExitValue(t){if(Ha(this._runtimeFlags)){let r=this.getFiberRef(Mo);switch(mF.unsafeUpdate(-1,r),t._tag){case ye:{wN.unsafeUpdate(1,r);break}case xe:{RN.unsafeUpdate(1,r);break}}}if(t._tag==="Failure"){let r=this.getFiberRef(Va);!Qo(t.cause)&&r._tag==="Some"&&this.log("Fiber terminated with a non handled error",t.cause,r)}}setExitValue(t){if(this._exitValue=t,Ha(this._runtimeFlags)){let r=this.getFiberRef(Mo),o=this.id().startTimeMillis,n=new Date().getTime();FN.unsafeUpdate((n-o)/1e3,r)}this.reportExitValue(t);for(let r=this._observers.length-1;r>=0;r--)this._observers[r](t)}getLoggers(){return this.getFiberRef(bF)}log(t,r,o){let n=N(o)?o.value:this.getFiberRef(ng),s=this.getFiberRef(yF);if(p_(s,n))return;let i=this.getFiberRef(Kp),a=this.getFiberRef($a),c=this.getLoggers(),p=this.unsafeGetFiberRefs();if(So(c)>0){let l=Lr(this.getFiberRef(dt),eo),f=new Date(l.unsafeCurrentTimeMillis());for(let d of c)d.log({fiberId:this.id(),logLevel:n,message:t,cause:r,context:p,spans:i,annotations:a,date:f})}}evaluateMessageWhileSuspended(t){switch(t._tag){case Xl:return dF;case Yl:return this.processNewInterruptSignal(t.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(Y(t.cause)),this._asyncInterruptor=null),Oc;case Ql:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(t.effect),Oc;case Zl:return t.onFiber(this,this._exitValue!==null?_w:Ow(this._runtimeFlags,this._asyncBlockingOn)),Oc;default:return wc(t)}}evaluateEffect(t){this._supervisor.onResume(this);try{let r=zr(this._runtimeFlags)&&this.isInterrupted()?Y(this.getInterruptedCause()):t;for(;r!==null;)try{let o=r,n=this.runLoop(o);this._runtimeFlags=kh(La)(this._runtimeFlags);let s=this.interruptAllChildren();s!==null?r=m(s,()=>n):(this._queue.length===0?this.setExitValue(n):this.tell(us(n)),r=null)}catch(o){if(De(o))o._tag===ui?Mh(this._runtimeFlags)?(this.tell(Iw()),this.tell(us(Xr)),r=null):r=Xr:o._tag===ni&&(r=null);else throw o}}finally{this._supervisor.onSuspend(this)}}start(t){if(this._running)this.tell(us(t));else{this._running=!0;let r=globalThis[un];globalThis[un]=this;try{this.evaluateEffect(t)}finally{this._running=!1,globalThis[un]=r,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(t){this.tell(us(t))}patchRuntimeFlags(t,r){let o=oi(t,r);return globalThis[un]=this,this._runtimeFlags=o,o}initiateAsync(t,r){let o=!1,n=s=>{o||(o=!0,this.tell(us(s)))};zr(t)&&(this._asyncInterruptor=n);try{r(n)}catch(s){n(U($e(s)))}}pushStack(t){this._stack.push(t),t._tag==="OnStep"&&this._steps.push(!0),t._tag==="RevertFlags"&&this._steps.push(!1)}popStack(){let t=this._stack.pop();if(t)return(t._tag==="OnStep"||t._tag==="RevertFlags")&&this._steps.pop(),t}getNextSuccessCont(){let t=this.popStack();for(;t;){if(t._tag!==si)return t;t=this.popStack()}}getNextFailCont(){let t=this.popStack();for(;t;){if(t._tag!==ii&&t._tag!==ci)return t;t=this.popStack()}}[(lF=mc,fF=Bw,u0)](t){return _(at(Ao),r=>{try{return Ls(r,t)}catch(o){throw console.log(o),o}})}Left(t){return Or(t.i0)}None(t){return Or(_o())}Right(t){return se(t.i0)}Some(t){return se(t.i0)}[_p](t){let r=t.i0(),o=this.getNextSuccessCont();if(o!==void 0)return o._tag in af||wc(o),af[o._tag](this,o,r);throw se(r)}[ye](t){let r=t,o=this.getNextSuccessCont();if(o!==void 0)return o._tag in af||wc(o),af[o._tag](this,o,r.i0);throw r}[xe](t){let r=this.getFiberRef(ko),o=_t(r)||r.head._tag==="ExternalSpan"?t.i0:Zo(t.i0,HE(r.head)),n=this.getNextFailCont();if(n!==void 0)switch(n._tag){case si:case ai:return zr(this._runtimeFlags)&&this.isInterrupted()?Y(Xs(o)):n.i1(o);case"OnStep":return zr(this._runtimeFlags)&&this.isInterrupted()?Y(Xs(o)):n.i1(Y(o));case Ua:return this.patchRuntimeFlags(this._runtimeFlags,n.patch),zr(this._runtimeFlags)&&this.isInterrupted()?Y(ve(o,this.getInterruptedCause())):Y(o);default:wc(n)}else throw Y(o)}[Op](t){return t.i0(this,mx(this._runtimeFlags))}Blocked(t){if(this._steps[this._steps.length-1]){let r=this.popStack();if(r)switch(r._tag){case"OnStep":return r.i1(t);case"OnSuccess":return be(t.i0,m(t.i1,r.i1));case"OnSuccessAndFailure":return be(t.i0,ee(t.i1,{onFailure:r.i1,onSuccess:r.i2}));case"OnFailure":return be(t.i0,Vr(t.i1,r.i1));case"While":return be(t.i0,m(t.i1,o=>(r.i2(o),r.i0()?Zn({while:r.i0,body:r.i1,step:r.i2}):L)));case"RevertFlags":{this.pushStack(r);break}}}return _e(r=>m(Bt(Tp(t.i0)),()=>r(t.i1)))}RunBlocked(t){return kN(t.i0)}[wo](t){let r=t.i0,o=this._runtimeFlags,n=oi(o,r);if(zr(n)&&this.isInterrupted())return Y(this.getInterruptedCause());if(this.patchRuntimeFlags(this._runtimeFlags,r),t.i1){let s=zn(n,o);return this.pushStack(new vp(s,t)),t.i1(o)}else return Xr}[ii](t){return this.pushStack(t),t.i0}OnStep(t){return this.pushStack(t),t.i0}[si](t){return this.pushStack(t),t.i0}[ai](t){return this.pushStack(t),t.i0}[ni](t){throw this._asyncBlockingOn=t.i1,this.initiateAsync(this._runtimeFlags,t.i0),t}[ui](t){throw t}[ci](t){let r=t.i0,o=t.i1;return r()?(this.pushStack(t),o()):Xr}[c0](t){return t.commit()}runLoop(t){let r=t,o=0;for(;;){if(this._runtimeFlags&vh&&this._supervisor.onEffect(this,r),this._queue.length>0&&(r=this.drainQueueWhileRunning(this._runtimeFlags,r)),o+=1,o>=this.getFiberRef(og)){o=0;let n=r;r=m(Ht(),()=>n)}try{r._tag in this||(typeof r=="function"&&console.log(r()),wc(r)),r=this._supervisor.onRun(()=>this[r._tag](r),this)}catch(n){if(De(n)){if(n._tag===ui||n._tag===ni)throw n;if(n._tag===ye||n._tag===xe)return n}else g0(n)?r=Y(n.cause):Rh(n)?r=Y(ve($e(n),Sr(lt))):r=Y($e(n))}}}},yF=Se(l_("Info")),TN=tf(e=>{let t=$w.log(e);globalThis.console.log(t)});var IN=tf(({annotations:e,cause:t,context:r,fiberId:o,logLevel:n,message:s})=>{let i=mr(sc(r,ko),Qu),a=te(sc(r,dt),p=>Lr(p,eo));if(i._tag==="None"||i.value._tag==="ExternalSpan"||a._tag==="None")return;let c=Object.fromEntries(e);c["effect.fiberId"]=FE(o),c["effect.logLevel"]=n.label,t!==null&&t!==ft&&(c["effect.cause"]=Oo(t)),i.value.event(String(s),a.value.unsafeCurrentTimeNanos(),c)}),bF=rg(Do(TN,IN)),Ac=u(e=>De(e[0]),(e,t)=>$r(qt(e,r=>vc(o=>t(r,o))))),DF=u(e=>De(e[0]),(e,t)=>no(e,vc(r=>t(r)))),vc=e=>he(t=>{let r=t.unsafeGetFiberRefs();return m(uf,o=>yi(o,n=>he(s=>{let i=s.unsafeGetFiberRefs(),a=Pi(i,r),c=Pi(r,i);return s.setFiberRefs(dx(a,s.id(),r)),no(e(n),D(()=>{s.setFiberRefs(dx(c,s.id(),s.unsafeGetFiberRefs()))}))})))}),SF=e=>we(Wa,x(ps))(e),hF=Symbol("@effect/io/Effect/existsPar/found"),EF=u(e=>Vt(e[0]),(e,t,r)=>fc(r,()=>v(()=>CF(e[Symbol.iterator](),0,t)),()=>pe(ar(e,(o,n)=>Ip(t(o,n),{onTrue:W(hF),onFalse:L}),r),{onFailure:o=>o===hF?y(!0):W(o),onSuccess:()=>y(!1)}))),CF=(e,t,r)=>{let o=e.next();return o.done?y(!1):m(r(o.value,t),n=>n?y(n):CF(e,t+1,r))},_F=u(e=>Vt(e[0]),(e,t,r)=>{let o=r?.negate?(n,s)=>_(t(n,s),eD):t;return fc(r,()=>v(()=>re(e).reduceRight((n,s,i)=>Fo(n,v(()=>o(s,i)),(a,c)=>c?[s,...a]:a),D(()=>new Array))),()=>_(ar(e,(n,s)=>_(o(n,s),i=>i?x(n):g()),r),TD))}),PN=e=>{if(Array.isArray(e)||Vt(e))return[e,g()];let t=Object.keys(e),r=t.length;return[t.map(o=>e[o]),x(o=>{let n={};for(let s=0;s<r;s++)n[t[s]]=o[s];return n})]},NN=(e,t,r)=>{let o=[];for(let n of e)o.push(Jr(n));return m(ar(o,P,{concurrency:r?.concurrency,batching:r?.batching}),n=>{let s=g(),i=n.length,a=new Array(i),c=new Array(i),p=!1;for(let l=0;l<i;l++){let f=n[l];f._tag==="Left"?(a[l]=x(f.left),p=!0):(c[l]=f.right,a[l]=s)}return p?t._tag==="Some"?W(t.value(a)):W(a):r?.discard?L:t._tag==="Some"?y(t.value(c)):y(c)})},LN=(e,t,r)=>{let o=[];for(let n of e)o.push(Jr(n));return r?.discard?ar(o,P,{concurrency:r?.concurrency,batching:r?.batching,discard:!0}):_(ar(o,P,{concurrency:r?.concurrency,batching:r?.batching}),n=>t._tag==="Some"?t.value(n):n)},ji=(e,t)=>{let[r,o]=PN(e);return t?.mode==="validate"?NN(r,o,t):t?.mode==="either"?LN(r,o,t):o._tag==="Some"?_(ar(r,P,t),o.value):ar(r,P,t)},OF=e=>t=>ji(t,e),wF=(e,t)=>_(ji(re(e).map(ne),t),ba(r=>Yp(r)?x(r.i0):g())),Qx=u(2,(e,t)=>Array.from({length:t},()=>e)),RF=u(e=>De(e[0]),(e,t,r)=>ji(Qx(t)(e),r)),ar=u(e=>Vt(e[0]),(e,t,r)=>he(o=>{let n=r?.batching===!0||r?.batching==="inherit"&&o.getFiberRef(Ga);return r?.discard?hx(r,()=>n?Jx(e,t):Rt(e,t),()=>Bi(e,t,n),s=>Xx(e,s,t,n)):hx(r,()=>n?Yx(e,1,t,!0):Ge(e,t),()=>Fc(e,t,n),s=>Yx(e,s,t,n))})),Fc=(e,t,r)=>v(()=>{let o=re(e),n=new Array(o.length);return $(Bi(o,(i,a)=>m(t(i,a),c=>D(()=>n[a]=c)),r),y(n))}),Jx=(e,t)=>v(()=>{let r=re(e),o=r.length;if(o===0)return L;if(o===1)return oe(t(r[0],0));let n=r.map(t),s=new Array,i=a=>a===n.length?v(()=>{if(s.length>0){let c=s.map(p=>p.i0).reduce(Kn);return be(c,Jx(s.map(p=>p.i1),P))}return L}):mi(n[a],c=>c._tag==="Blocked"?(s.push(c),i(a+1)):c._tag==="Failure"?v(()=>{if(s.length>0){let p=s.map(l=>l.i0).reduce(Kn);return be(p,m(Jx(s.map(l=>l.i1),P),()=>c))}return L}):i(a+1));return i(0)}),Bi=(e,t,r)=>v(()=>{let o=re(e),n=o.length;return n===0?L:n===1?oe(t(o[0],0)):_e(s=>{let i=Di(lt),a=0,c=[],p=[],l=Bp(f=>Ge(o,(d,h)=>_(S=>(S.unsafeAddObserver(()=>{p.push(S)}),S))(ms(f(m(S=>{switch(S._tag){case"Failure":{if(c.length>0){let w=c.map(I=>I.i0).reduce(Kn),A=Bi(c,I=>I.i1,r);return be(w,ee(A,{onFailure:I=>$(Qa(i,void 0),U(Be(I,S.cause))),onSuccess:()=>$(Qa(i,void 0),U(S.cause))}))}return $(Qa(i,void 0),U(S.cause))}default:{if(S._tag==="Blocked"&&c.push(S),a+1===n)if(c.length>0){let w=c.map(I=>I.i0).reduce(Kn),A=Bi(c,I=>I.i1,r);return Ei(i,be(w,A))}else Ci(i,se(Xr));else a=a+1;return L}}})(v(()=>s((r?Kr:ne)(t(d,h))))))))));return m(l,f=>ee(s(Pe(i)),{onFailure:d=>m(Fc(f,nn,r),h=>{let S=bi(h,{parallel:!0});return S._tag==="Some"&&ug(S.value)?U(Be(Xs(d),S.value.i0)):U(Xs(d))}),onSuccess:d=>m(d,()=>Rt(p,h=>h.inheritAll()))}))})}),Yx=(e,t,r,o)=>v(()=>{let n=re(e),s=new Array(n.length);return $(Xx(n,t,(a,c)=>_(r(a,c),p=>s[c]=p),o),y(s))}),Xx=(e,t,r,o)=>v(()=>{let n=0,s=e[Symbol.iterator](),i=[],a=m(D(()=>s.next()),p=>p.done?L:m((o?Kr:ne)(oe(r(p.value,n++))),l=>{switch(l._tag){case"Blocked":return i.push(l),a;case"Failure":return l;case"Success":return a}})),c=[];for(let p=0;p<t;p++)c.push(a);return m(ne(Bi(c,P,o)),p=>{if(i.length===0)return p;let l=i.map(d=>d.i0).reduce(Kn),f=Xx(i,t,d=>d.i1,o);return p._tag==="Failure"?be(l,ee(f,{onFailure:d=>Y(Be(p.cause,d)),onSuccess:()=>p})):be(l,f)})}),Bt=e=>he((t,r)=>y(AF(e,t,r.runtimeFlags))),ms=e=>qN(e,ps),FF=u(2,(e,t)=>Bt(qp(e,r=>{let o=Co(r);switch(o._tag){case"Left":return t(o.left);case"Right":return U(o.right)}}))),AF=(e,t,r,o=null)=>{let n=Zx(e,t,r,o);return n.resume(e),n},Zx=(e,t,r,o=null)=>{let n=np(),s=t.unsafeGetFiberRefs(),i=vl(s,n),a=new Rc(n,i,r),c=Ai(i,Ao),p=a._supervisor;return p.onStart(c,e,x(t),a),a.unsafeAddObserver(f=>p.onEnd(f,a)),(o!==null?o:J(()=>t.scope())(t.getFiberRef(Wa))).add(r,a),a},qN=(e,t)=>he((r,o)=>y(AF(e,r,o.runtimeFlags,t))),ey=u(e=>Vt(e[0]),(e,t,r,o)=>fc(o,()=>re(e).reduce((n,s,i)=>Fo(n,s,(a,c)=>r(a,c,i)),y(t)),()=>m(ac(t),n=>m(ar(e,(s,i)=>m(s,a=>E_(n,c=>r(c,a,i))),o),()=>Bl(n))))),ty=u(e=>Vt(e[0]),(e,t,r)=>_(o=>S0(o,P))(ar(e,(o,n)=>Jr(t(o,n)),r))),vF=u(e=>Vt(e[0]),(e,t,r)=>m(ty(e,t,{concurrency:r?.concurrency,batching:r?.batching}),([o,n])=>o.length===0?r?.discard?L:y(n):W(o))),MF=e=>{let t=jr(e);if(!rt(t))return en(()=>ti("Received an empty collection of effects"));let r=ot(t),o=nt(t),n=s=>X(s[0])(jw(s[1]));return m(s=>m(i=>_e(a=>m(c=>m(p=>on(()=>Dt(L,(l,f)=>gi(nn(f))(l))(p))(a(m(n)(rs(s)))))(qt(p=>Dt(L,(l,f)=>$(oe(Bt(m(HN(p,f,s,i))(bx(f)))))(l))(p))(_(p=>Ie(c)(p))(_(Pt)(Ge(p=>Bt(Xt(p)))(o))))))(Bt(Xt(r)))))(ac(o.length)))(mt())},HN=(e,t,r,o)=>n=>es(n,{onFailure:s=>wt(S_(o,i=>[i===0?oe(ts(r,s)):L,i-1])),onSuccess:s=>m(i=>i?Dt(L,(a,c)=>c===t?a:gi(nn(c))(a))(jr(e)):L)(Ei(r,[s,t]))}),kF=u(e=>Vt(e[0]),(e,t,r,o)=>fc(o,()=>re(e).reduce((n,s,i)=>Fo(n,s,(a,c)=>r(a,c,i)),t),()=>v(()=>_(n=>{switch(n._tag){case"None":throw new Error("BUG: Effect.reduceEffect - please report an issue at https://github.com/Effect-TS/io/issues");case"Some":return n.value}})(ey([t,...e],g(),(n,s,i)=>{switch(n._tag){case"None":return x(s);case"Some":return x(r(n.value,s,i))}},o))))),TF=e=>m(uf,t=>m(ds(vw),r=>$(hs(e,r))(t.addFinalizer(o=>r.close(o))))),ln=e=>m(ay,e),ry=e=>m(ds(),t=>jN(t)(e)),IF=e=>ln(t=>m(r=>hs(r)(e))(ag(t,Ni))),PF=(e,t)=>oy([Il(e,t)]),oy=e=>ny(Ct(e)),ny=e=>Fr(Mo,t=>it(e)(t)),NF=u(2,(e,t)=>er(ds(),r=>m(hs(e,r),t),(r,o)=>sn(r,o))),LF=e=>pe(e,{onFailure:t=>{switch(t._tag){case"None":return y(g());case"Some":return W(t.value)}},onSuccess:t=>y(x(t))}),qF=u(e=>De(e[1]),(e,t,r)=>sy(e,t,(o,n)=>[o,n],r)),sy=u(e=>De(e[1]),(e,t,r,o)=>wt(Po(ne(e),ne(t),(n,s)=>Za(n,s,{onSuccess:r,onFailure:(i,a)=>o?.concurrent?Be(i,a):ve(i,a)}),o)));var HF=u(e=>Vt(e[0]),(e,t,r)=>rn(ar(e,(o,n)=>rn(t(o,n)),r))),BF=e=>Fr(dt,Te(eo,e)),cf=e=>Fr(dt,Te(Ri,e)),jF=e=>ln(t=>m(ag(t,Ni),r=>_(o=>[rr(n=>sn(r,Qp(n))),o])(hs(r)(e)))),UF=u(e=>De(e[1]),(e,t,r)=>Po(e,t,(o,n)=>[o,n],r)),WF=u(e=>De(e[1]),(e,t,r)=>Po(e,t,(o,n)=>o,r)),zF=u(e=>De(e[1]),(e,t,r)=>Po(e,t,(o,n)=>n,r)),Po=u(e=>De(e[1]),(e,t,r,o)=>_(ji([e,t],{concurrency:o?.concurrent?2:1,batching:o?.batching}),([n,s])=>r(n,s))),iy=e=>e===Dp?L:$r(m(t=>{let r=oi(t,e),o=zn(r,t);return oe($(vc(()=>di(o)))(di(e)))})(Hp)),BN=(e,t)=>r=>v(()=>{switch(r.state._tag){case"Exited":return L;case"Running":{let o=r.state.finalizers,n=r.state.update,s=Array.from(o.keys()).sort((i,a)=>a-i).map(i=>o.get(i));return r.state={_tag:"Exited",nextKey:r.state.nextKey,exit:t,update:n},Mw(e)?m(i=>J(()=>Xr)(te(Ya)(bi(i))))(Ge(i=>ne(n(i)(t)))(s)):kw(e)?m(i=>J(()=>Xr)(te(Ya)(bi(i,{parallel:!0}))))(Fc(s,i=>ne(n(i)(t)),!1)):m(i=>J(()=>Xr)(te(Ya)(bi(i,{parallel:!0}))))(Yx(s,e.parallelism,i=>ne(n(i)(t)),!1))}}}),ay=et(Jp),uf=ay,ds=(e=Ni)=>_(I0,t=>({[Jp]:Jp,[ig]:ig,pipe(){return C(this,arguments)},fork:r=>$r(m(o=>X(o)(qt(n=>yi(o,n))(cg(t,n=>sn(o,n)))))(ds(r))),close:r=>oe(BN(e,r)(t)),addFinalizer:r=>oe(cg(r)(t))})),hs=u(2,(e,t)=>Yn(e,Cn(Fu(ay,t)))),jN=u(2,(e,t)=>_r(r=>t.close(r))(hs(t)(e))),UN=e=>xi(e,{differ:pF,fork:qi}),cr=u(2,(e,t)=>oe(Ac(m(at(e),r=>X(Gn(e,t),r)),r=>Gn(e,r)))),Fr=u(2,(e,t)=>Oe(e,r=>cr(e,t(r))));var gF=A0(Th),Hi=UN(fs),KF=e=>oe(bx(pf(e))),pf=e=>({[mc]:dc,id:()=>re(e).reduce((t,r)=>gh(t,r.id()),lt),await:()=>ne(Fc(e,t=>wt(t.await()),!1)),children:()=>_(Fc(e,t=>t.children(),!1),Ou),inheritAll:()=>Rt(e,t=>t.inheritAll()),poll:()=>_(Ge(e,t=>t.poll()),wu(x(se(new Array)),(t,r)=>{switch(r._tag){case"None":return g();case"Some":switch(t._tag){case"None":return g();case"Some":return x(Za(r.value,t.value,{onSuccess:(o,n)=>[o,...n],onFailure:Be}))}}})),interruptAsFork:t=>Rt(e,r=>r.interruptAsFork(t)),pipe(){return C(this,arguments)}});var cy=u(3,(e,t,r)=>uy(e,t,{onSelfWin:(o,n)=>m(o.await(),s=>{switch(s._tag){case ye:return m(o.inheritAll(),()=>r.onSelfDone(s,n));case xe:return r.onSelfDone(s,n)}}),onOtherWin:(o,n)=>m(o.await(),s=>{switch(s._tag){case ye:return m(o.inheritAll(),()=>r.onOtherDone(s,n));case xe:return r.onOtherDone(s,n)}})})),$F=e=>_e(t=>rr(r=>m(ms(t(e)),o=>on(()=>Uw(r)(o))(t(ls(o)))))),lf=u(2,(e,t)=>rr(r=>cy(e,t,{onSelfDone:(o,n)=>es(o,{onFailure:s=>vi(i=>Be(s,i))(ls(n)),onSuccess:s=>X(s)(or(r)(n))}),onOtherDone:(o,n)=>es(o,{onFailure:s=>vi(i=>Be(i,s))(ls(n)),onSuccess:s=>X(s)(or(r)(n))})}))),uy=u(3,(e,t,r)=>he((o,n)=>{let s=n.runtimeFlags,i=St(!0),a=Zx(e,o,s,r.selfScope),c=Zx(t,o,s,r.otherScope);return tr(p=>{a.unsafeAddObserver(()=>xF(a,c,r.onSelfWin,i,p)),c.unsafeAddObserver(()=>xF(c,a,r.onOtherWin,i,p)),a.startFork(e),c.startFork(t)},gh(a.id(),c.id()))})),xF=(e,t,r,o,n)=>{Wu(!0,!1)(o)&&n(r(e,t))},no=u(2,(e,t)=>_e(r=>ee(r(e),{onFailure:o=>ee(t,{onFailure:n=>U(ve(o,n)),onSuccess:()=>U(o)}),onSuccess:o=>X(t,o)}))),WN=(e,t)=>rr(r=>m(m(ms(Xt(e)),o=>tr(n=>{let s=t.map(c=>c.listeners.count),i=()=>{s.every(c=>c===0)&&(a.forEach(c=>c()),n(nn(o)))};o.unsafeAddObserver(c=>{a.forEach(p=>p()),n(c)});let a=t.map((c,p)=>{let l=f=>{s[p]=f,i()};return c.listeners.addObserver(l),()=>c.listeners.removeObserver(l)});return i(),D(()=>{a.forEach(c=>c())})})),()=>v(()=>{let o=t.flatMap(n=>n.state.completed?[]:[n]);return Rt(o,n=>eF(n.request,Qp(r)))})));var GF=(e,t)=>Ac(Ti(e,t),(r,o)=>m($l,n=>D(()=>r.end(n,o)))),ff=(e,t)=>m(Ti(e,t),r=>Fr(ko,Vo(r))),mf=e=>Fr(dt,Te(Fi,e)),df=e=>Fr(ko,Vo(e));var VF,ZF,JF=(e,t,r,o)=>xo({_tag:"Complete",key:e,exit:t,entryStats:r,timeToLiveMillis:o}),YF=(e,t)=>xo({_tag:"Pending",key:e,deferred:t}),zN=(e,t)=>xo({_tag:"Refreshing",deferred:e,complete:t}),py=Symbol.for("@effect/cache/Cache/MapKey"),ly=class{constructor(t){this.current=t,this[VF]=py,this.previous=void 0,this.next=void 0}[(VF=py,R)](){return k(E(this.next))(k(E(this.previous))(E(this.current)))}[F](t){return this===t?!0:KN(t)&&O(this.current,t.current)&&O(this.previous,t.previous)&&O(this.next,t.next)}},Ui=e=>new ly(e),KN=e=>typeof e=="object"&&e!=null&&py in e,fy=class{constructor(){this.head=void 0,this.tail=void 0}add(t){if(t!==this.tail)if(this.tail===void 0)this.head=t,this.tail=t;else{let r=t.previous,o=t.next;o!==void 0&&(t.next=void 0,r!==void 0?(r.next=o,o.previous=r):(this.head=o,this.head.previous=void 0)),this.tail.next=t,t.previous=this.tail,this.tail=t}}remove(){let t=this.head;if(t!==void 0){let r=t.next;r!==void 0?(t.next=void 0,this.head=r,this.head.previous=void 0):(this.head=void 0,this.tail=void 0)}return t}},$N=()=>new fy,GN=(e,t,r,o,n,s)=>({map:e,keys:t,accesses:r,updating:o,hits:n,misses:s}),VN=()=>GN(An(),$N(),US(),St(!1),0,0),JN="@effect/cache/Cache",YN=Symbol.for(JN),ZN={_Key:e=>e,_Error:e=>e,_Value:e=>e},QN=e=>e,hf=e=>({loadedMillis:e}),my=class{constructor(t,r,o,n,s){this.capacity=t,this.context=r,this.fiberId=o,this.lookup=n,this.timeToLive=s,this[ZF]=ZN,this.cacheState=VN()}get(t){return _(this.getEither(t),Su)}cacheStats(){return D(()=>QN({hits:this.cacheState.hits,misses:this.cacheState.misses,size:zu(this.cacheState.map)}))}getOption(t){return v(()=>He(Ce(this.cacheState.map,t),{onNone:()=>{let r=Ui(t);return this.trackAccess(r),this.trackMiss(),y(g())},onSome:r=>this.resolveMapValue(r)}))}getOptionComplete(t){return v(()=>He(Ce(this.cacheState.map,t),{onNone:()=>{let r=Ui(t);return this.trackAccess(r),this.trackMiss(),y(g())},onSome:r=>this.resolveMapValue(r,!0)}))}contains(t){return D(()=>xr(this.cacheState.map,t))}entryStats(t){return D(()=>{let r=Ce(this.cacheState.map,t);if(N(r))switch(r.value._tag){case"Complete":{let o=r.value.entryStats.loadedMillis;return x(hf(o))}case"Pending":return g();case"Refreshing":{let o=r.value.complete.entryStats.loadedMillis;return x(hf(o))}}return g()})}getEither(t){return v(()=>{let r=t,o,n,s=Ke(Ce(this.cacheState.map,r));return s===void 0&&(n=fg(this.fiberId),o=Ui(r),xr(this.cacheState.map,r)?s=Ke(Ce(this.cacheState.map,r)):Et(this.cacheState.map,r,YF(o,n))),s===void 0?(this.trackAccess(o),this.trackMiss(),_(this.lookupValueOf(t,n),H)):m(this.resolveMapValue(s),He({onNone:()=>this.getEither(t),onSome:i=>y(z(i))}))})}invalidate(t){return D(()=>{vn(this.cacheState.map,t)})}invalidateWhen(t,r){return D(()=>{let o=Ce(this.cacheState.map,t);N(o)&&o.value._tag==="Complete"&&o.value.exit._tag==="Success"&&r(o.value.exit.value)&&vn(this.cacheState.map,t)})}invalidateAll(){return D(()=>{this.cacheState.map=An()})}refresh(t){return oo(r=>v(()=>{let o=t,n=fg(this.fiberId),s=Ke(Ce(this.cacheState.map,o));if(s===void 0&&(xr(this.cacheState.map,o)?s=Ke(Ce(this.cacheState.map,o)):Et(this.cacheState.map,o,YF(Ui(o),n))),s===void 0)return oe(this.lookupValueOf(t,n));switch(s._tag){case"Complete":{if(this.hasExpired(r,s.timeToLiveMillis)){let i=Ke(Ce(this.cacheState.map,o));return O(i,s)&&vn(this.cacheState.map,o),oe(this.get(t))}return oe(Kl(()=>{let i=Ke(Ce(this.cacheState.map,o));if(O(i,s)){let a=zN(n,s);return Et(this.cacheState.map,o,a),!0}return!1})(this.lookupValueOf(t,n)))}case"Pending":return rs(s.deferred);case"Refreshing":return rs(s.deferred)}}))}set(t,r){return oo(o=>D(()=>{let n=o.unsafeCurrentTimeMillis(),s=t,i=z0(r),a=JF(Ui(s),i,hf(n),n+qr(tt(this.timeToLive(i))));Et(this.cacheState.map,s,a)}))}size(){return D(()=>zu(this.cacheState.map))}values(){return D(()=>{let t=[];for(let r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&t.push(r[1].exit.value);return t})}entries(){return D(()=>{let t=[];for(let r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&t.push([r[0],r[1].exit.value]);return t})}keys(){return D(()=>{let t=[];for(let r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&t.push(r[0]);return t})}resolveMapValue(t,r=!1){return oo(o=>{switch(t._tag){case"Complete":return this.trackAccess(t.key),this.trackHit(),this.hasExpired(o,t.timeToLiveMillis)?(vn(this.cacheState.map,t.key.current),y(g())):_(t.exit,x);case"Pending":return this.trackAccess(t.key),this.trackHit(),r?y(g()):_(rs(t.deferred),x);case"Refreshing":return this.trackAccess(t.complete.key),this.trackHit(),this.hasExpired(o,t.complete.timeToLiveMillis)?r?y(g()):_(rs(t.deferred),x):_(t.complete.exit,x)}})}trackHit(){this.cacheState.hits=this.cacheState.hits+1}trackMiss(){this.cacheState.misses=this.cacheState.misses+1}trackAccess(t){if(WS(this.cacheState.accesses,t),Wu(this.cacheState.updating,!1,!0)){let r=!0;for(;r;){let n=zS(this.cacheState.accesses,Gd);n===Gd?r=!1:this.cacheState.keys.add(n)}let o=zu(this.cacheState.map);for(r=o>this.capacity;r;){let n=this.cacheState.keys.remove();n!==void 0?xr(this.cacheState.map,n.current)&&(vn(this.cacheState.map,n.current),o=o-1,r=o>this.capacity):r=!1}Zt(this.cacheState.updating,!1)}}hasExpired(t,r){return t.unsafeCurrentTimeMillis()>r}lookupValueOf(t,r){return oo(o=>v(()=>{let n=t;return on(()=>$(j0(r),D(()=>{vn(this.cacheState.map,n)})))(m(s=>{let i=o.unsafeCurrentTimeMillis(),a=hf(i),c=JF(Ui(n),s,a,i+qr(tt(this.timeToLive(s))));return Et(this.cacheState.map,n,c),$(B0(r,s),s)})(ne(Lt(this.context)(this.lookup(t)))))}))}};ZF=YN;var QF=(e,t,r)=>new my(e,kt(),tp,t,o=>tt(r(o)));var XN="@effect/io/Schedule/Interval",dy=Symbol.for(XN),XF={[dy]:dy,startMillis:0,endMillis:0};var eA=XF;var tA=e=>J(()=>eA)(Mn(e.intervals)).startMillis;var rA=tA;var nL="Done";var oA=e=>e._tag===nL;var nA=oA;var aL,sA,cL="@effect/io/Schedule",uL=Symbol.for(cL),pL="@effect/io/Schedule/Driver",lL=Symbol.for(pL);var fL={_Env:e=>e,_In:e=>e,_Out:e=>e};aL=uL;var hy=class{constructor(t,r){this.schedule=t,this.ref=r,this[sA]=fL}state(){return _(Rr(this.ref),t=>t[1])}last(){return m(Rr(this.ref),([t,r])=>{switch(t._tag){case"None":return Cr(()=>_o());case"Some":return y(t.value)}})}reset(){return ro(this.ref,[g(),this.schedule.initial])}next(t){return m(r=>m(o=>m(([n,s,i])=>nA(i)?$(W(g()))(ro(this.ref,[x(s),n])):X(s)($(Mi(qs(rA(i.intervals)-o)))(ro(this.ref,[x(s),n]))))(v(()=>this.schedule.step(o,t,r))))(Fl))(_(Rr(this.ref),r=>r[1]))}};sA=lL;var gy=e=>_(t=>new hy(e,t))(ss([g(),e.initial]));var iA=u(2,(e,t)=>xy(e,t,(r,o)=>W(r))),xy=u(3,(e,t,r)=>m(gy(t),o=>pe(e,{onFailure:n=>r(n,g()),onSuccess:n=>aA(e,o,r,n)}))),aA=(e,t,r,o)=>pe(t.next(o),{onFailure:()=>Jn(t.last()),onSuccess:n=>pe(e,{onFailure:s=>r(s,x(n)),onSuccess:s=>aA(e,t,r,s)})}),cA=u(2,(e,t)=>kc(e,r=>D(()=>t(r)))),kc=u(2,(e,t)=>m(e,r=>m(t(r),o=>o?y(r):m(Ht(),()=>kc(e,t))))),uA=u(2,(e,t)=>yy(e,r=>D(()=>t(r)))),yy=u(2,(e,t)=>kc(e,r=>lc(t(r)))),pA=u(2,(e,t)=>by(e,t,(r,o)=>W(r))),lA=u(2,(e,t)=>fA(e,t)),fA=(e,t)=>Ot(e,r=>t<0?W(r):m(Ht(),()=>fA(e,t-1))),by=u(3,(e,t,r)=>m(gy(t),o=>mA(e,o,r))),mA=(e,t,r)=>Ot(e,o=>pe(t.next(o),{onFailure:()=>m(n=>r(o,n))(Jn(t.last())),onSuccess:()=>mA(e,t,r)})),dA=u(2,(e,t)=>Tc(e,r=>D(()=>t(r)))),Tc=u(2,(e,t)=>Ot(e,r=>m(t(r),o=>o?W(r):m(Ht(),()=>Tc(e,t))))),hA=u(2,(e,t)=>Dy(e,r=>D(()=>t(r)))),Dy=u(2,(e,t)=>Tc(e,r=>lc(t(r)))),gf=u(2,(e,t)=>Sy(e,void 0,t)),Sy=u(3,(e,t,r)=>m(gy(r),o=>gA(e,t,o))),gA=(e,t,r)=>pe(r.next(t),{onFailure:()=>Jn(r.last()),onSuccess:()=>m(e,o=>gA(e,o,r))});var yA,DA,SA,Cy=class{constructor(t){this.permits=t,this.waiters=new Array,this.taken=0,this.take=r=>Gr(o=>{if(this.free<r){let n=()=>{if(this.free>=r){let s=this.waiters.findIndex(i=>i===n);s!==-1&&this.waiters.splice(s,1),this.taken+=r,o(y(r))}};return this.waiters.push(n),z(D(()=>{let s=this.waiters.findIndex(i=>i===n);s!==-1&&this.waiters.splice(s,1)}))}return this.taken+=r,H(y(r))}),this.release=r=>he(o=>(this.taken-=r,o.getFiberRef(vo).scheduleTask(()=>{this.waiters.forEach(n=>n())},o.getFiberRef(Ka)),L)),this.withPermits=r=>o=>_e(n=>m(n(this.take(r)),s=>no(n(o),this.release(s))))}get free(){return this.permits-this.taken}},yf=e=>new Cy(e),EA=e=>D(()=>yf(e)),CA=e=>bf(e,KF),_A=u(2,(e,t)=>_(Oy(e,t),r=>r[0])),Oy=u(2,(e,t)=>{let r=tt(t);return m(Yr(),o=>_(Df(g()),n=>[Lt(mL(e,r,n),o),dL(n)]))}),bA=(e,t,r)=>{let o=qr(tt(t));return _(n=>x([r+o,n]))(qt(n=>Qr(e,n))(mt()))},mL=(e,t,r)=>_e(o=>m(n=>B(n)?li("BUG: Effect.cachedInvalidate - please report an issue at https://github.com/Effect-TS/io/issues"):o(Pe(n.value[1])))(m(n=>bL(r,s=>{switch(s._tag){case"None":return x(bA(e,t,n));case"Some":{let[i]=s.value;return i-n<=0?x(bA(e,t,n)):g()}}}))(oo(n=>n.currentTimeMillis)))),dL=e=>ro(e,g()),OA=u(2,(e,t)=>bf(e,r=>t(pf(r)))),bf=u(2,(e,t)=>m(sF,r=>no(m(r.value(),t))(Fy(e,r)))),wA=u(e=>Vt(e[0]),(e,t)=>t?.discard?Rt(e,Bt):_(Ge(e,Bt),pf)),wy=u(2,(e,t)=>_e(r=>m(t.fork(Ni),o=>qt(n=>o.addFinalizer(()=>rr(s=>O(s,n.id())?L:oe(nn(n)))))(ms(_r(n=>o.close(n))(r(e))))))),Ry=e=>ln(t=>wy(e,t)),RA=e=>ls(e),FA=e=>v(()=>m(e,ls)),Ey=Symbol.for("@effect/io/Effect/memoizeFunction.key"),xf=class{constructor(t,r){this.a=t,this.eq=r,this[yA]=Ey}[(yA=Ey,F)](t){return typeof t=="object"&&t!==null&&Ey in t?this.eq?this.eq(this.a,t.a):O(this.a,t.a):!1}[R](){return this.eq?0:E(this.a)}},AA=(e,t)=>_(r=>o=>m(([n,s])=>X(s)(cs(n)))(m(Pe)(r.modifyEffect(n=>{let s=Ce(new xf(o,t))(n);return B(s)?_(i=>[i,Et(new xf(o,t),i)(n)])(qt(i=>Bt(Qr(i)(is(e(o)))))(mt())):y([s.value,n])}))))(m(Df)(D(()=>An()))),vA=u(2,(e,t)=>(r=>wt(r))(lf(ne(t))(ne(e)))),MA=u(2,(e,t)=>Ry(gf(t)(e))),Fy=u(2,(e,t)=>Ve(Hi,o=>o.zip(t))(e)),kA=u(2,(e,t)=>Ic(e,{onTimeout:g,onSuccess:x,duration:t})),TA=u(2,(e,{duration:t,onTimeout:r})=>wt(Ic(e,{onTimeout:()=>Cr(r),onSuccess:y,duration:t}))),IA=u(2,(e,{duration:t,onTimeout:r})=>wt(Ic(e,{onTimeout:()=>Zr(r),onSuccess:y,duration:t}))),Ic=u(2,(e,{duration:t,onSuccess:r,onTimeout:o})=>rr(n=>uy(e,Xt(Mi(t)),{onSelfWin:(s,i)=>m(s.await(),a=>a._tag==="Success"?m(s.inheritAll(),()=>X(or(i,n),r(a.value))):m(or(i,n),()=>Y(a.cause))),onOtherWin:(s,i)=>m(s.await(),a=>a._tag==="Success"?m(s.inheritAll(),()=>X(or(i,n),o())):m(or(i,n),()=>Y(a.cause))),otherScope:ps}))),hL="@effect/io/Ref/Synchronized",gL=Symbol.for(hL),xL={_A:e=>e},_y=class{constructor(t,r){this.ref=t,this.withLock=r,this[DA]=xL,this[SA]=Ug}modify(t){return this.modifyEffect(r=>y(t(r)))}modifyEffect(t){return this.withLock(m(([r,o])=>X(ro(this.ref,o),r))(m(Rr(this.ref),t)))}pipe(){return C(this,arguments)}};DA=gL,SA=Nl;var Df=e=>D(()=>yL(e)),yL=e=>{let t=Ll(e),r=yf(1);return new _y(t,r.withPermits(1))},bL=u(2,(e,t)=>e.modifyEffect(r=>{let o=t(r);switch(o._tag){case"None":return y([r,r]);case"Some":return _(o.value,n=>[n,n])}}));var NA="Fresh",LA="FromEffect",qA="Scoped",HA="Suspend";var BA="ZipWithPar";var jA=or;var Ef=e=>(t,r)=>{let o=np(),n=t,s=kg(e.fiberRefs,{fiberId:o,fiberRef:Ao,value:e.context});r?.scheduler&&(s=kg(s,{fiberId:o,fiberRef:vo,value:r.scheduler})),r?.updateRefs&&(s=r.updateRefs(s,o));let i=new Rc(o,JC(s,o),e.runtimeFlags),a=i._supervisor;return a!==fs&&(a.onStart(e.context,n,g(),i),i.unsafeAddObserver(c=>a.onEnd(c,i))),ps.add(e.runtimeFlags,i),i.start(n),i},Ay=e=>(t,r)=>{let o=Ef(e)(t);return r&&o.unsafeAddObserver(n=>{r(n)}),(n,s)=>Ay(e)(jA(n??lt)(o),s?i=>s(W0(i)):void 0)},EL=e=>t=>{let r=$A(e)(t);if(r._tag==="Failure")throw zA(r.i0);return r.i0},CL=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let r=new Error;Error.stackTraceLimit=t;let o=`Fiber #${e.id().id} cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work`,n="AsyncFiberException";return Object.defineProperties(r,{_tag:{value:n},message:{value:o},name:{value:n},toString:{get(){return()=>o}},[WA]:{get(){return()=>o}}}),r};var UA=Symbol.for("@effect/io/Runtime/FiberFailure"),_L=Symbol.for("@effect/io/Runtime/FiberFailure/Cause"),WA=Symbol.for("nodejs.util.inspect.custom"),zA=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let r=new Error;Error.stackTraceLimit=t;let o=fp(e);return o.length>0&&(r.name=o[0].message.split(":")[0],r.message=o[0].message.substring(r.name.length+2),r.stack=`${r.name}: ${r.message}
${o[0].stack}`),r[UA]=UA,r[_L]=e,r.toString=()=>Oo(e),r[WA]=()=>r.toString(),r};var KA=e=>{let t=e;switch(t._tag){case"Failure":case"Success":return t;case"Left":return Or(t.left);case"Right":return se(t.right);case"Some":return se(t.value);case"None":return Or(_o())}},$A=e=>t=>{let r=KA(t);if(r)return r;let o=new Fp,n=Ef(e)(t,{scheduler:o});o.flush();let s=n.unsafePoll();if(s)return s;throw CL(n)},OL=e=>t=>GA(e)(t).then(r=>{switch(r._tag){case ye:return r.i0;case xe:throw zA(r.i0)}}),GA=e=>t=>new Promise(r=>{let o=KA(t);o&&r(o),Ef(e)(t).unsafeAddObserver(n=>{r(n)})}),Sf=class{constructor(t,r,o){this.context=t,this.runtimeFlags=r,this.fiberRefs=o}pipe(){return C(this,arguments)}},wL=e=>new Sf(e.context,e.flags,e.fiberRefs),vy=()=>he((e,t)=>y(new Sf(e.getFiberRef(Ao),t.runtimeFlags,e.unsafeGetFiberRefs()))),RL=yp(Er,xp,gp),Ar=wL({context:kt(),flags:RL,fiberRefs:QC(new Map)}),VA=Ay(Ar),JA=Ef(Ar),YA=OL(Ar),ZA=GA(Ar),QA=EL(Ar),XA=$A(Ar),e2=e=>m(mt(),t=>m(vy(),r=>_e(o=>$(Bt(o(Vr(e(n=>Ay(r)(Qr(n,t))),n=>ts(t,n)))),o(Pe(t))))));var t2=u(2,(e,t)=>e.modifyEffect(t));var vL="@effect/io/Layer",ML=Symbol.for(vL),kL={_RIn:e=>e,_E:e=>e,_ROut:e=>e},Cf={[ML]:kL,pipe(){return C(this,arguments)}};var TL=e=>e._tag===NA,My=class{constructor(t){this.ref=t}getOrElseMemoize(t,r){return wt(t2(this.ref,o=>{let n=o.get(t);if(n!==void 0){let[s,i]=n,a=_r(Xp({onFailure:()=>L,onSuccess:()=>yi(r,i)}))(m(([c,p])=>X(p)(cs(c)))(s));return y([a,o])}return m(s=>m(i=>_(a=>{let c=_e(l=>m(f=>m(d=>{switch(d._tag){case xe:return $(U(d.i0))($(sn(f,d))(ts(i,d.i0)));case ye:return X(d.i0[1])($(Ei(i,d.i0))($(yi(r,h=>m(S=>S(h))(Rr(a))))($(ic(s,h=>h+1))(ro(a,h=>oe(hi(ql(s,S=>[S===1,S-1]))(sn(f,h))))))))}})(ne(l(m(o2(t,f),d=>is(d(this)))))))(ds())),p=[_r(es({onFailure:()=>L,onSuccess:()=>ic(s,l=>l+1)}))(Pe(i)),l=>m(f=>f(l))(Rr(a))];return[c,TL(t)?o:o.set(t,p)]})(ss(()=>L)))(mt()))(ss(0))}))}},IL=()=>_(Df(new Map),e=>new My(e));var r2=u(2,(e,t)=>m(IL(),r=>m(o2(e,t),o=>o(r)))),o2=(e,t)=>{let r=e;switch(r._tag){case"Locally":return D(()=>o=>r.f(o.getOrElseMemoize(r.self,t)));case"ExtendScope":return D(()=>o=>ln(n=>o.getOrElseMemoize(r.layer,n)));case"Fold":return D(()=>o=>ee({onFailure:n=>o.getOrElseMemoize(r.failureK(n),t),onSuccess:n=>o.getOrElseMemoize(r.successK(n),t)})(o.getOrElseMemoize(r.layer,t)));case"Fresh":return D(()=>o=>r2(t)(r.layer));case"FromEffect":return D(()=>o=>r.effect);case"ProvideTo":return D(()=>o=>m(n=>Lt(n)(o.getOrElseMemoize(r.second,t)))(o.getOrElseMemoize(r.first,t)));case"Scoped":return D(()=>o=>hs(r.effect,t));case"Suspend":return D(()=>o=>o.getOrElseMemoize(r.evaluate(),t));case"ZipWith":return D(()=>o=>Fo(o.getOrElseMemoize(r.second,t),r.zipK)(o.getOrElseMemoize(r.first,t)));case"ZipWithPar":return D(()=>o=>Po(o.getOrElseMemoize(r.second,t),r.zipK,{concurrent:!0})(o.getOrElseMemoize(r.first,t)))}};var PL=()=>NL(Yr());function NL(e){let t=Object.create(Cf);return t._tag=LA,t.effect=e,t}var LL=u(2,(e,t)=>BL(e,t,(r,o)=>Cn(o)(r)));var jt=e=>qL(X(kt())(e)),qL=e=>{let t=Object.create(Cf);return t._tag=qA,t.effect=e,t};var HL=e=>{let t=Object.create(Cf);return t._tag=HA,t.evaluate=e,t};var BL=u(3,(e,t,r)=>HL(()=>{let o=Object.create(Cf);return o._tag=BA,o.first=e,o.second=t,o.zipK=r,o})),ky=u(2,(e,t)=>er(ds(),r=>m(r2(t,r),o=>Lt(e,o)),(r,o)=>sn(r,o))),n2=u(2,(e,t)=>ky(e,LL(PL(),t)));var i2=e=>jt(cf(e)),a2=e=>jt(df(e)),c2=(e,t)=>jt(ff(e,t)),u2=e=>jt(mf(e));var Ty=zn;var Wi=Se(QF(65536,()=>_(mt(),e=>({listeners:new Ec,handle:e})),()=>Sd(60))),Pc=V(Symbol.for("@effect/io/FiberRef/currentCacheEnabled"),()=>Se(!1)),Iy=(e,t)=>m(De(t)?t:y(t),r=>rr(o=>{let n=new Proxy(e,{});return Oe(Pc,s=>{if(s)return Oe(Wi,a=>m(a.getEither(n),c=>{switch(c._tag){case"Left":return c.left.listeners.increment(),be(XE,m(ne(Pe(c.left.handle)),p=>p._tag==="Failure"&&Qo(p.cause)?(c.left.listeners.decrement(),m(a.invalidateWhen(n,l=>l.handle===c.left.handle),()=>Iy(n,t))):no(Pe(c.left.handle),D(()=>c.left.listeners.decrement()))));case"Right":return c.right.listeners.increment(),be(Bh(r,jh({request:n,result:c.right.handle,listeners:c.right.listeners,ownerId:o,state:{completed:!1}})),_e(p=>m(ne(p(Pe(c.right.handle))),l=>(c.right.listeners.decrement(),l))))}}));let i=new Ec;return i.increment(),m(mt(),a=>be(Bh(r,jh({request:n,result:a,listeners:i,ownerId:o,state:{completed:!1}})),no(Pe(a),D(()=>i.decrement()))))})})),p2=(e,t)=>Oe(Pc,r=>r?Oe(Wi,o=>m(o.getEither(e),n=>{switch(n._tag){case"Left":return L;case"Right":return pg(n.right.handle,t)}})):L),l2=u(2,(e,t)=>we(e,Pc,t)),f2=u(2,(e,t)=>we(e,Wi,t));var zL=pi,KL=De,$L=_A,GL=Oy,VL=Vg,JL=AA,YL=Jg,ZL=ji,QL=OF,XL=wF,e3=W_,t3=z_,r3=X_,o3=EF,n3=_F,s3=J_,i3=Z_,Nc=ar,a3=oO,c3=ey,u3=ty,p3=vO,l3=kF,f3=MO,m3=kO,d3=Qx,h3=RF,g3=BO,x3=jO,y3=vF,b3=HF,D3=tr,S3=e2,E3=R_,C3=Gr,_3=W,O3=Cr,w3=U,R3=Zr,F3=Gh,A3=li,v3=en,M3=rO,k3=Qn,T3=EO,I3=RO,P3=y,N3=ki,L3=Zg,zi=v,q3=D,Ft=L,H3=Ht,B3=F_;var j3=Ot,U3=Vr,W3=A_,z3=y0,K3=v_,$3=M_,G3=k_,V3=T_,J3=I_,Y3=zg,Z3=nO,Q3=sO,X3=wO,eq=NO,tq=pA,rq=lA,oq=by,nq=dA,sq=Tc,iq=hA,aq=Dy,cq=cc;var uq=JO,pq=YO,lq=rx,fq=XO,mq=L_,dq=b0,hq=$F,gq=Pp,xq=Np,yq=Xt,bq=D0,Dq=on,Sq=$r,Eq=_e,Cq=X,_q=jl,Oq=w_,wq=oe,Rq=rn,Fq=Q_,Ly=_,Aq=DO,vq=Lp,Mq=Ro,kq=vi,Tq=SO,Iq=lc,Pq=Ac,Nq=DF,m2=er,Lq=vc,qq=no,Hq=qp,Bq=_r,jq=TF,Uq=IF,Wq=uf,zq=ln,Kq=ry,$q=NF,Gq=jF,Vq=CA,Jq=SF,Yq=q_,Zq=Ul,Qq=is,Xq=OA,eH=bf,tH=tn,rH=rr,oH=Bt,nH=ms,sH=wA,iH=wy,aH=Ry,cH=FF,uH=RA,pH=FA,lH=Fy,fH=Bp,mH=C0,dH=e=>jt(cr(vo,e)),hH=M0,gH=v0,xH=sg,yH=P_,bH=oo,DH=e=>jt(Fr(dt,Te(eo,e))),SH=BF,EH=HC,CH=N_,_H=Mi,OH=$O,wH=tx,RH=kA,FH=TA,AH=IA,vH=Ic,MH=jC,kH=Rg,TH=i2,IH=BC,PH=cf,NH=Yr,d2=K_,LH=fi,qH=Yn,HH=Lt,h2=E0,BH=u(2,(e,t)=>{let r=Ty(Ar.runtimeFlags,t.runtimeFlags),o=Ty(t.runtimeFlags,Ar.runtimeFlags),n=Pi(Ar.fiberRefs,t.fiberRefs),s=Pi(t.fiberRefs,Ar.fiberRefs);return m2(m(Ny(r),()=>Py(n)),()=>h2(e,t.context),()=>m(Ny(o),()=>Py(s)))}),jH=ky,UH=FO,WH=Yg,zH=n2,KH=sw,$H=nw,GH=ox,VH=nx,JH=iw,YH=e=>d2(t=>yd(t,e)),ZH=ew,QH=H_,XH=B_,eB=j_,tB=U_;var fn=Jr,rB=ne,oB=Qr,nB=CO,sB=qO,iB=LF,aB=Ip;var cB=$_,uB=G_,pB=uc,lB=V_,fB=ZO,mB=QO,dB=Kl,hB=hi,gB=tw,xB=rw,Ut=m,yB=wt,bB=MF,DB=lf,SB=vA,EB=cy,CB=Wl,_B=qt,OB=UO,wB=WO,RB=ex,FB=zO,AB=KO,vB=tO,MB=$g,kB=xO,TB=iA,IB=IO,PB=xy,NB=cA,LB=kc,qB=uA,HB=yy,BB=gf,jB=MA,UB=Sy,WB=Zn,zB=Kg,KB=iO,$B=we,GB=Ve,VB=cr,JB=Fr,Py=cs,YB=LO,ZB=zl,QB=aO,XB=cO,ej=pc,tj=za,rj=ee,oj=pe,nj=uO,sj=pO,ij=Gg,aj=lO,cj=fO,uj=mO,pj=dO,lj=hO,fj=O_,mj=gO,dj=k0,hj=e=>jt(cr(Va,e)),gj=Jn,xj=Vh,yj=Vn,bj=_O,Dj=OO,Sj=AO,Ej=wl,Cj=vy,_j=Hp,Ny=di,Oj=O0,wj=iy,Rj=HO,Fj=Qg,Aj=Xg,vj=PF,Mj=oy,kj=ny,Tj=T0,Ij=ow,Pj=Xo,Nj=P,Lj=yf,qj=EA,Hj=JA,Bj=VA,g2=YA,jj=ZA,Uj=QA,Wj=XA,zj=qF,Kj=sy,$j=UF,Gj=WF,Vj=zF,Jj=Po,Yj=be,Zj=Tp,Qj=Kr,Xj=mi,e5=Iy,t5=p2,r5=_0,o5=e=>jt(cr(Ga,e)),n5=e=>jt(cr(Pc,e)),s5=e=>jt(De(e)?m(e,t=>cr(Wi,t)):cr(Wi,e)),i5=l2,a5=f2,c5=u2,u5=VO,p5=Rl,l5=UC,f5=mf,m5=w0,d5=e=>jt(cr(Ja,e)),h5=cw,g5=aw,x5=ix,y5=sx,b5=pw,D5=lw,S5=uw,E5=Ti,C5=a2,_5=c2,O5=ax,w5=GF,R5=fw,F5=ff,A5=cx,v5=df,M5=mw,k5=dw;var Je={};Os(Je,{ConfigTypeId:()=>T5,all:()=>I5,array:()=>P5,boolean:()=>N5,chunk:()=>L5,date:()=>q5,fail:()=>H5,hashMap:()=>s6,hashSet:()=>e6,integer:()=>j5,isConfig:()=>W5,logLevel:()=>U5,map:()=>z5,mapAttempt:()=>K5,mapOrFail:()=>$5,nested:()=>G5,number:()=>B5,option:()=>Y5,orElse:()=>V5,orElseIf:()=>J5,primitive:()=>Z5,repeat:()=>Q5,secret:()=>X5,string:()=>t6,succeed:()=>r6,suspend:()=>o6,sync:()=>n6,unwrap:()=>i6,validate:()=>a6,withDefault:()=>c6,withDescription:()=>u6,zip:()=>p6,zipWith:()=>l6});var T5=Sl,I5=xC,P5=sC,N5=nC,L5=El,q5=iC,H5=aC,B5=cC,j5=uC,U5=pC,W5=bg,z5=Io,K5=lC,$5=Oi,G5=sr,V5=mC,J5=Cl,Y5=dC,Z5=an,Q5=Dl,X5=hC,e6=gC,t6=yg,r6=wi,o6=ec,n6=bC,s6=DC,i6=Dg,a6=SC,c6=EC,u6=CC,p6=_C,l6=tc;var _f={};Os(_f,{Tag:()=>et,add:()=>Te,empty:()=>kt,get:()=>Lr,getOption:()=>yd,isContext:()=>GT,isTag:()=>KD,make:()=>Fu,merge:()=>Cn,omit:()=>JT,pick:()=>VT,unsafeGet:()=>Ls});var Ki={};Os(Ki,{Class:()=>VD,TaggedClass:()=>t1,array:()=>XT,case:()=>e1,struct:()=>xo,tagged:()=>GD,taggedEnum:()=>r1,tuple:()=>QT,unsafeArray:()=>bd,unsafeStruct:()=>$D});var T={};Os(T,{Do:()=>QH,EffectTypeId:()=>zL,acquireRelease:()=>Pq,acquireReleaseInterruptible:()=>Nq,acquireUseRelease:()=>m2,addFinalizer:()=>Lq,all:()=>ZL,allSuccesses:()=>XL,allWith:()=>QL,allowInterrupt:()=>mq,annotateCurrentSpan:()=>g5,annotateLogs:()=>fj,annotateSpans:()=>h5,as:()=>Cq,asSome:()=>_q,asSomeError:()=>Oq,asUnit:()=>wq,async:()=>D3,asyncEffect:()=>S3,asyncEither:()=>C3,asyncOption:()=>E3,awaitAllChildren:()=>Vq,bind:()=>XH,bindTo:()=>eB,blocked:()=>Yj,cacheRequestResult:()=>t5,cached:()=>VL,cachedFunction:()=>JL,cachedInvalidateWithTTL:()=>GL,cachedWithTTL:()=>$L,catch:()=>B3,catchAll:()=>j3,catchAllCause:()=>U3,catchAllDefect:()=>W3,catchSome:()=>z3,catchSomeCause:()=>K3,catchSomeDefect:()=>$3,catchTag:()=>G3,catchTags:()=>V3,cause:()=>J3,checkInterruptible:()=>dq,clock:()=>yH,clockWith:()=>bH,config:()=>MH,configProviderWith:()=>kH,context:()=>NH,contextWith:()=>d2,contextWithEffect:()=>LH,currentParentSpan:()=>y5,currentSpan:()=>x5,daemonChildren:()=>Jq,delay:()=>CH,descriptor:()=>Yq,descriptorWith:()=>Zq,die:()=>F3,dieMessage:()=>A3,dieSync:()=>v3,diffFiberRefs:()=>Qq,disconnect:()=>hq,dropUntil:()=>e3,dropWhile:()=>t3,either:()=>fn,ensuring:()=>qq,ensuringChild:()=>Xq,ensuringChildren:()=>eH,eventually:()=>Y3,every:()=>r3,exists:()=>o3,exit:()=>rB,fail:()=>_3,failCause:()=>w3,failCauseSync:()=>R3,failSync:()=>O3,fiberId:()=>tH,fiberIdWith:()=>rH,filter:()=>n3,filterOrDie:()=>cB,filterOrDieMessage:()=>uB,filterOrElse:()=>pB,filterOrFail:()=>lB,findFirst:()=>s3,firstSuccessOf:()=>i3,flatMap:()=>Ut,flatMapStep:()=>Xj,flatten:()=>yB,flip:()=>Rq,flipWith:()=>Fq,forEach:()=>Nc,forever:()=>vB,fork:()=>oH,forkAll:()=>sH,forkDaemon:()=>nH,forkIn:()=>iH,forkScoped:()=>aH,forkWithErrorHandler:()=>cH,fromFiber:()=>uH,fromFiberEffect:()=>pH,fromNullable:()=>M5,gen:()=>M3,getFiberRefs:()=>zB,head:()=>a3,if:()=>aB,ignore:()=>Z3,ignoreLogged:()=>Q3,inheritFiberRefs:()=>KB,interrupt:()=>gq,interruptWith:()=>xq,interruptible:()=>yq,interruptibleMask:()=>bq,intoDeferred:()=>oB,isEffect:()=>KL,isFailure:()=>QB,isSuccess:()=>XB,iterate:()=>MB,labelMetrics:()=>Fj,labelMetricsScoped:()=>Mj,labelMetricsScopedSet:()=>kj,labelMetricsSet:()=>Aj,let:()=>tB,linkSpans:()=>S5,locally:()=>$B,locallyScoped:()=>VB,locallyScopedWith:()=>JB,locallyWith:()=>GB,log:()=>nj,logAnnotations:()=>mj,logDebug:()=>ij,logError:()=>uj,logFatal:()=>pj,logInfo:()=>aj,logTrace:()=>sj,logWarning:()=>cj,loop:()=>kB,makeSemaphore:()=>qj,makeSpan:()=>E5,map:()=>Ly,mapAccum:()=>Aq,mapBoth:()=>vq,mapError:()=>Mq,mapErrorCause:()=>kq,mapInputContext:()=>qH,match:()=>ej,matchCause:()=>tj,matchCauseEffect:()=>rj,matchEffect:()=>oj,merge:()=>Tq,mergeAll:()=>c3,metricLabels:()=>Tj,negate:()=>Iq,never:()=>k3,none:()=>T3,onError:()=>Hq,onExit:()=>Bq,onInterrupt:()=>Dq,once:()=>YL,option:()=>nB,optionFromOptional:()=>k5,orDie:()=>gj,orDieWith:()=>xj,orElse:()=>yj,orElseFail:()=>bj,orElseSucceed:()=>Dj,parallelErrors:()=>X3,parallelFinalizers:()=>jq,partition:()=>u3,patchFiberRefs:()=>Py,promise:()=>I3,provideContext:()=>HH,provideLayer:()=>jH,provideService:()=>UH,provideServiceEffect:()=>WH,provideSomeContext:()=>h2,provideSomeLayer:()=>zH,provideSomeRuntime:()=>BH,race:()=>DB,raceAll:()=>bB,raceFirst:()=>SB,raceWith:()=>EB,random:()=>Sj,randomWith:()=>Ej,reduce:()=>p3,reduceEffect:()=>l3,reduceRight:()=>f3,reduceWhile:()=>m3,repeat:()=>TB,repeatN:()=>IB,repeatOrElse:()=>PB,repeatUntil:()=>NB,repeatUntilEffect:()=>LB,repeatWhile:()=>qB,repeatWhileEffect:()=>HB,replicate:()=>d3,replicateEffect:()=>h3,request:()=>e5,retry:()=>tq,retryN:()=>rq,retryOrElse:()=>oq,retryUntil:()=>nq,retryUntilEffect:()=>sq,retryWhile:()=>iq,retryWhileEffect:()=>aq,runCallback:()=>Bj,runFork:()=>Hj,runPromise:()=>g2,runPromiseExit:()=>jj,runRequestBlock:()=>Zj,runSync:()=>Uj,runSyncExit:()=>Wj,runtime:()=>Cj,runtimeFlags:()=>_j,sandbox:()=>eq,schedule:()=>BB,scheduleForked:()=>jB,scheduleFrom:()=>UB,scope:()=>Wq,scopeWith:()=>zq,scoped:()=>Kq,sequentialFinalizers:()=>Uq,serviceConstants:()=>VH,serviceFunction:()=>KH,serviceFunctionEffect:()=>$H,serviceFunctions:()=>GH,serviceMembers:()=>JH,serviceOption:()=>YH,setClock:()=>DH,setConfigProvider:()=>TH,setFiberRefs:()=>YB,setParentSpan:()=>C5,setRequestBatching:()=>o5,setRequestCache:()=>s5,setRequestCaching:()=>n5,setScheduler:()=>dH,setSpan:()=>_5,setTracer:()=>c5,setTracerTiming:()=>d5,setUnhandledErrorLogLevel:()=>hj,sleep:()=>_H,some:()=>sB,spanAnnotations:()=>b5,spanLinks:()=>D5,step:()=>Qj,succeed:()=>P3,succeedNone:()=>N3,succeedSome:()=>L3,summarized:()=>CB,supervised:()=>lH,suspend:()=>zi,sync:()=>q3,tagMetrics:()=>Rj,tagMetricsScoped:()=>vj,takeUntil:()=>g3,takeWhile:()=>x3,tap:()=>_B,tapBoth:()=>OB,tapDefect:()=>wB,tapError:()=>RB,tapErrorCause:()=>AB,tapErrorTag:()=>FB,timed:()=>OH,timedWith:()=>wH,timeout:()=>RH,timeoutFail:()=>FH,timeoutFailCause:()=>AH,timeoutTo:()=>vH,tracer:()=>u5,tracerWith:()=>p5,transplant:()=>fH,try:()=>cq,tryMap:()=>uq,tryMapPromise:()=>pq,tryPromise:()=>lq,unified:()=>Nj,unifiedFn:()=>Pj,uninterruptible:()=>Sq,uninterruptibleMask:()=>Eq,unit:()=>Ft,unless:()=>fB,unlessEffect:()=>mB,unsafeMakeSemaphore:()=>Lj,unsandbox:()=>fq,unsome:()=>iB,updateFiberRefs:()=>ZB,updateRuntimeFlags:()=>Ny,updateService:()=>ZH,useSpan:()=>O5,useSpanScoped:()=>w5,using:()=>$q,validate:()=>zj,validateAll:()=>y3,validateFirst:()=>b3,validateWith:()=>Kj,when:()=>dB,whenEffect:()=>hB,whenFiberRef:()=>gB,whenRef:()=>xB,whileLoop:()=>WB,withClock:()=>EH,withClockScoped:()=>SH,withConcurrency:()=>mH,withConfigProvider:()=>IH,withConfigProviderScoped:()=>PH,withEarlyRelease:()=>Gq,withLogSpan:()=>lj,withMaxFiberOps:()=>hH,withMetric:()=>Ij,withParentSpan:()=>A5,withParentSpanScoped:()=>v5,withRequestBatching:()=>r5,withRequestCache:()=>a5,withRequestCaching:()=>i5,withRuntimeFlags:()=>Oj,withRuntimeFlagsScoped:()=>wj,withScheduler:()=>gH,withSchedulingPriority:()=>xH,withSpan:()=>R5,withSpanScoped:()=>F5,withTracer:()=>l5,withTracerScoped:()=>f5,withTracerTiming:()=>m5,withUnhandledErrorLogLevel:()=>dj,yieldNow:()=>H3,zip:()=>$j,zipLeft:()=>Gj,zipRight:()=>Vj,zipWith:()=>Jj});var qc={};Os(qc,{SafeRefinementId:()=>_6,any:()=>A6,bigint:()=>I6,boolean:()=>M6,date:()=>P6,defined:()=>v6,discriminator:()=>y2,discriminators:()=>By,discriminatorsExhaustive:()=>b2,either:()=>Of,exhaustive:()=>E2,instanceOf:()=>D2,instanceOfUnsafe:()=>L6,is:()=>w6,nonEmptyString:()=>O6,not:()=>C6,null:()=>T6,number:()=>F6,option:()=>H6,orElse:()=>S2,orElseAbsurd:()=>q6,record:()=>N6,string:()=>R6,tag:()=>S6,tags:()=>E6,tagsExhaustive:()=>jy,type:()=>d6,typeTags:()=>x6,undefined:()=>k6,value:()=>h6,valueTags:()=>g6,when:()=>y6,whenAnd:()=>D6,whenOr:()=>b6});var Lc=class e{constructor(t){this.cases=t,this._tag="TypeMatcher",this._input=P,this._filters=P,this._remaining=P,this._result=P}add(t){return new e([...this.cases,t])}pipe(){return C(this,arguments)}},qy=class e{constructor(t,r){this.provided=t,this.value=r,this._tag="ValueMatcher",this._input=P,this._filters=P,this._result=P}add(t){return this.value._tag==="Right"?this:t._tag==="When"&&t.guard(this.provided)===!0?new e(this.provided,H(t.evaluate(this.provided))):t._tag==="Not"&&t.guard(this.provided)===!1?new e(this.provided,H(t.evaluate(this.provided))):this}pipe(){return C(this,arguments)}},gs=class{constructor(t,r){this.guard=t,this.evaluate=r,this._tag="When"}},Hy=class{constructor(t,r){this.guard=t,this.evaluate=r,this._tag="Not"}},$i=e=>{if(typeof e=="function")return e;if(Array.isArray(e)){let t=e.map($i),r=t.length;return o=>{if(!Array.isArray(o))return!1;for(let n=0;n<r;n++)if(t[n](o[n])===!1)return!1;return!0}}else if(e!==null&&typeof e=="object"){let t=Object.entries(e).map(([o,n])=>[o,$i(n)]),r=t.length;return o=>{if(typeof o!="object"||o===null)return!1;for(let n=0;n<r;n++){let[s,i]=t[n];if(!(s in o)||i(o[s])===!1)return!1}return!0}}return t=>t===e},f6=e=>{let t=e.map($i),r=t.length;return o=>{for(let n=0;n<r;n++)if(t[n](o)===!0)return!0;return!1}},m6=e=>{let t=e.map($i),r=t.length;return o=>{for(let n=0;n<r;n++)if(t[n](o)===!1)return!1;return!0}},d6=()=>new Lc([]),h6=e=>new qy(e,z(e)),g6=e=>{let t=jy(e)(new Lc([]));return r=>t(r)},x6=()=>e=>{let t=jy(e)(new Lc([]));return r=>t(r)},y6=(e,t)=>r=>r.add(new gs($i(e),t)),b6=(...e)=>t=>{let r=e[e.length-1],o=e.slice(0,-1);return t.add(new gs(f6(o),r))},D6=(...e)=>t=>{let r=e[e.length-1],o=e.slice(0,-1);return t.add(new gs(m6(o),r))},y2=e=>(...t)=>{let r=t[t.length-1],o=t.slice(0,-1),n=o.length===1?s=>s[e]===o[0]:s=>o.includes(s[e]);return s=>s.add(new gs(n,r))},By=e=>t=>{let r=[];for(let n in t){let s=a=>a[e]===n,i=t[n];i&&r.push(new gs(s,i))}let o=r.length;return n=>{let s=n;for(let i=0;i<o;i++)s=s.add(r[i]);return s}},b2=e=>t=>{let r=By(e)(t);return o=>E2(r(o))},S6=y2("_tag"),E6=By("_tag"),jy=b2("_tag"),C6=(e,t)=>r=>r.add(new Hy($i(e),t)),_6=Symbol.for("@effect/match/SafeRefinementId"),O6=e=>typeof e=="string"&&e.length>0,w6=(...e)=>{let t=e.length;return r=>{for(let o=0;o<t;o++)if(r===e[o])return!0;return!1}},R6=pa,F6=yn,A6=()=>!0,v6=e=>e!=null,M6=pu,k6=la;var T6=Zb;var I6=vs,P6=lu,N6=fa,D2=e=>t=>t instanceof e,L6=D2,S2=e=>t=>{let r=Of(t);return ha(r)?r._tag==="Right"?r.right:e(r.left):o=>{let n=r(o);return n._tag==="Right"?n.right:e(n.left)}},q6=e=>S2(()=>{throw new Error("absurd")})(e),Of=e=>{if(e._tag==="ValueMatcher")return e.value;let t=e.cases.length;return r=>{for(let o=0;o<t;o++){let n=e.cases[o];if(n._tag==="When"&&n.guard(r)===!0)return H(n.evaluate(r));if(n._tag==="Not"&&n.guard(r)===!1)return H(n.evaluate(r))}return z(r)}},H6=e=>{let t=Of(e);return ha(t)?ga(t,{onLeft:()=>g(),onRight:x}):r=>ga(t(r),{onLeft:()=>g(),onRight:o=>x(o)})},E2=e=>{let t=Of(e);if(ha(t)){if(t._tag==="Right")return t.right;throw new Error("@effect/match: exhaustive absurd")}return r=>{let o=t(r);if(o._tag==="Right")return o.right;throw new Error("@effect/match: exhaustive absurd")}};var so={};Os(so,{Do:()=>PT,TypeId:()=>yD,all:()=>_D,ap:()=>yT,as:()=>SD,asUnit:()=>lT,bind:()=>IT,bindTo:()=>kT,composeK:()=>hT,contains:()=>sd,containsWith:()=>FD,divide:()=>AT,exists:()=>OT,filter:()=>ST,filterMap:()=>wD,firstSomeOf:()=>cT,flatMap:()=>mr,flatMapNullable:()=>mT,flatten:()=>od,fromIterable:()=>sT,fromNullable:()=>Xe,gen:()=>LT,getEquivalence:()=>ET,getLeft:()=>iT,getOrElse:()=>J,getOrNull:()=>td,getOrThrow:()=>rd,getOrThrowWith:()=>DD,getOrUndefined:()=>Ke,getOrder:()=>CT,getRight:()=>bD,isNone:()=>B,isOption:()=>ed,isSome:()=>N,let:()=>TT,lift2:()=>ya,liftNullable:()=>uT,liftPredicate:()=>RD,liftThrowable:()=>pT,map:()=>te,match:()=>He,multiply:()=>RT,multiplyCompact:()=>MT,none:()=>g,orElse:()=>Dn,orElseEither:()=>aT,partitionMap:()=>DT,product:()=>CD,productMany:()=>xT,reduceCompact:()=>bT,some:()=>x,subtract:()=>FT,sum:()=>wT,sumCompact:()=>vT,tap:()=>ED,toArray:()=>OD,toRefinement:()=>nT,unit:()=>fT,zipLeft:()=>gT,zipRight:()=>dT,zipWith:()=>nd});var wf="@effect/schema/ArbitraryHookId",Uy="@effect/schema/PrettyHookId",Wy=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return Wy(e,t.from)}},Hc=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),Rf=e=>{let t=!1,r;return()=>(t||(r=e(),t=!0),r)};var zy=e=>({_tag:"ParseError",errors:e}),ur=(e,t,r)=>({_tag:"Type",expected:e,actual:t,message:Xe(r)}),_2={_tag:"Forbidden"},No=(e,t)=>({_tag:"Index",index:e,errors:t}),io=(e,t)=>({_tag:"Key",key:e,errors:t}),Ff={_tag:"Missing"},Ky=e=>({_tag:"Unexpected",actual:e}),$y=e=>({_tag:"UnionMember",errors:e}),ke=H,ht=e=>z(zy([e])),Ye=e=>z(zy(e)),ao=e=>{let t=e;if(t._tag==="Left"||t._tag==="Right")return t},Bc=(e,t)=>{let r=e;return r._tag==="Left"?r:r._tag==="Right"?t(r.right):Ut(e,t)},O2=(e,t)=>{let r=e;return r._tag==="Left"?r:r._tag==="Right"?H(t(r.right)):Ly(e,t)};var Mf="@effect/schema/TypeAnnotationId",kf="@effect/schema/MessageAnnotationId",Gi="@effect/schema/IdentifierAnnotationId",gt="@effect/schema/TitleAnnotationId",Lo="@effect/schema/DescriptionAnnotationId",Vy="@effect/schema/ExamplesAnnotationId",Wc="@effect/schema/JSONSchemaAnnotationId",F2="@effect/schema/DocumentationAnnotationId",ys=e=>t=>Object.prototype.hasOwnProperty.call(t.annotations,e)?x(t.annotations[e]):g(),Vi=(e,t,r,o={})=>({_tag:"Declaration",typeParameters:e,type:t,decode:r,annotations:o});var Jy=e=>({_tag:"Literal",literal:e,annotations:{}}),xs=e=>e._tag==="Literal";var B6=e=>e._tag==="UniqueSymbol",j6={_tag:"UndefinedKeyword",annotations:{[gt]:"undefined"}};var U6={_tag:"VoidKeyword",annotations:{[gt]:"void"}};var zc={_tag:"NeverKeyword",annotations:{[gt]:"never"}};var Ji={_tag:"UnknownKeyword",annotations:{[gt]:"unknown"}},W6=e=>e._tag==="UnknownKeyword",A2={_tag:"AnyKeyword",annotations:{[gt]:"any"}},z6=e=>e._tag==="AnyKeyword",Tf={_tag:"StringKeyword",annotations:{[gt]:"string"}},Uc=e=>e._tag==="StringKeyword",v2={_tag:"NumberKeyword",annotations:{[gt]:"number"}},vf=e=>e._tag==="NumberKeyword",M2={_tag:"BooleanKeyword",annotations:{[gt]:"boolean"}},w2=e=>e._tag==="BooleanKeyword",K6={_tag:"BigIntKeyword",annotations:{[gt]:"bigint"}},R2=e=>e._tag==="BigIntKeyword",Yy={_tag:"SymbolKeyword",annotations:{[gt]:"symbol"}},Gy=e=>e._tag==="SymbolKeyword",$6={_tag:"ObjectKeyword",annotations:{[gt]:"object"}};var Kc=(e,t)=>({type:e,isOptional:t}),bs=(e,t,r,o={})=>({_tag:"Tuple",elements:e,rest:t,isReadonly:r,annotations:o});var je=(e,t,r,o,n={})=>({name:e,type:t,isOptional:r,isReadonly:o,annotations:n}),k2=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return k2(e.from);default:return!1}},Yi=(e,t,r)=>{if(k2(e))return{parameter:e,type:t,isReadonly:r};throw new Error("An index signature parameter type must be 'string', 'symbol', a template literal type or a refinement of the previous types")},qo=(e,t,r={})=>{let o={};for(let s=0;s<e.length;s++){let i=e[s].name;if(Object.prototype.hasOwnProperty.call(o,i))throw new Error(`Duplicate property signature ${String(i)}`);o[i]=null}let n={string:!1,symbol:!1};for(let s=0;s<t.length;s++){let i=Pf(t[s].parameter);if(Uc(i)){if(n.string)throw new Error("Duplicate index signature for type `string`");n.string=!0}else if(Gy(i)){if(n.symbol)throw new Error("Duplicate index signature for type `symbol`");n.symbol=!0}}return{_tag:"TypeLiteral",propertySignatures:G6(e),indexSignatures:t,annotations:r}};var Ho=(e,t={})=>{let r=Z6(e);switch(r.length){case 0:return zc;case 1:return r[0];default:return{_tag:"Union",types:Y6(r),annotations:t}}};var $c=(e,t={})=>({_tag:"Lazy",f:Rf(e),annotations:t});var Gc=(e,t,r,o={})=>({_tag:"Refinement",from:e,decode:t,isReversed:r,annotations:o}),T2=e=>e._tag==="Refinement",Vc=(e,t,r,o)=>({from:e,to:t,decode:r,encode:o}),If=(e,t,r,o,n,s={})=>({_tag:"Transform",from:e,to:t,decode:r,encode:o,propertySignatureTransformations:n,annotations:s}),I2=(e,t,r,o,n={})=>If(e,t,r,o,[],n),P2=(e,t,r,o={})=>If(e,t,n=>{for(let s=0;s<r.length;s++){let i=r[s],a=i.from,c=Object.prototype.hasOwnProperty.call(n,a)?x(n[a]):g();delete n[a];let p=i.decode(c);N(p)&&(n[i.to]=p.value)}return ke(n)},n=>{for(let s=0;s<r.length;s++){let i=r[s],a=i.to,c=Object.prototype.hasOwnProperty.call(n,a)?x(n[a]):g();delete n[a];let p=i.encode(c);N(p)&&(n[i.from]=p.value)}return ke(n)},r,o);var N2=(e,t)=>({...e,annotations:{...e.annotations,...t}}),Zy=(e,t,r)=>({...e,annotations:{...e.annotations,[t]:r}});var L2=e=>e.map(t=>je(t.name,Ne(t.type),t.isOptional,t.isReadonly,t.annotations)),q2=e=>e.map(t=>Yi(t.parameter,Ne(t.type),t.isReadonly)),Ne=e=>{switch(e._tag){case"Declaration":return Vi(e.typeParameters.map(Ne),Ne(e.type),e.decode,e.annotations);case"Tuple":return bs(e.elements.map(t=>Kc(Ne(t.type),t.isOptional)),te(e.rest,Ns(Ne)),e.isReadonly,e.annotations);case"TypeLiteral":return qo(L2(e.propertySignatures),q2(e.indexSignatures),e.annotations);case"Union":return Ho(e.types.map(Ne),e.annotations);case"Lazy":return $c(()=>Ne(e.f()),e.annotations);case"Refinement":return Gc(Ne(e.from),e.decode,!1,e.annotations);case"Transform":return Ne(e.to)}return e},pr=e=>{switch(e._tag){case"Declaration":return Vi(e.typeParameters.map(pr),pr(e.type),e.decode,e.annotations);case"Tuple":return bs(e.elements.map(t=>Kc(pr(t.type),t.isOptional)),te(e.rest,Ns(pr)),e.isReadonly);case"TypeLiteral":return qo(e.propertySignatures.map(t=>je(t.name,pr(t.type),t.isOptional,t.isReadonly)),e.indexSignatures.map(t=>Yi(t.parameter,pr(t.type),t.isReadonly)));case"Union":return Ho(e.types.map(pr));case"Lazy":return $c(()=>pr(e.f()));case"Refinement":case"Transform":return pr(e.from)}return e},H2=e=>{switch(e._tag){case"Declaration":return H2(e.type);case"NeverKeyword":return 0;case"Literal":case"UndefinedKeyword":case"VoidKeyword":case"UniqueSymbol":return 1;case"BooleanKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3;case"ObjectKeyword":return 5;case"UnknownKeyword":case"AnyKeyword":return 6;default:return 4}},G6=Sn(Qe(vt,ua(e=>H2(e.type)))),B2=Vb(vt,vt,vt),V6=jm(B2),j2=[0,0,0],J6=e=>e.reduce(V6,j2),jc=e=>{switch(e._tag){case"Tuple":{let t=e.elements.length,r=N(e.rest)?e.rest.value.length:0;return[2,t,r]}case"TypeLiteral":{let t=e.propertySignatures.length,r=e.indexSignatures.length;return t+r===0?[-4,0,0]:[4,t,r]}case"Declaration":{let[t,r,o]=jc(e.type);return[6,r,o]}case"Lazy":return[8,0,0];case"Union":return J6(e.types.map(jc));case"Refinement":{let[t,r,o]=jc(e.from);return[t+1,r,o]}case"Transform":return jc(e.from);case"ObjectKeyword":return[-2,0,0];case"UnknownKeyword":case"AnyKeyword":return[-4,0,0];default:return j2}},Y6=Sn(Gb(ua(B2,jc))),Z6=e=>{let t=Qe(e,_u(o=>{switch(o._tag){case"NeverKeyword":return[];case"Union":return o.types;default:return[o]}}));if(t.some(z6))return[A2];if(t.some(W6))return[Ji];let r;return(r=t.findIndex(Uc))!==-1&&(t=t.filter((o,n)=>n===r||!Uc(o)&&!(xs(o)&&typeof o.literal=="string"))),(r=t.findIndex(vf))!==-1&&(t=t.filter((o,n)=>n===r||!vf(o)&&!(xs(o)&&typeof o.literal=="number"))),(r=t.findIndex(w2))!==-1&&(t=t.filter((o,n)=>n===r||!w2(o)&&!(xs(o)&&typeof o.literal=="boolean"))),(r=t.findIndex(R2))!==-1&&(t=t.filter((o,n)=>n===r||!R2(o)&&!(xs(o)&&typeof o.literal=="bigint"))),(r=t.findIndex(Gy))!==-1&&(t=t.filter((o,n)=>n===r||!Gy(o)&&!B6(o))),t},Pf=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return Pf(e.from)}};var co=(e,t=[])=>({value:e,forest:t}),U2=e=>Q6(co("error(s) found",e.map(qf))),Q6=e=>e.value+W2(`
`,e.forest),W2=(e,t)=>{let r="",o=t.length,n;for(let s=0;s<o;s++){n=t[s];let i=s===o-1;r+=e+(i?"\u2514":"\u251C")+"\u2500 "+n.value,r+=W2(e+(o>1&&!i?"\u2502  ":"   "),n.forest)}return r},Jc=e=>{if(e==null||typeof e=="number"||typeof e=="symbol"||e instanceof Date)return String(e);if(typeof e=="bigint")return String(e)+"n";try{return JSON.stringify(e)}catch{return String(e)}},X6=e=>{switch(e.type._tag){case"StringKeyword":return"${string}";case"NumberKeyword":return"${number}"}},e8=e=>e.head+e.spans.map(t=>X6(t)+t.literal).join(""),t8=ys(kf),r8=ys(gt),o8=ys(Gi),n8=ys(Lo),vr=e=>Qe(o8(e),Dn(()=>r8(e)),Dn(()=>n8(e))),Lf=e=>{switch(e._tag){case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"UndefinedKeyword":case"SymbolKeyword":case"ObjectKeyword":case"AnyKeyword":case"UnknownKeyword":case"VoidKeyword":case"NeverKeyword":return J(vr(e),()=>e._tag);case"Literal":return J(vr(e),()=>Jc(e.literal));case"UniqueSymbol":return J(vr(e),()=>Jc(e.symbol));case"Union":return e.types.map(Lf).join(" or ");case"TemplateLiteral":return J(vr(e),()=>e8(e));case"Tuple":return J(vr(e),()=>"<anonymous tuple or array schema>");case"TypeLiteral":return J(vr(e),()=>"<anonymous type literal schema>");case"Enums":return J(vr(e),()=>e.enums.map((t,r)=>JSON.stringify(r)).join(" | "));case"Lazy":return J(vr(e),()=>"<anonymous lazy schema>");case"Declaration":return J(vr(e),()=>"<anonymous declaration schema>");case"Refinement":return J(vr(e),()=>"<anonymous refinement schema>");case"Transform":return J(vr(e),()=>`${Lf(e.from)} -> ${Lf(e.to)}`)}},qf=e=>{switch(e._tag){case"Type":return co(Qe(t8(e.expected),te(t=>t(e.actual)),Dn(()=>e.message),J(()=>`Expected ${Lf(e.expected)}, actual ${Jc(e.actual)}`)));case"Forbidden":return co("is forbidden");case"Index":{let t=e.errors.map(qf);return t.length===1&&t[0].forest.length!==0?co(`[${e.index}]${t[0].value}`,t[0].forest):co(`[${e.index}]`,t)}case"Unexpected":return co("is unexpected");case"Key":{let t=e.errors.map(qf);return t.length===1&&t[0].forest.length!==0?co(`[${Jc(e.key)}]${t[0].value}`,t[0].forest):co(`[${Jc(e.key)}]`,t)}case"Missing":return co("is missing");case"UnionMember":return co("union member",e.errors.map(qf))}};var K2=e=>{let t=xt(e);return(r,o)=>t(r,{...o,isEffectAllowed:!0})};var Xy=e=>xt(e.ast);var Yc=e=>K2(e.ast);var Zc=e=>K2(Mr(e.ast)),xt=(e,t=!0)=>{switch(e._tag){case"Refinement":if(e.isReversed){let r=xt(Ne(e),t),o=xt(Mr($2(e.from)),!1);return(n,s)=>Hf(Bc(r(n,s),i=>o(i,s)),s)}else{let r=xt(e.from,t);return(o,n)=>Hf(Bc(r(o,n),s=>e.decode(s,n)),n)}case"Transform":{let r=xt(e.from,t),o=xt(e.to,!1);return(n,s)=>Hf(Bc(r(n,s),i=>Bc(e.decode(i,s),a=>o(a,s))),s)}case"Declaration":{let r=e.decode(...e.typeParameters);return(o,n)=>Hf(r(o,n),n)}case"Literal":return At(e,r=>r===e.literal);case"UniqueSymbol":return At(e,r=>r===e.symbol);case"UndefinedKeyword":return At(e,la);case"VoidKeyword":return At(e,la);case"NeverKeyword":return At(e,Qb);case"UnknownKeyword":case"AnyKeyword":return ke;case"StringKeyword":return At(e,pa);case"NumberKeyword":return At(e,yn);case"BooleanKeyword":return At(e,pu);case"BigIntKeyword":return At(e,vs);case"SymbolKeyword":return At(e,Jb);case"ObjectKeyword":return At(e,de);case"Enums":return At(e,r=>e.enums.some(([o,n])=>n===r));case"TemplateLiteral":{let r=a8(e);return At(e,o=>pa(o)&&r.test(o))}case"Tuple":{let r=e.elements.map(s=>xt(s.type,t)),o=Qe(e.rest,te(Ns(s=>xt(s)))),n=e.elements.filter(s=>!s.isOptional).length;return N(e.rest)&&(n+=e.rest.value.length-1),(s,i)=>{if(!Array.isArray(s))return ht(ur(i8,s));let a=i?.errors==="all",c=[],p=0,l=s.length;for(let w=l;w<=n-1;w++){let A=No(w,[Ff]);if(a){c.push([p++,A]);continue}else return ht(A)}if(B(e.rest))for(let w=e.elements.length;w<=l-1;w++){let A=No(w,[Ky(s[w])]);if(a){c.push([p++,A]);continue}else return Ye(Wt(Ze(c),A))}let f=[],d=0,h;for(;d<r.length;d++)if(l<d+1){if(e.elements[d].isOptional)continue}else{let w=r[d],A=w(s[d],i),I=ao(A);if(I){if(Re(I)){let j=No(d,I.left.errors);if(a){c.push([p++,j]);continue}else return Ye(Wt(Ze(c),j))}f.push([p++,I.right])}else{let j=p++,K=d;h||(h=[]),h.push(({es:ae,output:Ee})=>Ut(fn(A),Le=>{if(Re(Le)){let me=No(K,Le.left.errors);return a?(ae.push([j,me]),Ft):Ye(Wt(Ze(ae),me))}return Ee.push([j,Le.right]),Ft}))}}if(N(o)){let w=Fe(o.value),A=Jt(o.value);for(;d<l-A.length;d++){let I=w(s[d],i),j=ao(I);if(j)if(Re(j)){let K=No(d,j.left.errors);if(a){c.push([p++,K]);continue}else return Ye(Wt(Ze(c),K))}else f.push([p++,j.right]);else{let K=p++,ae=d;h||(h=[]),h.push(({es:Ee,output:Le})=>Ut(fn(I),me=>{if(Re(me)){let Tr=No(ae,me.left.errors);return a?(Ee.push([K,Tr]),Ft):Ye(Wt(Ze(Ee),Tr))}else return Le.push([K,me.right]),Ft}))}}for(let I=0;I<A.length;I++)if(d+=I,!(l<d+1)){let j=A[I](s[d],i),K=ao(j);if(K){if(Re(K)){let ae=No(d,K.left.errors);if(a){c.push([p++,ae]);continue}else return Ye(Wt(Ze(c),ae))}f.push([p++,K.right])}else{let ae=p++,Ee=d;h||(h=[]),h.push(({es:Le,output:me})=>Ut(fn(j),Tr=>{if(Re(Tr)){let lo=No(Ee,Tr.left.errors);return a?(Le.push([ae,lo]),Ft):Ye(Wt(Ze(Le),lo))}return me.push([ae,Tr.right]),Ft}))}}}let S=({es:w,output:A})=>Eu(w)?Ye(Ze(w)):ke(Ze(A));if(h&&h.length>0){let w=h;return zi(()=>{let A={es:Array.from(c),output:Array.from(f)};return Ut(Nc(w,I=>I(A),{concurrency:"unbounded",discard:!0}),()=>S(A))})}return S({output:f,es:c})}}case"TypeLiteral":{if(e.propertySignatures.length===0&&e.indexSignatures.length===0)return At(e,Xb);let r=e.propertySignatures.map(i=>xt(i.type,t)),o=e.indexSignatures.map(i=>[xt(i.parameter,t),xt(i.type,t)]),n=xt(Ho(e.indexSignatures.map(i=>Pf(i.parameter)))),s={};for(let i=0;i<r.length;i++)s[e.propertySignatures[i].name]=null;return(i,a)=>{if(!fa(i))return ht(ur(z2,i));let c=a?.errors==="all",p=[],l=0;if(a?.onExcessProperty==="error"){for(let w of Hc(i))if(!Object.prototype.hasOwnProperty.call(s,w)){let A=n(w),I=ao(A);if(I&&Re(I)){let j=io(w,[Ky(i[w])]);if(c){p.push([l++,j]);continue}else return Ye(Wt(Ze(p),j))}}}let d={},h;for(let w=0;w<r.length;w++){let A=e.propertySignatures[w],I=r[w],j=A.name;if(Object.prototype.hasOwnProperty.call(i,j)){let K=I(i[j],a),ae=ao(K);if(ae){if(Re(ae)){let Ee=io(j,ae.left.errors);if(c){p.push([l++,Ee]);continue}else return Ye(Wt(Ze(p),Ee))}d[j]=ae.right}else{let Ee=l++,Le=j;h||(h=[]),h.push(({es:me,output:Tr})=>Ut(fn(K),lo=>{if(Re(lo)){let su=io(Le,lo.left.errors);return c?(me.push([Ee,su]),Ft):Ye(Wt(Ze(me),su))}return Tr[Le]=lo.right,Ft}))}}else if(!A.isOptional){let K=io(j,[Ff]);if(c){p.push([l++,K]);continue}else return ht(K)}}for(let w=0;w<o.length;w++){let A=o[w][0],I=o[w][1],j=Wy(i,e.indexSignatures[w].parameter);for(let K of j){if(Object.prototype.hasOwnProperty.call(s,K))continue;let ae=ao(A(K,a));if(ae&&Re(ae)){let me=io(K,ae.left.errors);if(c){p.push([l++,me]);continue}else return Ye(Wt(Ze(p),me))}let Ee=I(i[K],a),Le=ao(Ee);if(Le)if(Re(Le)){let me=io(K,Le.left.errors);if(c){p.push([l++,me]);continue}else return Ye(Wt(Ze(p),me))}else d[K]=Le.right;else{let me=l++,Tr=K;h||(h=[]),h.push(({es:lo,output:su})=>Ut(fn(Ee),qm=>{if(Re(qm)){let Ub=io(Tr,qm.left.errors);return c?(lo.push([me,Ub]),Ft):Ye(Wt(Ze(lo),Ub))}else return su[K]=qm.right,Ft}))}}}let S=({es:w,output:A})=>Eu(w)?Ye(Ze(w)):ke(A);if(h&&h.length>0){let w=h;return zi(()=>{let A={es:Array.from(p),output:Object.assign({},d)};return Ut(Nc(w,I=>I(A),{concurrency:"unbounded",discard:!0}),()=>S(A))})}return S({es:p,output:d})}}case"Union":{let r=s8(e.types),o=Hc(r.keys),n=o.length,s=new Map;for(let i=0;i<e.types.length;i++)s.set(e.types[i],xt(e.types[i],!0));return(i,a)=>{let c=[],p=0,l=[];if(n>0)if(fa(i))for(let h=0;h<n;h++){let S=o[h],w=r.keys[S].buckets;if(Object.prototype.hasOwnProperty.call(i,S)){let A=String(i[S]);Object.prototype.hasOwnProperty.call(w,A)?l=l.concat(w[A]):c.push([p++,io(S,[ur(r.keys[S].ast,i[S])])])}else c.push([p++,io(S,[Ff])])}else c.push([p++,ur(z2,i)]);r.otherwise.length>0&&(l=l.concat(r.otherwise));let f;for(let h=0;h<l.length;h++){let S=s.get(l[h])(i,a),w=!f||f.length===0?ao(S):void 0;if(w){if(Pr(w))return ke(w.right);c.push([p++,$y(w.left.errors)])}else{let A=p++;f||(f=[]),f.push(I=>zi(()=>"finalResult"in I?Ft:Ut(fn(S),j=>(Pr(j)?I.finalResult=ke(j.right):I.es.push([A,$y(j.left.errors)]),Ft))))}}let d=h=>Eu(h)?Ye(Ze(h)):ht(ur(zc,i));if(f&&f.length>0){let h=f;return zi(()=>{let S={es:Array.from(c)};return Ut(Nc(h,w=>w(S),{concurrency:1,discard:!0}),()=>"finalResult"in S?S.finalResult:d(S.es))})}return d(c)}}case"Lazy":{let r=Rf(()=>xt(e.f(),t));return(o,n)=>r()(o,n)}}},At=(e,t)=>r=>t(r)?ke(r):ht(ur(e,r)),Qy=e=>{switch(e._tag){case"Declaration":return Qy(e.type);case"TypeLiteral":{let t=[];for(let r=0;r<e.propertySignatures.length;r++){let o=e.propertySignatures[r],n=pr(o.type);xs(n)&&!o.isOptional&&t.push([o.name,n])}return t}case"Refinement":case"Transform":return Qy(e.from)}return[]},s8=e=>{let t={},r=[];for(let o=0;o<e.length;o++){let n=e[o],s=Qy(n);if(s.length>0)for(let i=0;i<s.length;i++){let[a,c]=s[i],p=String(c.literal);t[a]=t[a]||{buckets:{},ast:zc};let l=t[a].buckets;if(Object.prototype.hasOwnProperty.call(l,p)){if(i<s.length-1)continue;l[p].push(n),t[a].ast=Ho([t[a].ast,c])}else{l[p]=[n],t[a].ast=Ho([t[a].ast,c]);break}}else r.push(n)}return{keys:t,otherwise:r}},$2=e=>T2(e)?$2(e.from):e,Hf=(e,t)=>{let r=ao(e);return r||(t?.isEffectAllowed===!0?e:ht(_2))},i8=bs([],x([Ji]),!0,{[Lo]:"a generic array"}),z2=qo([],[Yi(Tf,Ji,!0),Yi(Yy,Ji,!0)],{[Lo]:"a generic object"}),Wt=(e,t)=>(e.push(t),e),a8=e=>{let t=`^${e.head}`;for(let r of e.spans)Uc(r.type)?t+=".*":vf(r.type)&&(t+="-?\\d+(\\.\\d+)?"),t+=r.literal;return t+="$",new RegExp(t)};function Ze(e){return e.sort(([t],[r])=>t>r?1:t<r?-1:0).map(([t,r])=>r)}var Mr=e=>{switch(e._tag){case"Declaration":return Vi(e.typeParameters.map(Mr),e.type,e.decode,e.annotations);case"Tuple":return bs(e.elements.map(t=>Kc(Mr(t.type),t.isOptional)),te(e.rest,Ns(Mr)),e.isReadonly);case"TypeLiteral":return qo(e.propertySignatures.map(t=>je(t.name,Mr(t.type),t.isOptional,t.isReadonly,t.annotations)),e.indexSignatures.map(t=>Yi(t.parameter,Mr(t.type),t.isReadonly)));case"Union":return Ho(e.types.map(Mr));case"Lazy":return $c(()=>Mr(e.f()));case"Refinement":return Gc(e.from,e.decode,!e.isReversed,e.annotations);case"Transform":return If(Mr(e.to),Mr(e.from),e.encode,e.decode,e.propertySignatureTransformations.map(t=>Vc(t.to,t.from,t.encode,t.decode)))}return e};var m8=Symbol.for("@effect/schema/Schema");var d8=e=>Ue(Ne(e.ast)),eb=class{constructor(t){$t(this,"ast");$t(this,"_id",m8);$t(this,"From");$t(this,"To");this.ast=t}pipe(){return C(this,arguments)}},Ue=e=>new eb(e);var h8=e=>Ue(Jy(e)),mn=(...e)=>dn(...e.map(t=>h8(t)));var tb=(e,t,r,o)=>Ue(Vi(e.map(n=>n.ast),t.ast,(...n)=>r(...n.map(Ue)),o)),dn=(...e)=>Ue(Ho(e.map(t=>t.ast))),g8=e=>dn(b8,e);var Ds=e=>Ue(bs([],x([e.ast]),!0));var Bf=class e{constructor(t,r,o){$t(this,"_from");$t(this,"_annotations");$t(this,"_optional");$t(this,"From");$t(this,"FromIsOptional");$t(this,"To");$t(this,"ToIsOptional");this._from=t,this._annotations=r,this._optional=o}optional(){if(this._optional)throw new Error("duplicate optional configuration");return new e(this._from,this._annotations,{to:"optional"})}withDefault(t){if(this._optional&&this._optional.to!=="optional")throw new Error("duplicate optional configuration");return new e(this._from,this._annotations,{to:"default",value:t})}toOption(){if(this._optional&&this._optional.to!=="optional")throw new Error("duplicate optional configuration");return new e(this._from,this._annotations,{to:"Option"})}},x8=(e,t)=>new Bf(e.ast,t),jf=(e,t)=>x8(e,t).optional(),yt=e=>{let t=Hc(e),r=[],o=[],n=[],s=[];for(let i=0;i<t.length;i++){let a=t[i],c=e[a];if(c instanceof Bf){let p=c._optional;if(p)switch(p.to){case"optional":{r.push(je(a,c._from,!0,!0,c._annotations)),o.push(je(a,c._from,!0,!0)),n.push(je(a,Ne(c._from),!0,!0,c._annotations));break}case"default":{o.push(je(a,c._from,!0,!0)),n.push(je(a,Ne(c._from),!1,!0,c._annotations)),s.push(Vc(a,a,Dn(()=>x(p.value())),P));break}case"Option":{o.push(je(a,c._from,!0,!0)),n.push(je(a,rv(Ue(Ne(c._from))).ast,!1,!0,c._annotations)),s.push(Vc(a,a,x,od));break}}else r.push(je(a,c._from,!1,!0,c._annotations)),o.push(je(a,c._from,!1,!0)),n.push(je(a,Ne(c._from),!1,!0,c._annotations))}else r.push(je(a,c.ast,!1,!0)),o.push(je(a,c.ast,!1,!0)),n.push(je(a,Ne(c.ast),!1,!0))}return s.length>0?Ue(P2(qo(o,[]),qo(n,[]),s)):Ue(qo(r,[]))};var V2=e=>{let t={};if(e?.typeId!==void 0){let r=e?.typeId;typeof r=="object"?(t[Mf]=r.id,t[r.id]=r.params):t[Mf]=r}return e?.message!==void 0&&(t[kf]=e?.message),e?.identifier!==void 0&&(t[Gi]=e?.identifier),e?.title!==void 0&&(t[gt]=e?.title),e?.description!==void 0&&(t[Lo]=e?.description),e?.examples!==void 0&&(t[Vy]=e?.examples),e?.documentation!==void 0&&(t[F2]=e?.documentation),e?.jsonSchema!==void 0&&(t[Wc]=e?.jsonSchema),e?.arbitrary!==void 0&&(t[wf]=e?.arbitrary),t};function rb(e,t){return r=>{let o=s=>e(s)?ke(s):ht(ur(n,s)),n=Gc(r.ast,o,!1,V2(t));return Ue(n)}}var Uf=u(4,(e,t,r,o)=>Ue(I2(e.ast,t.ast,r,o))),y8=u(4,(e,t,r,o)=>Uf(e,t,n=>H(r(n)),n=>H(o(n))));var J2=e=>t=>Ue(N2(t.ast,e));var Y2=e=>t=>Ue(Zy(t.ast,Lo,e)),Z2=e=>t=>Ue(Zy(t.ast,Vy,e));var b8=Ue(Jy(null));var lr=Ue(Tf),Wf=Ue(v2),Q2=Ue(M2);var D8=()=>e=>e.date(),S8=()=>e=>`new Date(${JSON.stringify(e)})`,X2=tb([],yt({}),()=>e=>lu(e)?ke(e):ht(ur(X2.ast,e)),{[Gi]:"Date",[Uy]:S8,[wf]:D8}),E8="@effect/schema/ValidDateTypeId",C8=e=>t=>t.pipe(rb(r=>!isNaN(r.getTime()),{typeId:E8,description:"a valid Date",...e})),_8=X2.pipe(C8()),ev=e=>Uf(e,_8,t=>ke(new Date(t)),t=>ke(t.toISOString()));var G2="@effect/schema/InstanceOfTypeId",tv=(e,t)=>{let r=V2(t),o=tb([],yt({}),()=>n=>n instanceof e?ke(n):ht(ur(o.ast,n)),{[Mf]:G2,[G2]:{constructor:e},[Lo]:`an instance of ${e.name}`,...r});return o},O8=e=>t=>t.oneof(t.constant(g()),e(t).map(x)),w8=e=>He({onNone:()=>"none()",onSome:t=>`some(${e(t)})`}),R8=e=>dn(yt({_tag:mn("None")}),yt({_tag:mn("Some"),value:e})),rv=e=>{let t=tb([e],R8(e),r=>{let o=Xy(r);return(n,s)=>ed(n)?B(n)?ke(g()):O2(o(n.value,s),x):ht(ur(t.ast,n))},{[Gi]:"Option",[Uy]:w8,[wf]:O8});return t};var Qc=e=>y8(g8(e),d8(rv(e)),Xe,td);var F8="@effect/schema/MaxLengthTypeId",ob=(e,t)=>r=>r.pipe(rb(o=>o.length<=e,{typeId:F8,description:`a string at most ${e} character(s) long`,jsonSchema:{maxLength:e},...t})),A8="@effect/schema/MinLengthTypeId",nb=(e,t)=>r=>r.pipe(rb(o=>o.length>=e,{typeId:A8,description:`a string at least ${e} character(s) long`,jsonSchema:{minLength:e},...t}));var av=xn(require("fs/promises")),cv=xn(require("@actions/glob"));var zf=require("@actions/core");var We=class extends Ki.TaggedClass("GenericError"){},nv=e=>T.sync(()=>((0,zf.error)(e.message),(0,zf.debug)(`cause: ${e.error}`),process.exitCode=1,T.unit));var iv=et("@effect/platform/FileSystem");var Xc=BigInt(1024),cY=Xc*Xc*Xc*Xc*Xc;var sb=iv;var uv=xn(require("path")),eu=e=>t=>t.pipe(J2({[Wc]:{...ys(Wc)(t.ast).pipe(so.getOrNull),...e}})),k8=e=>t=>t.pipe(Z2(e),eu({examples:e})),hn=e=>t=>t.pipe(Y2(e),eu({description:e})),T8=Je.string("INPUT_FILE").pipe(Je.map(e=>({_tag:"File",path:e})),Je.orElse(()=>Je.string("JSON").pipe(Je.map(e=>({_tag:"Json",stringified:e})))),Je.orElse(()=>Qe(Je.all({key:Je.string("KEY"),value:Je.number("VALUE")}),Je.map(({key:e,value:t})=>({_tag:"KeyVal",key:e,value:t}))))),I8=Je.all({metricsInput:T8,trackFileSizeGlob:Je.string("TRACK_FILE_SIZE").pipe(Je.option)}).pipe(Je.nested("INPUT")),pv=e=>T.try({try:()=>JSON.parse(e),catch:t=>new We({message:"Failed to parse JSON",error:t})}),P8=dn(mn("lower-is-better").pipe(hn("if value is _lower_ than the previous run, the trend is _good_. otherwise, the trend is bad")),mn("higher-is-better").pipe(hn("if value is _higher_ than the previous run, the trend is _good_. otherwise, the trend is bad"))).pipe(hn("The acceptable trend for the given metric")),N8=Qe(lr,hn("A unique string that represents this metric across runs"),ob(120),nb(1),nb(1)),L8=Qe(Wf,hn("The numeric value of the metric")),q8=Qe(lr,ev,hn("the date to apply sorting by. defaults to the commit time"),eu({format:"date-time"})),H8=Qe(lr,ob(32),hn("The units of the metric"),k8(["ms","ns","bytes","kb","mb"])),Kf=yt({key:N8,value:L8,sortDate:q8.pipe(jf),units:H8.pipe(jf),trend:P8.pipe(jf)}).pipe(eu({additionalProperties:!0})),EY=yt({metrics:Kf.pipe(Ds)}),lv=dn(yt({metrics:Ds(Kf).pipe(hn("A list of metrics to report"))}).pipe(eu({additionalProperties:!0})),Kf.pipe(Ds),Kf),CY=Zc(lv),fv=e=>Yc(lv)(e).pipe(T.map(t=>"metrics"in t?t.metrics:t),T.map(t=>[t].flat()),T.mapError(t=>new We({error:t,message:`Failed to parse given JSON:
${U2(t.errors)}`}))),B8=e=>T.tryPromise({try:()=>av.default.readFile(e,"utf-8"),catch:t=>new We({message:"Failed to read file",error:t})}).pipe(T.flatMap(pv),T.flatMap(fv)),mv=e=>T.gen(function*(t){let r=yield*t(T.tryPromise({try:()=>cv.create(e),catch:n=>new We({message:"Failed to parse glob syntax",error:n})}));return yield*t(T.tryPromise({try:()=>r.glob(),catch:n=>new We({message:"Failed to iterate through glob",error:n})}))}),j8=e=>T.gen(function*(t){let r=yield*t(mv(e));return(yield*t(T.all(r.map(B8),{concurrency:5}))).flat()}),U8=Qe(qc.type(),qc.tagsExhaustive({File:({path:e})=>j8(e),Json:({stringified:e})=>pv(e).pipe(T.flatMap(fv)),KeyVal:({key:e,value:t})=>T.succeed([{key:e,value:t}])})),dv=T.gen(function*(e){let t=yield*e(T.config(I8),T.mapError(n=>new We({error:n,message:"Failed to read input"}))),r=yield*e(U8(t.metricsInput)),o=yield*e(t.trackFileSizeGlob,so.match({onNone:()=>T.succeed([]),onSome:n=>W8(n)}));return{...t,metrics:[...r,...o]}}),W8=e=>T.gen(function*(t){let o=(yield*t(mv(e))).map(n=>T.gen(function*(s){let i=yield*s(sb),c=(yield*s(i.stat(n))).size.valueOf()/1024n;return{key:uv.relative(process.cwd(),n),value:Number(c),units:"kB",trend:"lower-is-better"}}));return yield*t(T.all(o,{concurrency:10}))});var hv=e=>e;var gv=(e=0)=>t=>`\x1B[${t+e}m`,xv=(e=0)=>t=>`\x1B[${38+e};5;${t}m`,yv=(e=0)=>(t,r,o)=>`\x1B[${38+e};2;${t};${r};${o}m`,le={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},OY=Object.keys(le.modifier),K8=Object.keys(le.color),$8=Object.keys(le.bgColor),wY=[...K8,...$8];function G8(){let e=new Map;for(let[t,r]of Object.entries(le)){for(let[o,n]of Object.entries(r))le[o]={open:`\x1B[${n[0]}m`,close:`\x1B[${n[1]}m`},r[o]=le[o],e.set(n[0],n[1]);Object.defineProperty(le,t,{value:r,enumerable:!1})}return Object.defineProperty(le,"codes",{value:e,enumerable:!1}),le.color.close="\x1B[39m",le.bgColor.close="\x1B[49m",le.color.ansi=gv(),le.color.ansi256=xv(),le.color.ansi16m=yv(),le.bgColor.ansi=gv(10),le.bgColor.ansi256=xv(10),le.bgColor.ansi16m=yv(10),Object.defineProperties(le,{rgbToAnsi256:{value(t,r,o){return t===r&&r===o?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(o/255*5)},enumerable:!1},hexToRgb:{value(t){let r=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!r)return[0,0,0];let[o]=r;o.length===3&&(o=[...o].map(s=>s+s).join(""));let n=Number.parseInt(o,16);return[n>>16&255,n>>8&255,n&255]},enumerable:!1},hexToAnsi256:{value:t=>le.rgbToAnsi256(...le.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value(t){if(t<8)return 30+t;if(t<16)return 90+(t-8);let r,o,n;if(t>=232)r=((t-232)*10+8)/255,o=r,n=r;else{t-=16;let a=t%36;r=Math.floor(t/36)/5,o=Math.floor(a/6)/5,n=a%6/5}let s=Math.max(r,o,n)*2;if(s===0)return 30;let i=30+(Math.round(n)<<2|Math.round(o)<<1|Math.round(r));return s===2&&(i+=60),i},enumerable:!1},rgbToAnsi:{value:(t,r,o)=>le.ansi256ToAnsi(le.rgbToAnsi256(t,r,o)),enumerable:!1},hexToAnsi:{value:t=>le.ansi256ToAnsi(le.hexToAnsi256(t)),enumerable:!1}}),le}var V8=G8(),kr=V8;var Gf=xn(require("process"),1),Dv=xn(require("os"),1),ib=xn(require("tty"),1);function fr(e,t=globalThis.Deno?globalThis.Deno.args:Gf.default.argv){let r=e.startsWith("-")?"":e.length===1?"-":"--",o=t.indexOf(r+e),n=t.indexOf("--");return o!==-1&&(n===-1||o<n)}var{env:ge}=Gf.default,$f;fr("no-color")||fr("no-colors")||fr("color=false")||fr("color=never")?$f=0:(fr("color")||fr("colors")||fr("color=true")||fr("color=always"))&&($f=1);function J8(){if("FORCE_COLOR"in ge)return ge.FORCE_COLOR==="true"?1:ge.FORCE_COLOR==="false"?0:ge.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(ge.FORCE_COLOR,10),3)}function Y8(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function Z8(e,{streamIsTTY:t,sniffFlags:r=!0}={}){let o=J8();o!==void 0&&($f=o);let n=r?$f:o;if(n===0)return 0;if(r){if(fr("color=16m")||fr("color=full")||fr("color=truecolor"))return 3;if(fr("color=256"))return 2}if("TF_BUILD"in ge&&"AGENT_NAME"in ge)return 1;if(e&&!t&&n===void 0)return 0;let s=n||0;if(ge.TERM==="dumb")return s;if(Gf.default.platform==="win32"){let i=Dv.default.release().split(".");return Number(i[0])>=10&&Number(i[2])>=10586?Number(i[2])>=14931?3:2:1}if("CI"in ge)return"GITHUB_ACTIONS"in ge||"GITEA_ACTIONS"in ge?3:["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(i=>i in ge)||ge.CI_NAME==="codeship"?1:s;if("TEAMCITY_VERSION"in ge)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ge.TEAMCITY_VERSION)?1:0;if(ge.COLORTERM==="truecolor"||ge.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in ge){let i=Number.parseInt((ge.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ge.TERM_PROGRAM){case"iTerm.app":return i>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ge.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ge.TERM)||"COLORTERM"in ge?1:s}function bv(e,t={}){let r=Z8(e,{streamIsTTY:e&&e.isTTY,...t});return Y8(r)}var Q8={stdout:bv({isTTY:ib.default.isatty(1)}),stderr:bv({isTTY:ib.default.isatty(2)})},Sv=Q8;function Ev(e,t,r){let o=e.indexOf(t);if(o===-1)return e;let n=t.length,s=0,i="";do i+=e.slice(s,o)+t+r,s=o+n,o=e.indexOf(t,s);while(o!==-1);return i+=e.slice(s),i}function Cv(e,t,r,o){let n=0,s="";do{let i=e[o-1]==="\r";s+=e.slice(n,i?o-1:o)+t+(i?`\r
`:`
`)+r,n=o+1,o=e.indexOf(`
`,n)}while(o!==-1);return s+=e.slice(n),s}var{stdout:_v,stderr:Ov}=Sv,ab=Symbol("GENERATOR"),Zi=Symbol("STYLER"),tu=Symbol("IS_EMPTY"),wv=["ansi","ansi","ansi256","ansi16m"],Qi=Object.create(null),X8=(e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let r=_v?_v.level:0;e.level=t.level===void 0?r:t.level},Vf=class{constructor(t){return Rv(t)}},Rv=e=>{let t=(...r)=>r.join(" ");return X8(t,e),Object.setPrototypeOf(t,ru.prototype),t};function ru(e){return Rv(e)}Object.setPrototypeOf(ru.prototype,Function.prototype);for(let[e,t]of Object.entries(kr))Qi[e]={get(){let r=Jf(this,ub(t.open,t.close,this[Zi]),this[tu]);return Object.defineProperty(this,e,{value:r}),r}};Qi.visible={get(){let e=Jf(this,this[Zi],!0);return Object.defineProperty(this,"visible",{value:e}),e}};var cb=(e,t,r,...o)=>e==="rgb"?t==="ansi16m"?kr[r].ansi16m(...o):t==="ansi256"?kr[r].ansi256(kr.rgbToAnsi256(...o)):kr[r].ansi(kr.rgbToAnsi(...o)):e==="hex"?cb("rgb",t,r,...kr.hexToRgb(...o)):kr[r][e](...o),eU=["rgb","hex","ansi256"];for(let e of eU){Qi[e]={get(){let{level:r}=this;return function(...o){let n=ub(cb(e,wv[r],"color",...o),kr.color.close,this[Zi]);return Jf(this,n,this[tu])}}};let t="bg"+e[0].toUpperCase()+e.slice(1);Qi[t]={get(){let{level:r}=this;return function(...o){let n=ub(cb(e,wv[r],"bgColor",...o),kr.bgColor.close,this[Zi]);return Jf(this,n,this[tu])}}}}var tU=Object.defineProperties(()=>{},{...Qi,level:{enumerable:!0,get(){return this[ab].level},set(e){this[ab].level=e}}}),ub=(e,t,r)=>{let o,n;return r===void 0?(o=e,n=t):(o=r.openAll+e,n=t+r.closeAll),{open:e,close:t,openAll:o,closeAll:n,parent:r}},Jf=(e,t,r)=>{let o=(...n)=>rU(o,n.length===1?""+n[0]:n.join(" "));return Object.setPrototypeOf(o,tU),o[ab]=e,o[Zi]=t,o[tu]=r,o},rU=(e,t)=>{if(e.level<=0||!t)return e[tu]?"":t;let r=e[Zi];if(r===void 0)return t;let{openAll:o,closeAll:n}=r;if(t.includes("\x1B"))for(;r!==void 0;)t=Ev(t,r.close,r.open),r=r.parent;let s=t.indexOf(`
`);return s!==-1&&(t=Cv(t,n,o,s)),o+t+n};Object.defineProperties(ru.prototype,Qi);var TY=ru(),IY=ru({level:Ov?Ov.level:0});var Ss=_f.Tag(),Fv=T.sync(()=>new Vf({level:2}));function Av(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,o)}return r}function vv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Av(Object(r),!0).forEach(function(o){oU(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Av(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function oU(e,t,r){return t=nU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nU(e){var t=sU(e,"string");return typeof t=="symbol"?t:String(t)}function sU(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mv=kv({});function kv(e){return t.withOptions=r=>kv(vv(vv({},e),r)),t;function t(r,...o){let n=typeof r=="string"?[r]:r.raw,{escapeSpecialCharacters:s=Array.isArray(r)}=e,i="";for(let p=0;p<n.length;p++){let l=n[p];s&&(l=l.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\{/g,"{")),i+=l,p<o.length&&(i+=o[p])}let a=i.split(`
`),c=null;for(let p of a){let l=p.match(/^(\s+)\S+/);if(l){let f=l[1].length;c?c=Math.min(c,f):c=f}}if(c!==null){let p=c;i=a.map(l=>l[0]===" "||l[0]==="	"?l.slice(p):l).join(`
`)}return i.trim().replace(/\\n/g,`
`)}}var Tv=require("@actions/core"),lb=class extends Ki.TaggedClass("IdTokenError"){},Iv=e=>T.gen(function*(t){let r=yield*t(Ss),o=r.cyan("`id-token`"),n=Mv`
      Failed to read GitHub Actions ID token.

      This means you probably forgot to add permissions for ${o} in your workflow/job definition.
      The ${o} permissions allows GitHub to sign your requests to the Benchy API. This does not
      give GitHub access to your Benchy account: it's merely a way to prove that the request is coming
      from your GitHub workflow.

      An example of a workflow with the ${o} permission:

      \`\`\`yaml
       jobs:
         test:
           runs-on: ubuntu-latest
      ${r.green("+    permissions:")}
      ${r.green("+      id-token: write")}
           steps:
             # ...
      \`\`\`

      For more information about the ${o} permisison, see the GitHub documentation on OpenID Connect: https://docs.github.com/en/actions/deployment/security-hardening-your-deployments/about-security-hardening-with-openid-connect#overview-of-openid-connect
   `;return yield*t(T.fail(new We({message:n,error:e.error})))}),Pv=T.tryPromise({try:()=>(0,Tv.getIDToken)(),catch:e=>new lb({error:e})});var Bv=require("@actions/http-client");var jv=require("@actions/core"),Uv=require("util");var fb=yt({value:Wf,units:Qc(lr)}),Lv=Uf(lr,tv(URL),e=>{try{return ke(new URL(e))}catch{return ht({_tag:"Unexpected",actual:e})}},e=>ke(e.href)),qv=yt({key:lr,storedValue:Qc(fb),currentValue:fb,sparkline:lr,diff:Qc(fb),trend:Qc(yt({alt:lr,url:Lv,good:Q2})),chartUrl:Lv}),UY=Zc(qv),iU=yt({error:mn(!0),message:lr}),aU=yt({error:mn(!1),data:yt({warnings:Ds(lr),metrics:Ds(qv)})}),cU=dn(iU,aU),Hv=Yc(cU);var Wv=T.gen(function*(e){let t=yield*e(Pv);return new Bv.HttpClient("benchy-action",[],{headers:{Authorization:`Bearer ${t}`}})}),uU=e=>T.tryPromise({try:async()=>({...e,body:await e.readBody()}),catch:t=>new We({message:"Failed to read response body",error:t})}).pipe(T.flatMap(t=>T.try({try:()=>({...e,json:JSON.parse(t.body)}),catch:r=>new We({message:"Failed to parse JSON of response body",error:r})})),T.mapError(t=>new We({error:t.error,message:`HTTP ${e.message.statusCode}: ${t.message}`})),T.map(t=>t.json)),zv=(e,t)=>T.gen(function*(r){let o=yield*r(T.tryPromise({try:()=>e.post("https://benchy.hagever.com/api/metrics",JSON.stringify({metrics:t})),catch:a=>new We({message:"Failed to send metrics",error:a})})),n=yield*r(uU(o)),s=yield*r(Hv(n),T.mapError(a=>new We({error:a,message:"Response is malformed"})));if(s.error)return yield*r(T.fail(new We({error:new Error(`HTTP ${o.message.statusCode}: ${s.message}`),message:s.message})));let i={...o,body:s};return yield*r(T.sync(()=>{(0,jv.debug)(`got response: ${(0,Uv.inspect)(i,{depth:10,colors:!0})}`)})),i});var Mk=require("@actions/core");var Ak=xn(Fk());var vk=e=>T.gen(function*(t){let r=yield*t(Ss),o=yield*t(W9),n=[["",r.bold("change"),r.bold("current"),r.bold("diff"),""]];for(let s of e){let i=so.match(s.trend,{onNone:()=>r.reset,onSome:a=>a.good?r.green:r.red});n.push([i(s.key),i(o(s.currentValue)),so.match(s.storedValue,{onNone:()=>"",onSome:a=>i(o(a))}),so.match(s.diff,{onNone:()=>"",onSome:a=>i(o(a))}),i(s.sparkline)])}return(0,Ak.table)(n)}),W9=Ss.pipe(T.map(e=>t=>{let r=so.match(t.units,{onNone:()=>"",onSome:n=>e.dim(n)});return`${Math.round(t.value*1e3)/1e3}${r}`}));var K9=T.gen(function*(e){let t=yield*e(dv),r=yield*e(Wv),o=yield*e(zv(r,t.metrics));for(let s of o.body.data.warnings)yield*e(T.sync(()=>(0,Mk.warning)(s)));let n=vk(o.body.data.metrics);yield*e(T.sync(()=>console.log(n)))});K9.pipe(T.catchTag("IdTokenError",e=>Iv(e)),T.catchTag("GenericError",e=>nv(e)),hv,T.provideServiceEffect(Ss,Fv),T.runPromise);
