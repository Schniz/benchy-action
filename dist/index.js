"use strict";var RT=Object.create;var su=Object.defineProperty;var FT=Object.getOwnPropertyDescriptor;var AT=Object.getOwnPropertyNames;var vT=Object.getPrototypeOf,MT=Object.prototype.hasOwnProperty;var TT=(e,t,r)=>t in e?su(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var q=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),_s=(e,t)=>{for(var r in t)su(e,r,{get:t[r],enumerable:!0})},kT=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of AT(t))!MT.call(e,n)&&n!==r&&su(e,n,{get:()=>t[n],enumerable:!(o=FT(t,n))||o.enumerable});return e};var Os=(e,t,r)=>(r=e!=null?RT(vT(e)):{},kT(t||!e||!e.__esModule?su(r,"default",{value:e,enumerable:!0}):r,e));var $t=(e,t,r)=>(TT(e,typeof t!="symbol"?t+"":t,r),r);var Bv=q((wY,jv)=>{"use strict";jv.exports=({onlyFirst:e=!1}={})=>{let t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}});var Jf=q((RY,Uv)=>{"use strict";var rU=Bv();Uv.exports=e=>typeof e=="string"?e.replace(rU(),""):e});var fb=q((FY,lb)=>{"use strict";var Wv=e=>Number.isNaN(e)?!1:e>=4352&&(e<=4447||e===9001||e===9002||11904<=e&&e<=12871&&e!==12351||12880<=e&&e<=19903||19968<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65131||65281<=e&&e<=65376||65504<=e&&e<=65510||110592<=e&&e<=110593||127488<=e&&e<=127569||131072<=e&&e<=262141);lb.exports=Wv;lb.exports.default=Wv});var Kv=q((AY,zv)=>{"use strict";zv.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}});var Xi=q((vY,mb)=>{"use strict";var oU=Jf(),nU=fb(),sU=Kv(),$v=e=>{if(typeof e!="string"||e.length===0||(e=oU(e),e.length===0))return 0;e=e.replace(sU(),"  ");let t=0;for(let r=0;r<e.length;r++){let o=e.codePointAt(r);o<=31||o>=127&&o<=159||o>=768&&o<=879||(o>65535&&r++,t+=nU(o)?2:1)}return t};mb.exports=$v;mb.exports.default=$v});var Jv=q((MY,Vv)=>{"use strict";var Gv="[\uD800-\uDBFF][\uDC00-\uDFFF]",iU=e=>e&&e.exact?new RegExp(`^${Gv}$`):new RegExp(Gv,"g");Vv.exports=iU});var Zv=q((TY,Yv)=>{"use strict";Yv.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var db=q((kY,Xv)=>{"use strict";var ru=Zv(),Qv={};for(let e of Object.keys(ru))Qv[ru[e]]=e;var M={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};Xv.exports=M;for(let e of Object.keys(M)){if(!("channels"in M[e]))throw new Error("missing channels property: "+e);if(!("labels"in M[e]))throw new Error("missing channel labels property: "+e);if(M[e].labels.length!==M[e].channels)throw new Error("channel and label counts mismatch: "+e);let{channels:t,labels:r}=M[e];delete M[e].channels,delete M[e].labels,Object.defineProperty(M[e],"channels",{value:t}),Object.defineProperty(M[e],"labels",{value:r})}M.rgb.hsl=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255,n=Math.min(t,r,o),s=Math.max(t,r,o),i=s-n,a,c;s===n?a=0:t===s?a=(r-o)/i:r===s?a=2+(o-t)/i:o===s&&(a=4+(t-r)/i),a=Math.min(a*60,360),a<0&&(a+=360);let p=(n+s)/2;return s===n?c=0:p<=.5?c=i/(s+n):c=i/(2-s-n),[a,c*100,p*100]};M.rgb.hsv=function(e){let t,r,o,n,s,i=e[0]/255,a=e[1]/255,c=e[2]/255,p=Math.max(i,a,c),l=p-Math.min(i,a,c),f=function(d){return(p-d)/6/l+1/2};return l===0?(n=0,s=0):(s=l/p,t=f(i),r=f(a),o=f(c),i===p?n=o-r:a===p?n=1/3+t-o:c===p&&(n=2/3+r-t),n<0?n+=1:n>1&&(n-=1)),[n*360,s*100,p*100]};M.rgb.hwb=function(e){let t=e[0],r=e[1],o=e[2],n=M.rgb.hsl(e)[0],s=1/255*Math.min(t,Math.min(r,o));return o=1-1/255*Math.max(t,Math.max(r,o)),[n,s*100,o*100]};M.rgb.cmyk=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255,n=Math.min(1-t,1-r,1-o),s=(1-t-n)/(1-n)||0,i=(1-r-n)/(1-n)||0,a=(1-o-n)/(1-n)||0;return[s*100,i*100,a*100,n*100]};function aU(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}M.rgb.keyword=function(e){let t=Qv[e];if(t)return t;let r=1/0,o;for(let n of Object.keys(ru)){let s=ru[n],i=aU(e,s);i<r&&(r=i,o=n)}return o};M.keyword.rgb=function(e){return ru[e]};M.rgb.xyz=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,o=o>.04045?((o+.055)/1.055)**2.4:o/12.92;let n=t*.4124+r*.3576+o*.1805,s=t*.2126+r*.7152+o*.0722,i=t*.0193+r*.1192+o*.9505;return[n*100,s*100,i*100]};M.rgb.lab=function(e){let t=M.rgb.xyz(e),r=t[0],o=t[1],n=t[2];r/=95.047,o/=100,n/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,o=o>.008856?o**(1/3):7.787*o+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;let s=116*o-16,i=500*(r-o),a=200*(o-n);return[s,i,a]};M.hsl.rgb=function(e){let t=e[0]/360,r=e[1]/100,o=e[2]/100,n,s,i;if(r===0)return i=o*255,[i,i,i];o<.5?n=o*(1+r):n=o+r-o*r;let a=2*o-n,c=[0,0,0];for(let p=0;p<3;p++)s=t+1/3*-(p-1),s<0&&s++,s>1&&s--,6*s<1?i=a+(n-a)*6*s:2*s<1?i=n:3*s<2?i=a+(n-a)*(2/3-s)*6:i=a,c[p]=i*255;return c};M.hsl.hsv=function(e){let t=e[0],r=e[1]/100,o=e[2]/100,n=r,s=Math.max(o,.01);o*=2,r*=o<=1?o:2-o,n*=s<=1?s:2-s;let i=(o+r)/2,a=o===0?2*n/(s+n):2*r/(o+r);return[t,a*100,i*100]};M.hsv.rgb=function(e){let t=e[0]/60,r=e[1]/100,o=e[2]/100,n=Math.floor(t)%6,s=t-Math.floor(t),i=255*o*(1-r),a=255*o*(1-r*s),c=255*o*(1-r*(1-s));switch(o*=255,n){case 0:return[o,c,i];case 1:return[a,o,i];case 2:return[i,o,c];case 3:return[i,a,o];case 4:return[c,i,o];case 5:return[o,i,a]}};M.hsv.hsl=function(e){let t=e[0],r=e[1]/100,o=e[2]/100,n=Math.max(o,.01),s,i;i=(2-r)*o;let a=(2-r)*n;return s=r*n,s/=a<=1?a:2-a,s=s||0,i/=2,[t,s*100,i*100]};M.hwb.rgb=function(e){let t=e[0]/360,r=e[1]/100,o=e[2]/100,n=r+o,s;n>1&&(r/=n,o/=n);let i=Math.floor(6*t),a=1-o;s=6*t-i,i&1&&(s=1-s);let c=r+s*(a-r),p,l,f;switch(i){default:case 6:case 0:p=a,l=c,f=r;break;case 1:p=c,l=a,f=r;break;case 2:p=r,l=a,f=c;break;case 3:p=r,l=c,f=a;break;case 4:p=c,l=r,f=a;break;case 5:p=a,l=r,f=c;break}return[p*255,l*255,f*255]};M.cmyk.rgb=function(e){let t=e[0]/100,r=e[1]/100,o=e[2]/100,n=e[3]/100,s=1-Math.min(1,t*(1-n)+n),i=1-Math.min(1,r*(1-n)+n),a=1-Math.min(1,o*(1-n)+n);return[s*255,i*255,a*255]};M.xyz.rgb=function(e){let t=e[0]/100,r=e[1]/100,o=e[2]/100,n,s,i;return n=t*3.2406+r*-1.5372+o*-.4986,s=t*-.9689+r*1.8758+o*.0415,i=t*.0557+r*-.204+o*1.057,n=n>.0031308?1.055*n**(1/2.4)-.055:n*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,n=Math.min(Math.max(0,n),1),s=Math.min(Math.max(0,s),1),i=Math.min(Math.max(0,i),1),[n*255,s*255,i*255]};M.xyz.lab=function(e){let t=e[0],r=e[1],o=e[2];t/=95.047,r/=100,o/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;let n=116*r-16,s=500*(t-r),i=200*(r-o);return[n,s,i]};M.lab.xyz=function(e){let t=e[0],r=e[1],o=e[2],n,s,i;s=(t+16)/116,n=r/500+s,i=s-o/200;let a=s**3,c=n**3,p=i**3;return s=a>.008856?a:(s-16/116)/7.787,n=c>.008856?c:(n-16/116)/7.787,i=p>.008856?p:(i-16/116)/7.787,n*=95.047,s*=100,i*=108.883,[n,s,i]};M.lab.lch=function(e){let t=e[0],r=e[1],o=e[2],n;n=Math.atan2(o,r)*360/2/Math.PI,n<0&&(n+=360);let i=Math.sqrt(r*r+o*o);return[t,i,n]};M.lch.lab=function(e){let t=e[0],r=e[1],n=e[2]/360*2*Math.PI,s=r*Math.cos(n),i=r*Math.sin(n);return[t,s,i]};M.rgb.ansi16=function(e,t=null){let[r,o,n]=e,s=t===null?M.rgb.hsv(e)[2]:t;if(s=Math.round(s/50),s===0)return 30;let i=30+(Math.round(n/255)<<2|Math.round(o/255)<<1|Math.round(r/255));return s===2&&(i+=60),i};M.hsv.ansi16=function(e){return M.rgb.ansi16(M.hsv.rgb(e),e[2])};M.rgb.ansi256=function(e){let t=e[0],r=e[1],o=e[2];return t===r&&r===o?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(o/255*5)};M.ansi16.rgb=function(e){let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];let r=(~~(e>50)+1)*.5,o=(t&1)*r*255,n=(t>>1&1)*r*255,s=(t>>2&1)*r*255;return[o,n,s]};M.ansi256.rgb=function(e){if(e>=232){let s=(e-232)*10+8;return[s,s,s]}e-=16;let t,r=Math.floor(e/36)/5*255,o=Math.floor((t=e%36)/6)/5*255,n=t%6/5*255;return[r,o,n]};M.rgb.hex=function(e){let r=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r};M.hex.rgb=function(e){let t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let r=t[0];t[0].length===3&&(r=r.split("").map(a=>a+a).join(""));let o=parseInt(r,16),n=o>>16&255,s=o>>8&255,i=o&255;return[n,s,i]};M.rgb.hcg=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255,n=Math.max(Math.max(t,r),o),s=Math.min(Math.min(t,r),o),i=n-s,a,c;return i<1?a=s/(1-i):a=0,i<=0?c=0:n===t?c=(r-o)/i%6:n===r?c=2+(o-t)/i:c=4+(t-r)/i,c/=6,c%=1,[c*360,i*100,a*100]};M.hsl.hcg=function(e){let t=e[1]/100,r=e[2]/100,o=r<.5?2*t*r:2*t*(1-r),n=0;return o<1&&(n=(r-.5*o)/(1-o)),[e[0],o*100,n*100]};M.hsv.hcg=function(e){let t=e[1]/100,r=e[2]/100,o=t*r,n=0;return o<1&&(n=(r-o)/(1-o)),[e[0],o*100,n*100]};M.hcg.rgb=function(e){let t=e[0]/360,r=e[1]/100,o=e[2]/100;if(r===0)return[o*255,o*255,o*255];let n=[0,0,0],s=t%1*6,i=s%1,a=1-i,c=0;switch(Math.floor(s)){case 0:n[0]=1,n[1]=i,n[2]=0;break;case 1:n[0]=a,n[1]=1,n[2]=0;break;case 2:n[0]=0,n[1]=1,n[2]=i;break;case 3:n[0]=0,n[1]=a,n[2]=1;break;case 4:n[0]=i,n[1]=0,n[2]=1;break;default:n[0]=1,n[1]=0,n[2]=a}return c=(1-r)*o,[(r*n[0]+c)*255,(r*n[1]+c)*255,(r*n[2]+c)*255]};M.hcg.hsv=function(e){let t=e[1]/100,r=e[2]/100,o=t+r*(1-t),n=0;return o>0&&(n=t/o),[e[0],n*100,o*100]};M.hcg.hsl=function(e){let t=e[1]/100,o=e[2]/100*(1-t)+.5*t,n=0;return o>0&&o<.5?n=t/(2*o):o>=.5&&o<1&&(n=t/(2*(1-o))),[e[0],n*100,o*100]};M.hcg.hwb=function(e){let t=e[1]/100,r=e[2]/100,o=t+r*(1-t);return[e[0],(o-t)*100,(1-o)*100]};M.hwb.hcg=function(e){let t=e[1]/100,o=1-e[2]/100,n=o-t,s=0;return n<1&&(s=(o-n)/(1-n)),[e[0],n*100,s*100]};M.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};M.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};M.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};M.gray.hsl=function(e){return[0,0,e[0]]};M.gray.hsv=M.gray.hsl;M.gray.hwb=function(e){return[0,100,e[0]]};M.gray.cmyk=function(e){return[0,0,0,e[0]]};M.gray.lab=function(e){return[e[0],0,0]};M.gray.hex=function(e){let t=Math.round(e[0]/100*255)&255,o=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(o.length)+o};M.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}});var tM=q((IY,eM)=>{"use strict";var Yf=db();function cU(){let e={},t=Object.keys(Yf);for(let r=t.length,o=0;o<r;o++)e[t[o]]={distance:-1,parent:null};return e}function uU(e){let t=cU(),r=[e];for(t[e].distance=0;r.length;){let o=r.pop(),n=Object.keys(Yf[o]);for(let s=n.length,i=0;i<s;i++){let a=n[i],c=t[a];c.distance===-1&&(c.distance=t[o].distance+1,c.parent=o,r.unshift(a))}}return t}function pU(e,t){return function(r){return t(e(r))}}function lU(e,t){let r=[t[e].parent,e],o=Yf[t[e].parent][e],n=t[e].parent;for(;t[n].parent;)r.unshift(t[n].parent),o=pU(Yf[t[n].parent][n],o),n=t[n].parent;return o.conversion=r,o}eM.exports=function(e){let t=uU(e),r={},o=Object.keys(t);for(let n=o.length,s=0;s<n;s++){let i=o[s];t[i].parent!==null&&(r[i]=lU(i,t))}return r}});var oM=q((PY,rM)=>{"use strict";var hb=db(),fU=tM(),ea={},mU=Object.keys(hb);function dU(e){let t=function(...r){let o=r[0];return o==null?o:(o.length>1&&(r=o),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function hU(e){let t=function(...r){let o=r[0];if(o==null)return o;o.length>1&&(r=o);let n=e(r);if(typeof n=="object")for(let s=n.length,i=0;i<s;i++)n[i]=Math.round(n[i]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}mU.forEach(e=>{ea[e]={},Object.defineProperty(ea[e],"channels",{value:hb[e].channels}),Object.defineProperty(ea[e],"labels",{value:hb[e].labels});let t=fU(e);Object.keys(t).forEach(o=>{let n=t[o];ea[e][o]=hU(n),ea[e][o].raw=dU(n)})});rM.exports=ea});var uM=q((NY,cM)=>{"use strict";var nM=(e,t)=>(...r)=>`\x1B[${e(...r)+t}m`,sM=(e,t)=>(...r)=>{let o=e(...r);return`\x1B[${38+t};5;${o}m`},iM=(e,t)=>(...r)=>{let o=e(...r);return`\x1B[${38+t};2;${o[0]};${o[1]};${o[2]}m`},Zf=e=>e,aM=(e,t,r)=>[e,t,r],ta=(e,t,r)=>{Object.defineProperty(e,t,{get:()=>{let o=r();return Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0}),o},enumerable:!0,configurable:!0})},gb,ra=(e,t,r,o)=>{gb===void 0&&(gb=oM());let n=o?10:0,s={};for(let[i,a]of Object.entries(gb)){let c=i==="ansi16"?"ansi":i;i===t?s[c]=e(r,n):typeof a=="object"&&(s[c]=e(a[t],n))}return s};function gU(){let e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(let[r,o]of Object.entries(t)){for(let[n,s]of Object.entries(o))t[n]={open:`\x1B[${s[0]}m`,close:`\x1B[${s[1]}m`},o[n]=t[n],e.set(s[0],s[1]);Object.defineProperty(t,r,{value:o,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="\x1B[39m",t.bgColor.close="\x1B[49m",ta(t.color,"ansi",()=>ra(nM,"ansi16",Zf,!1)),ta(t.color,"ansi256",()=>ra(sM,"ansi256",Zf,!1)),ta(t.color,"ansi16m",()=>ra(iM,"rgb",aM,!1)),ta(t.bgColor,"ansi",()=>ra(nM,"ansi16",Zf,!0)),ta(t.bgColor,"ansi256",()=>ra(sM,"ansi256",Zf,!0)),ta(t.bgColor,"ansi16m",()=>ra(iM,"rgb",aM,!0)),t}Object.defineProperty(cM,"exports",{enumerable:!0,get:gU})});var Xf=q((LY,mM)=>{"use strict";var xU=fb(),yU=Jv(),pM=uM(),fM=["\x1B","\x9B"],Qf=e=>`${fM[0]}[${e}m`,lM=(e,t,r)=>{let o=[];e=[...e];for(let n of e){let s=n;n.includes(";")&&(n=n.split(";")[0][0]+"0");let i=pM.codes.get(Number.parseInt(n,10));if(i){let a=e.indexOf(i.toString());a===-1?o.push(Qf(t?i:s)):e.splice(a,1)}else if(t){o.push(Qf(0));break}else o.push(Qf(s))}if(t&&(o=o.filter((n,s)=>o.indexOf(n)===s),r!==void 0)){let n=Qf(pM.codes.get(Number.parseInt(r,10)));o=o.reduce((s,i)=>i===n?[i,...s]:[...s,i],[])}return o.join("")};mM.exports=(e,t,r)=>{let o=[...e],n=[],s=typeof r=="number"?r:o.length,i=!1,a,c=0,p="";for(let[l,f]of o.entries()){let d=!1;if(fM.includes(f)){let h=/\d[^m]*/.exec(e.slice(l,l+18));a=h&&h.length>0?h[0]:void 0,c<s&&(i=!0,a!==void 0&&n.push(a))}else i&&f==="m"&&(i=!1,d=!0);if(!i&&!d&&c++,!yU({exact:!0}).test(f)&&xU(f.codePointAt())&&(c++,typeof r!="number"&&s++),c>t&&c<=s)p+=f;else if(c===t&&!i&&a!==void 0)p=lM(n);else if(c>=s){p+=lM(n,!0,a);break}}return p}});var xb=q(em=>{"use strict";Object.defineProperty(em,"__esModule",{value:!0});em.getBorderCharacters=void 0;var bU=e=>{if(e==="honeywell")return{topBody:"\u2550",topJoin:"\u2564",topLeft:"\u2554",topRight:"\u2557",bottomBody:"\u2550",bottomJoin:"\u2567",bottomLeft:"\u255A",bottomRight:"\u255D",bodyLeft:"\u2551",bodyRight:"\u2551",bodyJoin:"\u2502",headerJoin:"\u252C",joinBody:"\u2500",joinLeft:"\u255F",joinRight:"\u2562",joinJoin:"\u253C",joinMiddleDown:"\u252C",joinMiddleUp:"\u2534",joinMiddleLeft:"\u2524",joinMiddleRight:"\u251C"};if(e==="norc")return{topBody:"\u2500",topJoin:"\u252C",topLeft:"\u250C",topRight:"\u2510",bottomBody:"\u2500",bottomJoin:"\u2534",bottomLeft:"\u2514",bottomRight:"\u2518",bodyLeft:"\u2502",bodyRight:"\u2502",bodyJoin:"\u2502",headerJoin:"\u252C",joinBody:"\u2500",joinLeft:"\u251C",joinRight:"\u2524",joinJoin:"\u253C",joinMiddleDown:"\u252C",joinMiddleUp:"\u2534",joinMiddleLeft:"\u2524",joinMiddleRight:"\u251C"};if(e==="ramac")return{topBody:"-",topJoin:"+",topLeft:"+",topRight:"+",bottomBody:"-",bottomJoin:"+",bottomLeft:"+",bottomRight:"+",bodyLeft:"|",bodyRight:"|",bodyJoin:"|",headerJoin:"+",joinBody:"-",joinLeft:"|",joinRight:"|",joinJoin:"|",joinMiddleDown:"+",joinMiddleUp:"+",joinMiddleLeft:"+",joinMiddleRight:"+"};if(e==="void")return{topBody:"",topJoin:"",topLeft:"",topRight:"",bottomBody:"",bottomJoin:"",bottomLeft:"",bottomRight:"",bodyLeft:"",bodyRight:"",bodyJoin:"",headerJoin:"",joinBody:"",joinLeft:"",joinRight:"",joinJoin:"",joinMiddleDown:"",joinMiddleUp:"",joinMiddleLeft:"",joinMiddleRight:""};throw new Error('Unknown border template "'+e+'".')};em.getBorderCharacters=bU});var ze=q(G=>{"use strict";var yb=G&&G.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(G,"__esModule",{value:!0});G.isCellInRange=G.areCellEqual=G.calculateRangeCoordinate=G.findOriginalRowIndex=G.flatten=G.extractTruncates=G.sumArray=G.sequence=G.distributeUnevenly=G.countSpaceSequence=G.groupBySizes=G.makeBorderConfig=G.splitAnsi=G.normalizeString=void 0;var DU=yb(Xf()),SU=yb(Xi()),EU=yb(Jf()),CU=xb(),_U=e=>e.replace(/\r\n/g,`
`);G.normalizeString=_U;var OU=e=>{let t=(0,EU.default)(e).split(`
`).map(SU.default),r=[],o=0;return t.forEach(n=>{r.push(n===0?"":(0,DU.default)(e,o,o+n)),o+=n+1}),r};G.splitAnsi=OU;var wU=e=>({...(0,CU.getBorderCharacters)("honeywell"),...e});G.makeBorderConfig=wU;var RU=(e,t)=>{let r=0;return t.map(o=>{let n=e.slice(r,r+o);return r+=o,n})};G.groupBySizes=RU;var FU=e=>{var t,r;return(r=(t=e.match(/\s+/g))===null||t===void 0?void 0:t.length)!==null&&r!==void 0?r:0};G.countSpaceSequence=FU;var AU=(e,t)=>Array.from({length:t}).fill(Math.floor(e/t)).map((o,n)=>o+(n<e%t?1:0));G.distributeUnevenly=AU;var vU=(e,t)=>Array.from({length:t-e+1},(r,o)=>o+e);G.sequence=vU;var MU=e=>e.reduce((t,r)=>t+r,0);G.sumArray=MU;var TU=e=>e.columns.map(({truncate:t})=>t);G.extractTruncates=TU;var kU=e=>[].concat(...e);G.flatten=kU;var IU=(e,t)=>(0,G.flatten)(e.map((o,n)=>Array.from({length:o},()=>n)))[t];G.findOriginalRowIndex=IU;var PU=e=>{let{row:t,col:r,colSpan:o=1,rowSpan:n=1}=e;return{bottomRight:{col:r+o-1,row:t+n-1},topLeft:{col:r,row:t}}};G.calculateRangeCoordinate=PU;var NU=(e,t)=>e.row===t.row&&e.col===t.col;G.areCellEqual=NU;var LU=(e,{topLeft:t,bottomRight:r})=>t.row<=e.row&&e.row<=r.row&&t.col<=e.col&&e.col<=r.col;G.isCellInRange=LU});var Db=q(oa=>{"use strict";var qU=oa&&oa.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oa,"__esModule",{value:!0});oa.alignString=void 0;var HU=qU(Xi()),dM=ze(),bb=(e,t)=>e+" ".repeat(t),jU=(e,t)=>" ".repeat(t)+e,BU=(e,t)=>" ".repeat(Math.floor(t/2))+e+" ".repeat(Math.ceil(t/2)),UU=(e,t)=>{let r=(0,dM.countSpaceSequence)(e);if(r===0)return bb(e,t);let o=(0,dM.distributeUnevenly)(t,r);if(Math.max(...o)>3)return bb(e,t);let n=0;return e.replace(/\s+/g,s=>s+" ".repeat(o[n++]))},WU=(e,t,r)=>{let o=(0,HU.default)(e);if(o===t)return e;if(o>t)throw new Error("Subject parameter value width cannot be greater than the container width.");if(o===0)return" ".repeat(t);let n=t-o;return r==="left"?bb(e,n):r==="right"?jU(e,n):r==="justify"?UU(e,n):BU(e,n)};oa.alignString=WU});var Sb=q(tm=>{"use strict";Object.defineProperty(tm,"__esModule",{value:!0});tm.alignTableData=void 0;var zU=Db(),KU=(e,t)=>e.map((r,o)=>r.map((n,s)=>{var i;let{width:a,alignment:c}=t.columns[s];return((i=t.spanningCellManager)===null||i===void 0?void 0:i.getContainingRange({col:s,row:o},{mapped:!0}))?n:(0,zU.alignString)(n,a,c)}));tm.alignTableData=KU});var xM=q(na=>{"use strict";var gM=na&&na.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(na,"__esModule",{value:!0});na.wrapString=void 0;var hM=gM(Xf()),$U=gM(Xi()),GU=(e,t)=>{let r=e,o=[];do o.push((0,hM.default)(r,0,t)),r=(0,hM.default)(r,t).trim();while((0,$U.default)(r));return o};na.wrapString=GU});var bM=q(sa=>{"use strict";var yM=sa&&sa.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sa,"__esModule",{value:!0});sa.wrapWord=void 0;var VU=yM(Xf()),JU=yM(Jf()),YU=(e,t)=>{let r=(0,JU.default)(e),o=[],n=new RegExp("(^.{1,"+String(Math.max(t,1))+"}(\\s+|$))|(^.{1,"+String(Math.max(t-1,1))+"}(\\\\|/|_|\\.|,|;|-))");do{let s,i=n.exec(r);if(i){s=i[0],r=r.slice(s.length);let a=s.trim().length,c=s.length-a;o.push([a,c])}else s=r.slice(0,t),r=r.slice(t),o.push([s.length,0])}while(r.length);return o},ZU=(e,t)=>{let r=[],o=0;return YU(e,t).forEach(([n,s])=>{r.push((0,VU.default)(e,o,o+n)),o+=n+s}),r};sa.wrapWord=ZU});var om=q(rm=>{"use strict";Object.defineProperty(rm,"__esModule",{value:!0});rm.wrapCell=void 0;var QU=ze(),XU=xM(),eW=bM(),tW=(e,t,r)=>{let o=(0,QU.splitAnsi)(e);for(let n=0;n<o.length;){let s;r?s=(0,eW.wrapWord)(o[n],t):s=(0,XU.wrapString)(o[n],t),o.splice(n,1,...s),n+=s.length}return o};rm.wrapCell=tW});var DM=q(nm=>{"use strict";Object.defineProperty(nm,"__esModule",{value:!0});nm.calculateCellHeight=void 0;var rW=om(),oW=(e,t,r=!1)=>(0,rW.wrapCell)(e,t,r).length;nm.calculateCellHeight=oW});var Eb=q(sm=>{"use strict";Object.defineProperty(sm,"__esModule",{value:!0});sm.calculateRowHeights=void 0;var nW=DM(),SM=ze(),sW=(e,t)=>{let r=[];for(let[o,n]of e.entries()){let s=1;n.forEach((i,a)=>{var c;let p=(c=t.spanningCellManager)===null||c===void 0?void 0:c.getContainingRange({col:a,row:o});if(!p){let h=(0,nW.calculateCellHeight)(i,t.columns[a].width,t.columns[a].wrapWord);s=Math.max(s,h);return}let{topLeft:l,bottomRight:f,height:d}=p;if(o===f.row){let h=(0,SM.sumArray)(r.slice(l.row)),S=f.row-l.row,w=(0,SM.sequence)(l.row+1,f.row).filter(k=>{var B;return!(!((B=t.drawHorizontalLine)===null||B===void 0)&&B.call(t,k,e.length))}).length,A=d-h-S+w;s=Math.max(s,A)}}),r.push(s)}return r};sm.calculateRowHeights=sW});var am=q(im=>{"use strict";Object.defineProperty(im,"__esModule",{value:!0});im.drawContent=void 0;var iW=e=>{let{contents:t,separatorGetter:r,drawSeparator:o,spanningCellManager:n,rowIndex:s,elementType:i}=e,a=t.length,c=[];return o(0,a)&&c.push(r(0,a)),t.forEach((p,l)=>{if((!i||i==="border"||i==="row")&&c.push(p),i==="cell"&&s===void 0&&c.push(p),i==="cell"&&s!==void 0){let f=n?.getContainingRange({col:l,row:s});(!f||l===f.topLeft.col)&&c.push(p)}if(l+1<a&&o(l+1,a)){let f=r(l+1,a);if(i==="cell"&&s!==void 0){let d={col:l+1,row:s},h=n?.getContainingRange(d);(!h||h.topLeft.col===d.col)&&c.push(f)}else c.push(f)}}),o(a,a)&&c.push(r(a,a)),c.join("")};im.drawContent=iW});var Cb=q(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.createTableBorderGetter=fe.drawBorderBottom=fe.drawBorderJoin=fe.drawBorderTop=fe.drawBorder=fe.createSeparatorGetter=fe.drawBorderSegments=void 0;var aW=am(),cW=(e,t)=>{let{separator:r,horizontalBorderIndex:o,spanningCellManager:n}=t;return e.map((s,i)=>{let a=r.body.repeat(s);if(o===void 0)return a;let c=n?.getContainingRange({col:i,row:o});if(!c)return a;let{topLeft:p}=c;return o===p.row?a:i!==p.col?"":c.extractBorderContent(o)})};fe.drawBorderSegments=cW;var uW=e=>{let{separator:t,spanningCellManager:r,horizontalBorderIndex:o,rowCount:n}=e;return(s,i)=>{let a=r?.inSameRange;if(o!==void 0&&a){let c={col:s,row:o-1},p={col:s-1,row:o},l={col:s-1,row:o-1},f={col:s,row:o},d=[[l,c],[c,f],[f,p],[p,l]];if(s===0)return a(f,c)&&t.bodyJoinOuter?t.bodyJoinOuter:t.left;if(s===i)return a(l,p)&&t.bodyJoinOuter?t.bodyJoinOuter:t.right;if(o===0)return a(f,p)?t.body:t.join;if(o===n)return a(c,l)?t.body:t.join;let h=d.map(S=>a(...S)).filter(Boolean).length;if(h===0)return t.join;if(h===4)return"";if(h===2)return a(...d[1])&&a(...d[3])&&t.bodyJoinInner?t.bodyJoinInner:t.body;if(h===1){if(!t.joinRight||!t.joinLeft||!t.joinUp||!t.joinDown)throw new Error(`Can not get border separator for position [${o}, ${s}]`);return a(...d[0])?t.joinDown:a(...d[1])?t.joinLeft:a(...d[2])?t.joinUp:t.joinRight}throw new Error("Invalid case")}return s===0?t.left:s===i?t.right:t.join}};fe.createSeparatorGetter=uW;var pW=(e,t)=>{let r=(0,fe.drawBorderSegments)(e,t),{drawVerticalLine:o,horizontalBorderIndex:n,spanningCellManager:s}=t;return(0,aW.drawContent)({contents:r,drawSeparator:o,elementType:"border",rowIndex:n,separatorGetter:(0,fe.createSeparatorGetter)(t),spanningCellManager:s})+`
`};fe.drawBorder=pW;var lW=(e,t)=>{let{border:r}=t,o=(0,fe.drawBorder)(e,{...t,separator:{body:r.topBody,join:r.topJoin,left:r.topLeft,right:r.topRight}});return o===`
`?"":o};fe.drawBorderTop=lW;var fW=(e,t)=>{let{border:r}=t;return(0,fe.drawBorder)(e,{...t,separator:{body:r.joinBody,bodyJoinInner:r.bodyJoin,bodyJoinOuter:r.bodyLeft,join:r.joinJoin,joinDown:r.joinMiddleDown,joinLeft:r.joinMiddleLeft,joinRight:r.joinMiddleRight,joinUp:r.joinMiddleUp,left:r.joinLeft,right:r.joinRight}})};fe.drawBorderJoin=fW;var mW=(e,t)=>{let{border:r}=t;return(0,fe.drawBorder)(e,{...t,separator:{body:r.bottomBody,join:r.bottomJoin,left:r.bottomLeft,right:r.bottomRight}})};fe.drawBorderBottom=mW;var dW=(e,t)=>(r,o)=>{let n={...t,horizontalBorderIndex:r};return r===0?(0,fe.drawBorderTop)(e,n):r===o?(0,fe.drawBorderBottom)(e,n):(0,fe.drawBorderJoin)(e,n)};fe.createTableBorderGetter=dW});var _b=q(cm=>{"use strict";Object.defineProperty(cm,"__esModule",{value:!0});cm.drawRow=void 0;var hW=am(),gW=(e,t)=>{let{border:r,drawVerticalLine:o,rowIndex:n,spanningCellManager:s}=t;return(0,hW.drawContent)({contents:e,drawSeparator:o,elementType:"cell",rowIndex:n,separatorGetter:(i,a)=>i===0?r.bodyLeft:i===a?r.bodyRight:r.bodyJoin,spanningCellManager:s})+`
`};cm.drawRow=gW});var CM=q((YY,EM)=>{"use strict";EM.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var o,n,s;if(Array.isArray(t)){if(o=t.length,o!=r.length)return!1;for(n=o;n--!==0;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(s=Object.keys(t),o=s.length,o!==Object.keys(r).length)return!1;for(n=o;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[n]))return!1;for(n=o;n--!==0;){var i=s[n];if(!e(t[i],r[i]))return!1}return!0}return t!==t&&r!==r}});var OM=q(Ob=>{"use strict";Object.defineProperty(Ob,"__esModule",{value:!0});var _M=CM();_M.code='require("ajv/dist/runtime/equal").default';Ob.default=_M});var MM=q(Rb=>{"use strict";Rb["config.json"]=AM;var xW={$id:"config.json",$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{border:{$ref:"shared.json#/definitions/borders"},header:{type:"object",properties:{content:{type:"string"},alignment:{$ref:"shared.json#/definitions/alignment"},wrapWord:{type:"boolean"},truncate:{type:"integer"},paddingLeft:{type:"integer"},paddingRight:{type:"integer"}},required:["content"],additionalProperties:!1},columns:{$ref:"shared.json#/definitions/columns"},columnDefault:{$ref:"shared.json#/definitions/column"},drawVerticalLine:{typeof:"function"},drawHorizontalLine:{typeof:"function"},singleLine:{typeof:"boolean"},spanningCells:{type:"array",items:{type:"object",properties:{col:{type:"integer",minimum:0},row:{type:"integer",minimum:0},colSpan:{type:"integer",minimum:1},rowSpan:{type:"integer",minimum:1},alignment:{$ref:"shared.json#/definitions/alignment"},verticalAlignment:{$ref:"shared.json#/definitions/verticalAlignment"},wrapWord:{type:"boolean"},truncate:{type:"integer"},paddingLeft:{type:"integer"},paddingRight:{type:"integer"}},required:["row","col"],additionalProperties:!1}}},additionalProperties:!1},wM={type:"object",properties:{topBody:{$ref:"#/definitions/border"},topJoin:{$ref:"#/definitions/border"},topLeft:{$ref:"#/definitions/border"},topRight:{$ref:"#/definitions/border"},bottomBody:{$ref:"#/definitions/border"},bottomJoin:{$ref:"#/definitions/border"},bottomLeft:{$ref:"#/definitions/border"},bottomRight:{$ref:"#/definitions/border"},bodyLeft:{$ref:"#/definitions/border"},bodyRight:{$ref:"#/definitions/border"},bodyJoin:{$ref:"#/definitions/border"},headerJoin:{$ref:"#/definitions/border"},joinBody:{$ref:"#/definitions/border"},joinLeft:{$ref:"#/definitions/border"},joinRight:{$ref:"#/definitions/border"},joinJoin:{$ref:"#/definitions/border"},joinMiddleUp:{$ref:"#/definitions/border"},joinMiddleDown:{$ref:"#/definitions/border"},joinMiddleLeft:{$ref:"#/definitions/border"},joinMiddleRight:{$ref:"#/definitions/border"}},additionalProperties:!1},wb=Object.prototype.hasOwnProperty;function b(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(typeof e!="string"){let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[a]:s.push(a),i++}return b.errors=s,i===0}function um(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let a in e)if(!wb.call(wM.properties,a)){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}e.topBody!==void 0&&(b(e.topBody,{instancePath:t+"/topBody",parentData:e,parentDataProperty:"topBody",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.topJoin!==void 0&&(b(e.topJoin,{instancePath:t+"/topJoin",parentData:e,parentDataProperty:"topJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.topLeft!==void 0&&(b(e.topLeft,{instancePath:t+"/topLeft",parentData:e,parentDataProperty:"topLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.topRight!==void 0&&(b(e.topRight,{instancePath:t+"/topRight",parentData:e,parentDataProperty:"topRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomBody!==void 0&&(b(e.bottomBody,{instancePath:t+"/bottomBody",parentData:e,parentDataProperty:"bottomBody",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomJoin!==void 0&&(b(e.bottomJoin,{instancePath:t+"/bottomJoin",parentData:e,parentDataProperty:"bottomJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomLeft!==void 0&&(b(e.bottomLeft,{instancePath:t+"/bottomLeft",parentData:e,parentDataProperty:"bottomLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomRight!==void 0&&(b(e.bottomRight,{instancePath:t+"/bottomRight",parentData:e,parentDataProperty:"bottomRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bodyLeft!==void 0&&(b(e.bodyLeft,{instancePath:t+"/bodyLeft",parentData:e,parentDataProperty:"bodyLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bodyRight!==void 0&&(b(e.bodyRight,{instancePath:t+"/bodyRight",parentData:e,parentDataProperty:"bodyRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bodyJoin!==void 0&&(b(e.bodyJoin,{instancePath:t+"/bodyJoin",parentData:e,parentDataProperty:"bodyJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.headerJoin!==void 0&&(b(e.headerJoin,{instancePath:t+"/headerJoin",parentData:e,parentDataProperty:"headerJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinBody!==void 0&&(b(e.joinBody,{instancePath:t+"/joinBody",parentData:e,parentDataProperty:"joinBody",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinLeft!==void 0&&(b(e.joinLeft,{instancePath:t+"/joinLeft",parentData:e,parentDataProperty:"joinLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinRight!==void 0&&(b(e.joinRight,{instancePath:t+"/joinRight",parentData:e,parentDataProperty:"joinRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinJoin!==void 0&&(b(e.joinJoin,{instancePath:t+"/joinJoin",parentData:e,parentDataProperty:"joinJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleUp!==void 0&&(b(e.joinMiddleUp,{instancePath:t+"/joinMiddleUp",parentData:e,parentDataProperty:"joinMiddleUp",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleDown!==void 0&&(b(e.joinMiddleDown,{instancePath:t+"/joinMiddleDown",parentData:e,parentDataProperty:"joinMiddleDown",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleLeft!==void 0&&(b(e.joinMiddleLeft,{instancePath:t+"/joinMiddleLeft",parentData:e,parentDataProperty:"joinMiddleLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleRight!==void 0&&(b(e.joinMiddleRight,{instancePath:t+"/joinMiddleRight",parentData:e,parentDataProperty:"joinMiddleRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length))}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return um.errors=s,i===0}var RM={type:"string",enum:["left","right","center","justify"]},QY=OM().default;function Ss(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(typeof e!="string"){let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[a]:s.push(a),i++}if(!(e==="left"||e==="right"||e==="center"||e==="justify")){let a={instancePath:t,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:RM.enum},message:"must be equal to one of the allowed values"};s===null?s=[a]:s.push(a),i++}return Ss.errors=s,i===0}var gm=new RegExp("^[0-9]+$","u");function co(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(typeof e!="string"){let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[a]:s.push(a),i++}if(!(e==="left"||e==="right"||e==="center"||e==="justify")){let a={instancePath:t,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:RM.enum},message:"must be equal to one of the allowed values"};s===null?s=[a]:s.push(a),i++}return co.errors=s,i===0}var FM={type:"string",enum:["top","middle","bottom"]};function uo(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(typeof e!="string"){let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[a]:s.push(a),i++}if(!(e==="top"||e==="middle"||e==="bottom")){let a={instancePath:t,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:FM.enum},message:"must be equal to one of the allowed values"};s===null?s=[a]:s.push(a),i++}return uo.errors=s,i===0}function zt(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let a in e)if(!(a==="alignment"||a==="verticalAlignment"||a==="width"||a==="wrapWord"||a==="truncate"||a==="paddingLeft"||a==="paddingRight")){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}if(e.alignment!==void 0&&(co(e.alignment,{instancePath:t+"/alignment",parentData:e,parentDataProperty:"alignment",rootData:n})||(s=s===null?co.errors:s.concat(co.errors),i=s.length)),e.verticalAlignment!==void 0&&(uo(e.verticalAlignment,{instancePath:t+"/verticalAlignment",parentData:e,parentDataProperty:"verticalAlignment",rootData:n})||(s=s===null?uo.errors:s.concat(uo.errors),i=s.length)),e.width!==void 0){let a=e.width;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/width",schemaPath:"#/properties/width/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}if(typeof a=="number"&&isFinite(a)&&(a<1||isNaN(a))){let c={instancePath:t+"/width",schemaPath:"#/properties/width/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};s===null?s=[c]:s.push(c),i++}}if(e.wrapWord!==void 0&&typeof e.wrapWord!="boolean"){let a={instancePath:t+"/wrapWord",schemaPath:"#/properties/wrapWord/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[a]:s.push(a),i++}if(e.truncate!==void 0){let a=e.truncate;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/truncate",schemaPath:"#/properties/truncate/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}if(e.paddingLeft!==void 0){let a=e.paddingLeft;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/paddingLeft",schemaPath:"#/properties/paddingLeft/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}if(e.paddingRight!==void 0){let a=e.paddingRight;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/paddingRight",schemaPath:"#/properties/paddingRight/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return zt.errors=s,i===0}function pm(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0,a=i,c=!1,p=null,l=i;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let h in e)if(!gm.test(h)){let S={instancePath:t,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties"};s===null?s=[S]:s.push(S),i++}for(let h in e)gm.test(h)&&(zt(e[h],{instancePath:t+"/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:e,parentDataProperty:h,rootData:n})||(s=s===null?zt.errors:s.concat(zt.errors),i=s.length))}else{let h={instancePath:t,schemaPath:"#/oneOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[h]:s.push(h),i++}var d=l===i;d&&(c=!0,p=0);let f=i;if(Array.isArray(e)){let h=e.length;for(let S=0;S<h;S++)zt(e[S],{instancePath:t+"/"+S,parentData:e,parentDataProperty:S,rootData:n})||(s=s===null?zt.errors:s.concat(zt.errors),i=s.length)}else{let h={instancePath:t,schemaPath:"#/oneOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[h]:s.push(h),i++}var d=f===i;if(d&&c?(c=!1,p=[p,1]):d&&(c=!0,p=1),c)i=a,s!==null&&(a?s.length=a:s=null);else{let h={instancePath:t,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:p},message:"must match exactly one schema in oneOf"};s===null?s=[h]:s.push(h),i++}return pm.errors=s,i===0}function lm(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let a in e)if(!(a==="alignment"||a==="verticalAlignment"||a==="width"||a==="wrapWord"||a==="truncate"||a==="paddingLeft"||a==="paddingRight")){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}if(e.alignment!==void 0&&(co(e.alignment,{instancePath:t+"/alignment",parentData:e,parentDataProperty:"alignment",rootData:n})||(s=s===null?co.errors:s.concat(co.errors),i=s.length)),e.verticalAlignment!==void 0&&(uo(e.verticalAlignment,{instancePath:t+"/verticalAlignment",parentData:e,parentDataProperty:"verticalAlignment",rootData:n})||(s=s===null?uo.errors:s.concat(uo.errors),i=s.length)),e.width!==void 0){let a=e.width;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/width",schemaPath:"#/properties/width/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}if(typeof a=="number"&&isFinite(a)&&(a<1||isNaN(a))){let c={instancePath:t+"/width",schemaPath:"#/properties/width/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};s===null?s=[c]:s.push(c),i++}}if(e.wrapWord!==void 0&&typeof e.wrapWord!="boolean"){let a={instancePath:t+"/wrapWord",schemaPath:"#/properties/wrapWord/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[a]:s.push(a),i++}if(e.truncate!==void 0){let a=e.truncate;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/truncate",schemaPath:"#/properties/truncate/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}if(e.paddingLeft!==void 0){let a=e.paddingLeft;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/paddingLeft",schemaPath:"#/properties/paddingLeft/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}if(e.paddingRight!==void 0){let a=e.paddingRight;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/paddingRight",schemaPath:"#/properties/paddingRight/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return lm.errors=s,i===0}function fm(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(typeof e!="string"){let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[a]:s.push(a),i++}if(!(e==="top"||e==="middle"||e==="bottom")){let a={instancePath:t,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:FM.enum},message:"must be equal to one of the allowed values"};s===null?s=[a]:s.push(a),i++}return fm.errors=s,i===0}function AM(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let a in e)if(!(a==="border"||a==="header"||a==="columns"||a==="columnDefault"||a==="drawVerticalLine"||a==="drawHorizontalLine"||a==="singleLine"||a==="spanningCells")){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}if(e.border!==void 0&&(um(e.border,{instancePath:t+"/border",parentData:e,parentDataProperty:"border",rootData:n})||(s=s===null?um.errors:s.concat(um.errors),i=s.length)),e.header!==void 0){let a=e.header;if(a&&typeof a=="object"&&!Array.isArray(a)){if(a.content===void 0){let c={instancePath:t+"/header",schemaPath:"#/properties/header/required",keyword:"required",params:{missingProperty:"content"},message:"must have required property 'content'"};s===null?s=[c]:s.push(c),i++}for(let c in a)if(!(c==="content"||c==="alignment"||c==="wrapWord"||c==="truncate"||c==="paddingLeft"||c==="paddingRight")){let p={instancePath:t+"/header",schemaPath:"#/properties/header/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties"};s===null?s=[p]:s.push(p),i++}if(a.content!==void 0&&typeof a.content!="string"){let c={instancePath:t+"/header/content",schemaPath:"#/properties/header/properties/content/type",keyword:"type",params:{type:"string"},message:"must be string"};s===null?s=[c]:s.push(c),i++}if(a.alignment!==void 0&&(Ss(a.alignment,{instancePath:t+"/header/alignment",parentData:a,parentDataProperty:"alignment",rootData:n})||(s=s===null?Ss.errors:s.concat(Ss.errors),i=s.length)),a.wrapWord!==void 0&&typeof a.wrapWord!="boolean"){let c={instancePath:t+"/header/wrapWord",schemaPath:"#/properties/header/properties/wrapWord/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[c]:s.push(c),i++}if(a.truncate!==void 0){let c=a.truncate;if(!(typeof c=="number"&&!(c%1)&&!isNaN(c)&&isFinite(c))){let p={instancePath:t+"/header/truncate",schemaPath:"#/properties/header/properties/truncate/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[p]:s.push(p),i++}}if(a.paddingLeft!==void 0){let c=a.paddingLeft;if(!(typeof c=="number"&&!(c%1)&&!isNaN(c)&&isFinite(c))){let p={instancePath:t+"/header/paddingLeft",schemaPath:"#/properties/header/properties/paddingLeft/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[p]:s.push(p),i++}}if(a.paddingRight!==void 0){let c=a.paddingRight;if(!(typeof c=="number"&&!(c%1)&&!isNaN(c)&&isFinite(c))){let p={instancePath:t+"/header/paddingRight",schemaPath:"#/properties/header/properties/paddingRight/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[p]:s.push(p),i++}}}else{let c={instancePath:t+"/header",schemaPath:"#/properties/header/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[c]:s.push(c),i++}}if(e.columns!==void 0&&(pm(e.columns,{instancePath:t+"/columns",parentData:e,parentDataProperty:"columns",rootData:n})||(s=s===null?pm.errors:s.concat(pm.errors),i=s.length)),e.columnDefault!==void 0&&(lm(e.columnDefault,{instancePath:t+"/columnDefault",parentData:e,parentDataProperty:"columnDefault",rootData:n})||(s=s===null?lm.errors:s.concat(lm.errors),i=s.length)),e.drawVerticalLine!==void 0&&typeof e.drawVerticalLine!="function"){let a={instancePath:t+"/drawVerticalLine",schemaPath:"#/properties/drawVerticalLine/typeof",keyword:"typeof",params:{},message:'must pass "typeof" keyword validation'};s===null?s=[a]:s.push(a),i++}if(e.drawHorizontalLine!==void 0&&typeof e.drawHorizontalLine!="function"){let a={instancePath:t+"/drawHorizontalLine",schemaPath:"#/properties/drawHorizontalLine/typeof",keyword:"typeof",params:{},message:'must pass "typeof" keyword validation'};s===null?s=[a]:s.push(a),i++}if(e.singleLine!==void 0&&typeof e.singleLine!="boolean"){let a={instancePath:t+"/singleLine",schemaPath:"#/properties/singleLine/typeof",keyword:"typeof",params:{},message:'must pass "typeof" keyword validation'};s===null?s=[a]:s.push(a),i++}if(e.spanningCells!==void 0){let a=e.spanningCells;if(Array.isArray(a)){let c=a.length;for(let p=0;p<c;p++){let l=a[p];if(l&&typeof l=="object"&&!Array.isArray(l)){if(l.row===void 0){let f={instancePath:t+"/spanningCells/"+p,schemaPath:"#/properties/spanningCells/items/required",keyword:"required",params:{missingProperty:"row"},message:"must have required property 'row'"};s===null?s=[f]:s.push(f),i++}if(l.col===void 0){let f={instancePath:t+"/spanningCells/"+p,schemaPath:"#/properties/spanningCells/items/required",keyword:"required",params:{missingProperty:"col"},message:"must have required property 'col'"};s===null?s=[f]:s.push(f),i++}for(let f in l)if(!wb.call(xW.properties.spanningCells.items.properties,f)){let d={instancePath:t+"/spanningCells/"+p,schemaPath:"#/properties/spanningCells/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties"};s===null?s=[d]:s.push(d),i++}if(l.col!==void 0){let f=l.col;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/col",schemaPath:"#/properties/spanningCells/items/properties/col/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}if(typeof f=="number"&&isFinite(f)&&(f<0||isNaN(f))){let d={instancePath:t+"/spanningCells/"+p+"/col",schemaPath:"#/properties/spanningCells/items/properties/col/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"};s===null?s=[d]:s.push(d),i++}}if(l.row!==void 0){let f=l.row;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/row",schemaPath:"#/properties/spanningCells/items/properties/row/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}if(typeof f=="number"&&isFinite(f)&&(f<0||isNaN(f))){let d={instancePath:t+"/spanningCells/"+p+"/row",schemaPath:"#/properties/spanningCells/items/properties/row/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"};s===null?s=[d]:s.push(d),i++}}if(l.colSpan!==void 0){let f=l.colSpan;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/colSpan",schemaPath:"#/properties/spanningCells/items/properties/colSpan/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}if(typeof f=="number"&&isFinite(f)&&(f<1||isNaN(f))){let d={instancePath:t+"/spanningCells/"+p+"/colSpan",schemaPath:"#/properties/spanningCells/items/properties/colSpan/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};s===null?s=[d]:s.push(d),i++}}if(l.rowSpan!==void 0){let f=l.rowSpan;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/rowSpan",schemaPath:"#/properties/spanningCells/items/properties/rowSpan/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}if(typeof f=="number"&&isFinite(f)&&(f<1||isNaN(f))){let d={instancePath:t+"/spanningCells/"+p+"/rowSpan",schemaPath:"#/properties/spanningCells/items/properties/rowSpan/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};s===null?s=[d]:s.push(d),i++}}if(l.alignment!==void 0&&(Ss(l.alignment,{instancePath:t+"/spanningCells/"+p+"/alignment",parentData:l,parentDataProperty:"alignment",rootData:n})||(s=s===null?Ss.errors:s.concat(Ss.errors),i=s.length)),l.verticalAlignment!==void 0&&(fm(l.verticalAlignment,{instancePath:t+"/spanningCells/"+p+"/verticalAlignment",parentData:l,parentDataProperty:"verticalAlignment",rootData:n})||(s=s===null?fm.errors:s.concat(fm.errors),i=s.length)),l.wrapWord!==void 0&&typeof l.wrapWord!="boolean"){let f={instancePath:t+"/spanningCells/"+p+"/wrapWord",schemaPath:"#/properties/spanningCells/items/properties/wrapWord/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[f]:s.push(f),i++}if(l.truncate!==void 0){let f=l.truncate;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/truncate",schemaPath:"#/properties/spanningCells/items/properties/truncate/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}}if(l.paddingLeft!==void 0){let f=l.paddingLeft;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/paddingLeft",schemaPath:"#/properties/spanningCells/items/properties/paddingLeft/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}}if(l.paddingRight!==void 0){let f=l.paddingRight;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f)&&isFinite(f))){let d={instancePath:t+"/spanningCells/"+p+"/paddingRight",schemaPath:"#/properties/spanningCells/items/properties/paddingRight/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[d]:s.push(d),i++}}}else{let f={instancePath:t+"/spanningCells/"+p,schemaPath:"#/properties/spanningCells/items/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[f]:s.push(f),i++}}}else{let c={instancePath:t+"/spanningCells",schemaPath:"#/properties/spanningCells/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[c]:s.push(c),i++}}}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return AM.errors=s,i===0}Rb["streamConfig.json"]=vM;function mm(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let a in e)if(!wb.call(wM.properties,a)){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}e.topBody!==void 0&&(b(e.topBody,{instancePath:t+"/topBody",parentData:e,parentDataProperty:"topBody",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.topJoin!==void 0&&(b(e.topJoin,{instancePath:t+"/topJoin",parentData:e,parentDataProperty:"topJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.topLeft!==void 0&&(b(e.topLeft,{instancePath:t+"/topLeft",parentData:e,parentDataProperty:"topLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.topRight!==void 0&&(b(e.topRight,{instancePath:t+"/topRight",parentData:e,parentDataProperty:"topRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomBody!==void 0&&(b(e.bottomBody,{instancePath:t+"/bottomBody",parentData:e,parentDataProperty:"bottomBody",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomJoin!==void 0&&(b(e.bottomJoin,{instancePath:t+"/bottomJoin",parentData:e,parentDataProperty:"bottomJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomLeft!==void 0&&(b(e.bottomLeft,{instancePath:t+"/bottomLeft",parentData:e,parentDataProperty:"bottomLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bottomRight!==void 0&&(b(e.bottomRight,{instancePath:t+"/bottomRight",parentData:e,parentDataProperty:"bottomRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bodyLeft!==void 0&&(b(e.bodyLeft,{instancePath:t+"/bodyLeft",parentData:e,parentDataProperty:"bodyLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bodyRight!==void 0&&(b(e.bodyRight,{instancePath:t+"/bodyRight",parentData:e,parentDataProperty:"bodyRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.bodyJoin!==void 0&&(b(e.bodyJoin,{instancePath:t+"/bodyJoin",parentData:e,parentDataProperty:"bodyJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.headerJoin!==void 0&&(b(e.headerJoin,{instancePath:t+"/headerJoin",parentData:e,parentDataProperty:"headerJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinBody!==void 0&&(b(e.joinBody,{instancePath:t+"/joinBody",parentData:e,parentDataProperty:"joinBody",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinLeft!==void 0&&(b(e.joinLeft,{instancePath:t+"/joinLeft",parentData:e,parentDataProperty:"joinLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinRight!==void 0&&(b(e.joinRight,{instancePath:t+"/joinRight",parentData:e,parentDataProperty:"joinRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinJoin!==void 0&&(b(e.joinJoin,{instancePath:t+"/joinJoin",parentData:e,parentDataProperty:"joinJoin",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleUp!==void 0&&(b(e.joinMiddleUp,{instancePath:t+"/joinMiddleUp",parentData:e,parentDataProperty:"joinMiddleUp",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleDown!==void 0&&(b(e.joinMiddleDown,{instancePath:t+"/joinMiddleDown",parentData:e,parentDataProperty:"joinMiddleDown",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleLeft!==void 0&&(b(e.joinMiddleLeft,{instancePath:t+"/joinMiddleLeft",parentData:e,parentDataProperty:"joinMiddleLeft",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length)),e.joinMiddleRight!==void 0&&(b(e.joinMiddleRight,{instancePath:t+"/joinMiddleRight",parentData:e,parentDataProperty:"joinMiddleRight",rootData:n})||(s=s===null?b.errors:s.concat(b.errors),i=s.length))}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return mm.errors=s,i===0}function dm(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0,a=i,c=!1,p=null,l=i;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let h in e)if(!gm.test(h)){let S={instancePath:t,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties"};s===null?s=[S]:s.push(S),i++}for(let h in e)gm.test(h)&&(zt(e[h],{instancePath:t+"/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:e,parentDataProperty:h,rootData:n})||(s=s===null?zt.errors:s.concat(zt.errors),i=s.length))}else{let h={instancePath:t,schemaPath:"#/oneOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[h]:s.push(h),i++}var d=l===i;d&&(c=!0,p=0);let f=i;if(Array.isArray(e)){let h=e.length;for(let S=0;S<h;S++)zt(e[S],{instancePath:t+"/"+S,parentData:e,parentDataProperty:S,rootData:n})||(s=s===null?zt.errors:s.concat(zt.errors),i=s.length)}else{let h={instancePath:t,schemaPath:"#/oneOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};s===null?s=[h]:s.push(h),i++}var d=f===i;if(d&&c?(c=!1,p=[p,1]):d&&(c=!0,p=1),c)i=a,s!==null&&(a?s.length=a:s=null);else{let h={instancePath:t,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:p},message:"must match exactly one schema in oneOf"};s===null?s=[h]:s.push(h),i++}return dm.errors=s,i===0}function hm(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){for(let a in e)if(!(a==="alignment"||a==="verticalAlignment"||a==="width"||a==="wrapWord"||a==="truncate"||a==="paddingLeft"||a==="paddingRight")){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}if(e.alignment!==void 0&&(co(e.alignment,{instancePath:t+"/alignment",parentData:e,parentDataProperty:"alignment",rootData:n})||(s=s===null?co.errors:s.concat(co.errors),i=s.length)),e.verticalAlignment!==void 0&&(uo(e.verticalAlignment,{instancePath:t+"/verticalAlignment",parentData:e,parentDataProperty:"verticalAlignment",rootData:n})||(s=s===null?uo.errors:s.concat(uo.errors),i=s.length)),e.width!==void 0){let a=e.width;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/width",schemaPath:"#/properties/width/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}if(typeof a=="number"&&isFinite(a)&&(a<1||isNaN(a))){let c={instancePath:t+"/width",schemaPath:"#/properties/width/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};s===null?s=[c]:s.push(c),i++}}if(e.wrapWord!==void 0&&typeof e.wrapWord!="boolean"){let a={instancePath:t+"/wrapWord",schemaPath:"#/properties/wrapWord/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};s===null?s=[a]:s.push(a),i++}if(e.truncate!==void 0){let a=e.truncate;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/truncate",schemaPath:"#/properties/truncate/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}if(e.paddingLeft!==void 0){let a=e.paddingLeft;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/paddingLeft",schemaPath:"#/properties/paddingLeft/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}if(e.paddingRight!==void 0){let a=e.paddingRight;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/paddingRight",schemaPath:"#/properties/paddingRight/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}}}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return hm.errors=s,i===0}function vM(e,{instancePath:t="",parentData:r,parentDataProperty:o,rootData:n=e}={}){let s=null,i=0;if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.columnDefault===void 0){let a={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"columnDefault"},message:"must have required property 'columnDefault'"};s===null?s=[a]:s.push(a),i++}if(e.columnCount===void 0){let a={instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:"columnCount"},message:"must have required property 'columnCount'"};s===null?s=[a]:s.push(a),i++}for(let a in e)if(!(a==="border"||a==="columns"||a==="columnDefault"||a==="columnCount"||a==="drawVerticalLine")){let c={instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};s===null?s=[c]:s.push(c),i++}if(e.border!==void 0&&(mm(e.border,{instancePath:t+"/border",parentData:e,parentDataProperty:"border",rootData:n})||(s=s===null?mm.errors:s.concat(mm.errors),i=s.length)),e.columns!==void 0&&(dm(e.columns,{instancePath:t+"/columns",parentData:e,parentDataProperty:"columns",rootData:n})||(s=s===null?dm.errors:s.concat(dm.errors),i=s.length)),e.columnDefault!==void 0&&(hm(e.columnDefault,{instancePath:t+"/columnDefault",parentData:e,parentDataProperty:"columnDefault",rootData:n})||(s=s===null?hm.errors:s.concat(hm.errors),i=s.length)),e.columnCount!==void 0){let a=e.columnCount;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){let c={instancePath:t+"/columnCount",schemaPath:"#/properties/columnCount/type",keyword:"type",params:{type:"integer"},message:"must be integer"};s===null?s=[c]:s.push(c),i++}if(typeof a=="number"&&isFinite(a)&&(a<1||isNaN(a))){let c={instancePath:t+"/columnCount",schemaPath:"#/properties/columnCount/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};s===null?s=[c]:s.push(c),i++}}if(e.drawVerticalLine!==void 0&&typeof e.drawVerticalLine!="function"){let a={instancePath:t+"/drawVerticalLine",schemaPath:"#/properties/drawVerticalLine/typeof",keyword:"typeof",params:{},message:'must pass "typeof" keyword validation'};s===null?s=[a]:s.push(a),i++}}else{let a={instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};s===null?s=[a]:s.push(a),i++}return vM.errors=s,i===0}});var Fb=q(ia=>{"use strict";var yW=ia&&ia.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ia,"__esModule",{value:!0});ia.validateConfig=void 0;var bW=yW(MM()),DW=(e,t)=>{let r=bW.default[e];if(!r(t)&&r.errors){let o=r.errors.map(n=>({message:n.message,params:n.params,schemaPath:n.schemaPath}));throw console.log("config",t),console.log("errors",o),new Error("Invalid config.")}};ia.validateConfig=DW});var TM=q(xm=>{"use strict";Object.defineProperty(xm,"__esModule",{value:!0});xm.makeStreamConfig=void 0;var SW=ze(),EW=Fb(),CW=(e,t={},r)=>Array.from({length:e}).map((o,n)=>({alignment:"left",paddingLeft:1,paddingRight:1,truncate:Number.POSITIVE_INFINITY,verticalAlignment:"top",wrapWord:!1,...r,...t[n]})),_W=e=>{if((0,EW.validateConfig)("streamConfig.json",e),e.columnDefault.width===void 0)throw new Error("Must provide config.columnDefault.width when creating a stream.");return{drawVerticalLine:()=>!0,...e,border:(0,SW.makeBorderConfig)(e.border),columns:CW(e.columnCount,e.columns,e.columnDefault)}};xm.makeStreamConfig=_W});var bm=q(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.mapDataUsingRowHeights=Es.padCellVertically=void 0;var OW=ze(),wW=om(),ym=e=>new Array(e).fill(""),RW=(e,t,r)=>{let o=t-e.length;return r==="top"?[...e,...ym(o)]:r==="bottom"?[...ym(o),...e]:[...ym(Math.floor(o/2)),...e,...ym(Math.ceil(o/2))]};Es.padCellVertically=RW;var FW=(e,t,r)=>{let o=e[0].length,n=e.map((s,i)=>{let a=t[i],c=Array.from({length:a},()=>new Array(o).fill(""));return s.forEach((p,l)=>{var f;let d=(f=r.spanningCellManager)===null||f===void 0?void 0:f.getContainingRange({col:l,row:i});if(d){d.extractCellContent(i).forEach((w,A)=>{c[A][l]=w});return}let h=(0,wW.wrapCell)(p,r.columns[l].width,r.columns[l].wrapWord);(0,Es.padCellVertically)(h,a,r.columns[l].verticalAlignment).forEach((w,A)=>{c[A][l]=w})}),c});return(0,OW.flatten)(n)};Es.mapDataUsingRowHeights=FW});var Dm=q(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.padTableData=Cs.padString=void 0;var AW=(e,t,r)=>" ".repeat(t)+e+" ".repeat(r);Cs.padString=AW;var vW=(e,t)=>e.map((r,o)=>r.map((n,s)=>{var i;if((i=t.spanningCellManager)===null||i===void 0?void 0:i.getContainingRange({col:s,row:o},{mapped:!0}))return n;let{paddingLeft:c,paddingRight:p}=t.columns[s];return(0,Cs.padString)(n,c,p)}));Cs.padTableData=vW});var Ab=q(Sm=>{"use strict";Object.defineProperty(Sm,"__esModule",{value:!0});Sm.stringifyTableData=void 0;var MW=ze(),TW=e=>e.map(t=>t.map(r=>(0,MW.normalizeString)(String(r))));Sm.stringifyTableData=TW});var tT=q((ou,aa)=>{"use strict";var kW=30,IW="...",vb=1/0,PW=17976931348623157e292,kM=0/0,NW="[object RegExp]",LW="[object Symbol]",qW=/^\s+|\s+$/g,HW=/\w*$/,jW=/^[-+]0x[0-9a-f]+$/i,BW=/^0b[01]+$/i,UW=/^0o[0-7]+$/i,Pb="\\ud800-\\udfff",UM="\\u0300-\\u036f\\ufe20-\\ufe23",WM="\\u20d0-\\u20f0",zM="\\ufe0e\\ufe0f",WW="["+Pb+"]",Mb="["+UM+WM+"]",Tb="\\ud83c[\\udffb-\\udfff]",zW="(?:"+Mb+"|"+Tb+")",KM="[^"+Pb+"]",$M="(?:\\ud83c[\\udde6-\\uddff]){2}",GM="[\\ud800-\\udbff][\\udc00-\\udfff]",VM="\\u200d",JM=zW+"?",YM="["+zM+"]?",KW="(?:"+VM+"(?:"+[KM,$M,GM].join("|")+")"+YM+JM+")*",$W=YM+JM+KW,GW="(?:"+[KM+Mb+"?",Mb,$M,GM,WW].join("|")+")",kb=RegExp(Tb+"(?="+Tb+")|"+GW+$W,"g"),VW=RegExp("["+VM+Pb+UM+WM+zM+"]"),JW=parseInt,ZM=typeof global=="object"&&global&&global.Object===Object&&global,YW=typeof self=="object"&&self&&self.Object===Object&&self,ZW=ZM||YW||Function("return this")(),QM=typeof ou=="object"&&ou&&!ou.nodeType&&ou,IM=QM&&typeof aa=="object"&&aa&&!aa.nodeType&&aa,QW=IM&&IM.exports===QM,PM=QW&&ZM.process,NM=function(){try{return PM&&PM.binding("util")}catch{}}(),LM=NM&&NM.isRegExp,XW=t4("length");function e4(e){return e.split("")}function t4(e){return function(t){return t?.[e]}}function r4(e){return function(t){return e(t)}}function Nb(e){return VW.test(e)}function o4(e){return Nb(e)?s4(e):XW(e)}function n4(e){return Nb(e)?i4(e):e4(e)}function s4(e){for(var t=kb.lastIndex=0;kb.test(e);)t++;return t}function i4(e){return e.match(kb)||[]}var a4=Object.prototype,XM=a4.toString,qM=ZW.Symbol,HM=qM?qM.prototype:void 0,jM=HM?HM.toString:void 0;function c4(e){return Em(e)&&XM.call(e)==NW}function u4(e,t,r){var o=-1,n=e.length;t<0&&(t=-t>n?0:n+t),r=r>n?n:r,r<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(n);++o<n;)s[o]=e[o+t];return s}function Ib(e){if(typeof e=="string")return e;if(eT(e))return jM?jM.call(e):"";var t=e+"";return t=="0"&&1/e==-vb?"-0":t}function p4(e,t,r){var o=e.length;return r=r===void 0?o:r,!t&&r>=o?e:u4(e,t,r)}function Em(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function l4(e){return!!e&&typeof e=="object"}var f4=LM?r4(LM):c4;function eT(e){return typeof e=="symbol"||l4(e)&&XM.call(e)==LW}function m4(e){if(!e)return e===0?e:0;if(e=h4(e),e===vb||e===-vb){var t=e<0?-1:1;return t*PW}return e===e?e:0}function d4(e){var t=m4(e),r=t%1;return t===t?r?t-r:t:0}function h4(e){if(typeof e=="number")return e;if(eT(e))return kM;if(Em(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Em(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(qW,"");var r=BW.test(e);return r||UW.test(e)?JW(e.slice(2),r?2:8):jW.test(e)?kM:+e}function BM(e){return e==null?"":Ib(e)}function g4(e,t){var r=kW,o=IW;if(Em(t)){var n="separator"in t?t.separator:n;r="length"in t?d4(t.length):r,o="omission"in t?Ib(t.omission):o}e=BM(e);var s=e.length;if(Nb(e)){var i=n4(e);s=i.length}if(r>=s)return e;var a=r-o4(o);if(a<1)return o;var c=i?p4(i,0,a).join(""):e.slice(0,a);if(n===void 0)return c+o;if(i&&(a+=c.length-a),f4(n)){if(e.slice(a).search(n)){var p,l=c;for(n.global||(n=RegExp(n.source,BM(HW.exec(n))+"g")),n.lastIndex=0;p=n.exec(l);)var f=p.index;c=c.slice(0,f===void 0?a:f)}}else if(e.indexOf(Ib(n),a)!=a){var d=c.lastIndexOf(n);d>-1&&(c=c.slice(0,d))}return c+o}aa.exports=g4});var Cm=q(jo=>{"use strict";var x4=jo&&jo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jo,"__esModule",{value:!0});jo.truncateTableData=jo.truncateString=void 0;var y4=x4(tT()),b4=(e,t)=>(0,y4.default)(e,{length:t,omission:"\u2026"});jo.truncateString=b4;var D4=(e,t)=>e.map(r=>r.map((o,n)=>(0,jo.truncateString)(o,t[n])));jo.truncateTableData=D4});var nT=q(Om=>{"use strict";Object.defineProperty(Om,"__esModule",{value:!0});Om.createStream=void 0;var S4=Sb(),E4=Eb(),_m=Cb(),rT=_b(),C4=TM(),_4=bm(),O4=Dm(),w4=Ab(),R4=Cm(),F4=ze(),oT=(e,t)=>{let r=(0,w4.stringifyTableData)(e);r=(0,R4.truncateTableData)(r,(0,F4.extractTruncates)(t));let o=(0,E4.calculateRowHeights)(r,t);return r=(0,_4.mapDataUsingRowHeights)(r,o,t),r=(0,S4.alignTableData)(r,t),r=(0,O4.padTableData)(r,t),r},A4=(e,t,r)=>{let n=oT([e],r).map(i=>(0,rT.drawRow)(i,r)).join(""),s;s="",s+=(0,_m.drawBorderTop)(t,r),s+=n,s+=(0,_m.drawBorderBottom)(t,r),s=s.trimEnd(),process.stdout.write(s)},v4=(e,t,r)=>{let n=oT([e],r).map(a=>(0,rT.drawRow)(a,r)).join(""),s="",i=(0,_m.drawBorderBottom)(t,r);i!==`
`&&(s="\r\x1B[K"),s+=(0,_m.drawBorderJoin)(t,r),s+=n,s+=i,s=s.trimEnd(),process.stdout.write(s)},M4=e=>{let t=(0,C4.makeStreamConfig)(e),r=Object.values(t.columns).map(n=>n.width+n.paddingLeft+n.paddingRight),o=!0;return{write:n=>{if(n.length!==t.columnCount)throw new Error("Row cell count does not match the config.columnCount.");o?(o=!1,A4(n,r,t)):v4(n,r,t)}}};Om.createStream=M4});var sT=q(wm=>{"use strict";Object.defineProperty(wm,"__esModule",{value:!0});wm.calculateOutputColumnWidths=void 0;var T4=e=>e.columns.map(t=>t.paddingLeft+t.width+t.paddingRight);wm.calculateOutputColumnWidths=T4});var iT=q(Rm=>{"use strict";Object.defineProperty(Rm,"__esModule",{value:!0});Rm.drawTable=void 0;var k4=Cb(),I4=am(),P4=_b(),N4=ze(),L4=(e,t,r,o)=>{let{drawHorizontalLine:n,singleLine:s}=o,i=(0,N4.groupBySizes)(e,r).map((a,c)=>a.map(p=>(0,P4.drawRow)(p,{...o,rowIndex:c})).join(""));return(0,I4.drawContent)({contents:i,drawSeparator:(a,c)=>(a===0||a===c||!s)&&n(a,c),elementType:"row",rowIndex:-1,separatorGetter:(0,k4.createTableBorderGetter)(t,{...o,rowCount:i.length}),spanningCellManager:o.spanningCellManager})};Rm.drawTable=L4});var aT=q(Fm=>{"use strict";Object.defineProperty(Fm,"__esModule",{value:!0});Fm.injectHeaderConfig=void 0;var q4=(e,t)=>{var r;let o=(r=t.spanningCells)!==null&&r!==void 0?r:[],n=t.header,s=[...e];if(n){o=o.map(({row:c,...p})=>({...p,row:c+1}));let{content:i,...a}=n;o.unshift({alignment:"center",col:0,colSpan:e[0].length,paddingLeft:1,paddingRight:1,row:0,wrapWord:!1,...a}),s.unshift([i,...Array.from({length:e[0].length-1}).fill("")])}return[s,o]};Fm.injectHeaderConfig=q4});var uT=q(Bo=>{"use strict";var H4=Bo&&Bo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bo,"__esModule",{value:!0});Bo.calculateMaximumColumnWidths=Bo.calculateMaximumCellWidth=void 0;var j4=H4(Xi()),cT=ze(),B4=e=>Math.max(...e.split(`
`).map(j4.default));Bo.calculateMaximumCellWidth=B4;var U4=(e,t=[])=>{let r=new Array(e[0].length).fill(0),o=t.map(cT.calculateRangeCoordinate),n=(s,i)=>o.some(a=>(0,cT.isCellInRange)({col:i,row:s},a));return e.forEach((s,i)=>{s.forEach((a,c)=>{n(i,c)||(r[c]=Math.max(r[c],(0,Bo.calculateMaximumCellWidth)(a)))})}),r};Bo.calculateMaximumColumnWidths=U4});var lT=q(gn=>{"use strict";var W4=gn&&gn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gn,"__esModule",{value:!0});gn.alignVerticalRangeContent=gn.wrapRangeContent=void 0;var z4=W4(Xi()),K4=Db(),$4=bm(),G4=Dm(),V4=Cm(),pT=ze(),J4=om(),Y4=(e,t,r)=>{let{topLeft:o,paddingRight:n,paddingLeft:s,truncate:i,wrapWord:a,alignment:c}=e,p=r.rows[o.row][o.col],l=t-s-n;return(0,J4.wrapCell)((0,V4.truncateString)(p,i),l,a).map(f=>{let d=(0,K4.alignString)(f,l,c);return(0,G4.padString)(d,s,n)})};gn.wrapRangeContent=Y4;var Z4=(e,t,r)=>{let{rows:o,drawHorizontalLine:n,rowHeights:s}=r,{topLeft:i,bottomRight:a,verticalAlignment:c}=e;if(s.length===0)return[];let p=(0,pT.sumArray)(s.slice(i.row,a.row+1)),l=a.row-i.row,f=(0,pT.sequence)(i.row+1,a.row).filter(h=>!n(h,o.length)).length,d=p+l-f;return(0,$4.padCellVertically)(t,d,c).map(h=>h.length===0?" ".repeat((0,z4.default)(t[0])):h)};gn.alignVerticalRangeContent=Z4});var fT=q(Am=>{"use strict";Object.defineProperty(Am,"__esModule",{value:!0});Am.calculateSpanningCellWidth=void 0;var Lb=ze(),Q4=(e,t)=>{let{columnsConfig:r,drawVerticalLine:o}=t,{topLeft:n,bottomRight:s}=e,i=(0,Lb.sumArray)(r.slice(n.col,s.col+1).map(({width:l})=>l)),a=n.col===s.col?r[n.col].paddingRight+r[s.col].paddingLeft:(0,Lb.sumArray)(r.slice(n.col,s.col+1).map(({paddingLeft:l,paddingRight:f})=>l+f)),c=s.col-n.col,p=(0,Lb.sequence)(n.col+1,s.col).filter(l=>!o(l,r.length)).length;return i+a+c-p};Am.calculateSpanningCellWidth=Q4});var mT=q(vm=>{"use strict";Object.defineProperty(vm,"__esModule",{value:!0});vm.makeRangeConfig=void 0;var X4=ze(),e9=(e,t)=>{var r;let{topLeft:o,bottomRight:n}=(0,X4.calculateRangeCoordinate)(e);return{...{...t[o.col],...e,paddingRight:(r=e.paddingRight)!==null&&r!==void 0?r:t[n.col].paddingRight},bottomRight:n,topLeft:o}};vm.makeRangeConfig=e9});var gT=q(Mm=>{"use strict";Object.defineProperty(Mm,"__esModule",{value:!0});Mm.createSpanningCellManager=void 0;var dT=lT(),t9=fT(),r9=mT(),ca=ze(),qb=(e,t)=>t.find(r=>(0,ca.isCellInRange)(e,r)),hT=(e,t)=>{let r=(0,t9.calculateSpanningCellWidth)(e,t),o=(0,dT.wrapRangeContent)(e,r,t),n=(0,dT.alignVerticalRangeContent)(e,o,t);return{...e,extractBorderContent:a=>{let{topLeft:c}=e,p=(0,ca.sumArray)(t.rowHeights.slice(c.row,a))+(a-c.row-1);return n[p]},extractCellContent:a=>{let{topLeft:c}=e,{drawHorizontalLine:p,rowHeights:l}=t,f=a-c.row,d=(0,ca.sequence)(c.row+1,a).filter(S=>!p?.(S,l.length)).length,h=(0,ca.sumArray)(l.slice(c.row,a))+f-d;return n.slice(h,h+l[a])},height:o.length,width:r}},o9=(e,t,r)=>{let o=qb(e,r),n=qb(t,r);return o&&n?(0,ca.areCellEqual)(o.topLeft,n.topLeft):!1},n9=e=>{let{row:t,col:r}=e.topLeft;return`${t}/${r}`},s9=e=>{let{spanningCellConfigs:t,columnsConfig:r}=e,o=t.map(i=>(0,r9.makeRangeConfig)(i,r)),n={},s=[];return{getContainingRange:(i,a)=>{var c;let p=a?.mapped?(0,ca.findOriginalRowIndex)(s,i.row):i.row,l=qb({...i,row:p},o);if(!l)return;if(s.length===0)return hT(l,{...e,rowHeights:s});let f=n9(l);return(c=n[f])!==null&&c!==void 0||(n[f]=hT(l,{...e,rowHeights:s})),n[f]},inSameRange:(i,a)=>o9(i,a,o),rowHeights:s,setRowHeights:i=>{s=i}}};Mm.createSpanningCellManager=s9});var xT=q(km=>{"use strict";Object.defineProperty(km,"__esModule",{value:!0});km.validateSpanningCellConfig=void 0;var Hb=ze(),Tm=(e,t,r)=>e<=r&&r<=t,i9=(e,t)=>{let[r,o]=[e.length,e[0].length];t.forEach((i,a)=>{let{colSpan:c,rowSpan:p}=i;if(c===void 0&&p===void 0)throw new Error(`Expect at least colSpan or rowSpan is provided in config.spanningCells[${a}]`);if(c!==void 0&&c<1)throw new Error(`Expect colSpan is not equal zero, instead got: ${c} in config.spanningCells[${a}]`);if(p!==void 0&&p<1)throw new Error(`Expect rowSpan is not equal zero, instead got: ${p} in config.spanningCells[${a}]`)});let n=t.map(Hb.calculateRangeCoordinate);n.forEach(({topLeft:i,bottomRight:a},c)=>{if(!Tm(0,o-1,i.col)||!Tm(0,r-1,i.row)||!Tm(0,o-1,a.col)||!Tm(0,r-1,a.row))throw new Error(`Some cells in config.spanningCells[${c}] are out of the table`)});let s=Array.from({length:r},()=>Array.from({length:o}));n.forEach(({topLeft:i,bottomRight:a},c)=>{(0,Hb.sequence)(i.row,a.row).forEach(p=>{(0,Hb.sequence)(i.col,a.col).forEach(l=>{if(s[p][l]!==void 0)throw new Error(`Spanning cells in config.spanningCells[${s[p][l]}] and config.spanningCells[${c}] are overlap each other`);s[p][l]=c})})})};km.validateSpanningCellConfig=i9});var yT=q(Im=>{"use strict";Object.defineProperty(Im,"__esModule",{value:!0});Im.makeTableConfig=void 0;var a9=uT(),c9=gT(),u9=ze(),p9=Fb(),l9=xT(),f9=(e,t,r,o)=>{let n=(0,a9.calculateMaximumColumnWidths)(e,o);return e[0].map((s,i)=>({alignment:"left",paddingLeft:1,paddingRight:1,truncate:Number.POSITIVE_INFINITY,verticalAlignment:"top",width:n[i],wrapWord:!1,...r,...t?.[i]}))},m9=(e,t={},r)=>{var o,n,s,i,a;(0,p9.validateConfig)("config.json",t),(0,l9.validateSpanningCellConfig)(e,(o=t.spanningCells)!==null&&o!==void 0?o:[]);let c=(n=r??t.spanningCells)!==null&&n!==void 0?n:[],p=f9(e,t.columns,t.columnDefault,c),l=(s=t.drawVerticalLine)!==null&&s!==void 0?s:()=>!0,f=(i=t.drawHorizontalLine)!==null&&i!==void 0?i:()=>!0;return{...t,border:(0,u9.makeBorderConfig)(t.border),columns:p,drawHorizontalLine:f,drawVerticalLine:l,singleLine:(a=t.singleLine)!==null&&a!==void 0?a:!1,spanningCellManager:(0,c9.createSpanningCellManager)({columnsConfig:p,drawHorizontalLine:f,drawVerticalLine:l,rows:e,spanningCellConfigs:c})}};Im.makeTableConfig=m9});var bT=q(Pm=>{"use strict";Object.defineProperty(Pm,"__esModule",{value:!0});Pm.validateTableData=void 0;var d9=ze(),h9=e=>{if(!Array.isArray(e))throw new TypeError("Table data must be an array.");if(e.length===0)throw new Error("Table must define at least one row.");if(e[0].length===0)throw new Error("Table must define at least one column.");let t=e[0].length;for(let r of e){if(!Array.isArray(r))throw new TypeError("Table row data must be an array.");if(r.length!==t)throw new Error("Table must have a consistent number of cells.");for(let o of r)if(/[\u0001-\u0006\u0008\u0009\u000B-\u001A]/.test((0,d9.normalizeString)(String(o))))throw new Error("Table data must not contain control characters.")}};Pm.validateTableData=h9});var DT=q(Nm=>{"use strict";Object.defineProperty(Nm,"__esModule",{value:!0});Nm.table=void 0;var g9=Sb(),x9=sT(),y9=Eb(),b9=iT(),D9=aT(),S9=yT(),E9=bm(),C9=Dm(),_9=Ab(),O9=Cm(),w9=ze(),R9=bT(),F9=(e,t={})=>{(0,R9.validateTableData)(e);let r=(0,_9.stringifyTableData)(e),[o,n]=(0,D9.injectHeaderConfig)(r,t),s=(0,S9.makeTableConfig)(o,t,n);r=(0,O9.truncateTableData)(o,(0,w9.extractTruncates)(s));let i=(0,y9.calculateRowHeights)(r,s);s.spanningCellManager.setRowHeights(i),r=(0,E9.mapDataUsingRowHeights)(r,i,s),r=(0,g9.alignTableData)(r,s),r=(0,C9.padTableData)(r,s);let a=(0,x9.calculateOutputColumnWidths)(s);return(0,b9.drawTable)(r,a,i,s)};Nm.table=F9});var ET=q(ST=>{"use strict";Object.defineProperty(ST,"__esModule",{value:!0})});var CT=q(Kt=>{"use strict";var A9=Kt&&Kt.__createBinding||(Object.create?function(e,t,r,o){o===void 0&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){o===void 0&&(o=r),e[o]=t[r]}),v9=Kt&&Kt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&A9(t,e,r)};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.getBorderCharacters=Kt.createStream=Kt.table=void 0;var M9=nT();Object.defineProperty(Kt,"createStream",{enumerable:!0,get:function(){return M9.createStream}});var T9=xb();Object.defineProperty(Kt,"getBorderCharacters",{enumerable:!0,get:function(){return T9.getBorderCharacters}});var k9=DT();Object.defineProperty(Kt,"table",{enumerable:!0,get:function(){return k9.table}});v9(ET(),Kt)});var Bb=e=>typeof e=="function",u=function(e,t){if(typeof e=="function")return function(){return e(arguments)?t.apply(this,arguments):r=>t(r,...arguments)};switch(e){case 0:return t;case 1:return function(r){return arguments.length>=1?t(r):function(){return t(r)}};case 2:return function(r,o){return arguments.length>=2?t(r,o):function(n){return t(n,r)}};case 3:return function(r,o,n){return arguments.length>=3?t(r,o,n):function(s){return t(s,r,o)}};case 4:return function(r,o,n,s){return arguments.length>=4?t(r,o,n,s):function(i){return t(i,r,o,n)}};case 5:return function(r,o,n,s,i){return arguments.length>=5?t(r,o,n,s,i):function(a){return t(a,r,o,n,s)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);let r=arguments;return function(o){return t(o,...r)}}}};var I=e=>e;var ws=e=>()=>e,Ir=ws(!0),Gt=ws(!1),qm=ws(null),iu=ws(void 0),Rs=iu;function Ke(e,t,r,o,n,s,i,a,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return r(t(e));case 4:return o(r(t(e)));case 5:return n(o(r(t(e))));case 6:return s(n(o(r(t(e)))));case 7:return i(s(n(o(r(t(e))))));case 8:return a(i(s(n(o(r(t(e)))))));case 9:return c(a(i(s(n(o(r(t(e))))))));default:{let p=arguments[0];for(let l=1;l<arguments.length;l++)p=arguments[l](p);return p}}}var Fs=e=>(t,r)=>t===r||e(t,r);var Ub=u(2,(e,t)=>Fs((r,o)=>e(t(r),t(o))));var Wb=e=>Fs((t,r)=>{if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(!e(t[o],r[o]))return!1;return!0});var As=e=>(t,r)=>t===r?0:e(t,r);var zb=As((e,t)=>e<t?-1:1);var Kb=e=>As((t,r)=>e(r,t));var ua=u(2,(e,t)=>As((r,o)=>e(t(r),t(o))));var IT=e=>As((t,r)=>{let o=Math.min(t.length,r.length),n=0;for(let s of e){if(n>=o)break;let i=s(t[n],r[n]);if(i!==0)return i;n++}return 0});var $b=(...e)=>IT(e);var Hm=e=>u(2,(t,r)=>e(t,r)===1);var jm=e=>u(2,(t,r)=>t===r||e(t,r)>-1?t:r);var pa=e=>typeof e=="string",xn=e=>typeof e=="number",uu=e=>typeof e=="boolean",vs=e=>typeof e=="bigint",Gb=e=>typeof e=="symbol",Vb=Bb,la=e=>e===void 0;var Jb=e=>e===null;var Yb=e=>!1;var de=e=>typeof e=="object"&&e!=null||Vb(e);var yn=e=>e==null,Zb=e=>e!=null;var pu=e=>e instanceof Date,Vt=e=>de(e)&&Symbol.iterator in e,fa=e=>de(e)&&!Array.isArray(e);var Qb=e=>!e;var Xb,eD=Symbol.for("@effect/data/Gen/GenKind"),Bm=class{constructor(t){this.value=t,this[Xb]=eD}get _F(){return I}get _R(){return t=>t}get _O(){return t=>t}get _E(){return t=>t}[(Xb=eD,Symbol.iterator)](){return new Um(this)}},Um=class e{constructor(t){this.self=t,this.called=!1}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new e(this.self)}};var tD=()=>function(){let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return new Bm(e)};var LT=335903614,qT=4150755663,HT=1481765933,jT=1284865837,BT=9007199254740992,UT=134217728,Ms=class{constructor(t,r,o,n){return yn(r)&&yn(t)?(r=Math.random()*4294967295>>>0,t=0):yn(r)&&(r=t,t=0),yn(n)&&yn(o)?(n=this._state?this._state[3]:qT,o=this._state?this._state[2]:LT):yn(n)&&(n=o,o=0),this._state=new Int32Array([0,0,o>>>0,((n||0)|1)>>>0]),this._next(),rD(this._state,this._state[0],this._state[1],t>>>0,r>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(t){this._state[0]=t[0],this._state[1]=t[1],this._state[2]=t[2],this._state[3]=t[3]|1}integer(t){if(!t)return this._next();if(t=t>>>0,!(t&t-1))return this._next()&t-1;let r=0,o=(-t>>>0)%t>>>0;for(r=this._next();r<o;r=this._next());return r%t}number(){let t=(this._next()&67108863)*1,r=(this._next()&134217727)*1;return(t*UT+r)/BT}_next(){let t=this._state[0]>>>0,r=this._state[1]>>>0;WT(this._state,t,r,HT,jT),rD(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let o=t>>>18,n=(r>>>18|t<<14)>>>0;o=(o^t)>>>0,n=(n^r)>>>0;let s=(n>>>27|o<<5)>>>0,i=t>>>27,a=(-i>>>0&31)>>>0;return(s>>>i|s<<a)>>>0}};function WT(e,t,r,o,n){let s=(r>>>16)*(n&65535)>>>0,i=(r&65535)*(n>>>16)>>>0,a=(r&65535)*(n&65535)>>>0,c=(r>>>16)*(n>>>16)+((i>>>16)+(s>>>16))>>>0;i=i<<16>>>0,a=a+i>>>0,a>>>0<i>>>0&&(c=c+1>>>0),s=s<<16>>>0,a=a+s>>>0,a>>>0<s>>>0&&(c=c+1>>>0),c=c+Math.imul(r,o)>>>0,c=c+Math.imul(t,n)>>>0,e[0]=c,e[1]=a}function rD(e,t,r,o,n){let s=t+o>>>0,i=r+n>>>0;i>>>0<r>>>0&&(s=s+1|0),e[0]=s,e[1]=i}var zm=Symbol.for("@effect/data/Global/globalStoreId");zm in globalThis||(globalThis[zm]=new Map);var Wm=globalThis[zm],V=(e,t)=>(Wm.has(e)||Wm.set(e,t()),Wm.get(e));var Km=V(Symbol.for("@effect/data/Hash/randomHashCache"),()=>new WeakMap),$T=V(Symbol.for("@effect/data/Hash/pcgr"),()=>new Ms),R=Symbol.for("@effect/data/Hash"),E=e=>{switch(typeof e){case"number":return fu(e);case"bigint":return qe(e.toString(10));case"boolean":return qe(String(e));case"symbol":return qe(String(e));case"string":return qe(e);case"undefined":return qe("undefined");case"function":case"object":return e===null?qe("null"):GT(e)?e[R]():Uo(e);default:throw new Error("Bug in Equal.hash")}},Uo=e=>(Km.has(e)||Km.set(e,fu($T.integer(Number.MAX_SAFE_INTEGER))),Km.get(e)),T=e=>t=>t*53^e,lu=e=>e&3221225471|e>>>1&1073741824,GT=e=>typeof e=="object"&&e!==null&&R in e,fu=e=>{if(e!==e||e===1/0)return 0;let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return lu(e)},qe=e=>{let t=5381,r=e.length;for(;r;)t=t*33^e.charCodeAt(--r);return lu(t)},VT=(e,t)=>{let r=12289;for(let o=0;o<t.length;o++)r^=T(E(e[t[o]]))(qe(t[o]));return lu(r)},da=e=>VT(e,Object.keys(e)),fo=e=>{let t=6151;for(let r=0;r<e.length;r++)t=T(E(e[r]))(t);return lu(t)};var F=Symbol.for("@effect/data/Equal");function O(){return arguments.length===1?e=>oD(e,arguments[0]):oD(arguments[0],arguments[1])}function oD(e,t){if(e===t)return!0;let r=typeof e;return r!==typeof t?!1:(r==="object"||r==="function")&&e!==null&&t!==null&&Ts(e)&&Ts(t)?E(e)===E(t)&&e[F](t):!1}var Ts=e=>typeof e=="object"&&e!==null&&F in e,mu=()=>(e,t)=>E(e)===E(t)&&O(e,t);var Wo=Symbol.for("@effect/io/Effect"),zo={_R:e=>e,_E:e=>e,_A:e=>e};var C=(e,t)=>{switch(t.length){case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let r=e;for(let o=0,n=t.length;o<n;o++)r=t[o](r);return r}}};var nD,sD,du=Symbol.for("@effect/data/Option"),$m=class{[(nD=Wo,F)](t){return iD(t)&&Vm(t)&&O(t.i0,this.i0)}[R](){return E(this.i0)}toString(){return`Some(${String(this.i0)})`}toJSON(){return{_tag:this._tag,value:this.i0}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}get[du](){return{_A:t=>t}}get value(){return this.i0}constructor(t){this.i0=t,this._tag="Some",this._id=du,this.i1=void 0,this.i2=void 0,this[nD]=zo}pipe(){return C(this,arguments)}},Gm=class{constructor(){this._tag="None",this._id=du,this.i0=void 0,this.i1=void 0,this.i2=void 0,this[sD]=zo}[(sD=Wo,F)](t){return iD(t)&&hu(t)}[R](){return E(this._tag)}toString(){return"None()"}toJSON(){return{_tag:this._tag}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}get[du](){return{_A:t=>t}}pipe(){return C(this,arguments)}},iD=e=>typeof e=="object"&&e!=null&&"_tag"in e&&(e._tag==="None"||e._tag==="Some")&&Ts(e),hu=e=>e._tag==="None",Vm=e=>e._tag==="Some",ks=new Gm,Is=e=>new $m(e);var cD,uD,gu=Symbol.for("@effect/data/Either"),Jm=class{[(cD=Wo,F)](t){return pD(t)&&xu(t)&&O(t.i0,this.i0)}[R](){return E(this.i0)}get right(){return this.i0}constructor(t){this.i0=t,this._tag="Right",this._id=gu,this.i1=void 0,this.i2=void 0,this[cD]=zo}get[gu](){return{_E:t=>t,_A:t=>t}}toString(){return`right(${String(this.i0)})`}toJSON(){return{_tag:this._tag,right:this.i0}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},Ym=class{[(uD=Wo,F)](t){return pD(t)&&Ps(t)&&O(t.i0,this.i0)}[R](){return E(this.i0)}get[gu](){return{_E:t=>t,_A:t=>t}}get left(){return this.i0}constructor(t){this.i0=t,this._tag="Left",this._id=gu,this.i1=void 0,this.i2=void 0,this[uD]=zo}toString(){return`left(${String(this.i0)})`}toJSON(){return{_tag:this._tag,left:this.i0}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},pD=e=>typeof e=="object"&&e!=null&&"_tag"in e&&(e._tag==="Left"||e._tag==="Right")&&Ts(e),Ps=e=>e._tag==="Left",xu=e=>e._tag==="Right",yu=e=>new Ym(e),bu=e=>new Jm(e),Zm=e=>xu(e)?ks:Is(e.left),Qm=e=>Ps(e)?ks:Is(e.right);var JT=Symbol.for("@effect/data/Either"),H=bu,z=yu;var ha=e=>de(e)&&"_id"in e&&e._id===JT,Re=Ps,Pr=xu;var ga=u(2,(e,{onLeft:t,onRight:r})=>Re(e)?t(e.left):r(e.right)),Du=ga({onLeft:I,onRight:I});var fD=u(2,(e,t)=>e+t),mD=u(2,(e,t)=>e*t),dD=u(2,(e,t)=>e-t),hD=u(2,(e,t)=>e/t);var vt=zb;var gD=Symbol.for("@effect/data/Option"),g=()=>ks,x=Is,Xm=e=>de(e)&&"_id"in e&&e._id===gD,j=hu,P=Vm,He=u(2,(e,{onNone:t,onSome:r})=>j(e)?t():r(e.value)),XT=e=>t=>P(e(t)),ek=e=>{for(let t of e)return x(t);return g()},xD=Qm,tk=Zm,J=u(2,(e,t)=>j(e)?t():e.value),bn=u(2,(e,t)=>j(e)?t():e),rk=u(2,(e,t)=>j(e)?te(t(),bu):te(e,yu)),ok=e=>{let t=g();for(t of e)if(P(t))return t;return t},Qe=e=>e==null?g():x(e),nk=e=>(...t)=>Qe(e(...t)),ed=J(qm),$e=J(iu),sk=e=>(...t)=>{try{return x(e(...t))}catch{return g()}},yD=u(2,(e,t)=>{if(P(e))return e.value;throw t()}),td=yD(()=>new Error("getOrThrow called on a None")),te=u(2,(e,t)=>j(e)?g():x(t(e.value))),bD=u(2,(e,t)=>te(e,()=>t)),ik=bD(void 0),ak=x(void 0),mr=u(2,(e,t)=>j(e)?g():t(e.value)),ck=u(2,(e,t)=>j(e)?g():Qe(t(e.value))),rd=mr(I),uk=u(2,(e,t)=>mr(e,()=>t)),pk=u(2,(e,t)=>r=>mr(e(r),t)),lk=u(2,(e,t)=>DD(e,()=>t)),DD=u(2,(e,t)=>mr(e,r=>te(t(r),()=>r))),SD=(e,t)=>P(e)&&P(t)?x([e.value,t.value]):g(),fk=(e,t)=>{if(j(e))return g();let r=[e.value];for(let o of t){if(j(o))return g();r.push(o.value)}return x(r)},ED=e=>{if(Symbol.iterator in e){let r=[];for(let o of e){if(j(o))return g();r.push(o.value)}return x(r)}let t={};for(let r of Object.keys(e)){let o=e[r];if(j(o))return g();t[r]=o.value}return x(t)},od=u(3,(e,t,r)=>te(SD(e,t),([o,n])=>r(o,n))),mk=u(2,(e,t)=>od(e,t,(r,o)=>r(o))),dk=u(3,(e,t,r)=>{let o=t;for(let n of e)P(n)&&(o=r(o,n.value));return o}),CD=e=>j(e)?[]:[e.value],hk=u(2,(e,t)=>{if(j(e))return[g(),g()];let r=t(e.value);return Ps(r)?[x(r.left),g()]:[g(),x(r.right)]}),_D=u(2,(e,t)=>j(e)?g():t(e.value)),gk=u(2,(e,t)=>_D(e,r=>t(r)?Is(r):ks)),xk=e=>Fs((t,r)=>t===r||(j(t)?j(r):j(r)?!1:e(t.value,r.value))),yk=e=>As((t,r)=>P(t)?P(r)?e(t.value,r.value):1:-1),ya=e=>u(2,(t,r)=>od(t,r,e)),OD=e=>t=>e(t)?x(t):g(),wD=e=>u(2,(t,r)=>j(t)?!1:e(t.value,r)),bk=mu(),nd=wD(bk),Dk=u(2,(e,t)=>j(e)?!1:t(e.value)),Sk=ya(fD),Ek=ya(mD),Ck=ya(dD),_k=ya(hD),Ok=e=>{let t=0;for(let r of e)P(r)&&(t+=r.value);return t},wk=e=>{let t=1;for(let r of e)if(P(r)){let o=r.value;if(o===0)return 0;t*=o}return t},Rk=u(2,(e,t)=>te(e,r=>({[t]:r}))),Fk=u(3,(e,t,r)=>te(e,o=>Object.assign({},o,{[t]:r(o)})));var Ak=u(3,(e,t,r)=>mr(e,o=>te(r(o),n=>Object.assign({},o,{[t]:n})))),vk=x({}),Mk=tD(),Tk=e=>{let t=e(Mk),r=t.next();if(r.done)return x(void 0);{let o=r.value.value;if(j(o))return o;for(;!r.done;)if(r=t.next(o.value),!r.done&&(o=r.value.value,j(o)))return o;return x(r.value)}};var sd=e=>e.length>0;var id=(e,t)=>{let r=Math.max(1,Math.floor(e)),o=[t(0)];for(let n=1;n<r;n++)o.push(t(n));return o};var re=e=>Array.isArray(e)?e:Array.from(e);var dr=u(2,(e,t)=>[t,...e]);var RD=u(2,(e,t)=>[...e,t]);var Ik=e=>e.length===0,ad=Ik,Su=sd,Nr=sd;var FD=(e,t)=>e<0||e>=t.length;var Pk=u(2,(e,t)=>{let r=Math.floor(t);return FD(r,e)?g():x(e[r])}),cd=u(2,(e,t)=>{let r=Math.floor(t);if(FD(r,e))throw new Error(`Index ${r} out of bounds`);return e[r]});var Eu=Pk(0),Fe=cd(0),AD=e=>Nr(e)?x(Nk(e)):g(),Nk=e=>e[e.length-1];var Jt=e=>e.slice(1);var ud=e=>Array.from(e).reverse();var Dn=u(2,(e,t)=>{let r=Array.from(e);return r.sort(t),r});var pd=u(2,(e,t)=>vD(e,t,(r,o)=>[r,o])),vD=u(3,(e,t,r)=>{let o=re(e),n=re(t);return Nr(o)&&Nr(n)?Lk(n,r)(o):[]});var Lk=u(3,(e,t,r)=>{let o=[r(Fe(e),Fe(t))],n=Math.min(e.length,t.length);for(let s=1;s<n;s++)o[s]=r(e[s],t[s]);return o});var qk=u(2,(e,t)=>{let r=[Fe(e)],o=Jt(e);for(let n of o)r.every(s=>!t(n,s))&&r.push(n);return r});var Sn=()=>[],Mt=e=>[e],mo=u(2,(e,t)=>e.map(t)),Ns=mo,Cu=u(2,(e,t)=>{if(ad(e))return[];let r=[];for(let o=0;o<e.length;o++)r.push(...t(e[o],o));return r});var _u=Cu(I);var ba=u(2,(e,t)=>{let r=re(e),o=[];for(let n=0;n<r.length;n++){let s=t(r[n],n);P(s)&&o.push(s.value)}return o});var MD=ba(I);var yt=u(3,(e,t,r)=>re(e).reduce((o,n,s)=>r(o,n,s),t)),Ou=u(3,(e,t,r)=>re(e).reduceRight((o,n,s)=>r(o,n,s),t));var ld=(e,t)=>{let r=[],o=e,n;for(;P(n=t(o));){let[s,i]=n.value;r.push(s),o=i}return r};var TD=Wb;var Hk=u(2,(e,t)=>{let r=re(e);return Nr(r)?qk(t)(r):[]}),kD=Hk(mu());var ho=u(2,(e,t)=>re(e).join(t));var ID,fd=Symbol.for("@effect/data/Context/Tag"),wu=class{[(ID=Wo,F)](t){return this===t}[R](){return Uo(this)}get[fd](){return{_S:t=>t,_I:t=>t}}constructor(t){this._tag="Tag",this.i0=void 0,this.i1=void 0,this.i2=void 0,this[ID]=zo;let r=Error.stackTraceLimit;if(Error.stackTraceLimit=3,this.creationError=new Error,Error.stackTraceLimit=r,typeof t<"u")return this.i0=t,V(t,()=>this)}get stack(){return this.creationError.stack}toString(){return JSON.stringify(this)}toJSON(){return{_tag:"Tag",identifier:this.i0,stack:this.stack}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}of(t){return t}context(t){return hd(this,t)}},md=Symbol.for("@effect/data/Context"),hr=class{[F](t){if(dd(t)&&this.unsafeMap.size===t.unsafeMap.size){for(let r of this.unsafeMap.keys())if(!t.unsafeMap.has(r)||!O(this.unsafeMap.get(r),t.unsafeMap.get(r)))return!1;return!0}return!1}[R](){return fu(this.unsafeMap.size)}constructor(t){this.unsafeMap=t,this._id=md,this._S=r=>r}pipe(){return C(this,arguments)}},jk=e=>{let t=new Error(`Service not found${e.i0?`: ${String(e.i0)}`:""}`);if(e.stack){let r=e.stack.split(`
`);if(r.length>2){let o=r[3].match(/at (.*)/);o&&(t.message=t.message+` (defined at ${o[1]})`)}}if(t.stack){let r=t.stack.split(`
`);r.splice(1,3),t.stack=r.join(`
`)}return t},dd=e=>typeof e=="object"&&e!==null&&"_id"in e&&e._id===md,PD=e=>typeof e=="object"&&e!==null&&fd in e,ND=()=>new hr(new Map),hd=(e,t)=>new hr(new Map([[e,t]])),LD=u(3,(e,t,r)=>{let o=new Map(e.unsafeMap);return o.set(t,r),new hr(o)}),gd=u(2,(e,t)=>{if(!e.unsafeMap.has(t))throw jk(t);return e.unsafeMap.get(t)}),qD=gd,HD=u(2,(e,t)=>e.unsafeMap.has(t)?x(e.unsafeMap.get(t)):g()),jD=u(2,(e,t)=>{let r=new Map(e.unsafeMap);for(let[o,n]of t.unsafeMap)r.set(o,n);return new hr(r)}),BD=(...e)=>t=>{let r=new Set(e),o=new Map;for(let[n,s]of t.unsafeMap.entries())r.has(n)&&o.set(n,s);return new hr(o)},UD=(...e)=>t=>{let r=new Map(t.unsafeMap);for(let o of e)r.delete(o);return new hr(r)};var bt=e=>new wu(e);var Uk=dd,WD=PD,Tt=ND,Ru=hd,ke=LD,Lr=qD,Ls=gd,xd=HD,En=jD,Wk=BD,zk=UD;var Kk=(()=>{let e={[R](){return fo(this)},[F](t){return Array.isArray(t)&&this.length===t.length?this.every((r,o)=>O(r,t[o])):!1}};return Object.setPrototypeOf(e,Array.prototype)})(),$k=(()=>{let e={[R](){return da(this)},[F](t){let r=Object.keys(this),o=Object.keys(t);if(r.length!==o.length)return!1;for(let n of r)if(!(n in t&&O(this[n],t[n])))return!1;return!0}};return Object.setPrototypeOf(e,Object.prototype)})(),go=e=>zD(Object.assign({},e)),zD=e=>Object.setPrototypeOf(e,$k),Gk=(...e)=>yd(e),Vk=e=>yd(e.slice(0)),yd=e=>Object.setPrototypeOf(e,Kk),Jk=()=>e=>go(e===void 0?{}:e);var KD=e=>t=>go(t===void 0?{_tag:e}:{...t,_tag:e}),Yk=e=>{class t extends $D{constructor(){super(...arguments),this._tag=e}}return t},$D=(()=>{class e{constructor(r){r&&Object.assign(this,r)}[R](){return da(this)}[F](r){let o=Object.keys(this),n=Object.keys(r);if(o.length!==n.length)return!1;for(let s of o)if(!(s in r&&O(this[s],r[s])))return!1;return!0}}return e})(),Zk=()=>KD;var YD=Symbol.for("@effect/data/Duration"),Xk=BigInt(1e3),GD=BigInt(1e9),VD=/^(-?\d+(?:\.\d+)?)\s+(nanos|micros|millis|seconds|minutes|hours|days|weeks)$/,Xe=e=>{if(ZD(e))return e;if(xn(e))return qs(e);if(vs(e))return Fu(e);{VD.lastIndex=0;let t=VD.exec(e);if(t){let[r,o,n]=t,s=Number(o);switch(n){case"nanos":return Fu(BigInt(o));case"micros":return t1(BigInt(o));case"millis":return qs(s);case"seconds":return Dd(s);case"minutes":return r1(s);case"hours":return o1(s);case"days":return n1(s);case"weeks":return s1(s)}}}throw new Error("Invalid duration input")},JD={_tag:"Millis",millis:0},e1={_tag:"Infinity"},gr=class{constructor(t){this._id=YD,xn(t)?isNaN(t)||t<0?this.value=JD:Number.isFinite(t)?Number.isInteger(t)?this.value={_tag:"Millis",millis:t}:this.value={_tag:"Nanos",nanos:BigInt(Math.round(t*1e6))}:this.value=e1:t<BigInt(0)?this.value=JD:this.value={_tag:"Nanos",nanos:t}}[R](){return da(this.value)}[F](t){return ZD(t)&&c1(this,t)}toString(){switch(this.value._tag){case"Millis":return`Duration("${this.value.millis} millis")`;case"Nanos":return`Duration("${this.value.nanos} nanos")`;case"Infinity":return"Duration(Infinity)"}}toJSON(){return this.value._tag==="Nanos"?{_tag:"Duration",value:{_tag:"Nanos",hrtime:i1(this)}}:{_tag:"Duration",value:this.value}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},ZD=e=>de(e)&&"_id"in e&&e._id===YD,bd=new gr(0);var Fu=e=>new gr(e),t1=e=>new gr(e*Xk),qs=e=>new gr(e),Dd=e=>new gr(e*1e3),r1=e=>new gr(e*6e4),o1=e=>new gr(e*36e5),n1=e=>new gr(e*864e5),s1=e=>new gr(e*6048e5),qr=e=>{let t=Xe(e);switch(t.value._tag){case"Infinity":return 1/0;case"Nanos":return Number(t.value.nanos)/1e6;case"Millis":return t.value.millis}};var i1=e=>{let t=Xe(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/GD),Number(t.value.nanos%GD)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}};var QD=u(3,(e,t,r)=>{let o=Xe(e),n=Xe(t);if(o.value._tag==="Infinity"||n.value._tag==="Infinity")return r.onMillis(qr(o),qr(n));if(o.value._tag==="Nanos"||n.value._tag==="Nanos"){let s=o.value._tag==="Nanos"?o.value.nanos:BigInt(Math.round(o.value.millis*1e6)),i=n.value._tag==="Nanos"?n.value.nanos:BigInt(Math.round(n.value.millis*1e6));return r.onNanos(s,i)}return r.onMillis(o.value.millis,n.value.millis)});var a1=(e,t)=>QD(e,t,{onMillis:(r,o)=>r===o,onNanos:(r,o)=>r===o});var Sd=u(2,(e,t)=>QD(e,t,{onMillis:(r,o)=>r>=o,onNanos:(r,o)=>r>=o})),c1=u(2,(e,t)=>a1(Xe(e),Xe(t)));var Ed=Math.pow(2,5),XD=Ed-1,eS=Ed/2,tS=Ed/4;function u1(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Ko(e,t){return t>>>e&XD}function $o(e){return 1<<e}function Au(e,t){return u1(e&t-1)}function _n(e,t,r,o){let n=o;if(!e){let s=o.length;n=new Array(s);for(let i=0;i<s;++i)n[i]=o[i]}return n[t]=r,n}function Cd(e,t,r){let o=r.length-1,n=0,s=0,i=r;if(e)n=s=t;else for(i=new Array(o);n<t;)i[s++]=r[n++];for(++n;n<=o;)i[s++]=r[n++];return e&&(i.length=o),i}function rS(e,t,r,o){let n=o.length;if(e){let c=n;for(;c>=t;)o[c--]=o[c];return o[t]=r,o}let s=0,i=0,a=new Array(n+1);for(;s<t;)a[i++]=o[s++];for(a[t]=r;s<n;)a[++i]=o[s++];return a}var vu=class{constructor(t,r){this.value=t,this.previous=r}};var Hr=class e{constructor(){this._tag="EmptyNode"}modify(t,r,o,n,s,i){let a=o(g());return j(a)?new e:(++i.value,new Hs(t,n,s,a))}};function Yt(e){return e instanceof Hr}function p1(e){return Yt(e)||e._tag==="LeafNode"||e._tag==="CollisionNode"}function Mu(e,t){return Yt(e)?!1:t===e.edit}var Hs=class e{constructor(t,r,o,n){this.edit=t,this.hash=r,this.key=o,this.value=n,this._tag="LeafNode"}modify(t,r,o,n,s,i){if(O(s,this.key)){let c=o(this.value);return c===this.value?this:j(c)?(--i.value,new Hr):Mu(this,t)?(this.value=c,this):new e(t,n,s,c)}let a=o(g());return j(a)?this:(++i.value,oS(t,r,this.hash,this,n,new e(t,n,s,a)))}},_d=class e{constructor(t,r,o){this.edit=t,this.hash=r,this.children=o,this._tag="CollisionNode"}modify(t,r,o,n,s,i){if(n===this.hash){let c=Mu(this,t),p=this.updateCollisionList(c,t,this.hash,this.children,o,s,i);return p===this.children?this:p.length>1?new e(t,this.hash,p):p[0]}let a=o(g());return j(a)?this:(++i.value,oS(t,r,this.hash,this,n,new Hs(t,n,s,a)))}updateCollisionList(t,r,o,n,s,i,a){let c=n.length;for(let l=0;l<c;++l){let f=n[l];if("key"in f&&O(i,f.key)){let d=f.value,h=s(d);return h===d?n:j(h)?(--a.value,Cd(t,l,n)):_n(t,l,new Hs(r,o,i,h),n)}}let p=s(g());return j(p)?n:(++a.value,_n(t,c,new Hs(r,o,i,p),n))}},Da=class e{constructor(t,r,o){this.edit=t,this.mask=r,this.children=o,this._tag="IndexedNode"}modify(t,r,o,n,s,i){let a=this.mask,c=this.children,p=Ko(r,n),l=$o(p),f=Au(a,l),d=a&l,h=Mu(this,t);if(!d){let B=new Hr().modify(t,r+5,o,n,s,i);return B?c.length>=eS?f1(t,p,B,a,c):new e(t,a|l,rS(h,f,B,c)):this}let S=c[f],w=S.modify(t,r+5,o,n,s,i);if(S===w)return this;let A=a,k;if(Yt(w)){if(A&=~l,!A)return new Hr;if(c.length<=2&&p1(c[f^1]))return c[f^1];k=Cd(h,f,c)}else k=_n(h,f,w,c);return h?(this.mask=A,this.children=k,this):new e(t,A,k)}},Od=class e{constructor(t,r,o){this.edit=t,this.size=r,this.children=o,this._tag="ArrayNode"}modify(t,r,o,n,s,i){let a=this.size,c=this.children,p=Ko(r,n),l=c[p],f=(l||new Hr).modify(t,r+5,o,n,s,i);if(l===f)return this;let d=Mu(this,t),h;if(Yt(l)&&!Yt(f))++a,h=_n(d,p,f,c);else if(!Yt(l)&&Yt(f)){if(--a,a<=tS)return l1(t,a,p,c);h=_n(d,p,new Hr,c)}else h=_n(d,p,f,c);return d?(this.size=a,this.children=h,this):new e(t,a,h)}};function l1(e,t,r,o){let n=new Array(t-1),s=0,i=0;for(let a=0,c=o.length;a<c;++a)if(a!==r){let p=o[a];p&&!Yt(p)&&(n[s++]=p,i|=1<<a)}return new Da(e,i,n)}function f1(e,t,r,o,n){let s=[],i=o,a=0;for(let c=0;i;++c)i&1&&(s[c]=n[a++]),i>>>=1;return s[t]=r,new Od(e,a+1,s)}function m1(e,t,r,o,n,s){if(r===n)return new _d(e,r,[s,o]);let i=Ko(t,r),a=Ko(t,n);if(i===a)return c=>new Da(e,$o(i)|$o(a),[c]);{let c=i<a?[o,s]:[s,o];return new Da(e,$o(i)|$o(a),c)}}function oS(e,t,r,o,n,s){let i,a=t;for(;;){let c=m1(e,a,r,o,n,s);if(typeof c=="function")i=new vu(c,i),a=a+5;else{let p=c;for(;i!=null;)p=i.value(p),i=i.previous;return p}}}var wd=Symbol.for("@effect/data/HashMap"),Sa=class{constructor(t,r,o,n){this._editable=t,this._edit=r,this._root=o,this._size=n,this._id=wd}[Symbol.iterator](){return new Tu(this,(t,r)=>[t,r])}[R](){let t=E("HashMap");for(let r of this)t^=T(E(r[0]))(E(r[1]));return t}[F](t){if(aS(t)){if(t._size!==this._size)return!1;for(let r of this){let o=Iu(r[0],E(r[0]))(t);if(j(o))return!1;if(!O(r[1],o.value))return!1}return!0}return!1}toString(){return`HashMap(${Array.from(this).map(([t,r])=>`[${String(t)}, ${String(r)}]`).join(", ")})`}toJSON(){return{_tag:"HashMap",values:Array.from(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},Tu=class e{constructor(t,r){this.map=t,this.f=r,this.v=nS(this.map._root,this.f,void 0)}next(){if(j(this.v))return{done:!0,value:void 0};let t=this.v.value;return this.v=ku(t.cont),{done:!1,value:t.value}}[Symbol.iterator](){return new e(this.map,this.f)}},ku=e=>e?sS(e[0],e[1],e[2],e[3],e[4]):g(),nS=(e,t,r=void 0)=>{switch(e._tag){case"LeafNode":return P(e.value)?x({value:t(e.key,e.value.value),cont:r}):ku(r);case"CollisionNode":case"ArrayNode":case"IndexedNode":{let o=e.children;return sS(o.length,o,0,t,r)}default:return ku(r)}},sS=(e,t,r,o,n)=>{for(;r<e;){let s=t[r++];if(s&&!Yt(s))return nS(s,o,[e,t,r,o,n])}return ku(n)},Bs=()=>new Sa(!1,0,new Hr,0),iS=(...e)=>Rd(e),Rd=e=>{let t=Nu(Bs());for(let r of e)On(r[0],r[1])(t);return pS(t)},aS=e=>de(e)&&"_id"in e&&e._id===wd,cS=e=>e&&Yt(e._root),uS=u(2,(e,t)=>Iu(e,t,E(t))),Iu=u(3,(e,t,r)=>{let o=e._root,n=0;for(;;)switch(o._tag){case"LeafNode":return O(t,o.key)?o.value:g();case"CollisionNode":{if(r===o.hash){let s=o.children;for(let i=0,a=s.length;i<a;++i){let c=s[i];if("key"in c&&O(t,c.key))return c.value}}return g()}case"IndexedNode":{let s=Ko(n,r),i=$o(s);if(o.mask&i){o=o.children[Au(o.mask,i)],n+=5;break}return g()}case"ArrayNode":{if(o=o.children[Ko(n,r)],o){n+=5;break}return g()}default:return g()}});var Fd=u(2,(e,t)=>P(Iu(e,t,E(t))));var On=u(3,(e,t,r)=>Ad(e,t,()=>x(r))),h1=u(3,(e,t,r)=>e._editable?(e._root=t,e._size=r,e):t===e._root?e:new Sa(e._editable,e._edit,t,r)),Pu=e=>new Tu(e,t=>t);var Us=e=>e._size,Nu=e=>new Sa(!0,e._edit+1,e._root,e._size),pS=e=>(e._editable=!1,e);var Ad=u(3,(e,t,r)=>lS(e,t,E(t),r)),lS=u(4,(e,t,r,o)=>{let n={value:e._size},s=e._root.modify(e._editable?e._edit:NaN,0,o,r,t,n);return h1(s,n.value)(e)});var Ea=u(2,(e,t)=>Ad(e,t,g));var fS=u(2,(e,t)=>Ws(e,Bs(),(r,o,n)=>On(r,n,t(o,n))));var Lu=u(2,(e,t)=>Ws(e,void 0,(r,o,n)=>t(o,n))),Ws=u(3,(e,t,r)=>{let o=e._root;if(o._tag==="LeafNode")return P(o.value)?r(t,o.value.value,o.key):t;if(o._tag==="EmptyNode")return t;let n=[o.children],s;for(;s=n.pop();)for(let i=0,a=s.length;i<a;){let c=s[i++];c&&!Yt(c)&&(c._tag==="LeafNode"?P(c.value)&&(t=r(t,c.value.value,c.key)):n.push(c.children))}return t});var vd=Symbol.for("@effect/data/HashSet"),zs=class{constructor(t){this._keyMap=t,this._id=vd}[Symbol.iterator](){return Pu(this._keyMap)}[R](){return T(E(this._keyMap))(E("HashSet"))}[F](t){return dS(t)?Us(this._keyMap)===Us(t._keyMap)&&O(this._keyMap,t._keyMap):!1}toString(){return`HashSet(${Array.from(this).map(String).join(", ")})`}toJSON(){return{_tag:"HashSet",values:Array.from(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},dS=e=>de(e)&&"_id"in e&&e._id===vd,Ca=()=>new zs(Bs()),hS=e=>{let t=qu(Ca());for(let r of e)Ks(t,r);return Hu(t)},gS=(...e)=>{let t=qu(Ca());for(let r of e)Ks(t,r);return Hu(t)},xS=u(2,(e,t)=>Fd(e._keyMap,t));var yS=e=>Us(e._keyMap),qu=e=>new zs(Nu(e._keyMap)),Hu=e=>(e._keyMap._editable=!1,e),Md=u(2,(e,t)=>{let r=qu(e);return t(r),Hu(r)}),Ks=u(2,(e,t)=>e._keyMap._editable?(On(t,!0)(e._keyMap),e):new zs(On(t,!0)(e._keyMap))),Td=u(2,(e,t)=>e._keyMap._editable?(Ea(t)(e._keyMap),e):new zs(Ea(t)(e._keyMap))),bS=u(2,(e,t)=>Md(e,r=>{for(let o of t)Td(r,o)}));var DS=u(2,(e,t)=>Md(Ca(),r=>{SS(e,o=>Ks(r,o));for(let o of t)Ks(r,o)}));var SS=u(2,(e,t)=>Lu(e._keyMap,(r,o)=>t(o))),ES=u(3,(e,t,r)=>Ws(e._keyMap,t,(o,n,s)=>r(o,s)));var xo=Bs,CS=iS,ju=Rd,_S=cS,_a=uS;var jr=On,kd=Pu;var Bu=Us;var OS=Ea;var wS=fS;var RS=Lu,Id=Ws;var x1=Symbol.for("@effect/data/MutableRef"),Pd=class{constructor(t){this.current=t,this._T=r=>r,this._id=x1}toString(){return`MutableRef(${String(this.current)})`}toJSON(){return{_tag:"MutableRef",current:this.current}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},Dt=e=>new Pd(e),Uu=u(3,(e,t,r)=>O(t,e.current)?(e.current=r,!0):!1);var It=e=>e.current;var FS=e=>b1(e,t=>t+1),Zt=u(2,(e,t)=>(e.current=t,e)),y1=u(2,(e,t)=>(e.current=t,e.current)),Nd=u(2,(e,t)=>Zt(e,t(It(e)))),b1=u(2,(e,t)=>y1(e,t(It(e))));var D1=Symbol.for("@effect/data/MutableHashMap"),Ld=class{constructor(){this._id=D1,this.backingMap=Dt(xo())}[Symbol.iterator](){return this.backingMap.current[Symbol.iterator]()}toString(){return`MutableHashMap(${Array.from(this).map(([t,r])=>`[${String(t)}, ${String(r)}]`).join(", ")})`}toJSON(){return{_tag:"MutableHashMap",values:Array.from(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},Fn=()=>new Ld;var Ce=u(2,(e,t)=>_a(e.backingMap.current,t)),xr=u(2,(e,t)=>P(Ce(e,t)));var An=u(2,(e,t)=>(Nd(e.backingMap,OS(t)),e)),St=u(3,(e,t,r)=>(Nd(e.backingMap,jr(t,r)),e)),Wu=e=>Bu(It(e.backingMap));var AS=Symbol.for("@effect/data/Chunk");function S1(e,t,r,o,n){for(let s=t;s<Math.min(e.length,t+n);s++)r[o+s-t]=e[s];return r}var vS=[],E1=e=>Fs((t,r)=>at(t).every((o,n)=>e(o,Go(r,n)))),C1=E1(O),ce=class{constructor(t){switch(this.backing=t,this._id=AS,t._tag){case"IEmpty":{this.length=0,this.depth=0,this.left=this,this.right=this;break}case"IConcat":{this.length=t.left.length+t.right.length,this.depth=1+Math.max(t.left.depth,t.right.depth),this.left=t.left,this.right=t.right;break}case"IArray":{this.length=t.array.length,this.depth=0,this.left=yr,this.right=yr;break}case"ISingleton":{this.length=1,this.depth=0,this.left=yr,this.right=yr;break}case"ISlice":{this.length=t.length,this.depth=t.chunk.depth+1,this.left=yr,this.right=yr;break}}}toString(){return`Chunk(${at(this).map(String).join(", ")})`}toJSON(){return{_tag:"Chunk",values:at(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}[F](t){return MS(t)&&C1(this,t)}[R](){return fo(at(this))}[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return vS[Symbol.iterator]();default:return at(this)[Symbol.iterator]()}}pipe(){return C(this,arguments)}},MS=e=>de(e)&&"_id"in e&&e._id===AS,yr=new ce({_tag:"IEmpty"}),ct=()=>yr;var Ae=e=>new ce({_tag:"ISingleton",a:e}),Br=e=>MS(e)?e:new ce({_tag:"IArray",array:re(e)}),Hd=(e,t,r)=>{switch(e.backing._tag){case"IArray":{S1(e.backing.array,0,t,r,e.length);break}case"IConcat":{Hd(e.left,t,r),Hd(e.right,t,r+e.left.length);break}case"ISingleton":{t[r]=e.backing.a;break}case"ISlice":{let o=0,n=r;for(;o<e.length;)t[n]=Go(e,o),o+=1,n+=1;break}}},at=e=>{switch(e.backing._tag){case"IEmpty":return vS;case"IArray":return e.backing.array;default:{let t=new Array(e.length);return Hd(e,t,0),e.backing={_tag:"IArray",array:t},e.left=yr,e.right=yr,e.depth=0,t}}},yo=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return new ce({_tag:"IArray",array:ud(e.backing.array)});case"IConcat":return new ce({_tag:"IConcat",left:yo(e.backing.right),right:yo(e.backing.left)});case"ISlice":return Pt(ud(at(e)))}},_1=u(2,(e,t)=>t<0||t>=e.length?g():x(Go(e,t))),Pt=e=>new ce({_tag:"IArray",array:e});var Go=u(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(t!==0)throw new Error("Index out of bounds");return e.backing.a}case"IArray":{if(t>=e.length||t<0)throw new Error("Index out of bounds");return e.backing.array[t]}case"IConcat":return t<e.left.length?Go(e.left,t):Go(e.right,t-e.left.length);case"ISlice":return Go(e.backing.chunk,t+e.backing.offset)}}),zu=u(2,(e,t)=>TS(e,Ae(t))),Ie=u(2,(e,t)=>TS(Ae(t),e)),jd=u(2,(e,t)=>{if(t<=0)return yr;if(t>=e.length)return e;switch(e.backing._tag){case"ISlice":return new ce({_tag:"ISlice",chunk:e.backing.chunk,length:t,offset:e.backing.offset});case"IConcat":return t>e.left.length?new ce({_tag:"IConcat",left:e.left,right:jd(e.right,t-e.left.length)}):jd(e.left,t);default:return new ce({_tag:"ISlice",chunk:e,offset:0,length:t})}}),$s=u(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return yr;switch(e.backing._tag){case"ISlice":return new ce({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":return t>e.left.length?$s(e.right,t-e.left.length):new ce({_tag:"IConcat",left:$s(e.left,t),right:e.right});default:return new ce({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}});var br=u(2,(e,t)=>{if(e.backing._tag==="IEmpty")return t;if(t.backing._tag==="IEmpty")return e;let r=t.depth-e.depth;if(Math.abs(r)<=1)return new ce({_tag:"IConcat",left:e,right:t});if(r<-1)if(e.left.depth>=e.right.depth){let o=br(e.right,t);return new ce({_tag:"IConcat",left:e.left,right:o})}else{let o=br(e.right.right,t);if(o.depth===e.depth-3){let n=new ce({_tag:"IConcat",left:e.right.left,right:o});return new ce({_tag:"IConcat",left:e.left,right:n})}else{let n=new ce({_tag:"IConcat",left:e.left,right:e.right.left});return new ce({_tag:"IConcat",left:n,right:o})}}else if(t.right.depth>=t.left.depth){let o=br(e,t.left);return new ce({_tag:"IConcat",left:o,right:t.right})}else{let o=br(e,t.left.left);if(o.depth===t.depth-3){let n=new ce({_tag:"IConcat",left:o,right:t.left.right});return new ce({_tag:"IConcat",left:n,right:t.right})}else{let n=new ce({_tag:"IConcat",left:t.left.right,right:t.right});return new ce({_tag:"IConcat",left:o,right:n})}}}),TS=u(2,(e,t)=>br(e,t));var Gs=e=>e.length===0,et=e=>e.length>0,vn=_1(0),Mn=e=>Go(e,0),tt=Mn;var kS=e=>Go(e,e.length-1),Bd=u(2,(e,t)=>e.backing._tag==="ISingleton"?Ae(t(e.backing.a,0)):Pt(mo((r,o)=>t(r,o))(at(e))));var Ku=u(2,(e,t)=>Pt(Dn(at(e),t)));var O1=u(2,(e,t)=>[jd(e,t),$s(e,t)]);var IS=u(2,(e,t)=>{let r=0;for(let o of at(e)){if(t(o))break;r++}return O1(e,r)});var rt=e=>$s(e,1);var PS=e=>Pt(kD(at(e)));var w1=Symbol.for("@effect/data/MutableList"),Ud=class{constructor(){this._id=w1,this.head=void 0,this.tail=void 0,this._length=0}[Symbol.iterator](){let t=!1,r=this.head;return{next(){if(t)return this.return();if(r==null)return t=!0,this.return();let o=r.value;return r=r.next,{done:t,value:o}},return(o){return t||(t=!0),{done:!0,value:o}}}}toString(){return`MutableList(${Array.from(this).map(String).join(", ")})`}toJSON(){return{_tag:"MutableList",values:Array.from(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}},Wd=class{constructor(t){this.value=t,this.removed=!1,this.prev=void 0,this.next=void 0}},NS=()=>new Ud;var LS=e=>zd(e)===0,zd=e=>e._length;var qS=u(2,(e,t)=>{let r=new Wd(t);return e.head===void 0&&(e.head=r),e.tail===void 0||(e.tail.next=r,r.prev=e.tail),e.tail=r,e._length+=1,e}),HS=e=>{let t=e.head;if(t!==void 0)return R1(e,t),t.value};var R1=(e,t)=>{t.removed||(t.removed=!0,t.prev!==void 0&&t.next!==void 0?(t.prev.next=t.next,t.next.prev=t.prev):t.prev!==void 0?(e.tail=t.prev,t.prev.next=void 0):t.next!==void 0?(e.head=t.next,t.next.prev=void 0):(e.tail=void 0,e.head=void 0),e._length>0&&(e._length-=1))};var A1=Symbol.for("@effect/data/MutableQueue"),$d=Symbol.for("@effect/data/mutable/MutableQueue/Empty"),Kd=class{constructor(t=void 0){this.capacity=t,this._tag="Bounded",this._id=A1,this.queue=NS()}[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()}toString(){return`MutableQueue(${Array.from(this).map(String).join(", ")})`}toJSON(){return{_tag:"MutableQueue",values:Array.from(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}pipe(){return C(this,arguments)}};var jS=()=>new Kd;var BS=u(2,(e,t)=>{let r=zd(e.queue);return e.capacity!==void 0&&r===e.capacity?!1:(qS(t)(e.queue),!0)});var US=u(2,(e,t)=>LS(e.queue)?t:HS(e.queue));var Vs=Symbol.for("@effect/data/Differ/ContextPatch");function Ur(e){return e}var Gd=class{constructor(){this._tag="Empty",this._Input=Ur,this._Output=Ur,this._id=Vs}[R](){return qe("ContextPatch(Empty)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id}},Vd=class{constructor(t,r){this.first=t,this.second=r,this._tag="AndThen",this._id=Vs,this._Input=Ur,this._Output=Ur}[R](){return qe("ContextPatch(AndThen)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.first,t.first)&&O(this.second,t.second)}},Jd=class{constructor(t,r){this.tag=t,this.service=r,this._tag="AddService",this._id=Vs,this._Input=Ur,this._Output=Ur}[R](){return qe("ContextPatch(AddService)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.tag,t.tag)&&O(this.service,t.service)}},Yd=class{constructor(t){this.tag=t,this._tag="RemoveService",this._id=Vs,this._Input=Ur,this._Output=Ur}[R](){return qe("ContextPatch(RemoveService)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.tag,t.tag)}},Zd=class{constructor(t,r){this.tag=t,this.update=r,this._tag="UpdateService",this._id=Vs,this._Input=Ur,this._Output=Ur}[R](){return qe("ContextPatch(AndThen)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.tag,t.tag)&&O(this.update,t.update)}},Qd=()=>new Gd,WS=(e,t)=>{let r=new Map(e.unsafeMap),o=Qd();for(let[n,s]of t.unsafeMap.entries())if(r.has(n)){let i=r.get(n);r.delete(n),O(i,s)||(o=Oa(new Zd(n,()=>s))(o))}else r.delete(n),o=Oa(new Jd(n,s))(o);for(let[n]of r.entries())o=Oa(new Yd(n))(o);return o},Oa=u(2,(e,t)=>new Vd(e,t)),zS=u(2,(e,t)=>{let r=!1,o=Ae(e),n=new Map(t.unsafeMap);for(;et(o);){let i=tt(o),a=rt(o);switch(i._tag){case"Empty":{o=a;break}case"AddService":{n.set(i.tag,i.service),o=a;break}case"AndThen":{o=Ie(Ie(a,i.second),i.first);break}case"RemoveService":{n.delete(i.tag),o=a;break}case"UpdateService":{n.set(i.tag,i.update(n.get(i.tag))),r=!0,o=a;break}}}if(!r)return new hr(n);let s=new Map;for(let[i]of t.unsafeMap)n.has(i)&&(s.set(i,n.get(i)),n.delete(i));for(let[i,a]of n)s.set(i,a);return new hr(s)});var $u=Qd,KS=WS,$S=Oa,GS=zS;var ot=Ca,Et=hS,bo=gS,JS=xS;var Do=yS;var Wr=Ks,Xd=Td,eh=bS;var nt=DS;var Tn=ES;var wa=Symbol.for("@effect/data/Differ/HashSetPatch");function Vu(e){return e}var th=class{constructor(){this._tag="Empty",this._Value=Vu,this._id=wa}[R](){return qe("HashSetPatch(Empty)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id}},rh=class{constructor(t,r){this.first=t,this.second=r,this._tag="AndThen",this._Value=Vu,this._id=wa}[R](){return qe("HashSetPatch(AndThen)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.first,t.first)&&O(this.second,t.second)}},oh=class{constructor(t){this.value=t,this._tag="Add",this._Value=Vu,this._id=wa}[R](){return qe("HashSetPatch(Add)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.value,t.value)}},nh=class{constructor(t){this.value=t,this._tag="Remove",this._Value=Vu,this._id=wa}[R](){return qe("HashSetPatch(Remove)")}[F](t){return typeof t=="object"&&t!==null&&"_id"in t&&t._id===this._id&&"_tag"in t&&t._tag===this._id&&O(this.value,t.value)}},sh=()=>new th,YS=(e,t)=>{let[r,o]=Tn([e,sh()],([n,s],i)=>JS(i)(n)?[Xd(i)(n),s]:[n,Gu(new oh(i))(s)])(t);return Tn(o,(n,s)=>Gu(new nh(s))(n))(r)},Gu=u(2,(e,t)=>new rh(e,t)),ZS=u(2,(e,t)=>{let r=t,o=Ae(e);for(;et(o);){let n=tt(o),s=rt(o);switch(n._tag){case"Empty":{o=s;break}case"AndThen":{o=Ie(n.first)(Ie(n.second)(s));break}case"Add":{r=Wr(n.value)(r),o=s;break}case"Remove":r=Xd(n.value)(r),o=s}}return r});var Ju=sh,QS=YS,XS=Gu,eE=ZS;var rE=Symbol.for("@effect/data/Differ"),ih=class{constructor(t){this._id=rE,this._P=I,this._V=I,this.empty=t.empty,this.diff=t.diff,this.combine=t.combine,this.patch=t.patch}},Ra=e=>new ih(e),oE=()=>Ra({empty:$u(),combine:(e,t)=>$S(t)(e),diff:(e,t)=>KS(e,t),patch:(e,t)=>GS(t)(e)});var nE=()=>Ra({empty:Ju(),combine:(e,t)=>XS(t)(e),diff:(e,t)=>QS(e,t),patch:(e,t)=>eE(t)(e)});var sE=()=>iE((e,t)=>t),iE=e=>Ra({empty:I,combine:(t,r)=>t===I?r:r===I?t:o=>r(t(o)),diff:(t,r)=>O(t,r)?I:ws(r),patch:(t,r)=>e(r,t(r))});var aE=u(3,(e,t,r)=>e.diff(t,r)),cE=u(3,(e,t,r)=>e.combine(t,r)),uE=u(3,(e,t,r)=>e.patch(t,r)),Yu=Ra,pE=oE;var lE=nE;var fE=sE;var uh=Symbol.for("@effect/data/List"),Fa=e=>Array.from(e),P1=e=>Ub(TD(e),Fa),N1=P1(O),Js=class{constructor(t,r){this.head=t,this.tail=r,this._tag="Cons",this._id=uh}toString(){return`List.Cons(${Fa(this).map(String).join(", ")})`}toJSON(){return{_tag:"List.Cons",values:Fa(this)}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}[F](t){return mE(t)&&this._tag===t._tag&&N1(this,t)}[R](){return fo(Fa(this))}[Symbol.iterator](){let t=!1,r=this;return{next(){if(t)return this.return();if(r._tag==="Nil")return t=!0,this.return();let o=r.head;return r=r.tail,{done:t,value:o}},return(o){return t||(t=!0),{done:!0,value:o}}}}pipe(){return C(this,arguments)}},ch=class{constructor(){this._tag="Nil",this._id=uh}toString(){return"List.Nil"}toJSON(){return{_tag:"List.Nil"}}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}[R](){return fo(Fa(this))}[F](t){return mE(t)&&this._tag===t._tag}[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}}pipe(){return C(this,arguments)}},mE=e=>de(e)&&"_id"in e&&e._id===uh,Ct=e=>e._tag==="Nil",Aa=e=>e._tag==="Cons";var dE=new ch,L1=()=>dE,So=(e,t)=>new Js(e,t),Dr=L1,va=e=>new Js(e,dE);var hE=u(2,(e,t)=>q1(t,e));var Vo=u(2,(e,t)=>So(t,e)),q1=u(2,(e,t)=>{if(Ct(e))return t;if(Ct(t))return e;{let r=new Js(t.head,e),o=r,n=t.tail;for(;!Ct(n);){let s=new Js(n.head,e);o.tail=s,o=s,n=n.tail}return r}});var gE=u(2,(e,t)=>{let r=e;for(;!Ct(r);){if(t(r.head))return x(r.head);r=r.tail}return g()});var Zu=e=>Ct(e)?g():x(e.head);var xE=u(3,(e,t,r)=>{let o=t,n=e;for(;!Ct(n);)o=r(o,n.head),n=n.tail;return o});var yE=e=>{let t=Dr(),r=e;for(;!Ct(r);)t=Vo(t,r.head),r=r.tail;return t};var bE,DE,SE,Xu="@effect/io/Fiber/Id",Jo=Symbol.for(Xu),Ma="None",ph="Runtime",lh="Composite",fh=class{constructor(){this[bE]=Jo,this._tag=Ma}[(bE=Jo,R)](){return T(E(this._tag))(E(Xu))}[F](t){return tp(t)&&t._tag===Ma}},mh=class{constructor(t,r){this.id=t,this.startTimeMillis=r,this[DE]=Jo,this._tag=ph}[(DE=Jo,R)](){return T(E(this.startTimeMillis))(T(E(this.id))(T(E(this._tag))(E(Xu))))}[F](t){return tp(t)&&t._tag===ph&&this.id===t.id&&this.startTimeMillis===t.startTimeMillis}},dh=class{constructor(t,r){this.left=t,this.right=r,this[SE]=Jo,this._tag=lh}[(SE=Jo,R)](){return T(E(this.right))(T(E(this.left))(T(E(this._tag))(E(Xu))))}[F](t){return tp(t)&&t._tag===lh&&O(this.left,t.left)&&O(this.right,t.right)}},ep=new fh;var tp=e=>typeof e=="object"&&e!=null&&Jo in e;var CE=u(2,(e,t)=>e._tag===Ma?t:t._tag===Ma?e:new dh(e,t));var Qu=e=>{switch(e._tag){case Ma:return ot();case ph:return bo(e.id);case lh:return nt(Qu(e.right))(Qu(e.left))}},EE=V(Symbol.for("@effect/io/Fiber/Id/_fiberCounter"),()=>Dt(0));var rp=e=>Array.from(Qu(e)).map(r=>`#${r}`).join(",");var _E=()=>{let e=It(EE);return Zt(e+1)(EE),new mh(e,new Date().getTime())};var ut=ep;var hh=CE;var wE=rp;var op=_E;var kn="Die",Yo="Empty",In="Fail",Qs="Interrupt",Pn="Annotated",Nn="Parallel",Ln="Sequential";var TE="@effect/io/Cause",Dh=Symbol.for(TE),j1={_E:e=>e},Hn={[Dh]:j1,[R](){return T(E(U1(this)))(E(TE))},[F](e){return ap(e)&&B1(this,e)},pipe(){return C(this,arguments)},toJSON(){return{_tag:"Cause",errors:lp(this)}},toString(){return _o(this)},[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}},pt=(()=>{let e=Object.create(Hn);return e._tag=Yo,e})(),jn=e=>{let t=Object.create(Hn);return t._tag=In,t.error=e,t},Ge=e=>{let t=Object.create(Hn);return t._tag=kn,t.defect=e,t},Sr=e=>{let t=Object.create(Hn);return t._tag=Qs,t.fiberId=e,t},Zo=(e,t)=>{let r=Object.create(Hn);return r._tag=Pn,r.cause=e,r.annotation=t,r},je=(e,t)=>{let r=Object.create(Hn);return r._tag=Nn,r.left=e,r.right=t,r},ve=(e,t)=>{let r=Object.create(Hn);return r._tag=Ln,r.left=e,r.right=t,r},ap=e=>typeof e=="object"&&e!=null&&Dh in e,Sh=e=>e._tag===Yo;var cp=e=>e._tag===kn;var Eh=e=>e._tag===Yo?!0:qn(e,!0,(t,r)=>{switch(r._tag){case Yo:return x(t);case kn:case In:case Qs:return x(!1);default:return g()}});var Qo=e=>pp(void 0,z1)(e),Ta=e=>yo(qn(e,ct(),(t,r)=>r._tag===In?x(Ie(r.error)(t)):g())),up=e=>yo(qn(e,ct(),(t,r)=>r._tag===kn?x(Ie(r.defect)(t)):g())),ka=e=>qn(e,ot(),(t,r)=>r._tag===Qs?x(Wr(r.fiberId)(t)):g()),kE=e=>Ia(e,t=>t._tag===In?x(t.error):g()),Eo=e=>{let t=kE(e);switch(t._tag){case"None":return H(e);case"Some":return z(t.value)}};var Ch=e=>ei(e,{onEmpty:g(),onFail:()=>g(),onDie:t=>x(Ge(t)),onInterrupt:()=>g(),onAnnotated:(t,r)=>te(o=>Zo(o,r))(t),onSequential:(t,r)=>P(t)&&P(r)?x(ve(t.value,r.value)):P(t)&&j(r)?x(t.value):j(t)&&P(r)?x(r.value):g(),onParallel:(t,r)=>P(t)&&P(r)?x(je(t.value,r.value)):P(t)&&j(r)?x(t.value):j(t)&&P(r)?x(r.value):g()}),IE=e=>ei(e,{onEmpty:g(),onFail:t=>x(Ge(t)),onDie:t=>x(Ge(t)),onInterrupt:()=>g(),onAnnotated:(t,r)=>te(o=>Zo(o,r))(t),onSequential:(t,r)=>P(t)&&P(r)?x(ve(t.value,r.value)):P(t)&&j(r)?x(t.value):j(t)&&P(r)?x(r.value):g(),onParallel:(t,r)=>P(t)&&P(r)?x(je(t.value,r.value)):P(t)&&j(r)?x(t.value):j(t)&&P(r)?x(r.value):g()});var Xs=e=>ei(e,{onEmpty:pt,onFail:()=>pt,onDie:t=>Ge(t),onInterrupt:t=>Sr(t),onAnnotated:(t,r)=>Sh(t)?t:Zo(t,r),onSequential:ve,onParallel:je}),PE=e=>ei(e,{onEmpty:pt,onFail:t=>Ge(t),onDie:t=>Ge(t),onInterrupt:t=>Sr(t),onAnnotated:(t,r)=>Sh(t)?t:Zo(t,r),onSequential:(t,r)=>ve(t,r),onParallel:(t,r)=>je(t,r)});var NE=u(2,(e,t)=>ei(e,{onEmpty:pt,onFail:r=>t(r),onDie:r=>Ge(r),onInterrupt:r=>Sr(r),onAnnotated:(r,o)=>Zo(r,o),onSequential:(r,o)=>ve(r,o),onParallel:(r,o)=>je(r,o)})),_h=e=>NE(e,I);var B1=(e,t)=>{let r=Ae(e),o=Ae(t);for(;et(r)&&et(o);){let[n,s]=qn([ot(),ct()],([c,p],l)=>{let[f,d]=gh(l);return x([nt(f)(c),br(d)(p)])})(tt(r)),[i,a]=qn([ot(),ct()],([c,p],l)=>{let[f,d]=gh(l);return x([nt(f)(c),br(d)(p)])})(tt(o));if(!O(n,i))return!1;r=s,o=a}return!0},U1=e=>W1(Ae(e),ct()),W1=(e,t)=>{for(;;){let[r,o]=yt([ot(),ct()],([s,i],a)=>{let[c,p]=gh(a);return[nt(c)(s),br(p)(i)]})(e),n=Do(r)>0?Ie(r)(t):t;if(Gs(o))return yo(n);e=o,t=n}throw new Error("BUG: Cause.flattenCauseLoop - please report an issue at https://github.com/Effect-TS/io/issues")};var Ia=u(2,(e,t)=>{let r=[e];for(;r.length>0;){let o=r.pop(),n=t(o);switch(n._tag){case"None":{switch(o._tag){case Ln:case Nn:{r.push(o.right),r.push(o.left);break}case Pn:{r.push(o.cause);break}}break}case"Some":return n}}return g()});var gh=e=>{let t=e,r=[],o=ot(),n=ct();for(;t!==void 0;)switch(t._tag){case Yo:{if(r.length===0)return[o,n];t=r.pop();break}case In:{if(r.length===0)return[Wr(t.error)(o),n];o=Wr(t.error)(o),t=r.pop();break}case kn:{if(r.length===0)return[Wr(t.defect)(o),n];o=Wr(t.defect)(o),t=r.pop();break}case Qs:{if(r.length===0)return[Wr(t.fiberId)(o),n];o=Wr(t.fiberId)(o),t=r.pop();break}case Pn:{t=t.cause;break}case Ln:{switch(t.left._tag){case Yo:{t=t.right;break}case Ln:{t=ve(t.left.left,ve(t.left.right,t.right));break}case Nn:{t=je(ve(t.left.left,t.right),ve(t.left.right,t.right));break}case Pn:{t=ve(t.left.cause,t.right);break}default:{n=Ie(t.right)(n),t=t.left;break}}break}case Nn:{r.push(t.right),t=t.left;break}}throw new Error("BUG: Cause.evaluateCauseLoop - please report an issue at https://github.com/Effect-TS/io/issues")};var z1={emptyCase:Ir,failCase:Gt,dieCase:Gt,interruptCase:Ir,annotatedCase:(e,t)=>t,sequentialCase:(e,t,r)=>t&&r,parallelCase:(e,t,r)=>t&&r};var RE="SequentialCase",FE="ParallelCase",AE="AnnotatedCase",ei=u(2,(e,{onAnnotated:t,onDie:r,onEmpty:o,onFail:n,onInterrupt:s,onParallel:i,onSequential:a})=>pp(e,void 0,{emptyCase:()=>o,failCase:(c,p)=>n(p),dieCase:(c,p)=>r(p),interruptCase:(c,p)=>s(p),annotatedCase:(c,p,l)=>t(p,l),sequentialCase:(c,p,l)=>a(p,l),parallelCase:(c,p,l)=>i(p,l)})),qn=u(3,(e,t,r)=>{let o=t,n=e,s=[];for(;n!==void 0;){let i=r(o,n);switch(o=P(i)?i.value:o,n._tag){case Ln:{s.push(n.right),n=n.left;break}case Nn:{s.push(n.right),n=n.left;break}case Pn:{n=n.cause;break}default:{n=void 0;break}}n===void 0&&s.length>0&&(n=s.pop())}return o}),pp=u(3,(e,t,r)=>{let o=[e],n=[];for(;o.length>0;){let i=o.pop();switch(i._tag){case Yo:{n.push(H(r.emptyCase(t)));break}case In:{n.push(H(r.failCase(t,i.error)));break}case kn:{n.push(H(r.dieCase(t,i.defect)));break}case Qs:{n.push(H(r.interruptCase(t,i.fiberId)));break}case Pn:{o.push(i.cause),n.push(z({_tag:AE,annotation:i.annotation}));break}case Ln:{o.push(i.right),o.push(i.left),n.push(z({_tag:RE}));break}case Nn:{o.push(i.right),o.push(i.left),n.push(z({_tag:FE}));break}}}let s=[];for(;n.length>0;){let i=n.pop();switch(i._tag){case"Left":{switch(i.left._tag){case RE:{let a=s.pop(),c=s.pop(),p=r.sequentialCase(t,a,c);s.push(p);break}case FE:{let a=s.pop(),c=s.pop(),p=r.parallelCase(t,a,c);s.push(p);break}case AE:{let a=s.pop(),c=r.annotatedCase(t,a,i.left.annotation);s.push(c);break}}break}case"Right":{s.push(i.right);break}}}if(s.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/io/issues");return s.pop()}),Pa=(e,t)=>{let r={value:t,enumerable:!0},o={...e,toString(){return`${this._tag}: ${this.message}`}};return n=>Object.create(o,{_tag:r,message:{value:n,enumerable:!0}})},xh=Symbol.for("@effect/io/Cause/errors/RuntimeException"),Oh=Pa({[xh]:xh},"RuntimeException");var np=Symbol.for("@effect/io/Cause/errors/InterruptedException"),K1=Pa({[np]:np},"InterruptedException"),wh=e=>typeof e=="object"&&e!=null&&np in e,yh=Symbol.for("@effect/io/Cause/errors/IllegalArgument"),ti=Pa({[yh]:yh},"IllegalArgumentException");var sp=Symbol.for("@effect/io/Cause/errors/NoSuchElement"),Co=Pa({[sp]:sp},"NoSuchElementException"),Rh=e=>typeof e=="object"&&e!=null&&sp in e,bh=Symbol.for("@effect/io/Cause/errors/InvalidHubCapacityException"),Vz=Pa({[bh]:bh},"InvalidHubCapacityException");var ip=Symbol.for("@effect/io/Cause/SpanAnnotation"),$1=e=>typeof e=="object"&&e!==null&&ip in e,LE=e=>({_tag:"SpanAnnotation",[ip]:ip,span:e});var vE=e=>{if(typeof e=="object"&&e!=null&&"toString"in e&&typeof e.toString=="function"&&e.toString!==Object.prototype.toString)return e.toString();if(typeof e=="string")return`Error: ${e}`;if(typeof e=="object"&&e!==null&&"message"in e&&typeof e.message=="string"){let t=JSON.parse(JSON.stringify(e)),r=new Set(Object.keys(t));if(r.delete("name"),r.delete("message"),r.delete("_tag"),r.size===0)return`${"name"in e&&typeof e.name=="string"?e.name:"Error"}${"_tag"in e&&typeof e._tag=="string"?`(${e._tag})`:""}: ${e.message}`}return`Error: ${JSON.stringify(e)}`},ME=e=>e instanceof Error?[vE(e),e.stack?.split(`
`).filter(t=>!t.startsWith("Error")).join(`
`)]:[vE(e),void 0];var G1=e=>{let t=e.split(`
`),r=[];for(let o=0;o<t.length;o++){if(t[o].includes("EffectPrimitive")||t[o].includes("Generator.next")||t[o].includes("FiberRuntime"))return r.join(`
`);r.push(t[o])}return r.join(`
`)},_o=e=>{if(Qo(e))return"All fibers interrupted without errors.";let t=lp(e).map(r=>{let o=r.message;if(r.stack&&(o+=`\r
${G1(r.stack)}`),r.span){let n=r.span,s=0;for(;n&&n._tag==="Span"&&s<10;)o+=`\r
    at ${n.name}`,n=$e(n.parent),s++}return o}).join(`\r
\r
`);return t.includes(`\r
`)?`\r
${t}\r
`:t},lp=e=>pp(e,void 0,{emptyCase:()=>[],dieCase:(t,r)=>{let o=ME(r);return[{message:o[0],stack:o[1],span:void 0}]},failCase:(t,r)=>{let o=ME(r);return[{message:o[0],stack:o[1],span:void 0}]},interruptCase:()=>[],parallelCase:(t,r,o)=>[...r,...o],sequentialCase:(t,r,o)=>[...r,...o],annotatedCase:(t,r,o)=>$1(o)?r.map(n=>({...n,span:n.span??o.span})):r});var qE=_o;var Na=255,HE=8,fp=e=>e&Na,mp=e=>e>>HE&Na,Un=(e,t)=>(e&Na)+((t&e&Na)<<HE),dp=Un(0,0),jE=e=>Un(e,e),BE=e=>Un(e,0);var UE=u(2,(e,t)=>Un(fp(e)&~t,mp(e)));var Fh=u(2,(e,t)=>e|t);var WE=e=>~e>>>0&Na;var KE=0,Er=1,Ah=2,hp=4,La=16,gp=32;var vh=e=>qa(e,gp);var Mh=u(2,(e,t)=>e|t);var zr=e=>ri(e)&&!$E(e),ri=e=>qa(e,Er);var qa=u(2,(e,t)=>(e&t)!==0),xp=(...e)=>e.reduce((t,r)=>t|r,0),Th=xp(KE);var Ha=e=>qa(e,hp);var $E=e=>qa(e,La);var Wn=u(2,(e,t)=>Un(e^t,t)),oi=u(2,(e,t)=>e&(WE(fp(t))|mp(t))|fp(t)&mp(t));var kh=Yu({empty:dp,diff:(e,t)=>Wn(e,t),combine:(e,t)=>Fh(t)(e),patch:(e,t)=>oi(t,e)});var bp=dp;var Ih=jE,Ph=BE;var Nh=UE;var VE,JE,YE,ZE={_tag:"Empty"},zn=(e,t)=>({_tag:"Par",left:e,right:t}),Dp=(e,t)=>({_tag:"Seq",left:e,right:t}),Hh=(e,t)=>({_tag:"Single",dataSource:e,blockedRequest:t});var QE=e=>{let t=va(e),r=Dr();for(;;){let[o,n]=xE(t,[XE(),Dr()],([s,i],a)=>{let[c,p]=Q1(a);return[e0(s,c),hE(i,p)]});if(r=X1(r,o),Ct(n))return yE(r);t=n}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/query/issues")},Q1=e=>{let t=e,r=XE(),o=Dr(),n=Dr();for(;;)switch(t._tag){case"Empty":{if(Ct(o))return[r,n];t=o.head,o=o.tail;break}case"Par":{o=So(t.right,o),t=t.left;break}case"Seq":{let s=t.left,i=t.right;switch(s._tag){case"Empty":{t=i;break}case"Par":{let a=s.left,c=s.right;t=zn(Dp(a,i),Dp(c,i));break}case"Seq":{let a=s.left,c=s.right;t=Dp(a,Dp(c,i));break}case"Single":{t=s,n=So(i,n);break}}break}case"Single":{if(r=e0(r,nI(t.dataSource,t.blockedRequest)),Ct(o))return[r,n];t=o.head,o=o.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/query/issues")},X1=(e,t)=>{if(Ct(e))return va(Lh(t));if(sI(t))return e;let r=lI(e.head),o=iI(t);return r.length===1&&o.length===1&&O(r[0],o[0])?So(pI(e.head,Lh(t)),e.tail):So(Lh(t),e)},eI=Symbol.for("@effect/io/RequestBlock.Entry"),qh=class{constructor(t,r,o,n,s){this.request=t,this.result=r,this.listeners=o,this.ownerId=n,this.state=s,this[VE]=tI}};VE=eI;var tI={_R:e=>e};var jh=e=>new qh(e.request,e.result,e.listeners,e.ownerId,e.state),rI=Symbol.for("@effect/io/RequestBlockParallel"),oI={_R:e=>e},ja=class{constructor(t){this.map=t,this[JE]=oI}};JE=rI;var XE=()=>new ja(xo()),nI=(e,t)=>new ja(CS([e,Array.of(t)])),e0=(e,t)=>new ja(Id(e.map,t.map,(r,o,n)=>jr(r,n,He(_a(r,n),{onNone:()=>o,onSome:s=>[...s,...o]})))),sI=e=>_S(e.map),iI=e=>Array.from(kd(e.map)),Lh=e=>uI(wS(e.map,t=>Array.of(t)));var aI=Symbol.for("@effect/io/RequestBlockSequential"),cI={_R:e=>e},Sp=class{constructor(t){this.map=t,this[YE]=cI}};YE=aI;var uI=e=>new Sp(e),pI=(e,t)=>new Sp(Id(t.map,e.map,(r,o,n)=>jr(r,n,He(_a(r,n),{onNone:()=>[],onSome:s=>[...s,...o]}))));var lI=e=>Array.from(kd(e.map)),t0=e=>Array.from(e.map);var Kn="Pending",Ba="Done";var fI="@effect/io/Deferred",n0=Symbol.for(fI),s0={_E:e=>e,_A:e=>e},Ep=e=>({_tag:Kn,joiners:e}),Bh=e=>({_tag:Ba,effect:e});var ni="Async",i0="Commit",xe="Failure",si="OnFailure",ii="OnSuccess",ai="OnSuccessAndFailure",ye="Success",Cp="Sync",a0="Tag",Oo="UpdateRuntimeFlags",ci="While",_p="WithRuntime",ui="Yield",Ua="RevertFlags";var wp=class{constructor(){this.buckets=[]}scheduleTask(t,r){let o,n;for(n=0;n<this.buckets.length&&this.buckets[n][0]<=r;n++)o=this.buckets[n];if(o)o[1].push(t);else{let s=[];for(let i=0;i<n;i++)s.push(this.buckets[i]);s.push([r,[t]]);for(let i=n;i<this.buckets.length;i++)s.push(this.buckets[i]);this.buckets=s}}},Uh=class{constructor(t){this.maxNextTickBeforeTimer=t,this.running=!1,this.tasks=new wp}starveInternal(t){let r=this.tasks.buckets;this.tasks.buckets=[];for(let[o,n]of r)for(let s=0;s<n.length;s++)n[s]();this.tasks.buckets.length===0?this.running=!1:this.starve(t)}starve(t=0){t>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(t+1))}scheduleTask(t,r){this.tasks.scheduleTask(t,r),this.running||(this.running=!0,this.starve())}},Wh=V(Symbol.for("@effect/io/Scheduler/defaultScheduler"),()=>new Uh(2048)),Rp=class{constructor(){this.tasks=new wp,this.deferred=!1}scheduleTask(t,r){this.deferred?Wh.scheduleTask(t,r):this.tasks.scheduleTask(t,r)}flush(){for(;this.tasks.buckets.length>0;){let t=this.tasks.buckets;this.tasks.buckets=[];for(let[r,o]of t)for(let n=0;n<o.length;n++)o[n]()}this.deferred=!0}};var u0,p0,l0,f0,dI="@effect/io/Effect/Error",zh=Symbol.for(dI),d0=e=>typeof e=="object"&&e!=null&&zh in e,h0=e=>({[zh]:zh,_tag:"EffectError",cause:e}),be=(e,t)=>{let r=new Me("Blocked");return r.i0=e,r.i1=t,r},Tp=e=>{let t=new Me("RunBlocked");return t.i0=e,t},pi=Symbol.for("@effect/io/Effect"),Ap=class{constructor(t,r){this.patch=t,this.op=r,this._tag=Ua}},Me=class{constructor(t){this._tag=t,this.i0=void 0,this.i1=void 0,this.i2=void 0,this.trace=void 0,this[u0]=Kh}[(u0=pi,F)](t){return this===t}[R](){return Uo(this)}pipe(){return C(this,arguments)}},vp=class{constructor(t){this._tag=t,this.i0=void 0,this.i1=void 0,this.i2=void 0,this.trace=void 0,this[p0]=Kh}[(p0=pi,F)](t){return this===t}[R](){return Uo(this)}get cause(){return this.i0}pipe(){return C(this,arguments)}toJSON(){return{_tag:this._tag,cause:this.cause.toJSON()}}toString(){return qE(this.cause)}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}},Mp=class{constructor(t){this._tag=t,this.i0=void 0,this.i1=void 0,this.i2=void 0,this.trace=void 0,this[l0]=Kh}[(l0=pi,F)](t){return this===t}[R](){return Uo(this)}get value(){return this.i0}pipe(){return C(this,arguments)}toJSON(){return{_tag:this._tag,value:this.value}}toString(){return`Success: ${String(this.value)}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toJSON()}},Kh={_R:e=>e,_E:e=>e,_A:e=>e},De=e=>typeof e=="object"&&e!=null&&pi in e,he=e=>{let t=new Me(_p);return t.i0=e,t},er=u(3,(e,t,r)=>_e(o=>m(e,n=>m(ne(v(()=>o(t(n)))),s=>v(()=>r(n,s)).pipe(ee({onFailure:i=>{switch(s._tag){case xe:return U(je(s.i0,i));case ye:return U(i)}},onSuccess:()=>s})))))),X=u(2,(e,t)=>m(e,()=>y(t))),oe=e=>X(e,void 0),tr=(e,t=ut)=>v(()=>{let r,o,n=new Me(ni);if(e.length!==1){let s=new AbortController;o=s,n.i0=i=>{r=e(i,s.signal)}}else n.i0=s=>{r=e(s)};return n.i1=t,on(n,()=>(o&&o.abort(),r??N))}),Gr=(e,t=ut)=>tr(r=>{let o=e(r);if(Pr(o))r(o.right);else return o.left},t),Vr=u(2,(e,t)=>{let r=new Me(si);return r.i0=e,r.i1=t,r}),_t=u(2,(e,t)=>pe(e,{onFailure:t,onSuccess:y})),Xo=e=>(...t)=>e(...t),g0=u(2,(e,t)=>ee(e,{onFailure:Xo(r=>{let o=Eo(r);switch(o._tag){case"Left":return J(()=>U(r))(t(o.left));case"Right":return U(o.right)}}),onSuccess:y})),x0=e=>he((t,r)=>e(ri(r.runtimeFlags))),$h=e=>U(Ge(e)),li=e=>Zr(()=>Ge(Oh(e))),en=e=>Zr(()=>Ge(e())),Jr=e=>pe(e,{onFailure:t=>y(z(t)),onSuccess:t=>y(H(t))}),Yr=()=>v(()=>st(Fo)),fi=e=>m(Yr(),e),ne=e=>za(e,{onFailure:Y,onSuccess:se}),W=e=>U(jn(e)),Cr=e=>Zr(()=>jn(e())),U=e=>{let t=new vp(xe);return t.i0=e,t},Zr=e=>m(D(e),U),tn=he(e=>y(e.id())),rr=e=>he(t=>e(t.id())),m=u(2,(e,t)=>{let r=new Me(ii);return r.i0=e,r.i1=t,r}),Kr=e=>{let t=new Me("OnStep");return t.i0=e,t.i1=se,t},mi=(e,t)=>{let r=new Me("OnStep");return r.i0=e,r.i1=t,r},Ot=e=>m(e,I),rn=e=>pe(e,{onFailure:y,onSuccess:W}),za=u(2,(e,{onFailure:t,onSuccess:r})=>ee(e,{onFailure:o=>y(t(o)),onSuccess:o=>y(r(o))})),ee=u(2,(e,{onFailure:t,onSuccess:r})=>{let o=new Me(ai);return o.i0=e,o.i1=t,o.i2=r,o}),pe=u(2,(e,{onFailure:t,onSuccess:r})=>ee(e,{onFailure:o=>{let n=Ta(o);return up(o).length>0?U(PE(o)):n.length>0?t(Mn(n)):U(o)},onSuccess:r})),Ve=u(2,(e,t)=>v(()=>{let r=re(e),o=new Array(r.length),n=0;return X(Yn({while:()=>n<r.length,body:()=>t(r[n],n),step:s=>{o[n++]=s}}),o)})),wt=u(2,(e,t)=>v(()=>{let r=re(e),o=0;return Yn({while:()=>o<r.length,body:()=>t(r[o],o),step:()=>{o++}})})),kp=u(e=>typeof e[0]=="boolean"||De(e[0]),(e,{onFalse:t,onTrue:r})=>typeof e=="boolean"?e?r:t:m(e,Xo(o=>o?r:t))),Ip=m(tn,e=>Pp(e)),Pp=e=>U(Sr(e)),Xt=e=>{let t=new Me(Oo);t.i0=Ih(Er);let r=o=>o._tag==="Blocked"?be(o.i0,Xt(o.i1)):o;return t.i1=()=>mi(e,r),t},y0=e=>{let t=new Me(Oo);t.i0=Ih(Er);let r=o=>o._tag==="Blocked"?be(o.i0,Xt(o.i1)):o;return t.i1=o=>ri(o)?Kr(e(Xt)):Kr(e($r)),m(t,r)},Qr=u(2,(e,t)=>_e(r=>m(ne(r(e)),o=>pg(t,o)))),_=u(2,(e,t)=>m(e,r=>D(()=>t(r)))),Np=u(2,(e,{onFailure:t,onSuccess:r})=>pe(e,{onFailure:o=>Cr(()=>t(o)),onSuccess:o=>D(()=>r(o))})),wo=u(2,(e,t)=>ee(e,{onFailure:r=>{let o=Eo(r);switch(o._tag){case"Left":return Cr(()=>t(o.left));case"Right":return U(o.right)}},onSuccess:y})),Lp=u(2,(e,t)=>_r(e,Xo(r=>Jp(r)?N:t(r.i0)))),_r=u(2,(e,t)=>_e(r=>ee(r(e),{onFailure:o=>{let n=Y(o);return ee(t(n),{onFailure:s=>Y(ve(o,s)),onSuccess:()=>n})},onSuccess:o=>{let n=se(o);return $(t(n),n)}}))),on=u(2,(e,t)=>_r(e,Qp({onFailure:r=>Qo(r)?oe(t(ka(r))):N,onSuccess:()=>N}))),Gn=u(2,(e,t)=>hI(e,t,y)),Vn=e=>Gh(e,I),Gh=u(2,(e,t)=>pe(e,{onFailure:r=>$h(t(r)),onSuccess:y})),b0=(e,t)=>re(e).reduceRight(([r,o],n)=>{let s=t(n);switch(s._tag){case"Left":return[[s.left,...r],o];case"Right":return[r,[s.right,...o]]}},[new Array,new Array]),Lt=u(2,(e,t)=>we(Fo,t)(e)),D0=u(2,(e,t)=>Je(Fo,r=>En(r,t))(e)),Jn=u(2,(e,t)=>fi(r=>Lt(e,t(r)))),qp=he((e,t)=>y(t.runtimeFlags)),y=e=>{let t=new Mp(ye);return t.i0=e,t},v=e=>m(D(e),I),D=e=>{let t=new Me(Cp);return t.i0=e,t},qt=u(2,(e,t)=>m(e,r=>X(t(r),r))),Hp=e=>he(t=>{let r=t.getFiberRef(Wa),o=J(()=>t.scope())(r);return e(we(Wa,x(o)))}),hI=u(3,(e,t,r)=>ee(e,{onFailure:o=>up(o).length>0?U(td(IE(o))):t(),onSuccess:r})),$r=e=>{let t=new Me(Oo);t.i0=Ph(Er),t.i1=()=>mi(e,r);let r=o=>o._tag==="Blocked"?be(o.i0,$r(o.i1)):o;return t},_e=e=>{let t=new Me(Oo);t.i0=Ph(Er);let r=o=>o._tag==="Blocked"?be(o.i0,$r(o.i1)):o;return t.i1=o=>ri(o)?Kr(e(Xt)):Kr(e($r)),m(t,r)},N=y(void 0),di=e=>{let t=new Me(Oo);return t.i0=e,t.i1=void 0,t},hi=u(2,(e,t)=>m(t,r=>r?_(x)(e):y(g()))),Yn=e=>{let t=new Me(ci);return t.i0=e.while,t.i1=e.body,t.i2=e.step,t},S0=u(2,(e,t)=>we(e,Kp,t)),E0=u(2,(e,t)=>we(e,Ga,t)),C0=u(2,(e,t)=>{let r=new Me(Oo);return r.i0=t,r.i1=()=>e,r}),_0=u(2,(e,t)=>we(e,Ja,t)),Ht=e=>{let t=new Me(ui);return typeof e?.priority<"u"?ng(e.priority)(t):t},jp=u(2,(e,t)=>m(e,r=>_(t,o=>[r,o])));var gi=u(2,(e,t)=>m(e,r=>X(t,r))),$=u(2,(e,t)=>m(e,()=>t)),Ro=u(3,(e,t,r)=>m(e,o=>_(t,n=>r(o,n)))),Zn=Gr(()=>{let e=setInterval(()=>{},2147483647);return z(D(()=>clearInterval(e)))}),nn=e=>m(tn,t=>or(t)(e)),or=u(2,(e,t)=>m(e.interruptAsFork(t),()=>e.await())),Vh={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return C(this,arguments)}},Jh={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return C(this,arguments)}},Yh={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return C(this,arguments)}},Zh={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return C(this,arguments)}},Bp={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return C(this,arguments)}},Up={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return C(this,arguments)}},Qh={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return C(this,arguments)}},Xh={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return C(this,arguments)}},eg=[Vh,Qh,Up,Bp,Zh,Yh,Jh,Xh],gI="@effect/io/FiberRef",xI=Symbol.for(gI),yI={_A:e=>e},st=e=>O0(e,t=>[t,t]);var Oe=u(2,(e,t)=>m(st(e),t)),$n=u(2,(e,t)=>O0(e,()=>[void 0,t]));var O0=u(2,(e,t)=>he(r=>{let[o,n]=t(r.getFiberRef(e));return r.setFiberRef(e,n),y(o)}));var bI="@effect/io/RequestResolver",w0=Symbol.for(bI),DI={_R:e=>e,_A:e=>e},m0=class e{constructor(t,r){this.runAll=t,this.target=r,this[f0]=DI,this.runAll=t}[(f0=w0,R)](){return this.target?E(this.target):Uo(this)}[F](t){return this.target?SI(t)&&O(this.target,t.target):this===t}identified(...t){return new e(this.runAll,Br(t))}pipe(){return C(this,arguments)}},SI=e=>typeof e=="object"&&e!=null&&w0 in e;var we=u(3,(e,t,r)=>m(er(gi(st(t),$n(t,r)),()=>Kr(e),o=>$n(t,o)),o=>o._tag==="Blocked"?be(o.i0,we(o.i1,t,r)):o)),Je=u(3,(e,t,r)=>Oe(t,o=>we(e,t,r(o)))),Se=(e,t)=>xi(e,{differ:fE(),fork:t?.fork??I,join:t?.join}),tg=e=>xi(e,{differ:lE(),fork:Ju()}),Wp=e=>xi(e,{differ:pE(),fork:$u()}),xi=(e,t)=>({[xI]:yI,initial:e,diff:(r,o)=>aE(r,o)(t.differ),combine:(r,o)=>cE(r,o)(t.differ),patch:r=>o=>uE(r,o)(t.differ),fork:t.fork,join:t.join??((r,o)=>o),pipe(){return C(this,arguments)}}),R0=e=>xi(e,{differ:kh,fork:bp}),Fo=Wp(Tt()),Ka=Se(0),rg=Se(2048),$a=V(Symbol.for("@effect/io/FiberRef/currentLogAnnotation"),()=>Se(xo())),og=Se(Bp),zp=V(Symbol.for("@effect/io/FiberRef/currentLogSpan"),()=>Se(Dr())),Ao=V(Symbol.for("@effect/io/FiberRef/currentScheduler"),()=>Se(Wh)),F0=u(2,(e,t)=>we(e,Ao,t)),ng=u(2,(e,t)=>we(e,Ka,t)),A0=u(2,(e,t)=>we(e,rg,t)),Kp=V(Symbol.for("@effect/io/FiberRef/currentConcurrency"),()=>Se("unbounded")),Ga=V(Symbol.for("@effect/io/FiberRef/currentRequestBatching"),()=>Se(!0)),Va=V(Symbol.for("@effect/io/FiberRef/currentUnhandledErrorLogLevel"),()=>Se(x(Up))),v0=u(2,(e,t)=>we(e,Va,t)),vo=tg(ot()),M0=st(vo),Wa=V(Symbol.for("@effect/io/FiberRef/currentForkScopeOverride"),()=>Se(g(),{fork:()=>g(),join:(e,t)=>e})),Qn=V(Symbol.for("@effect/io/FiberRef/currentInterruptedCause"),()=>Se(pt,{fork:()=>pt,join:(e,t)=>e})),Mo=V(Symbol.for("@effect/io/FiberRef/currentTracerSpan"),()=>Se(Dr())),Ja=V(Symbol.for("@effect/io/FiberRef/currentTracerTiming"),()=>Se(!0)),$p=V(Symbol.for("@effect/io/FiberRef/currentTracerSpanAnnotations"),()=>Se(xo())),Gp=V(Symbol.for("@effect/io/FiberRef/currentTracerSpanLinks"),()=>Se(ct())),Vp=Symbol.for("@effect/io/Scope"),sg=Symbol.for("@effect/io/CloseableScope");var yi=(e,t)=>e.addFinalizer(t),sn=(e,t)=>e.close(t),ig=(e,t)=>e.fork(t),ag=u(2,(e,t)=>_(CI(e,t),He({onNone:()=>()=>N,onSome:r=>o=>EI(r,o)(e)}))),EI=u(3,(e,t,r)=>v(()=>{switch(e.state._tag){case"Exited":return N;case"Running":{let o=e.state.finalizers.get(t);return e.state.finalizers.delete(t),o!=null?e.state.update(o)(r):N}}})),CI=u(2,(e,t)=>v(()=>{switch(e.state._tag){case"Exited":return e.state.nextKey+=1,X(t(e.state.exit),g());case"Running":{let r=e.state.nextKey;return e.state.finalizers.set(r,t),e.state.nextKey+=1,y(x(r))}}}));var T0=D(()=>({state:{_tag:"Running",nextKey:0,finalizers:new Map,update:I}}));var cg=e=>e._tag==="Failure",Jp=e=>e._tag==="Success";var k0=u(2,(e,t)=>{switch(e._tag){case xe:return Y(e.i0);case ye:return se(t)}}),Ya=e=>k0(e,void 0);var bi=(e,t)=>_I(e,t?.parallel?je:ve),Yp=e=>Y(Ge(e));var Or=e=>Y(jn(e)),Y=e=>{let t=new vp(xe);return t.i0=e,t},I0=u(2,(e,t)=>{switch(e._tag){case xe:return Y(e.i0);case ye:return t(e.i0)}});var P0=e=>I0(I)(e);var Zp=e=>Y(Sr(e)),Fp=u(2,(e,t)=>{switch(e._tag){case xe:return Y(e.i0);case ye:return se(t(e.i0))}});var Qp=u(2,(e,{onFailure:t,onSuccess:r})=>{switch(e._tag){case xe:return t(e.i0);case ye:return r(e.i0)}}),Xn=u(2,(e,{onFailure:t,onSuccess:r})=>{switch(e._tag){case xe:return t(e.i0);case ye:return r(e.i0)}}),se=e=>{let t=new Mp(ye);return t.i0=e,t};var Xr=se(void 0);var Za=u(3,(e,t,{onFailure:r,onSuccess:o})=>{switch(e._tag){case xe:switch(t._tag){case ye:return Y(e.i0);case xe:return Y(r(e.i0,t.i0))}case ye:switch(t._tag){case ye:return se(o(e.i0,t.i0));case xe:return Y(t.i0)}}}),_I=(e,t)=>{let r=Br(e);return et(r)?x(Fp(o=>Array.from(o))(Fp(yo)(yt(Fp(Ae)(tt(r)),(o,n)=>Za(n,{onSuccess:(s,i)=>Ie(i)(s),onFailure:t})(o))(rt(r))))):g()},Di=e=>({[n0]:s0,state:Dt(Ep([])),blockingOn:e,pipe(){return C(this,arguments)}}),lt=()=>m(tn,e=>N0(e)),N0=e=>D(()=>Di(e)),Pe=e=>Gr(t=>{let r=It(e.state);switch(r._tag){case Ba:return H(r.effect);case Kn:return Zt(Ep([t,...r.joiners]))(e.state),z(OI(e,t))}},e.blockingOn),ug=u(2,(e,t)=>Qr(t,e)),Si=u(2,(e,t)=>D(()=>{let r=It(e.state);switch(r._tag){case Ba:return!1;case Kn:{Zt(Bh(t))(e.state);for(let o=0;o<r.joiners.length;o++)r.joiners[o](t);return!0}}})),pg=u(2,(e,t)=>Si(e,t)),Qa=u(2,(e,t)=>Si(e,W(t)));var es=u(2,(e,t)=>Si(e,U(t)));var L0=e=>m(tn,t=>Si(e,Pp(t)));var Ei=u(2,(e,t)=>Si(e,y(t)));var Ci=(e,t)=>{let r=It(e.state);if(r._tag===Kn){Zt(Bh(t))(e.state);for(let o=r.joiners.length-1;o>=0;o--)r.joiners[o](t)}},OI=(e,t)=>D(()=>{let r=It(e.state);r._tag===Kn&&Zt(Ep(r.joiners.filter(o=>o!==t)))(e.state)});var ts=Pe;var q0=pg;var H0=L0;var lg=Di;var B0=P0;var U0=se;var $0,wI="@effect/io/Clock",mg=Symbol.for(wI),eo=bt(mg),RI=2**31-1,z0={unsafeSchedule(e,t){let r=qr(t);if(r>RI)return Gt;let o=!1,n=setTimeout(()=>{o=!0,e()},r);return()=>(clearTimeout(n),!o)}},K0=function(){let e=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*e;let t="timeOrigin"in performance&&typeof performance.timeOrigin=="number"?BigInt(Math.round(performance.timeOrigin*1e6)):BigInt(Date.now())*e;return()=>t+BigInt(Math.round(performance.now()*1e6))}(),FI=function(){let e=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!e)return K0;let t=K0()-e.bigint();return()=>t+e.bigint()}(),fg=class{constructor(){this[$0]=mg,this.currentTimeMillis=D(()=>this.unsafeCurrentTimeMillis()),this.currentTimeNanos=D(()=>this.unsafeCurrentTimeNanos())}unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return FI()}scheduler(){return y(z0)}sleep(t){return Gr(r=>{let o=z0.unsafeSchedule(()=>r(N),t);return z(oe(D(o)))})}};$0=mg;var G0=()=>new fg;var Xp="And",el="Or",tl="InvalidData",rl="MissingData",ol="SourceUnavailable",nl="Unsupported";var vI="@effect/io/Config/Error",dg=Symbol.for(vI),_i={[dg]:dg},sl=(e,t)=>{let r=Object.create(_i);return r._tag=Xp,r.left=e,r.right=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),r},il=(e,t)=>{let r=Object.create(_i);return r._tag=el,r.left=e,r.right=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),r},to=(e,t,r={pathDelim:"."})=>{let o=Object.create(_i);return o._tag=tl,o.path=e,o.message=t,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Invalid data at ${ho(r.pathDelim)(this.path)}: "${this.message}")`}}),o},wr=(e,t,r={pathDelim:"."})=>{let o=Object.create(_i);return o._tag=rl,o.path=e,o.message=t,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Missing data at ${ho(r.pathDelim)(this.path)}: "${this.message}")`}}),o},J0=(e,t,r,o={pathDelim:"."})=>{let n=Object.create(_i);return n._tag=ol,n.path=e,n.message=t,n.cause=r,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Source unavailable at ${ho(o.pathDelim)(this.path)}: "${this.message}")`}}),n},al=(e,t,r={pathDelim:"."})=>{let o=Object.create(_i);return o._tag=nl,o.path=e,o.message=t,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${ho(r.pathDelim)(this.path)}: "${this.message}")`}}),o};var To=u(2,(e,t)=>{switch(e._tag){case Xp:return sl(To(t)(e.left),To(t)(e.right));case el:return il(To(t)(e.left),To(t)(e.right));case tl:return to([...t,...e.path],e.message);case rl:return wr([...t,...e.path],e.message);case ol:return J0([...t,...e.path],e.message,e.cause);case nl:return al([...t,...e.path],e.message)}}),MI={andCase:(e,t,r)=>t&&r,orCase:(e,t,r)=>t&&r,invalidDataCase:Gt,missingDataCase:Ir,sourceUnavailableCase:Gt,unsupportedCase:Gt},Y0=u(3,(e,t,r)=>{let o=[e],n=[];for(;o.length>0;){let i=o.pop();switch(i._tag){case Xp:{o.push(i.right),o.push(i.left),n.push(z({_tag:"AndCase"}));break}case el:{o.push(i.right),o.push(i.left),n.push(z({_tag:"OrCase"}));break}case tl:{n.push(H(r.invalidDataCase(t,i.path,i.message)));break}case rl:{n.push(H(r.missingDataCase(t,i.path,i.message)));break}case ol:{n.push(H(r.sourceUnavailableCase(t,i.path,i.message,i.cause)));break}case nl:{n.push(H(r.unsupportedCase(t,i.path,i.message)));break}}}let s=[];for(;n.length>0;){let i=n.pop();switch(i._tag){case"Left":{switch(i.left._tag){case"AndCase":{let a=s.pop(),c=s.pop(),p=r.andCase(t,a,c);s.push(p);break}case"OrCase":{let a=s.pop(),c=s.pop(),p=r.orCase(t,a,c);s.push(p);break}}break}case"Right":{s.push(i.right);break}}}if(s.length===0)throw new Error("BUG: ConfigError.reduceWithContext - please report an issue at https://github.com/Effect-TS/io/issues");return s.pop()}),Z0=e=>Y0(e,void 0,MI);var hg=Z0;var Q0="@effect/io/Config/Secret",gg=Symbol.for(Q0),kI={[gg]:gg,[R](){return T(fo(this.raw))(E(Q0))},[F](e){return II(e)&&this.raw.length===e.raw.length&&this.raw.every((t,r)=>O(t,e.raw[r]))}},II=e=>typeof e=="object"&&e!=null&&gg in e,PI=e=>{let t=Object.create(kI);return Object.defineProperty(t,"toString",{enumerable:!1,value(){return"ConfigSecret(<redacted>)"}}),Object.defineProperty(t,"raw",{enumerable:!1,value:e}),t};var X0=e=>PI(e.split("").map(t=>t.charCodeAt(0)));var ul="Constant",pl="Fail",Xa="Fallback",ll="Described",fl="Lazy",ml="MapOrFail",dl="Nested",hl="Primitive",gl="Sequence",xl="HashMap",yl="ZipWith";var LI="@effect/io/Config",Dl=Symbol.for(LI),qI={_A:e=>e},nr={[Dl]:qI,pipe(){return C(this,arguments)}},rC=e=>{let t=an("a boolean property",r=>{switch(r){case"true":case"yes":case"on":case"1":return H(!0);case"false":case"no":case"off":case"0":return H(!1);default:{let o=to([],`Expected a boolean value, but received ${r}`);return z(o)}}});return e===void 0?t:sr(e)(t)},oC=(e,t)=>ko(at)(Sl(e,t)),Sl=(e,t)=>ko(t===void 0?bl(e):sr(t)(bl(e)),Pt),nC=e=>{let t=an("a date property",r=>{let o=Date.parse(r);return Number.isNaN(o)?z(to([],`Expected a date value but received ${r}`)):H(new Date(o))});return e===void 0?t:sr(e)(t)},sC=e=>{let t=Object.create(nr);return t._tag=pl,t.message=e,t.parse=()=>z(al([],e)),t},iC=e=>{let t=an("a number property",r=>{let o=Number.parseFloat(r);return Number.isNaN(o)?z(to([],`Expected an number value but received ${r}`)):H(o)});return e===void 0?t:sr(e)(t)},aC=e=>{let t=an("an integer property",r=>{let o=Number.parseInt(r,10);return Number.isNaN(o)?z(to([],`Expected an integer value but received ${r}`)):H(o)});return e===void 0?t:sr(e)(t)},cC=e=>{let t=Oi(xg(),r=>{let o=r.toUpperCase(),n=eg.find(s=>s.label===o);return n===void 0?z(to([],`Expected a log level, but found: ${r}`)):H(n)});return e===void 0?t:sr(t,e)},ko=u(2,(e,t)=>Oi(e,r=>H(t(r)))),uC=u(2,(e,t)=>Oi(e,r=>{try{return H(t(r))}catch(o){return z(to([],o instanceof Error?o.message:`${o}`))}})),Oi=u(2,(e,t)=>{let r=Object.create(nr);return r._tag=ml,r.original=e,r.mapOrFail=t,r}),pC=e=>t=>wr([],`Expected ${t.description} with name ${e}`),sr=u(2,(e,t)=>{let r=Object.create(nr);return r._tag=dl,r.name=t,r.config=e,r}),lC=u(2,(e,t)=>{let r=Object.create(nr);return r._tag=Xa,r.first=e,r.second=ec(t),r.condition=Ir,r}),El=u(2,(e,t)=>{let r=Object.create(nr);return r._tag=Xa,r.first=e,r.second=ec(t.orElse),r.condition=t.if,r}),fC=e=>El({orElse:()=>wi(g()),if:hg})(ko(x)(e)),an=(e,t)=>{let r=Object.create(nr);return r._tag=hl,r.description=e,r.parse=t,r},bl=e=>{let t=Object.create(nr);return t._tag=gl,t.config=e,t},mC=e=>{let t=an("a secret property",r=>H(X0(r)));return e===void 0?t:sr(e)(t)},dC=(e,t)=>{let r=ko(Sl(e),Et);return t===void 0?r:sr(t)(r)},xg=e=>{let t=an("a text property",H);return e===void 0?t:sr(e)(t)},hC=e=>Array.isArray(e)?tC(e):Symbol.iterator in e?tC([...e]):gC(e),gC=e=>{let t=Object.entries(e),r=ko(n=>({[t[0][0]]:n}))(t[0][1]);if(t.length===1)return r;let o=t.slice(1);for(let[n,s]of o)r=tc(s,(i,a)=>({...i,[n]:a}))(r);return r},wi=e=>{let t=Object.create(nr);return t._tag=ul,t.value=e,t.parse=()=>H(e),t},ec=e=>{let t=Object.create(nr);return t._tag=fl,t.config=e,t},xC=e=>ec(()=>wi(e())),yC=(e,t)=>{let r=Object.create(nr);return r._tag=xl,r.valueConfig=e,t===void 0?r:sr(t)(r)},yg=e=>typeof e=="object"&&e!=null&&Dl in e,tC=e=>{if(e.length===0)return wi([]);if(e.length===1)return ko(e[0],r=>[r]);let t=ko(e[0],r=>[r]);for(let r=1;r<e.length;r++){let o=e[r];t=tc(o,(n,s)=>[...n,s])(t)}return t},bg=e=>yg(e)?e:gC(Object.fromEntries(Object.entries(e).map(([t,r])=>[t,bg(r)]))),bC=u(2,(e,{message:t,validation:r})=>Oi(e,o=>r(o)?H(o):z(to([],t)))),DC=u(2,(e,t)=>El(e,{orElse:()=>wi(t),if:hg})),SC=u(2,(e,t)=>{let r=Object.create(nr);return r._tag=ll,r.config=e,r.description=t,r}),EC=u(2,(e,t)=>tc(e,t,(r,o)=>[r,o])),tc=u(3,(e,t,r)=>{let o=Object.create(nr);return o._tag=yl,o.left=e,o.right=t,o.zip=r,o});var _C={_tag:"Empty"};var Cl=u(2,(e,t)=>{let r=va(t),o=e;for(;Aa(r);){let n=r.head;switch(n._tag){case"Empty":{r=r.tail;break}case"AndThen":{r=So(n.first,So(n.second,r.tail));break}case"MapName":{o=mo(o,n.f),r=r.tail;break}case"Nested":{o=dr(o,n.name),r=r.tail;break}case"Unnested":{if(nd(n.name)(Eu(o)))o=Jt(o),r=r.tail;else return z(wr(o,`Expected ${n.name} to be in path in ConfigProvider#unnested`));break}}}return H(o)});var _l=(e,t)=>[...e,...t],jI="@effect/io/Config/Provider",Dg=Symbol.for(jI),Ri=bt(Dg),BI="@effect/io/Config/Provider/Flat",OC=Symbol.for(BI),UI=e=>({[Dg]:Dg,pipe(){return C(this,arguments)},...e}),WI=e=>({[OC]:OC,patch:e.patch,load:(t,r,o=!0)=>e.load(t,r,o),enumerateChildren:e.enumerateChildren}),zI=e=>UI({load:t=>m(ir(e,Sn(),t,!1),r=>He(Eu(r),{onNone:()=>W(wr(Sn(),`Expected a single value having structure: ${t}`)),onSome:y})),flattened:e}),wC=(e={})=>{let{pathDelim:t,seqDelim:r}=Object.assign({},{pathDelim:"_",seqDelim:","},e),o=c=>ho(t)(c),n=c=>c.split(t),s=()=>typeof process<"u"&&"env"in process&&typeof process.env=="object"?process.env:{};return zI(WI({load:(c,p,l=!0)=>{let f=o(c),d=s(),h=f in d?x(d[f]):g();return m(S=>VI(S,c,p,r,l))(wo(()=>wr(c,`Expected ${f} to exist in the process context`))(h))},enumerateChildren:c=>D(()=>{let p=s(),l=Object.keys(p),d=Array.from(l).map(h=>n(h.toUpperCase())).filter(h=>{for(let S=0;S<c.length;S++){let w=cd(S)(c),A=h[S];if(A===void 0||w!==A)return!1}return!0}).flatMap(h=>h.slice(c.length,c.length+1));return Et(d)}),patch:_C}))};var KI=(e,t,r,o)=>{let n=ld(r.length,c=>c>=o.length?g():x([e(c),c+1])),s=ld(o.length,c=>c>=r.length?g():x([t(c),c+1])),i=_l(r,n),a=_l(o,s);return[i,a]},ir=(e,t,r,o)=>{let n=r;switch(n._tag){case ul:return y(Mt(n.value));case ll:return v(()=>ir(e,t,n.config,o));case pl:return W(wr(t,n.message));case Xa:return _t(s=>n.condition(s)?_t(i=>W(il(s,i)))(ir(e,t,n.second,o)):W(s))(v(()=>ir(e,t,n.first,o)));case fl:return v(()=>ir(e,t,n.config(),o));case ml:return v(()=>m(Ve(s=>wo(To(t))(n.mapOrFail(s))))(ir(e,t,n.original,o)));case dl:return v(()=>ir(e,_l(t,Mt(n.name)),n.config,o));case hl:return m(s=>m(i=>{if(i.length===0){let a=J(()=>"<n/a>")(AD(s));return W(pC(a))}return y(i)})(e.load(s,n,o)))(Cl(t,e.patch));case gl:return m(s=>m(i=>i.length===0?v(()=>_(ir(e,s,n.config,!0),Mt)):_(a=>{let c=_u(a);return c.length===0?Mt(Sn()):Mt(c)})(Ve(i,a=>ir(e,RD(t,`[${a}]`),n.config,!0))))(m(ZI)(e.enumerateChildren(s))))(Cl(t,e.patch));case xl:return v(()=>m(s=>m(i=>_(a=>{if(a.length===0)return Mt(xo());let c=a.map(p=>Array.from(p));return mo(p=>ju(pd(re(i),p)))(JI(c))})(Ve(a=>ir(e,_l(s,Mt(a)),n.valueConfig,o))(i)))(e.enumerateChildren(s)))(Cl(t,e.patch)));case yl:return v(()=>m(s=>m(i=>{if(Re(s)&&Re(i))return W(sl(s.left,i.left));if(Re(s)&&Pr(i))return W(s.left);if(Pr(s)&&Re(i))return W(i.left);if(Pr(s)&&Pr(i)){let a=ho(".")(t),c=$I(t,a),[p,l]=KI(c,c,mo(H)(s.right),mo(H)(i.right));return Ve(([f,d])=>_(([h,S])=>n.zip(h,S))(jp(f,d)))(pd(l)(p))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/io/issues")})(Jr(ir(e,t,n.right,o))))(Jr(ir(e,t,n.left,o))))}},$I=(e,t)=>r=>z(wr(e,`The element at index ${r} in a sequence at path "${t}" was missing`));var GI=(e,t)=>e.split(new RegExp(`\\s*${YI(t)}\\s*`)),VI=(e,t,r,o,n)=>n?wo(To(t))(Ve(s=>r.parse(s.trim()))(GI(e,o))):wo(To(t))(_(Mt)(r.parse(e))),JI=e=>Object.keys(e[0]).map(t=>e.map(r=>r[t])),YI=e=>e.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&"),ZI=e=>_(Du)(Jr(Np({onFailure:()=>Sn(),onSuccess:Dn(vt)})(Ve(e,XI))));var QI=/^(\[(\d+)\])$/,XI=e=>{let t=e.match(QI);if(t!==null){let r=t[2];return mr(eP)(r!==void 0&&r.length>0?x(r):g())}return g()};var eP=e=>{let t=Number.parseInt(e);return Number.isNaN(t)?g():x(t)};var Sg=Symbol("@effect/io/Console"),RC=bt(Sg),FC={[Sg]:Sg,assert(e,...t){return D(()=>{console.assert(e,...t)})},clear:D(()=>{console.clear()}),count(e){return D(()=>{console.count(e)})},countReset(e){return D(()=>{console.countReset(e)})},debug(...e){return D(()=>{console.debug(...e)})},dir(e,t){return D(()=>{console.dir(e,t)})},dirxml(...e){return D(()=>{console.dirxml(...e)})},error(...e){return D(()=>{console.error(...e)})},group(e){return e?.collapsed?D(()=>console.groupCollapsed(e?.label)):D(()=>console.group(e?.label))},groupEnd:D(()=>{console.groupEnd()}),info(...e){return D(()=>{console.info(...e)})},log(...e){return D(()=>{console.log(...e)})},table(e,t){return D(()=>{console.table(e,t)})},time(e){return D(()=>console.time(e))},timeEnd(e){return D(()=>console.timeEnd(e))},timeLog(e,...t){return D(()=>{console.timeLog(e,...t)})},trace(...e){return D(()=>{console.trace(...e)})},warn(...e){return D(()=>{console.warn(...e)})},withGroup(e,t){return er(t?.collapsed?D(()=>console.groupCollapsed(t?.label)):D(()=>console.group(t?.label)),()=>e,()=>D(()=>console.groupEnd()))},withTime(e,t){return er(D(()=>console.time(t)),()=>e,()=>D(()=>console.timeEnd(t)))}};var AC,oP="@effect/io/Random",Cg=Symbol.for(oP),_g=bt(Cg),Eg=class{constructor(t){this.seed=t,this[AC]=Cg,this.PRNG=new Ms(t)}next(){return D(()=>this.PRNG.number())}nextBoolean(){return _(this.next(),t=>t>.5)}nextInt(){return D(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(t,r){return _(this.next(),o=>(r-t)*o+t)}nextIntBetween(t,r){return D(()=>this.PRNG.integer(r-t)+t)}shuffle(t){return nP(t,r=>this.nextIntBetween(0,r+1))}};AC=Cg;var nP=(e,t)=>v(()=>m(r=>{let o=[];for(let n=r.length;n>=2;n=n-1)o.push(n);return X(Br(r))(wt(n=>_(s=>sP(r,n-1,s))(t(n)))(o))})(D(()=>Array.from(e)))),sP=(e,t,r)=>{let o=e[t];return e[t]=e[r],e[r]=o,e},vC=e=>new Eg(e);var MC=Symbol.for("@effect/io/Tracer"),aP=e=>({[MC]:MC,...e}),Fi=bt(Symbol.for("@effect/io/Tracer")),cP=V("@effect/io/Tracer/SpanId.ids",()=>Dt(0)),Og=class{constructor(t,r,o,n,s){this.name=t,this.parent=r,this.context=o,this.links=n,this.startTime=s,this._tag="Span",this.traceId="native",this.events=[],this.end=(i,a)=>{this.status={_tag:"Ended",endTime:i,exit:a,startTime:this.status.startTime}},this.attribute=(i,a)=>{this.attributes.set(i,a)},this.event=(i,a,c)=>{this.events.push([i,a,c??{}])},this.status={_tag:"Started",startTime:s},this.attributes=new Map,this.spanId=`span${FS(cP)}`}},TC=aP({span:(e,t,r,o,n)=>new Og(e,t,r,o,n)});var uP=ke(Fi,TC)(ke(Ri,wC())(ke(_g,vC(Math.random()*4294967296>>>0))(ke(RC,FC)(ke(eo,G0())(Tt()))))),ft=Wp(uP),IC=e=>{let t=Xe(e);return rc(r=>r.sleep(t))},rc=e=>Oe(ft,t=>e(Lr(t,eo))),PC=rc(e=>e.currentTimeMillis),NC=rc(e=>e.currentTimeNanos),LC=u(2,(e,t)=>Je(ft,ke(eo,t))(e)),qC=u(2,(e,t)=>Je(ft,ke(Ri,t))(e)),wg=e=>Oe(ft,t=>e(Lr(t,Ri))),HC=e=>wg(t=>t.load(e));var Ol=e=>Oe(ft,t=>e(Lr(t,_g)));var wl=e=>Oe(ft,t=>e(Lr(t,Fi))),jC=u(2,(e,t)=>Je(ft,ke(Fi,t))(e));var Rg=IC,Rl=PC,Fg=NC,BC=rc;var WC;function zC(e){return new rs(e)}var Ag=Symbol.for("@effect/io/FiberRefs"),rs=class{constructor(t){this.locals=t,this[WC]=Ag}pipe(){return C(this,arguments)}};WC=Ag;var pP=(e,t,r,o=!1)=>{let n=e,s=t,i=r,a=o,c;for(;c===void 0;)if(Nr(s)&&Nr(i)){let p=Fe(s)[0],l=Jt(s),f=Fe(i)[0],d=Fe(i)[1],h=Jt(i);p.startTimeMillis<f.startTimeMillis?(i=h,a=!0):p.startTimeMillis>f.startTimeMillis?s=l:p.id<f.id?(i=h,a=!0):p.id>f.id?s=l:c=[d,a]}else c=[n.initial,!0];return c},Fl=u(3,(e,t,r)=>{let o=new Map(e.locals);for(let[n,s]of r.locals){let i=Fe(s)[1];if(!O(Fe(s)[0],t)){if(!o.has(n)){if(O(i,n.initial))continue;o.set(n,[[t,n.join(n.initial,i)]]);continue}let a=o.get(n),[c,p]=pP(n,a,s);if(p){let l=n.diff(c,i),f=Fe(a)[1],d=n.join(f,n.patch(l)(f));if(!O(f,d)){let h,S=Fe(a)[0];O(S,t)?h=dr([S,d])(Jt(a)):h=dr([t,d])(a),o.set(n,h)}}}}return new rs(new Map(o))}),Al=u(2,(e,t)=>{let r=new Map;for(let[o,n]of e.locals.entries()){let s=Fe(n)[1],i=o.patch(o.fork)(s);O(s,i)?r.set(o,n):r.set(o,dr([t,i])(n))}return new rs(r)}),KC=e=>Et(e.locals.keys()),$C=e=>wt(KC(e),t=>$n(t,Ai(e,t))),nc=u(2,(e,t)=>{let r=new Map(e.locals);return r.delete(t),new rs(r)}),sc=u(2,(e,t)=>e.locals.has(t)?x(Fe(e.locals.get(t))[1]):g()),Ai=u(2,(e,t)=>J(()=>t.initial)(sc(e,t))),os=u(2,(e,{fiberId:t,fiberRef:r,value:o})=>{let n=e.locals.has(r)?e.locals.get(r):Sn(),s;if(ad(n))s=Mt([t,o]);else{let[a,c]=Fe(n);if(O(a,t)){if(O(c,o))return e;s=dr([t,o])(Jt(n))}else s=dr([t,o])(n)}let i=new Map(e.locals);return new rs(i.set(r,s))});var GC=Al;var VC=Fl,JC=$C,Mg=os,YC=zC;var QC="Empty",XC="Add",e_="Remove",t_="Update",r_="AndThen",o_={_tag:QC},Ml=(e,t)=>{let r=new Map(e.locals),o=o_;for(let[n,s]of t.locals.entries()){let i=Fe(s)[1],a=r.get(n);if(a!==void 0){let c=Fe(a)[1];O(c,i)||(o=vl({_tag:t_,fiberRef:n,patch:n.diff(c,i)})(o))}else o=vl({_tag:XC,fiberRef:n,value:i})(o);r.delete(n)}for(let[n]of r.entries())o=vl({_tag:e_,fiberRef:n})(o);return o},vl=u(2,(e,t)=>({_tag:r_,first:e,second:t})),Tl=u(3,(e,t,r)=>{let o=r,n=Mt(e);for(;Nr(n);){let s=Fe(n),i=Jt(n);switch(s._tag){case QC:{n=i;break}case XC:{o=os(o,{fiberId:t,fiberRef:s.fiberRef,value:s.value}),n=i;break}case e_:{o=nc(o,s.fiberRef),n=i;break}case t_:{let a=Ai(o,s.fiberRef);o=os(o,{fiberId:t,fiberRef:s.fiberRef,value:s.fiberRef.patch(s.patch)(a)}),n=i;break}case r_:{n=dr(s.first)(dr(s.second)(i));break}}}return o});var s_,i_="@effect/io/Metric/Label",Tg=Symbol.for(i_),kg=class{constructor(t,r){this.key=t,this.value=r,this[s_]=Tg}[(s_=Tg,R)](){return T(E(this.value))(T(E(this.key))(E(i_)))}[F](t){return lP(t)&&this.key===t.key&&this.value===t.value}pipe(){return C(this,arguments)}},kl=(e,t)=>new kg(e,t),lP=e=>typeof e=="object"&&e!=null&&Tg in e;var Il=class e{constructor(t){this.self=t,this.called=!1}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new e(this.self)}};var mP=Vh,Ig=Jh,Pg=Yh,Ng=Zh,Lg=Bp,qg=Up,Hg=Qh,dP=Xh;var hP=ua(e=>e.ordinal)(vt);var c_=Hm(hP);var u_=e=>{switch(e){case"All":return mP;case"Debug":return qg;case"Error":return Pg;case"Fatal":return Ig;case"Info":return Lg;case"Trace":return Hg;case"None":return dP;case"Warning":return Ng}};var l_=(e,t)=>({label:e,startTime:t}),f_=e=>t=>`${t.label.replace(/[\s="]/g,"_")}=${e-t.startTime}ms`;var m_=l_,d_=f_;var g_,Pl=Symbol.for("@effect/io/Ref"),Bg={_A:e=>e},jg=class{constructor(t){this.ref=t,this[g_]=Bg}modify(t){return D(()=>{let r=It(this.ref),[o,n]=t(r);return r!==n&&Zt(n)(this.ref),o})}pipe(){return C(this,arguments)}};g_=Pl;var Nl=e=>new jg(Dt(e)),ns=e=>D(()=>Nl(e)),Rr=e=>e.modify(t=>[t,t]),ro=u(2,(e,t)=>e.modify(()=>[void 0,t])),x_=u(2,(e,t)=>e.modify(r=>[r,t]));var Ll=u(2,(e,t)=>e.modify(t));var ic=u(2,(e,t)=>e.modify(r=>[void 0,t(r)]));var ac=ns,Hl=Rr,y_=x_;var b_=Ll;var D_=ic;var E_=wl;var C_=u(e=>De(e[0]),function(){let e=arguments;return Je(e[0],$a,typeof e[1]=="string"?jr(e[1],e[2]):t=>Object.entries(e[1]).reduce((r,[o,n])=>jr(r,o,n),t))}),jl=e=>_(e,x),__=e=>wo(e,x),O_=(e,t=ut)=>Gr(r=>{let o=e(r);switch(o._tag){case"None":return z(N);case"Some":return H(o.value)}},t),cc=e=>{let t,r;return typeof e=="function"?t=e:(t=e.try,r=e.catch),D(()=>{try{return t()}catch(o){throw h0(jn(r?r(o):o))}})},w_=u(3,(e,t,r)=>_t(e,o=>typeof o=="object"&&o!=null&&t in o&&o[t]===r.failure?r.onFailure(o):W(o))),R_=u(2,(e,t)=>Vr(e,Xo(r=>{let o=Ia(r,n=>cp(n)?x(n):g());switch(o._tag){case"None":return U(r);case"Some":return t(o.value.defect)}}))),F_=u(2,(e,t)=>ee(e,{onFailure:r=>{let o=t(r);switch(o._tag){case"None":return U(r);case"Some":return o.value}},onSuccess:y})),A_=u(2,(e,t)=>Vr(e,Xo(r=>{let o=Ia(r,n=>cp(n)?x(n):g());switch(o._tag){case"None":return U(r);case"Some":{let n=t(o.value.defect);return n._tag==="Some"?n.value:U(r)}}}))),v_=u(3,(e,t,r)=>_t(e,o=>de(o)&&"_tag"in o&&o._tag===t?r(o):W(o))),M_=u(2,(e,t)=>_t(e,r=>{let o=Object.keys(t);return de(r)&&"_tag"in r&&o.includes(r._tag)?t[r._tag](r):W(r)})),T_=e=>za(e,{onFailure:I,onSuccess:()=>pt}),oo=BC,k_=oo(y),I_=u(2,(e,t)=>$(Rg(t),e)),Bl=e=>he((t,r)=>e({id:t.id(),status:r,interruptors:ka(t.getFiberRef(Qn))})),P_=Bl(e=>Do(e.interruptors)>0?Ip:N),N_=Bl(y),ss=e=>Ul(e,zg,Ml),L_=y({}),q_=u(3,(e,t,r)=>m(e,o=>_(r(o),n=>({...o,[t]:n})))),H_=u(2,(e,t)=>_(e,r=>({[t]:r}))),j_=u(3,(e,t,r)=>_(e,o=>({...o,[t]:r(o)}))),B_=u(2,(e,t)=>v(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!1),i=0;for(;(n=r.next())&&!n.done;){let a=n.value,c=i++;s=m(s,p=>p?(o.push(a),y(!0)):t(a,c))}return _(s,()=>o)})),U_=u(2,(e,t)=>v(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!0),i=0;for(;(n=r.next())&&!n.done;){let a=n.value,c=i++;s=m(s,p=>_(p?t(a,c):y(!1),l=>(l||o.push(a),l)))}return _(s,()=>o)})),W_=e=>_(Yr(),e),Wg=e=>Gn(e,()=>m(Ht(),()=>Wg(e)));var z_=u(3,(e,t,r)=>uc(e,t,()=>en(r))),K_=u(3,(e,t,r)=>uc(e,t,()=>li(r))),uc=u(3,(e,t,r)=>m(e,o=>t(o)?y(o):r(o))),$_=u(3,(e,t,r)=>uc(e,t,o=>Cr(()=>r(o)))),G_=u(2,(e,t)=>v(()=>{let r=e[Symbol.iterator](),o=r.next();return o.done?y(g()):V_(r,0,t,o.value)})),V_=(e,t,r,o)=>m(r(o,t),n=>{if(n)return y(x(o));let s=e.next();return s.done?y(g()):V_(e,t+1,r,s.value)}),J_=e=>v(()=>{let t=Br(e);return et(t)?yt(tt(t),(r,o)=>Gn(r,()=>o))(rt(t)):en(()=>ti("Received an empty collection of effects"))}),Y_=u(2,(e,t)=>rn(t(rn(e)))),pc=u(2,(e,{onFailure:t,onSuccess:r})=>pe(e,{onFailure:o=>y(t(o)),onSuccess:o=>y(r(o))})),Z_=u(2,(e,t)=>v(()=>Q_(e[Symbol.iterator](),0,t))),Q_=(e,t,r)=>{let o=e.next();return o.done?y(!0):m(r(o.value,t),n=>n?Q_(e,t+1,r):y(n))},X_=e=>{let t=m(m(e,()=>Ht()),()=>t);return t},Ug=class{constructor(t){this.value=t}[Symbol.iterator](){return new Il(this)}},yP=function(){let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return new Ug(e)},eO=e=>v(()=>{let t=e(yP),r=t.next(),o=n=>n.done?y(n.value):m(s=>o(t.next(s)))(n.value.value);return o(r)}),zg=he(e=>y(e.unsafeGetFiberRefs())),tO=e=>pe(e,{onFailure:t=>W(x(t)),onSuccess:t=>{let o=t[Symbol.iterator]().next();return o.done?W(g()):y(o.value)}}),rO=e=>pc(e,{onFailure:Rs,onSuccess:Rs}),oO=e=>ee(e,{onFailure:t=>$g(t,"An error was silently ignored because it is not anticipated to be useful"),onSuccess:()=>N}),nO=e=>Wl((t,r)=>VC(r,t,e)),sO=e=>pc(e,{onFailure:Ir,onSuccess:Gt}),iO=e=>pc(e,{onFailure:Gt,onSuccess:Ir}),Kg=(e,t)=>v(()=>t.while(e)?m(t.body(e),r=>Kg(r,t)):y(e)),is=e=>(t,r)=>{let o=Qe(e),n,s;return ap(t)?(s=t,n=r??""):(n=t,s=r??pt),he(i=>(i.log(n,s,o),N))},aO=is(),cO=is(Hg),$g=is(qg),uO=is(Lg),pO=is(Ng),lO=is(Pg),fO=is(Ig),mO=u(2,(e,t)=>m(Rl,r=>Je(e,zp,Vo(m_(t,r))))),dO=st($a),hO=(e,t)=>t.discard?xO(e,t.while,t.step,t.body):_(gO(e,t.while,t.step,t.body),r=>Array.from(r)),gO=(e,t,r,o)=>v(()=>t(e)?m(o(e),n=>_(gO(r(e),t,r,o),Vo(n))):D(()=>Dr())),xO=(e,t,r,o)=>v(()=>t(e)?m(o(e),()=>xO(r(e),t,r,o)):N),yO=u(3,(e,t,r)=>v(()=>{let o=e[Symbol.iterator](),n=[],s=y(t),i,a=0;for(;!(i=o.next()).done;){let c=a++;s=m(s,p=>_(r(p,i.value,c),([l,f])=>(n.push(f),l)))}return _(s,c=>[c,n])})),vi=u(2,(e,t)=>ee(e,{onFailure:r=>Zr(()=>t(r)),onSuccess:y})),Gg=e=>m(t=>_(r=>$(r,m(([o,n])=>X(as(o),n))(Pe(t))))(Vg(Qr(t)(ss(e)))))(lt()),bO=e=>pe(e,{onFailure:t=>y(t),onSuccess:y}),lc=e=>_(e,t=>!t),DO=e=>pe(e,{onFailure:t=>W(x(t)),onSuccess:t=>{switch(t._tag){case"None":return N;case"Some":return W(g())}}}),Vg=e=>_(ac(!0),t=>oe(hi(e,y_(t,!1)))),SO=e=>pe(e,{onFailure:()=>y(g()),onSuccess:t=>y(x(t))}),EO=u(2,(e,t)=>Gn(e,()=>Cr(t))),CO=u(2,(e,t)=>Gn(e,()=>D(t))),_O=e=>ee(e,{onFailure:t=>{let r=Array.from(Ta(t));return r.length===0?U(t):W(r)},onSuccess:y}),as=e=>Wl((t,r)=>Tl(t,r)(e)),OO=e=>e.length>=1?tr((t,r)=>{e(r).then(o=>t(se(o))).catch(o=>t(Yp(o)))}):tr(t=>{e().then(r=>t(se(r))).catch(r=>t(Yp(r)))}),wO=u(3,(e,t,r)=>Jg(e,t,y(r))),Jg=u(3,(e,t,r)=>fi(o=>m(r,n=>Lt(e,ke(t,n)(o))))),RO=Ol(y),FO=u(3,(e,t,r)=>re(e).reduce((o,n,s)=>m(o,i=>r(i,n,s)),y(t))),AO=u(3,(e,t,r)=>re(e).reduceRight((o,n,s)=>m(o,i=>r(n,i,s)),y(t))),vO=u(3,(e,t,r)=>m(D(()=>e[Symbol.iterator]()),o=>MO(o,0,t,r.while,r.body))),MO=(e,t,r,o,n)=>{let s=e.next();return!s.done&&o(r)?m(n(r,s.value,t),i=>MO(e,t+1,i,o,n)):y(r)},TO=u(2,(e,t)=>v(()=>kO(e,t))),kO=(e,t)=>m(e,r=>t<=0?y(r):$(Ht(),kO(e,t-1))),IO=e=>ee(e,{onFailure:W,onSuccess:y}),PO=e=>v(()=>JC(e)),Mi=Rg,NO=e=>pe(e,{onFailure:t=>W(x(t)),onSuccess:t=>{switch(t._tag){case"None":return W(g());case"Some":return y(t.value)}}}),Ti=y(g()),Yg=e=>y(x(e)),Ul=u(3,(e,t,r)=>m(t,o=>m(e,n=>_(t,s=>[r(o,s),n])))),LO=u(3,(e,t,r)=>Zg(e,[kl(t,r)])),Zg=u(2,(e,t)=>Qg(e,Et(t))),Qg=u(2,(e,t)=>Je(vo,r=>nt(t)(r))(e)),qO=u(2,(e,t)=>v(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!1),i=0;for(;(n=r.next())&&!n.done;){let a=n.value,c=i++;s=m(s,p=>p?y(!0):(o.push(a),t(a,c)))}return _(s,()=>o)})),HO=u(2,(e,t)=>v(()=>{let r=e[Symbol.iterator](),o=[],n,s=y(!0),i=0;for(;(n=r.next())&&!n.done;){let a=n.value,c=i++;s=m(s,p=>_(l=>(l&&o.push(a),l))(p?t(a,c):y(!1)))}return _(s,()=>o)})),jO=u(2,(e,{onFailure:t,onSuccess:r})=>ee(e,{onFailure:o=>{let n=Eo(o);switch(n._tag){case"Left":return $(t(n.left),U(o));case"Right":return U(o)}},onSuccess:o=>X(r(o),o)})),BO=u(2,(e,t)=>Vr(e,r=>He(Ch(r),{onNone:()=>U(r),onSome:o=>$(t(o),U(r))}))),Xg=u(2,(e,t)=>ee(e,{onFailure:r=>{let o=Eo(r);switch(o._tag){case"Left":return $(t(o.left),U(r));case"Right":return U(r)}},onSuccess:y})),UO=u(3,(e,t,r)=>Xg(e,o=>de(o)&&"_tag"in o&&o._tag===t?r(o):N)),WO=u(2,(e,t)=>ee(e,{onFailure:r=>$(t(r),U(r)),onSuccess:y})),zO=e=>ex(e,Fg),ex=u(2,(e,t)=>Ul(e,t,(r,o)=>Fu(o-r))),KO=E_,$O=KO(y),tx=e=>{let t,r;return typeof e=="function"?t=e:(t=e.try,r=e.catch),t.length>=1?v(()=>{let o=new AbortController;return m(cc(()=>t(o.signal)),n=>tr(s=>(n.then(i=>s(se(i))).catch(i=>s(Or(r?r(i):i))),D(()=>o.abort()))))}):m(cc(e),o=>tr(n=>{o.then(s=>n(se(s))).catch(s=>n(Or(r?r(s):s)))}))},GO=u(2,(e,t)=>m(e,r=>cc({try:()=>t.try(r),catch:t.catch}))),VO=u(2,(e,t)=>m(e,r=>tx({try:t.try.length>=1?o=>t.try(r,o):()=>t.try(r),catch:t.catch}))),JO=u(2,(e,t)=>v(()=>t()?Ti:jl(e))),YO=u(2,(e,t)=>m(t,r=>r?Ti:jl(e))),ZO=e=>vi(e,_h),Wl=e=>he(t=>(t.setFiberRefs(e(t.id(),t.unsafeGetFiberRefs())),N)),QO=u(3,(e,t,r)=>Jn(e,o=>ke(o,t,r(Ls(o,t))))),zl=u(2,(e,t)=>v(()=>t()?_(e,x):y(g()))),XO=u(3,(e,t,r)=>m(st(t),o=>r(o)?_(e,n=>[o,x(n)]):y([o,g()]))),ew=u(3,(e,t,r)=>m(Hl(t),o=>r(o)?_(e,n=>[o,x(n)]):y([o,g()]))),tw=u(2,(e,t)=>t(e)),rw=(e,t)=>(...r)=>m(e,o=>t(o)(...r)),ow=(e,t)=>(...r)=>_(e,o=>t(o)(...r)),rx=e=>new Proxy({},{get(t,r,o){return(...n)=>m(e,s=>s[r](...n))}}),ox=e=>new Proxy({},{get(t,r,o){return m(e,n=>n[r])}}),nw=e=>({functions:rx(e),constants:ox(e)}),sw=function(){let e=arguments;return m(sx,t=>t._tag==="Some"?D(()=>{if(typeof e[0]=="string")t.value.attribute(e[0],e[1]);else for(let r in e[0])t.value.attribute(r,e[0][r])}):N)},iw=u(e=>De(e[0]),function(){let e=arguments;return Je(e[0],$p,typeof e[1]=="string"?jr(e[1],e[2]):t=>Object.entries(e[1]).reduce((r,[o,n])=>jr(r,o,n),t))}),nx=_(st(Mo),Zu),sx=_(st(Mo),gE(e=>e._tag==="Span")),bP=BigInt(0),Kl=Oe(Ja,e=>e?Fg:y(bP)),aw=u(e=>De(e[0]),(e,t,r)=>Je(e,Gp,zu({_tag:"SpanLink",span:t,attributes:r??{}}))),ki=(e,t)=>KO(r=>m(t?.parent?Yg(t.parent):t?.root?Ti:nx,o=>m(st($p),n=>m(st(Gp),s=>m(Kl,i=>D(()=>{let a=t?.links?[...at(s),...t.links]:at(s),c=r.span(e,o,t?.context??Tt(),a,i);return RS(n,(p,l)=>c.attribute(l,p)),Object.entries(t?.attributes??{}).forEach(([p,l])=>c.attribute(p,l)),c})))))),cw=st($p),uw=st(Gp),ix=(e,...t)=>{let r=t.length===1?void 0:t[0],o=t[t.length-1];return er(ki(e,r),o,(n,s)=>m(Kl,i=>D(()=>n.end(i,s))))},ax=u(2,(e,t)=>Je(e,Mo,Vo(t))),pw=u(e=>typeof e[0]!="string",(e,t,r)=>ix(t,r??{},o=>ax(e,o))),lw=e=>v(()=>{let t=e();return t==null?W(Co()):y(t)}),fw=e=>_t(_(e,x),t=>Rh(t)?Ti:W(t));var mw,dw,hw,$l="@effect/io/Fiber/Status",cn=Symbol.for($l),cx="Done",gw="Running",xw="Suspended",ux=class{constructor(){this[mw]=cn,this._tag=cx}[(mw=cn,R)](){return T(E(this._tag))(E($l))}[F](t){return Gl(t)&&t._tag===cx}},px=class{constructor(t){this.runtimeFlags=t,this[dw]=cn,this._tag=gw}[(dw=cn,R)](){return T(E(this.runtimeFlags))(T(E(this._tag))(E($l)))}[F](t){return Gl(t)&&t._tag===gw&&this.runtimeFlags===t.runtimeFlags}},lx=class{constructor(t,r){this.runtimeFlags=t,this.blockingOn=r,this[hw]=cn,this._tag=xw}[(hw=cn,R)](){return T(E(this.blockingOn))(T(E(this.runtimeFlags))(T(E(this._tag))(E($l))))}[F](t){return Gl(t)&&t._tag===xw&&this.runtimeFlags===t.runtimeFlags&&O(this.blockingOn,t.blockingOn)}},yw=new ux,bw=e=>new px(e),Dw=(e,t)=>new lx(e,t),Gl=e=>typeof e=="object"&&e!=null&&cn in e,Sw=e=>e._tag===cx;var Ew=yw,fx=bw,Cw=Dw;var _w=Sw;var Pi=Ml;var mx=Tl;var Vl=V(Symbol.for("@effect/io/FiberRef/currentRequestMap"),()=>Se(new Map));var dx=(e,t,r,o)=>{switch(e?.concurrency){case void 0:return t();case"unbounded":return r();case"inherit":return Oe(Kp,n=>n==="unbounded"?r():n>1?o(n):t());default:return e.concurrency>1?o(e.concurrency):t()}},fc=(e,t,r)=>{switch(e?.concurrency){case void 0:return t();case"unbounded":return r();case"inherit":return Oe(Kp,o=>o==="unbounded"||o>1?r():t());default:return e.concurrency>1?r():t()}};var ww="Sequential",Rw="Parallel";var Ni={_tag:ww},Fw={_tag:Rw};var Aw=e=>e._tag===ww,vw=e=>e._tag===Rw;var Jl="InterruptSignal",Yl="Stateful",Zl="Resume",Ql="YieldNow",hx=e=>({_tag:Jl,cause:e}),Li=e=>({_tag:Yl,onFiber:e}),cs=e=>({_tag:Zl,effect:e}),Tw=()=>({_tag:Ql});var Iw,Pw,_P="@effect/io/Fiber/Scope",Xl=Symbol.for(_P),gx=class{constructor(){this[Iw]=Xl,this.fiberId=ut,this.roots=new Set}add(t,r){this.roots.add(r),r.unsafeAddObserver(()=>{this.roots.delete(r)})}};Iw=Xl;var xx=class{constructor(t,r){this.fiberId=t,this.parent=r,this[Pw]=Xl}add(t,r){this.parent.tell(Li(o=>{o.addChild(r),r.unsafeAddObserver(()=>{o.removeChild(r)})}))}};Pw=Xl;var Nw=e=>new xx(e.id(),e),us=V(Symbol.for("@effect/io/FiberScope/Global"),()=>new gx);var OP="@effect/io/Fiber",mc=Symbol.for(OP),dc={_E:e=>e,_A:e=>e},wP={[mc]:dc,pipe(){return C(this,arguments)}},RP="@effect/io/Fiber",qw=Symbol.for(RP);var yx=e=>e.await();var Hw=e=>e.inheritAll();var jw=u(2,(e,t)=>e.interruptAsFork(t)),ps=e=>gi(Ot(e.await()),e.inheritAll());var V$={...wP,id:()=>ut,await:()=>Zn,children:()=>y([]),inheritAll:()=>Zn,poll:()=>y(g()),interruptAsFork:()=>Zn};var un="@effect/io/Fiber/Current";var FP="@effect/io/Logger",Uw=Symbol.for(FP),Ww={_Message:e=>e,_Output:e=>e},ef=e=>({[Uw]:Ww,log:e,pipe(){return C(this,arguments)}});var Z$={[Uw]:Ww,log:Rs,pipe(){return C(this,arguments)}};var zw=ef(({annotations:e,cause:t,date:r,fiberId:o,logLevel:n,message:s,spans:i})=>{let a=r.getTime(),p=[`timestamp=${r.toISOString()}`,`level=${n.label}`,`fiber=${rp(o)}`].join(" "),l=AP(s);if(l.length>0&&(p=p+" message=",p=bx(l,p)),t!=null&&t!=pt&&(p=p+" cause=",p=bx(_o(t),p)),Aa(i)){p=p+" ";let f=!0;for(let d of i)f?f=!1:p=p+" ",p=p+d_(a)(d)}if(Bu(e)>0){p=p+" ";let f=!0;for(let[d,h]of e)f?f=!1:p=p+" ",p=p+TP(d),p=p+"=",p=bx(String(h),p)}return p}),AP=e=>{try{return typeof e=="object"?JSON.stringify(e):String(e)}catch{return String(e)}},vP=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,MP=/^[^\s"=]+$/,bx=(e,t)=>t+(e.match(MP)?e:vP(e));var TP=e=>e.replace(/[\s="]/g,"_");var Kw,$w="@effect/io/Metric/Boundaries",Dx=Symbol.for($w),Sx=class{constructor(t){this.values=t,this[Kw]=Dx}[(Kw=Dx,R)](){return T(E(this.values))(E($w))}[F](t){return IP(t)&&O(this.values,t.values)}pipe(){return C(this,arguments)}},IP=e=>typeof e=="object"&&e!=null&&Dx in e,PP=e=>{let t=PS(br(Ae(Number.POSITIVE_INFINITY))(e));return new Sx(t)};var Gw=e=>PP(Pt(id(e.count-1,t=>e.start*Math.pow(e.factor,t))));var Vw,Jw,Yw,Zw,Qw,Xw,eR,tR,rR,oR,LP="@effect/io/Metric/KeyType",hc=Symbol.for(LP),aR="effect/io/Metric/KeyType/Counter",Ex=Symbol.for(aR),cR="effect/io/Metric/KeyType/Frequency",Cx=Symbol.for(cR),uR="effect/io/Metric/KeyType/Gauge",_x=Symbol.for(uR),pR="effect/io/Metric/KeyType/Histogram",Ox=Symbol.for(pR),lR="effect/io/Metric/KeyType/Summary",wx=Symbol.for(lR),gc={_In:e=>e,_Out:e=>e},Rx=class{constructor(){this[Vw]=gc,this[Jw]=Ex}[(Vw=hc,Jw=Ex,R)](){return E(aR)}[F](t){return Ax(t)}pipe(){return C(this,arguments)}},nR=class{constructor(){this[Yw]=gc,this[Zw]=Cx}[(Yw=hc,Zw=Cx,R)](){return E(cR)}[F](t){return vx(t)}pipe(){return C(this,arguments)}},sR=class{constructor(){this[Qw]=gc,this[Xw]=_x}[(Qw=hc,Xw=_x,R)](){return E(uR)}[F](t){return Mx(t)}pipe(){return C(this,arguments)}},Fx=class{constructor(t){this.boundaries=t,this[eR]=gc,this[tR]=Ox}[(eR=hc,tR=Ox,R)](){return T(E(this.boundaries))(E(pR))}[F](t){return Tx(t)&&O(this.boundaries,t.boundaries)}pipe(){return C(this,arguments)}},iR=class{constructor(t,r,o,n){this.maxAge=t,this.maxSize=r,this.error=o,this.quantiles=n,this[rR]=gc,this[oR]=wx}[(rR=hc,oR=wx,R)](){return T(E(this.quantiles))(T(E(this.error))(T(E(this.maxSize))(T(E(this.maxAge))(E(lR)))))}[F](t){return kx(t)&&O(this.maxAge,t.maxAge)&&this.maxSize===t.maxSize&&this.error===t.error&&O(this.quantiles,t.quantiles)}pipe(){return C(this,arguments)}},fR=new Rx;var mR=e=>new Fx(e);var Ax=e=>typeof e=="object"&&e!=null&&Ex in e,vx=e=>typeof e=="object"&&e!=null&&Cx in e,Mx=e=>typeof e=="object"&&e!=null&&_x in e,Tx=e=>typeof e=="object"&&e!=null&&Ox in e,kx=e=>typeof e=="object"&&e!=null&&wx in e;var hR,qP="@effect/io/Metric/Key",gR=Symbol.for(qP),HP={_Type:e=>e},xc=class{constructor(t,r,o,n=ot()){this.name=t,this.keyType=r,this.description=o,this.tags=n,this[hR]=HP}[(hR=gR,R)](){return T(E(this.tags))(T(E(this.description))(T(E(this.keyType))(E(this.name))))}[F](t){return jP(t)&&this.name===t.name&&O(this.keyType,t.keyType)&&O(this.description,t.description)&&O(this.tags,t.tags)}pipe(){return C(this,arguments)}},jP=e=>typeof e=="object"&&e!=null&&gR in e,xR=(e,t)=>new xc(e,fR,Qe(t));var yR=(e,t,r)=>new xc(e,mR(t),Qe(r));var bR=u(2,(e,t)=>Do(t)===0?e:new xc(e.name,e.keyType,e.description,nt(t)(e.tags)));var DR,SR,ER,CR,_R,OR,wR,RR,FR,AR,UP="@effect/io/Metric/State",yc=Symbol.for(UP),vR="effect/io/Metric/State/Counter",Ix=Symbol.for(vR),MR="effect/io/Metric/State/Frequency",Px=Symbol.for(MR),TR="effect/io/Metric/State/Gauge",Nx=Symbol.for(TR),kR="effect/io/Metric/State/Histogram",Lx=Symbol.for(kR),IR="effect/io/Metric/State/Summary",qx=Symbol.for(IR),bc={_A:e=>e},Hx=class{constructor(t){this.count=t,this[DR]=bc,this[SR]=Ix}[(DR=yc,SR=Ix,R)](){return T(E(this.count))(E(vR))}[F](t){return WP(t)&&this.count===t.count}pipe(){return C(this,arguments)}},jx=class{constructor(t){this.occurrences=t,this[ER]=bc,this[CR]=Px}[(ER=yc,CR=Px,R)](){return T(E(this.occurrences))(E(MR))}[F](t){return zP(t)&&O(this.occurrences,t.occurrences)}pipe(){return C(this,arguments)}},Bx=class{constructor(t){this.value=t,this[_R]=bc,this[OR]=Nx}[(_R=yc,OR=Nx,R)](){return T(E(this.value))(E(TR))}[F](t){return KP(t)&&this.value===t.value}pipe(){return C(this,arguments)}},Ux=class{constructor(t,r,o,n,s){this.buckets=t,this.count=r,this.min=o,this.max=n,this.sum=s,this[wR]=bc,this[RR]=Lx}[(wR=yc,RR=Lx,R)](){return T(E(this.sum))(T(E(this.max))(T(E(this.min))(T(E(this.count))(T(E(this.buckets))(E(kR))))))}[F](t){return $P(t)&&O(this.buckets,t.buckets)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return C(this,arguments)}},Wx=class{constructor(t,r,o,n,s,i){this.error=t,this.quantiles=r,this.count=o,this.min=n,this.max=s,this.sum=i,this[FR]=bc,this[AR]=qx}[(FR=yc,AR=qx,R)](){return T(E(this.sum))(T(E(this.max))(T(E(this.min))(T(E(this.count))(T(E(this.quantiles))(T(E(this.error))(E(IR)))))))}[F](t){return GP(t)&&this.error===t.error&&O(this.quantiles,t.quantiles)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return C(this,arguments)}},PR=e=>new Hx(e),NR=e=>new jx(e),LR=e=>new Bx(e),qR=e=>new Ux(e.buckets,e.count,e.min,e.max,e.sum),HR=e=>new Wx(e.error,e.quantiles,e.count,e.min,e.max,e.sum);var WP=e=>typeof e=="object"&&e!=null&&Ix in e,zP=e=>typeof e=="object"&&e!=null&&Px in e,KP=e=>typeof e=="object"&&e!=null&&Nx in e,$P=e=>typeof e=="object"&&e!=null&&Lx in e,GP=e=>typeof e=="object"&&e!=null&&qx in e;var JP="@effect/io/Metric/Hook",YP=Symbol.for(JP),ZP={_In:e=>e,_Out:e=>e},Dc=e=>({[YP]:ZP,pipe(){return C(this,arguments)},...e});var BR=e=>{let t=0;return Dc({get:()=>PR(t),update:r=>{t=t+r}})},UR=e=>{let t=0,r=new Map,o=s=>{t=t+1;let i=r.get(s)??0;r.set(s,i+1)},n=()=>ju(r.entries());return Dc({get:()=>NR(n()),update:o})},WR=(e,t)=>{let r=t;return Dc({get:()=>LR(r),update:o=>{r=o}})},zR=e=>{let t=e.keyType.boundaries.values,r=t.length,o=new Uint32Array(r+1),n=new Float32Array(r),s=0,i=0,a=Number.MAX_VALUE,c=Number.MIN_VALUE;Bd((f,d)=>{n[d]=f})(Ku(vt)(t));let p=f=>{let d=0,h=r;for(;d!==h;){let S=Math.floor(d+(h-d)/2),w=n[S];f<=w?h=S:d=S,h===d+1&&(f<=n[d]?h=d:d=h)}o[d]=o[d]+1,s=s+1,i=i+f,f<a&&(a=f),f>c&&(c=f)},l=()=>{let f=Array(r),d=0;for(let h=0;h<r;h++){let S=n[h],w=o[h];d=d+w,f[h]=[S,d]}return Pt(f)};return Dc({get:()=>qR({buckets:l(),count:s,min:a,max:c,sum:i}),update:p})},KR=e=>{let{error:t,maxAge:r,maxSize:o,quantiles:n}=e.keyType,s=Ku(vt)(n),i=Array(o),a=0,c=0,p=0,l=Number.MAX_VALUE,f=Number.MIN_VALUE,d=S=>{let w=[],A=0;for(;A!==o-1;){let k=i[A];if(k!=null){let[B,K]=k,ae=qs(S-B);Sd(ae,bd)&&ae<=r&&w.push(K)}A=A+1}return QP(t,s,Ku(vt)(Pt(w)))},h=(S,w)=>{if(o>0){a=a+1;let A=a%o;i[A]=[w,S]}c=c+1,p=p+S,S<l&&(l=S),S>f&&(f=S)};return Dc({get:()=>HR({error:t,quantiles:d(Date.now()),count:c,min:l,max:f,sum:p}),update:([S,w])=>h(S,w)})},QP=(e,t,r)=>{let o=r.length;if(Gs(t))return ct();let n=Mn(t),s=$s(1)(t),i=yt(Ae(jR(e,o,g(),0,n,r)),(a,c)=>{let p=Mn(a);return zu(jR(e,o,p.value,p.consumed,c,p.rest))(a)})(s);return Bd(a=>[a.quantile,a.value])(i)},jR=(e,t,r,o,n,s)=>{let i=e,a=t,c=r,p=o,l=n,f=s,d=e,h=t,S=r,w=o,A=n,k=s;for(;;){if(Gs(f))return{quantile:l,value:g(),consumed:p,rest:ct()};if(l===1)return{quantile:l,value:x(kS(f)),consumed:p+f.length,rest:ct()};let B=IS(me=>me>Mn(f))(f),K=l*a,ae=i/2*K,Ee=p+B[0].length,Le=Math.abs(Ee-K);if(Ee<K-ae){d=i,h=a,S=vn(f),w=Ee,A=l,k=B[1],i=d,a=h,c=S,p=w,l=A,f=k;continue}if(Ee>K+ae)return{quantile:l,value:c,consumed:p,rest:f};switch(c._tag){case"None":{d=i,h=a,S=vn(f),w=Ee,A=l,k=B[1],i=d,a=h,c=S,p=w,l=A,f=k;continue}case"Some":{let me=Math.abs(K-c.value);if(Le<me){d=i,h=a,S=vn(f),w=Ee,A=l,k=B[1],i=d,a=h,c=S,p=w,l=A,f=k;continue}return{quantile:l,value:x(c.value),consumed:p,rest:f}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/io/issues")};var eN="@effect/io/Metric/Pair",tN=Symbol.for(eN),rN={_Type:e=>e};var $R=(e,t)=>({[tN]:rN,metricKey:e,metricState:t,pipe(){return C(this,arguments)}});var GR,nN="@effect/io/Metric/Registry",VR=Symbol.for(nN),zx=class{constructor(){this[GR]=VR,this.map=Fn()}snapshot(){let t=[];for(let[r,o]of this.map)t.push($R(r,o.get()));return Et(t)}get(t){let r=$e(Ce(t)(this.map));if(r==null){if(Ax(t.keyType))return this.getCounter(t);if(Mx(t.keyType))return this.getGauge(t);if(vx(t.keyType))return this.getFrequency(t);if(Tx(t.keyType))return this.getHistogram(t);if(kx(t.keyType))return this.getSummary(t);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/io/issues")}else return r}getCounter(t){let r=$e(Ce(t)(this.map));if(r==null){let o=BR(t);xr(t)(this.map)||St(t,o)(this.map),r=o}return r}getFrequency(t){let r=$e(Ce(t)(this.map));if(r==null){let o=UR(t);xr(t)(this.map)||St(t,o)(this.map),r=o}return r}getGauge(t){let r=$e(Ce(t)(this.map));if(r==null){let o=WR(t,0);xr(t)(this.map)||St(t,o)(this.map),r=o}return r}getHistogram(t){let r=$e(Ce(t)(this.map));if(r==null){let o=zR(t);xr(t)(this.map)||St(t,o)(this.map),r=o}return r}getSummary(t){let r=$e(Ce(t)(this.map));if(r==null){let o=KR(t);xr(t)(this.map)||St(t,o)(this.map),r=o}return r}};GR=VR;var JR=()=>new zx;var iN="@effect/io/Metric",aN=Symbol.for(iN),cN={_Type:e=>e,_In:e=>e,_Out:e=>e},uN=V(Symbol.for("@effect/io/Metric/globalMetricRegistry"),()=>JR()),pN=function(e,t,r){return Object.assign(n=>qt(n,s=>D(()=>t(s,ot()))),{[aN]:cN,keyType:e,unsafeUpdate:t,unsafeValue:r,pipe(){return C(this,arguments)}})};var Sc=(e,t)=>YR(xR(e,t));var YR=e=>{let t=r=>{let o=bR(r)(e);return uN.get(o)};return pN(e.keyType,(r,o)=>t(o).update(r),r=>t(r).get())};var ZR=(e,t,r)=>YR(yR(e,t,r));var QR=u(2,(e,t)=>Oe(Vl,r=>D(()=>{if(r.has(e)){let o=r.get(e);o.state.completed||(o.state.completed=!0,Ci(o.result,t))}})));var Ec=class{constructor(){this.count=0,this.observers=new Set}addObserver(t){this.observers.add(t)}removeObserver(t){this.observers.delete(t)}increment(){this.count++,this.observers.forEach(t=>t(this.count))}decrement(){this.count--,this.observers.forEach(t=>t(this.count))}};var XR,eF,tF,rF,fN,mN="@effect/io/Supervisor",_c=Symbol.for(mN),tf={_T:e=>e},Cc=class e{constructor(t,r){this.underlying=t,this.value0=r,this[XR]=tf}value(){return this.value0()}onStart(t,r,o,n){this.underlying.onStart(t,r,o,n)}onEnd(t,r){this.underlying.onEnd(t,r)}onEffect(t,r){this.underlying.onEffect(t,r)}onSuspend(t){this.underlying.onSuspend(t)}onResume(t){this.underlying.onResume(t)}map(t){return new e(this,()=>_(t)(this.value()))}zip(t){return new pn(this,t)}onRun(t,r){return this.underlying.onRun(t,r)}};XR=_c;var pn=class e{constructor(t,r){this.left=t,this.right=r,this[eF]=tf}value(){return jp(this.left.value(),this.right.value())}onStart(t,r,o,n){this.left.onStart(t,r,o,n),this.right.onStart(t,r,o,n)}onEnd(t,r){this.left.onEnd(t,r),this.right.onEnd(t,r)}onEffect(t,r){this.left.onEffect(t,r),this.right.onEffect(t,r)}onSuspend(t){this.left.onSuspend(t),this.right.onSuspend(t)}onResume(t){this.left.onResume(t),this.right.onResume(t)}map(t){return new Cc(this,()=>_(t)(this.value()))}zip(t){return new e(this,t)}onRun(t,r){return this.right.onRun(()=>this.left.onRun(t,r),r)}};eF=_c;var Kx=class{constructor(){this[tF]=tf,this.fibers=new Set}value(){return D(()=>Array.from(this.fibers))}onStart(t,r,o,n){this.fibers.add(n)}onEnd(t,r){this.fibers.delete(r)}onEffect(t,r){}onSuspend(t){}onResume(t){}map(t){return new Cc(this,()=>_(t)(this.value()))}zip(t){return new pn(this,t)}onRun(t,r){return t()}};tF=_c;var $x=class{constructor(t){this.effect=t,this[rF]=tf}value(){return this.effect}onStart(t,r,o,n){}onEnd(t,r){}onEffect(t,r){}onSuspend(t){}onResume(t){}map(t){return new Cc(this,()=>_(t)(this.value()))}zip(t){return new pn(this,t)}onRun(t,r){return t()}};rF=_c;fN=_c;var dN=()=>new Kx,oF=D(dN),hN=e=>new $x(e),ls=hN(N);var nF="Empty",sF="AddSupervisor",iF="RemoveSupervisor",aF="AndThen",qi={_tag:nF},of=(e,t)=>({_tag:aF,first:e,second:t}),gN=(e,t)=>xN(t,Ae(e)),xN=(e,t)=>{let r=e,o=t;for(;et(o);){let n=tt(o);switch(n._tag){case nF:{o=rt(o);break}case sF:{r=r.zip(n.supervisor),o=rt(o);break}case iF:{r=Gx(r,n.supervisor),o=rt(o);break}case aF:{o=Ie(n.first)(Ie(n.second)(rt(o)));break}}}return r},Gx=(e,t)=>O(e,t)?ls:e instanceof pn?Gx(e.left,t).zip(Gx(e.right,t)):e,nf=e=>O(e,ls)?ot():e instanceof pn?nt(nf(e.right))(nf(e.left)):bo(e),yN=(e,t)=>{if(O(e,t))return qi;let r=nf(e),o=nf(t),n=Tn(qi,(i,a)=>of(i,{_tag:sF,supervisor:a}))(eh(r)(o)),s=Tn(qi,(i,a)=>of(i,{_tag:iF,supervisor:a}))(eh(o)(r));return of(n,s)},cF=Yu({empty:qi,patch:gN,combine:of,diff:yN});var uF,pF,DN=Sc("effect_fiber_started"),lF=Sc("effect_fiber_active"),SN=Sc("effect_fiber_successes"),EN=Sc("effect_fiber_failures"),CN=ZR("effect_fiber_lifetimes",Gw({start:1,factor:2,count:100})),Oc="Continue",_N="Done",fF="Yield",ON={_E:e=>e,_A:e=>e},wc=e=>{throw new Error(`BUG: FiberRuntime - ${JSON.stringify(e)} - please report an issue at https://github.com/Effect-TS/io/issues`)},sf={[ii]:(e,t,r)=>t.i1(r),OnStep:(e,t,r)=>t.i1(se(r)),[ai]:(e,t,r)=>t.i2(r),[Ua]:(e,t,r)=>(e.patchRuntimeFlags(e._runtimeFlags,t.patch),zr(e._runtimeFlags)&&e.isInterrupted()?Y(e.getInterruptedCause()):se(r)),[ci]:(e,t,r)=>(t.i2(r),t.i0()?(e.pushStack(t),t.i1()):N)},wN={[Jl]:(e,t,r,o)=>(e.processNewInterruptSignal(o.cause),zr(t)?Y(o.cause):r),[Zl]:(e,t,r,o)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[Yl]:(e,t,r,o)=>(o.onFiber(e,fx(t)),r),[Ql]:(e,t,r,o)=>m(Ht(),()=>r)},RN=e=>wt(QE(e),t=>ji(t0(t),([r,o])=>{let n=new Map;for(let s of o)for(let i of s)n.set(i.request,i);return we(qN(r.runAll(o),o.flat()),Vl,n)},!1)),Rc=class{pipe(){return C(this,arguments)}constructor(t,r,o){if(this[uF]=dc,this[pF]=ON,this._queue=new Array,this._children=null,this._observers=new Array,this._running=!1,this._stack=[],this._asyncInterruptor=null,this._asyncBlockingOn=null,this._exitValue=null,this._steps=[!1],this.run=()=>{this.drainQueueOnCurrentThread()},this._runtimeFlags=o,this._fiberId=t,this._fiberRefs=r,this._supervisor=this.getFiberRef(Hi),Ha(o)){let n=this.getFiberRef(vo);DN.unsafeUpdate(1,n),lF.unsafeUpdate(1,n)}}id(){return this._fiberId}resume(t){this.tell(cs(t))}status(){return this.ask((t,r)=>r)}runtimeFlags(){return this.ask((t,r)=>_w(r)?t._runtimeFlags:r.runtimeFlags)}scope(){return Nw(this)}children(){return this.ask(t=>Array.from(t.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(Qn)}fiberRefs(){return this.ask(t=>t.unsafeGetFiberRefs())}ask(t){return v(()=>{let r=Di(this._fiberId);return this.tell(Li((o,n)=>{Ci(r,D(()=>t(o,n)))})),Pe(r)})}tell(t){this._queue.push(t),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}await(){return tr(t=>{let r=o=>t(y(o));return this.tell(Li((o,n)=>{o._exitValue!==null?r(this._exitValue):o.unsafeAddObserver(r)})),D(()=>this.tell(Li((o,n)=>{o.unsafeRemoveObserver(r)})))},this.id())}inheritAll(){return he((t,r)=>{let o=t.id(),n=t.unsafeGetFiberRefs(),s=r.runtimeFlags,i=this.unsafeGetFiberRefs(),a=Fl(n,o,i);t.setFiberRefs(a);let c=t.getFiberRef(dF),p=Nh(La)(Nh(Er)(Wn(s,c)));return di(p)})}poll(){return D(()=>Qe(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(t){return D(()=>this.tell(hx(Sr(t))))}unsafeAddObserver(t){this._exitValue!==null?t(this._exitValue):this._observers.push(t)}unsafeRemoveObserver(t){this._observers=this._observers.filter(r=>r!==t)}unsafeGetFiberRefs(){return this.setFiberRef(dF,this._runtimeFlags),this._fiberRefs}unsafeDeleteFiberRef(t){this._fiberRefs=nc(this._fiberRefs,t)}getFiberRef(t){return this._fiberRefs.locals.has(t)?this._fiberRefs.locals.get(t)[0][1]:t.initial}setFiberRef(t,r){this._fiberRefs=os(this._fiberRefs,{fiberId:this._fiberId,fiberRef:t,value:r}),t===Hi&&(this._supervisor=r)}setFiberRefs(t){this._fiberRefs=t,this._supervisor=this.getFiberRef(Hi)}addChild(t){this.getChildren().add(t)}removeChild(t){this.getChildren().delete(t)}drainQueueOnCurrentThread(){let t=!0;for(;t;){let r=Oc,o=globalThis[un];globalThis[un]=this;try{for(;r===Oc;)r=this._queue.length===0?_N:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[un]=o}this._queue.length>0&&!this._running?(this._running=!0,r===fF?(this.drainQueueLaterOnExecutor(),t=!1):t=!0):t=!1}}drainQueueLaterOnExecutor(){this.getFiberRef(Ao).scheduleTask(this.run,this.getFiberRef(Ka))}drainQueueWhileRunning(t,r){let o=r;for(;this._queue.length>0;){let n=this._queue.splice(0,1)[0];o=wN[n._tag](this,t,o,n)}return o}isInterrupted(){return!Eh(this.getFiberRef(Qn))}addInterruptedCause(t){let r=this.getFiberRef(Qn);this.setFiberRef(Qn,ve(r,t))}processNewInterruptSignal(t){this.addInterruptedCause(t),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let t=!1;for(let r of this._children)r.tell(hx(Sr(this.id()))),t=!0;return t}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){let t=this._children.values();this._children=null;let r=!1;return Yn({while:()=>!r,body:()=>{let n=t.next();return n.done?D(()=>{r=!0}):oe(n.value.await())},step:()=>{}})}return null}reportExitValue(t){if(Ha(this._runtimeFlags)){let r=this.getFiberRef(vo);switch(lF.unsafeUpdate(-1,r),t._tag){case ye:{SN.unsafeUpdate(1,r);break}case xe:{EN.unsafeUpdate(1,r);break}}}if(t._tag==="Failure"){let r=this.getFiberRef(Va);!Qo(t.cause)&&r._tag==="Some"&&this.log("Fiber terminated with a non handled error",t.cause,r)}}setExitValue(t){if(this._exitValue=t,Ha(this._runtimeFlags)){let r=this.getFiberRef(vo),o=this.id().startTimeMillis,n=new Date().getTime();CN.unsafeUpdate((n-o)/1e3,r)}this.reportExitValue(t);for(let r=this._observers.length-1;r>=0;r--)this._observers[r](t)}getLoggers(){return this.getFiberRef(xF)}log(t,r,o){let n=P(o)?o.value:this.getFiberRef(og),s=this.getFiberRef(gF);if(c_(s,n))return;let i=this.getFiberRef(zp),a=this.getFiberRef($a),c=this.getLoggers(),p=this.unsafeGetFiberRefs();if(Do(c)>0){let l=Lr(this.getFiberRef(ft),eo),f=new Date(l.unsafeCurrentTimeMillis());for(let d of c)d.log({fiberId:this.id(),logLevel:n,message:t,cause:r,context:p,spans:i,annotations:a,date:f})}}evaluateMessageWhileSuspended(t){switch(t._tag){case Ql:return fF;case Jl:return this.processNewInterruptSignal(t.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(Y(t.cause)),this._asyncInterruptor=null),Oc;case Zl:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(t.effect),Oc;case Yl:return t.onFiber(this,this._exitValue!==null?Ew:Cw(this._runtimeFlags,this._asyncBlockingOn)),Oc;default:return wc(t)}}evaluateEffect(t){this._supervisor.onResume(this);try{let r=zr(this._runtimeFlags)&&this.isInterrupted()?Y(this.getInterruptedCause()):t;for(;r!==null;)try{let o=r,n=this.runLoop(o);this._runtimeFlags=Mh(La)(this._runtimeFlags);let s=this.interruptAllChildren();s!==null?r=m(s,()=>n):(this._queue.length===0?this.setExitValue(n):this.tell(cs(n)),r=null)}catch(o){if(De(o))o._tag===ui?vh(this._runtimeFlags)?(this.tell(Tw()),this.tell(cs(Xr)),r=null):r=Xr:o._tag===ni&&(r=null);else throw o}}finally{this._supervisor.onSuspend(this)}}start(t){if(this._running)this.tell(cs(t));else{this._running=!0;let r=globalThis[un];globalThis[un]=this;try{this.evaluateEffect(t)}finally{this._running=!1,globalThis[un]=r,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(t){this.tell(cs(t))}patchRuntimeFlags(t,r){let o=oi(t,r);return globalThis[un]=this,this._runtimeFlags=o,o}initiateAsync(t,r){let o=!1,n=s=>{o||(o=!0,this.tell(cs(s)))};zr(t)&&(this._asyncInterruptor=n);try{r(n)}catch(s){n(U(Ge(s)))}}pushStack(t){this._stack.push(t),t._tag==="OnStep"&&this._steps.push(!0),t._tag==="RevertFlags"&&this._steps.push(!1)}popStack(){let t=this._stack.pop();if(t)return(t._tag==="OnStep"||t._tag==="RevertFlags")&&this._steps.pop(),t}getNextSuccessCont(){let t=this.popStack();for(;t;){if(t._tag!==si)return t;t=this.popStack()}}getNextFailCont(){let t=this.popStack();for(;t;){if(t._tag!==ii&&t._tag!==ci)return t;t=this.popStack()}}[(uF=mc,pF=qw,a0)](t){return _(st(Fo),r=>{try{return Ls(r,t)}catch(o){throw console.log(o),o}})}Left(t){return Or(t.i0)}None(t){return Or(Co())}Right(t){return se(t.i0)}Some(t){return se(t.i0)}[Cp](t){let r=t.i0(),o=this.getNextSuccessCont();if(o!==void 0)return o._tag in sf||wc(o),sf[o._tag](this,o,r);throw se(r)}[ye](t){let r=t,o=this.getNextSuccessCont();if(o!==void 0)return o._tag in sf||wc(o),sf[o._tag](this,o,r.i0);throw r}[xe](t){let r=this.getFiberRef(Mo),o=Ct(r)||r.head._tag==="ExternalSpan"?t.i0:Zo(t.i0,LE(r.head)),n=this.getNextFailCont();if(n!==void 0)switch(n._tag){case si:case ai:return zr(this._runtimeFlags)&&this.isInterrupted()?Y(Xs(o)):n.i1(o);case"OnStep":return zr(this._runtimeFlags)&&this.isInterrupted()?Y(Xs(o)):n.i1(Y(o));case Ua:return this.patchRuntimeFlags(this._runtimeFlags,n.patch),zr(this._runtimeFlags)&&this.isInterrupted()?Y(ve(o,this.getInterruptedCause())):Y(o);default:wc(n)}else throw Y(o)}[_p](t){return t.i0(this,fx(this._runtimeFlags))}Blocked(t){if(this._steps[this._steps.length-1]){let r=this.popStack();if(r)switch(r._tag){case"OnStep":return r.i1(t);case"OnSuccess":return be(t.i0,m(t.i1,r.i1));case"OnSuccessAndFailure":return be(t.i0,ee(t.i1,{onFailure:r.i1,onSuccess:r.i2}));case"OnFailure":return be(t.i0,Vr(t.i1,r.i1));case"While":return be(t.i0,m(t.i1,o=>(r.i2(o),r.i0()?Yn({while:r.i0,body:r.i1,step:r.i2}):N)));case"RevertFlags":{this.pushStack(r);break}}}return _e(r=>m(jt(Tp(t.i0)),()=>r(t.i1)))}RunBlocked(t){return RN(t.i0)}[Oo](t){let r=t.i0,o=this._runtimeFlags,n=oi(o,r);if(zr(n)&&this.isInterrupted())return Y(this.getInterruptedCause());if(this.patchRuntimeFlags(this._runtimeFlags,r),t.i1){let s=Wn(n,o);return this.pushStack(new Ap(s,t)),t.i1(o)}else return Xr}[ii](t){return this.pushStack(t),t.i0}OnStep(t){return this.pushStack(t),t.i0}[si](t){return this.pushStack(t),t.i0}[ai](t){return this.pushStack(t),t.i0}[ni](t){throw this._asyncBlockingOn=t.i1,this.initiateAsync(this._runtimeFlags,t.i0),t}[ui](t){throw t}[ci](t){let r=t.i0,o=t.i1;return r()?(this.pushStack(t),o()):Xr}[i0](t){return t.commit()}runLoop(t){let r=t,o=0;for(;;){if(this._runtimeFlags&Ah&&this._supervisor.onEffect(this,r),this._queue.length>0&&(r=this.drainQueueWhileRunning(this._runtimeFlags,r)),o+=1,o>=this.getFiberRef(rg)){o=0;let n=r;r=m(Ht(),()=>n)}try{r._tag in this||(typeof r=="function"&&console.log(r()),wc(r)),r=this._supervisor.onRun(()=>this[r._tag](r),this)}catch(n){if(De(n)){if(n._tag===ui||n._tag===ni)throw n;if(n._tag===ye||n._tag===xe)return n}else d0(n)?r=Y(n.cause):wh(n)?r=Y(ve(Ge(n),Sr(ut))):r=Y(Ge(n))}}}},gF=Se(u_("Info")),FN=ef(e=>{let t=zw.log(e);globalThis.console.log(t)});var AN=ef(({annotations:e,cause:t,context:r,fiberId:o,logLevel:n,message:s})=>{let i=mr(sc(r,Mo),Zu),a=te(sc(r,ft),p=>Lr(p,eo));if(i._tag==="None"||i.value._tag==="ExternalSpan"||a._tag==="None")return;let c=Object.fromEntries(e);c["effect.fiberId"]=wE(o),c["effect.logLevel"]=n.label,t!==null&&t!==pt&&(c["effect.cause"]=_o(t)),i.value.event(String(s),a.value.unsafeCurrentTimeNanos(),c)}),xF=tg(bo(FN,AN)),Ac=u(e=>De(e[0]),(e,t)=>$r(qt(e,r=>vc(o=>t(r,o))))),yF=u(e=>De(e[0]),(e,t)=>no(e,vc(r=>t(r)))),vc=e=>he(t=>{let r=t.unsafeGetFiberRefs();return m(cf,o=>yi(o,n=>he(s=>{let i=s.unsafeGetFiberRefs(),a=Pi(i,r),c=Pi(r,i);return s.setFiberRefs(mx(a,s.id(),r)),no(e(n),D(()=>{s.setFiberRefs(mx(c,s.id(),s.unsafeGetFiberRefs()))}))})))}),bF=e=>we(Wa,x(us))(e),mF=Symbol("@effect/io/Effect/existsPar/found"),DF=u(e=>Vt(e[0]),(e,t,r)=>fc(r,()=>v(()=>SF(e[Symbol.iterator](),0,t)),()=>pe(ar(e,(o,n)=>kp(t(o,n),{onTrue:W(mF),onFalse:N}),r),{onFailure:o=>o===mF?y(!0):W(o),onSuccess:()=>y(!1)}))),SF=(e,t,r)=>{let o=e.next();return o.done?y(!1):m(r(o.value,t),n=>n?y(n):SF(e,t+1,r))},EF=u(e=>Vt(e[0]),(e,t,r)=>{let o=r?.negate?(n,s)=>_(t(n,s),Qb):t;return fc(r,()=>v(()=>re(e).reduceRight((n,s,i)=>Ro(n,v(()=>o(s,i)),(a,c)=>c?[s,...a]:a),D(()=>new Array))),()=>_(ar(e,(n,s)=>_(o(n,s),i=>i?x(n):g()),r),MD))}),vN=e=>{if(Array.isArray(e)||Vt(e))return[e,g()];let t=Object.keys(e),r=t.length;return[t.map(o=>e[o]),x(o=>{let n={};for(let s=0;s<r;s++)n[t[s]]=o[s];return n})]},MN=(e,t,r)=>{let o=[];for(let n of e)o.push(Jr(n));return m(ar(o,I,{concurrency:r?.concurrency,batching:r?.batching}),n=>{let s=g(),i=n.length,a=new Array(i),c=new Array(i),p=!1;for(let l=0;l<i;l++){let f=n[l];f._tag==="Left"?(a[l]=x(f.left),p=!0):(c[l]=f.right,a[l]=s)}return p?t._tag==="Some"?W(t.value(a)):W(a):r?.discard?N:t._tag==="Some"?y(t.value(c)):y(c)})},TN=(e,t,r)=>{let o=[];for(let n of e)o.push(Jr(n));return r?.discard?ar(o,I,{concurrency:r?.concurrency,batching:r?.batching,discard:!0}):_(ar(o,I,{concurrency:r?.concurrency,batching:r?.batching}),n=>t._tag==="Some"?t.value(n):n)},Bi=(e,t)=>{let[r,o]=vN(e);return t?.mode==="validate"?MN(r,o,t):t?.mode==="either"?TN(r,o,t):o._tag==="Some"?_(ar(r,I,t),o.value):ar(r,I,t)},CF=e=>t=>Bi(t,e),_F=(e,t)=>_(Bi(re(e).map(ne),t),ba(r=>Jp(r)?x(r.i0):g())),Zx=u(2,(e,t)=>Array.from({length:t},()=>e)),OF=u(e=>De(e[0]),(e,t,r)=>Bi(Zx(t)(e),r)),ar=u(e=>Vt(e[0]),(e,t,r)=>he(o=>{let n=r?.batching===!0||r?.batching==="inherit"&&o.getFiberRef(Ga);return r?.discard?dx(r,()=>n?Vx(e,t):wt(e,t),()=>ji(e,t,n),s=>Qx(e,s,t,n)):dx(r,()=>n?Jx(e,1,t,!0):Ve(e,t),()=>Fc(e,t,n),s=>Jx(e,s,t,n))})),Fc=(e,t,r)=>v(()=>{let o=re(e),n=new Array(o.length);return $(ji(o,(i,a)=>m(t(i,a),c=>D(()=>n[a]=c)),r),y(n))}),Vx=(e,t)=>v(()=>{let r=re(e),o=r.length;if(o===0)return N;if(o===1)return oe(t(r[0],0));let n=r.map(t),s=new Array,i=a=>a===n.length?v(()=>{if(s.length>0){let c=s.map(p=>p.i0).reduce(zn);return be(c,Vx(s.map(p=>p.i1),I))}return N}):mi(n[a],c=>c._tag==="Blocked"?(s.push(c),i(a+1)):c._tag==="Failure"?v(()=>{if(s.length>0){let p=s.map(l=>l.i0).reduce(zn);return be(p,m(Vx(s.map(l=>l.i1),I),()=>c))}return N}):i(a+1));return i(0)}),ji=(e,t,r)=>v(()=>{let o=re(e),n=o.length;return n===0?N:n===1?oe(t(o[0],0)):_e(s=>{let i=Di(ut),a=0,c=[],p=[],l=Hp(f=>Ve(o,(d,h)=>_(S=>(S.unsafeAddObserver(()=>{p.push(S)}),S))(fs(f(m(S=>{switch(S._tag){case"Failure":{if(c.length>0){let w=c.map(k=>k.i0).reduce(zn),A=ji(c,k=>k.i1,r);return be(w,ee(A,{onFailure:k=>$(Qa(i,void 0),U(je(k,S.cause))),onSuccess:()=>$(Qa(i,void 0),U(S.cause))}))}return $(Qa(i,void 0),U(S.cause))}default:{if(S._tag==="Blocked"&&c.push(S),a+1===n)if(c.length>0){let w=c.map(k=>k.i0).reduce(zn),A=ji(c,k=>k.i1,r);return Ei(i,be(w,A))}else Ci(i,se(Xr));else a=a+1;return N}}})(v(()=>s((r?Kr:ne)(t(d,h))))))))));return m(l,f=>ee(s(Pe(i)),{onFailure:d=>m(Fc(f,nn,r),h=>{let S=bi(h,{parallel:!0});return S._tag==="Some"&&cg(S.value)?U(je(Xs(d),S.value.i0)):U(Xs(d))}),onSuccess:d=>m(d,()=>wt(p,h=>h.inheritAll()))}))})}),Jx=(e,t,r,o)=>v(()=>{let n=re(e),s=new Array(n.length);return $(Qx(n,t,(a,c)=>_(r(a,c),p=>s[c]=p),o),y(s))}),Qx=(e,t,r,o)=>v(()=>{let n=0,s=e[Symbol.iterator](),i=[],a=m(D(()=>s.next()),p=>p.done?N:m((o?Kr:ne)(oe(r(p.value,n++))),l=>{switch(l._tag){case"Blocked":return i.push(l),a;case"Failure":return l;case"Success":return a}})),c=[];for(let p=0;p<t;p++)c.push(a);return m(ne(ji(c,I,o)),p=>{if(i.length===0)return p;let l=i.map(d=>d.i0).reduce(zn),f=Qx(i,t,d=>d.i1,o);return p._tag==="Failure"?be(l,ee(f,{onFailure:d=>Y(je(p.cause,d)),onSuccess:()=>p})):be(l,f)})}),jt=e=>he((t,r)=>y(RF(e,t,r.runtimeFlags))),fs=e=>kN(e,us),wF=u(2,(e,t)=>jt(Lp(e,r=>{let o=Eo(r);switch(o._tag){case"Left":return t(o.left);case"Right":return U(o.right)}}))),RF=(e,t,r,o=null)=>{let n=Yx(e,t,r,o);return n.resume(e),n},Yx=(e,t,r,o=null)=>{let n=op(),s=t.unsafeGetFiberRefs(),i=Al(s,n),a=new Rc(n,i,r),c=Ai(i,Fo),p=a._supervisor;return p.onStart(c,e,x(t),a),a.unsafeAddObserver(f=>p.onEnd(f,a)),(o!==null?o:J(()=>t.scope())(t.getFiberRef(Wa))).add(r,a),a},kN=(e,t)=>he((r,o)=>y(RF(e,r,o.runtimeFlags,t))),Xx=u(e=>Vt(e[0]),(e,t,r,o)=>fc(o,()=>re(e).reduce((n,s,i)=>Ro(n,s,(a,c)=>r(a,c,i)),y(t)),()=>m(ac(t),n=>m(ar(e,(s,i)=>m(s,a=>D_(n,c=>r(c,a,i))),o),()=>Hl(n))))),ey=u(e=>Vt(e[0]),(e,t,r)=>_(o=>b0(o,I))(ar(e,(o,n)=>Jr(t(o,n)),r))),FF=u(e=>Vt(e[0]),(e,t,r)=>m(ey(e,t,{concurrency:r?.concurrency,batching:r?.batching}),([o,n])=>o.length===0?r?.discard?N:y(n):W(o))),AF=e=>{let t=Br(e);if(!et(t))return en(()=>ti("Received an empty collection of effects"));let r=tt(t),o=rt(t),n=s=>X(s[0])(Hw(s[1]));return m(s=>m(i=>_e(a=>m(c=>m(p=>on(()=>yt(N,(l,f)=>gi(nn(f))(l))(p))(a(m(n)(ts(s)))))(qt(p=>yt(N,(l,f)=>$(oe(jt(m(IN(p,f,s,i))(yx(f)))))(l))(p))(_(p=>Ie(c)(p))(_(Pt)(Ve(p=>jt(Xt(p)))(o))))))(jt(Xt(r)))))(ac(o.length)))(lt())},IN=(e,t,r,o)=>n=>Xn(n,{onFailure:s=>Ot(b_(o,i=>[i===0?oe(es(r,s)):N,i-1])),onSuccess:s=>m(i=>i?yt(N,(a,c)=>c===t?a:gi(nn(c))(a))(Br(e)):N)(Ei(r,[s,t]))}),vF=u(e=>Vt(e[0]),(e,t,r,o)=>fc(o,()=>re(e).reduce((n,s,i)=>Ro(n,s,(a,c)=>r(a,c,i)),t),()=>v(()=>_(n=>{switch(n._tag){case"None":throw new Error("BUG: Effect.reduceEffect - please report an issue at https://github.com/Effect-TS/io/issues");case"Some":return n.value}})(Xx([t,...e],g(),(n,s,i)=>{switch(n._tag){case"None":return x(s);case"Some":return x(r(n.value,s,i))}},o))))),MF=e=>m(cf,t=>m(ms(Fw),r=>$(ds(e,r))(t.addFinalizer(o=>r.close(o))))),ln=e=>m(iy,e),ty=e=>m(ms(),t=>NN(t)(e)),TF=e=>ln(t=>m(r=>ds(r)(e))(ig(t,Ni))),kF=(e,t)=>ry([kl(e,t)]),ry=e=>oy(Et(e)),oy=e=>Fr(vo,t=>nt(e)(t)),IF=u(2,(e,t)=>er(ms(),r=>m(ds(e,r),t),(r,o)=>sn(r,o))),PF=e=>pe(e,{onFailure:t=>{switch(t._tag){case"None":return y(g());case"Some":return W(t.value)}},onSuccess:t=>y(x(t))}),NF=u(e=>De(e[1]),(e,t,r)=>ny(e,t,(o,n)=>[o,n],r)),ny=u(e=>De(e[1]),(e,t,r,o)=>Ot(Io(ne(e),ne(t),(n,s)=>Za(n,s,{onSuccess:r,onFailure:(i,a)=>o?.concurrent?je(i,a):ve(i,a)}),o)));var LF=u(e=>Vt(e[0]),(e,t,r)=>rn(ar(e,(o,n)=>rn(t(o,n)),r))),qF=e=>Fr(ft,ke(eo,e)),af=e=>Fr(ft,ke(Ri,e)),HF=e=>ln(t=>m(ig(t,Ni),r=>_(o=>[rr(n=>sn(r,Zp(n))),o])(ds(r)(e)))),jF=u(e=>De(e[1]),(e,t,r)=>Io(e,t,(o,n)=>[o,n],r)),BF=u(e=>De(e[1]),(e,t,r)=>Io(e,t,(o,n)=>o,r)),UF=u(e=>De(e[1]),(e,t,r)=>Io(e,t,(o,n)=>n,r)),Io=u(e=>De(e[1]),(e,t,r,o)=>_(Bi([e,t],{concurrency:o?.concurrent?2:1,batching:o?.batching}),([n,s])=>r(n,s))),sy=e=>e===bp?N:$r(m(t=>{let r=oi(t,e),o=Wn(r,t);return oe($(vc(()=>di(o)))(di(e)))})(qp)),PN=(e,t)=>r=>v(()=>{switch(r.state._tag){case"Exited":return N;case"Running":{let o=r.state.finalizers,n=r.state.update,s=Array.from(o.keys()).sort((i,a)=>a-i).map(i=>o.get(i));return r.state={_tag:"Exited",nextKey:r.state.nextKey,exit:t,update:n},Aw(e)?m(i=>J(()=>Xr)(te(Ya)(bi(i))))(Ve(i=>ne(n(i)(t)))(s)):vw(e)?m(i=>J(()=>Xr)(te(Ya)(bi(i,{parallel:!0}))))(Fc(s,i=>ne(n(i)(t)),!1)):m(i=>J(()=>Xr)(te(Ya)(bi(i,{parallel:!0}))))(Jx(s,e.parallelism,i=>ne(n(i)(t)),!1))}}}),iy=bt(Vp),cf=iy,ms=(e=Ni)=>_(T0,t=>({[Vp]:Vp,[sg]:sg,pipe(){return C(this,arguments)},fork:r=>$r(m(o=>X(o)(qt(n=>yi(o,n))(ag(t,n=>sn(o,n)))))(ms(r))),close:r=>oe(PN(e,r)(t)),addFinalizer:r=>oe(ag(r)(t))})),ds=u(2,(e,t)=>Jn(e,En(Ru(iy,t)))),NN=u(2,(e,t)=>_r(r=>t.close(r))(ds(t)(e))),LN=e=>xi(e,{differ:cF,fork:qi}),cr=u(2,(e,t)=>oe(Ac(m(st(e),r=>X($n(e,t),r)),r=>$n(e,r)))),Fr=u(2,(e,t)=>Oe(e,r=>cr(e,t(r))));var dF=R0(Th),Hi=LN(ls),WF=e=>oe(yx(uf(e))),uf=e=>({[mc]:dc,id:()=>re(e).reduce((t,r)=>hh(t,r.id()),ut),await:()=>ne(Fc(e,t=>Ot(t.await()),!1)),children:()=>_(Fc(e,t=>t.children(),!1),_u),inheritAll:()=>wt(e,t=>t.inheritAll()),poll:()=>_(Ve(e,t=>t.poll()),Ou(x(se(new Array)),(t,r)=>{switch(r._tag){case"None":return g();case"Some":switch(t._tag){case"None":return g();case"Some":return x(Za(r.value,t.value,{onSuccess:(o,n)=>[o,...n],onFailure:je}))}}})),interruptAsFork:t=>wt(e,r=>r.interruptAsFork(t)),pipe(){return C(this,arguments)}});var ay=u(3,(e,t,r)=>cy(e,t,{onSelfWin:(o,n)=>m(o.await(),s=>{switch(s._tag){case ye:return m(o.inheritAll(),()=>r.onSelfDone(s,n));case xe:return r.onSelfDone(s,n)}}),onOtherWin:(o,n)=>m(o.await(),s=>{switch(s._tag){case ye:return m(o.inheritAll(),()=>r.onOtherDone(s,n));case xe:return r.onOtherDone(s,n)}})})),zF=e=>_e(t=>rr(r=>m(fs(t(e)),o=>on(()=>jw(r)(o))(t(ps(o)))))),pf=u(2,(e,t)=>rr(r=>ay(e,t,{onSelfDone:(o,n)=>Xn(o,{onFailure:s=>vi(i=>je(s,i))(ps(n)),onSuccess:s=>X(s)(or(r)(n))}),onOtherDone:(o,n)=>Xn(o,{onFailure:s=>vi(i=>je(i,s))(ps(n)),onSuccess:s=>X(s)(or(r)(n))})}))),cy=u(3,(e,t,r)=>he((o,n)=>{let s=n.runtimeFlags,i=Dt(!0),a=Yx(e,o,s,r.selfScope),c=Yx(t,o,s,r.otherScope);return tr(p=>{a.unsafeAddObserver(()=>hF(a,c,r.onSelfWin,i,p)),c.unsafeAddObserver(()=>hF(c,a,r.onOtherWin,i,p)),a.startFork(e),c.startFork(t)},hh(a.id(),c.id()))})),hF=(e,t,r,o,n)=>{Uu(!0,!1)(o)&&n(r(e,t))},no=u(2,(e,t)=>_e(r=>ee(r(e),{onFailure:o=>ee(t,{onFailure:n=>U(ve(o,n)),onSuccess:()=>U(o)}),onSuccess:o=>X(t,o)}))),qN=(e,t)=>rr(r=>m(m(fs(Xt(e)),o=>tr(n=>{let s=t.map(c=>c.listeners.count),i=()=>{s.every(c=>c===0)&&(a.forEach(c=>c()),n(nn(o)))};o.unsafeAddObserver(c=>{a.forEach(p=>p()),n(c)});let a=t.map((c,p)=>{let l=f=>{s[p]=f,i()};return c.listeners.addObserver(l),()=>c.listeners.removeObserver(l)});return i(),D(()=>{a.forEach(c=>c())})})),()=>v(()=>{let o=t.flatMap(n=>n.state.completed?[]:[n]);return wt(o,n=>QR(n.request,Zp(r)))})));var KF=(e,t)=>Ac(ki(e,t),(r,o)=>m(Kl,n=>D(()=>r.end(n,o)))),lf=(e,t)=>m(ki(e,t),r=>Fr(Mo,Vo(r))),ff=e=>Fr(ft,ke(Fi,e)),mf=e=>Fr(Mo,Vo(e));var $F,JF,GF=(e,t,r,o)=>go({_tag:"Complete",key:e,exit:t,entryStats:r,timeToLiveMillis:o}),VF=(e,t)=>go({_tag:"Pending",key:e,deferred:t}),HN=(e,t)=>go({_tag:"Refreshing",deferred:e,complete:t}),uy=Symbol.for("@effect/cache/Cache/MapKey"),py=class{constructor(t){this.current=t,this[$F]=uy,this.previous=void 0,this.next=void 0}[($F=uy,R)](){return T(E(this.next))(T(E(this.previous))(E(this.current)))}[F](t){return this===t?!0:jN(t)&&O(this.current,t.current)&&O(this.previous,t.previous)&&O(this.next,t.next)}},Ui=e=>new py(e),jN=e=>typeof e=="object"&&e!=null&&uy in e,ly=class{constructor(){this.head=void 0,this.tail=void 0}add(t){if(t!==this.tail)if(this.tail===void 0)this.head=t,this.tail=t;else{let r=t.previous,o=t.next;o!==void 0&&(t.next=void 0,r!==void 0?(r.next=o,o.previous=r):(this.head=o,this.head.previous=void 0)),this.tail.next=t,t.previous=this.tail,this.tail=t}}remove(){let t=this.head;if(t!==void 0){let r=t.next;r!==void 0?(t.next=void 0,this.head=r,this.head.previous=void 0):(this.head=void 0,this.tail=void 0)}return t}},BN=()=>new ly,UN=(e,t,r,o,n,s)=>({map:e,keys:t,accesses:r,updating:o,hits:n,misses:s}),WN=()=>UN(Fn(),BN(),jS(),Dt(!1),0,0),zN="@effect/cache/Cache",KN=Symbol.for(zN),$N={_Key:e=>e,_Error:e=>e,_Value:e=>e},GN=e=>e,df=e=>({loadedMillis:e}),fy=class{constructor(t,r,o,n,s){this.capacity=t,this.context=r,this.fiberId=o,this.lookup=n,this.timeToLive=s,this[JF]=$N,this.cacheState=WN()}get(t){return _(this.getEither(t),Du)}cacheStats(){return D(()=>GN({hits:this.cacheState.hits,misses:this.cacheState.misses,size:Wu(this.cacheState.map)}))}getOption(t){return v(()=>He(Ce(this.cacheState.map,t),{onNone:()=>{let r=Ui(t);return this.trackAccess(r),this.trackMiss(),y(g())},onSome:r=>this.resolveMapValue(r)}))}getOptionComplete(t){return v(()=>He(Ce(this.cacheState.map,t),{onNone:()=>{let r=Ui(t);return this.trackAccess(r),this.trackMiss(),y(g())},onSome:r=>this.resolveMapValue(r,!0)}))}contains(t){return D(()=>xr(this.cacheState.map,t))}entryStats(t){return D(()=>{let r=Ce(this.cacheState.map,t);if(P(r))switch(r.value._tag){case"Complete":{let o=r.value.entryStats.loadedMillis;return x(df(o))}case"Pending":return g();case"Refreshing":{let o=r.value.complete.entryStats.loadedMillis;return x(df(o))}}return g()})}getEither(t){return v(()=>{let r=t,o,n,s=$e(Ce(this.cacheState.map,r));return s===void 0&&(n=lg(this.fiberId),o=Ui(r),xr(this.cacheState.map,r)?s=$e(Ce(this.cacheState.map,r)):St(this.cacheState.map,r,VF(o,n))),s===void 0?(this.trackAccess(o),this.trackMiss(),_(this.lookupValueOf(t,n),H)):m(this.resolveMapValue(s),He({onNone:()=>this.getEither(t),onSome:i=>y(z(i))}))})}invalidate(t){return D(()=>{An(this.cacheState.map,t)})}invalidateWhen(t,r){return D(()=>{let o=Ce(this.cacheState.map,t);P(o)&&o.value._tag==="Complete"&&o.value.exit._tag==="Success"&&r(o.value.exit.value)&&An(this.cacheState.map,t)})}invalidateAll(){return D(()=>{this.cacheState.map=Fn()})}refresh(t){return oo(r=>v(()=>{let o=t,n=lg(this.fiberId),s=$e(Ce(this.cacheState.map,o));if(s===void 0&&(xr(this.cacheState.map,o)?s=$e(Ce(this.cacheState.map,o)):St(this.cacheState.map,o,VF(Ui(o),n))),s===void 0)return oe(this.lookupValueOf(t,n));switch(s._tag){case"Complete":{if(this.hasExpired(r,s.timeToLiveMillis)){let i=$e(Ce(this.cacheState.map,o));return O(i,s)&&An(this.cacheState.map,o),oe(this.get(t))}return oe(zl(()=>{let i=$e(Ce(this.cacheState.map,o));if(O(i,s)){let a=HN(n,s);return St(this.cacheState.map,o,a),!0}return!1})(this.lookupValueOf(t,n)))}case"Pending":return ts(s.deferred);case"Refreshing":return ts(s.deferred)}}))}set(t,r){return oo(o=>D(()=>{let n=o.unsafeCurrentTimeMillis(),s=t,i=U0(r),a=GF(Ui(s),i,df(n),n+qr(Xe(this.timeToLive(i))));St(this.cacheState.map,s,a)}))}size(){return D(()=>Wu(this.cacheState.map))}values(){return D(()=>{let t=[];for(let r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&t.push(r[1].exit.value);return t})}entries(){return D(()=>{let t=[];for(let r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&t.push([r[0],r[1].exit.value]);return t})}keys(){return D(()=>{let t=[];for(let r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&t.push(r[0]);return t})}resolveMapValue(t,r=!1){return oo(o=>{switch(t._tag){case"Complete":return this.trackAccess(t.key),this.trackHit(),this.hasExpired(o,t.timeToLiveMillis)?(An(this.cacheState.map,t.key.current),y(g())):_(t.exit,x);case"Pending":return this.trackAccess(t.key),this.trackHit(),r?y(g()):_(ts(t.deferred),x);case"Refreshing":return this.trackAccess(t.complete.key),this.trackHit(),this.hasExpired(o,t.complete.timeToLiveMillis)?r?y(g()):_(ts(t.deferred),x):_(t.complete.exit,x)}})}trackHit(){this.cacheState.hits=this.cacheState.hits+1}trackMiss(){this.cacheState.misses=this.cacheState.misses+1}trackAccess(t){if(BS(this.cacheState.accesses,t),Uu(this.cacheState.updating,!1,!0)){let r=!0;for(;r;){let n=US(this.cacheState.accesses,$d);n===$d?r=!1:this.cacheState.keys.add(n)}let o=Wu(this.cacheState.map);for(r=o>this.capacity;r;){let n=this.cacheState.keys.remove();n!==void 0?xr(this.cacheState.map,n.current)&&(An(this.cacheState.map,n.current),o=o-1,r=o>this.capacity):r=!1}Zt(this.cacheState.updating,!1)}}hasExpired(t,r){return t.unsafeCurrentTimeMillis()>r}lookupValueOf(t,r){return oo(o=>v(()=>{let n=t;return on(()=>$(H0(r),D(()=>{An(this.cacheState.map,n)})))(m(s=>{let i=o.unsafeCurrentTimeMillis(),a=df(i),c=GF(Ui(n),s,a,i+qr(Xe(this.timeToLive(s))));return St(this.cacheState.map,n,c),$(q0(r,s),s)})(ne(Lt(this.context)(this.lookup(t)))))}))}};JF=KN;var YF=(e,t,r)=>new fy(e,Tt(),ep,t,o=>Xe(r(o)));var VN="@effect/io/Schedule/Interval",my=Symbol.for(VN),ZF={[my]:my,startMillis:0,endMillis:0};var QF=ZF;var XF=e=>J(()=>QF)(vn(e.intervals)).startMillis;var eA=XF;var XN="Done";var tA=e=>e._tag===XN;var rA=tA;var rL,oA,oL="@effect/io/Schedule",nL=Symbol.for(oL),sL="@effect/io/Schedule/Driver",iL=Symbol.for(sL);var aL={_Env:e=>e,_In:e=>e,_Out:e=>e};rL=nL;var dy=class{constructor(t,r){this.schedule=t,this.ref=r,this[oA]=aL}state(){return _(Rr(this.ref),t=>t[1])}last(){return m(Rr(this.ref),([t,r])=>{switch(t._tag){case"None":return Cr(()=>Co());case"Some":return y(t.value)}})}reset(){return ro(this.ref,[g(),this.schedule.initial])}next(t){return m(r=>m(o=>m(([n,s,i])=>rA(i)?$(W(g()))(ro(this.ref,[x(s),n])):X(s)($(Mi(qs(eA(i.intervals)-o)))(ro(this.ref,[x(s),n]))))(v(()=>this.schedule.step(o,t,r))))(Rl))(_(Rr(this.ref),r=>r[1]))}};oA=iL;var hy=e=>_(t=>new dy(e,t))(ns([g(),e.initial]));var nA=u(2,(e,t)=>gy(e,t,(r,o)=>W(r))),gy=u(3,(e,t,r)=>m(hy(t),o=>pe(e,{onFailure:n=>r(n,g()),onSuccess:n=>sA(e,o,r,n)}))),sA=(e,t,r,o)=>pe(t.next(o),{onFailure:()=>Vn(t.last()),onSuccess:n=>pe(e,{onFailure:s=>r(s,x(n)),onSuccess:s=>sA(e,t,r,s)})}),iA=u(2,(e,t)=>Tc(e,r=>D(()=>t(r)))),Tc=u(2,(e,t)=>m(e,r=>m(t(r),o=>o?y(r):m(Ht(),()=>Tc(e,t))))),aA=u(2,(e,t)=>xy(e,r=>D(()=>t(r)))),xy=u(2,(e,t)=>Tc(e,r=>lc(t(r)))),cA=u(2,(e,t)=>yy(e,t,(r,o)=>W(r))),uA=u(2,(e,t)=>pA(e,t)),pA=(e,t)=>_t(e,r=>t<0?W(r):m(Ht(),()=>pA(e,t-1))),yy=u(3,(e,t,r)=>m(hy(t),o=>lA(e,o,r))),lA=(e,t,r)=>_t(e,o=>pe(t.next(o),{onFailure:()=>m(n=>r(o,n))(Vn(t.last())),onSuccess:()=>lA(e,t,r)})),fA=u(2,(e,t)=>kc(e,r=>D(()=>t(r)))),kc=u(2,(e,t)=>_t(e,r=>m(t(r),o=>o?W(r):m(Ht(),()=>kc(e,t))))),mA=u(2,(e,t)=>by(e,r=>D(()=>t(r)))),by=u(2,(e,t)=>kc(e,r=>lc(t(r)))),hf=u(2,(e,t)=>Dy(e,void 0,t)),Dy=u(3,(e,t,r)=>m(hy(r),o=>dA(e,t,o))),dA=(e,t,r)=>pe(r.next(t),{onFailure:()=>Vn(r.last()),onSuccess:()=>m(e,o=>dA(e,o,r))});var gA,yA,bA,Ey=class{constructor(t){this.permits=t,this.waiters=new Array,this.taken=0,this.take=r=>Gr(o=>{if(this.free<r){let n=()=>{if(this.free>=r){let s=this.waiters.findIndex(i=>i===n);s!==-1&&this.waiters.splice(s,1),this.taken+=r,o(y(r))}};return this.waiters.push(n),z(D(()=>{let s=this.waiters.findIndex(i=>i===n);s!==-1&&this.waiters.splice(s,1)}))}return this.taken+=r,H(y(r))}),this.release=r=>he(o=>(this.taken-=r,o.getFiberRef(Ao).scheduleTask(()=>{this.waiters.forEach(n=>n())},o.getFiberRef(Ka)),N)),this.withPermits=r=>o=>_e(n=>m(n(this.take(r)),s=>no(n(o),this.release(s))))}get free(){return this.permits-this.taken}},xf=e=>new Ey(e),DA=e=>D(()=>xf(e)),SA=e=>yf(e,WF),EA=u(2,(e,t)=>_(_y(e,t),r=>r[0])),_y=u(2,(e,t)=>{let r=Xe(t);return m(Yr(),o=>_(bf(g()),n=>[Lt(cL(e,r,n),o),uL(n)]))}),xA=(e,t,r)=>{let o=qr(Xe(t));return _(n=>x([r+o,n]))(qt(n=>Qr(e,n))(lt()))},cL=(e,t,r)=>_e(o=>m(n=>j(n)?li("BUG: Effect.cachedInvalidate - please report an issue at https://github.com/Effect-TS/io/issues"):o(Pe(n.value[1])))(m(n=>dL(r,s=>{switch(s._tag){case"None":return x(xA(e,t,n));case"Some":{let[i]=s.value;return i-n<=0?x(xA(e,t,n)):g()}}}))(oo(n=>n.currentTimeMillis)))),uL=e=>ro(e,g()),CA=u(2,(e,t)=>yf(e,r=>t(uf(r)))),yf=u(2,(e,t)=>m(oF,r=>no(m(r.value(),t))(Ry(e,r)))),_A=u(e=>Vt(e[0]),(e,t)=>t?.discard?wt(e,jt):_(Ve(e,jt),uf)),Oy=u(2,(e,t)=>_e(r=>m(t.fork(Ni),o=>qt(n=>o.addFinalizer(()=>rr(s=>O(s,n.id())?N:oe(nn(n)))))(fs(_r(n=>o.close(n))(r(e))))))),wy=e=>ln(t=>Oy(e,t)),OA=e=>ps(e),wA=e=>v(()=>m(e,ps)),Sy=Symbol.for("@effect/io/Effect/memoizeFunction.key"),gf=class{constructor(t,r){this.a=t,this.eq=r,this[gA]=Sy}[(gA=Sy,F)](t){return typeof t=="object"&&t!==null&&Sy in t?this.eq?this.eq(this.a,t.a):O(this.a,t.a):!1}[R](){return this.eq?0:E(this.a)}},RA=(e,t)=>_(r=>o=>m(([n,s])=>X(s)(as(n)))(m(Pe)(r.modifyEffect(n=>{let s=Ce(new gf(o,t))(n);return j(s)?_(i=>[i,St(new gf(o,t),i)(n)])(qt(i=>jt(Qr(i)(ss(e(o)))))(lt())):y([s.value,n])}))))(m(bf)(D(()=>Fn()))),FA=u(2,(e,t)=>(r=>Ot(r))(pf(ne(t))(ne(e)))),AA=u(2,(e,t)=>wy(hf(t)(e))),Ry=u(2,(e,t)=>Je(Hi,o=>o.zip(t))(e)),vA=u(2,(e,t)=>Ic(e,{onTimeout:g,onSuccess:x,duration:t})),MA=u(2,(e,{duration:t,onTimeout:r})=>Ot(Ic(e,{onTimeout:()=>Cr(r),onSuccess:y,duration:t}))),TA=u(2,(e,{duration:t,onTimeout:r})=>Ot(Ic(e,{onTimeout:()=>Zr(r),onSuccess:y,duration:t}))),Ic=u(2,(e,{duration:t,onSuccess:r,onTimeout:o})=>rr(n=>cy(e,Xt(Mi(t)),{onSelfWin:(s,i)=>m(s.await(),a=>a._tag==="Success"?m(s.inheritAll(),()=>X(or(i,n),r(a.value))):m(or(i,n),()=>Y(a.cause))),onOtherWin:(s,i)=>m(s.await(),a=>a._tag==="Success"?m(s.inheritAll(),()=>X(or(i,n),o())):m(or(i,n),()=>Y(a.cause))),otherScope:us}))),pL="@effect/io/Ref/Synchronized",lL=Symbol.for(pL),fL={_A:e=>e},Cy=class{constructor(t,r){this.ref=t,this.withLock=r,this[yA]=fL,this[bA]=Bg}modify(t){return this.modifyEffect(r=>y(t(r)))}modifyEffect(t){return this.withLock(m(([r,o])=>X(ro(this.ref,o),r))(m(Rr(this.ref),t)))}pipe(){return C(this,arguments)}};yA=lL,bA=Pl;var bf=e=>D(()=>mL(e)),mL=e=>{let t=Nl(e),r=xf(1);return new Cy(t,r.withPermits(1))},dL=u(2,(e,t)=>e.modifyEffect(r=>{let o=t(r);switch(o._tag){case"None":return y([r,r]);case"Some":return _(o.value,n=>[n,n])}}));var IA="Fresh",PA="FromEffect",NA="Scoped",LA="Suspend";var qA="ZipWithPar";var HA=or;var Sf=e=>(t,r)=>{let o=op(),n=t,s=Mg(e.fiberRefs,{fiberId:o,fiberRef:Fo,value:e.context});r?.scheduler&&(s=Mg(s,{fiberId:o,fiberRef:Ao,value:r.scheduler})),r?.updateRefs&&(s=r.updateRefs(s,o));let i=new Rc(o,GC(s,o),e.runtimeFlags),a=i._supervisor;return a!==ls&&(a.onStart(e.context,n,g(),i),i.unsafeAddObserver(c=>a.onEnd(c,i))),us.add(e.runtimeFlags,i),i.start(n),i},Fy=e=>(t,r)=>{let o=Sf(e)(t);return r&&o.unsafeAddObserver(n=>{r(n)}),(n,s)=>Fy(e)(HA(n??ut)(o),s?i=>s(B0(i)):void 0)},xL=e=>t=>{let r=zA(e)(t);if(r._tag==="Failure")throw UA(r.i0);return r.i0},yL=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let r=new Error;Error.stackTraceLimit=t;let o=`Fiber #${e.id().id} cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work`,n="AsyncFiberException";return Object.defineProperties(r,{_tag:{value:n},message:{value:o},name:{value:n},toString:{get(){return()=>o}},[BA]:{get(){return()=>o}}}),r};var jA=Symbol.for("@effect/io/Runtime/FiberFailure"),bL=Symbol.for("@effect/io/Runtime/FiberFailure/Cause"),BA=Symbol.for("nodejs.util.inspect.custom"),UA=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let r=new Error;Error.stackTraceLimit=t;let o=lp(e);return o.length>0&&(r.name=o[0].message.split(":")[0],r.message=o[0].message.substring(r.name.length+2),r.stack=`${r.name}: ${r.message}
${o[0].stack}`),r[jA]=jA,r[bL]=e,r.toString=()=>_o(e),r[BA]=()=>r.toString(),r};var WA=e=>{let t=e;switch(t._tag){case"Failure":case"Success":return t;case"Left":return Or(t.left);case"Right":return se(t.right);case"Some":return se(t.value);case"None":return Or(Co())}},zA=e=>t=>{let r=WA(t);if(r)return r;let o=new Rp,n=Sf(e)(t,{scheduler:o});o.flush();let s=n.unsafePoll();if(s)return s;throw yL(n)},DL=e=>t=>KA(e)(t).then(r=>{switch(r._tag){case ye:return r.i0;case xe:throw UA(r.i0)}}),KA=e=>t=>new Promise(r=>{let o=WA(t);o&&r(o),Sf(e)(t).unsafeAddObserver(n=>{r(n)})}),Df=class{constructor(t,r,o){this.context=t,this.runtimeFlags=r,this.fiberRefs=o}pipe(){return C(this,arguments)}},SL=e=>new Df(e.context,e.flags,e.fiberRefs),Ay=()=>he((e,t)=>y(new Df(e.getFiberRef(Fo),t.runtimeFlags,e.unsafeGetFiberRefs()))),EL=xp(Er,gp,hp),Ar=SL({context:Tt(),flags:EL,fiberRefs:YC(new Map)}),$A=Fy(Ar),GA=Sf(Ar),VA=DL(Ar),JA=KA(Ar),YA=xL(Ar),ZA=zA(Ar),QA=e=>m(lt(),t=>m(Ay(),r=>_e(o=>$(jt(o(Vr(e(n=>Fy(r)(Qr(n,t))),n=>es(t,n)))),o(Pe(t))))));var XA=u(2,(e,t)=>e.modifyEffect(t));var OL="@effect/io/Layer",wL=Symbol.for(OL),RL={_RIn:e=>e,_E:e=>e,_ROut:e=>e},Ef={[wL]:RL,pipe(){return C(this,arguments)}};var FL=e=>e._tag===IA,vy=class{constructor(t){this.ref=t}getOrElseMemoize(t,r){return Ot(XA(this.ref,o=>{let n=o.get(t);if(n!==void 0){let[s,i]=n,a=_r(Qp({onFailure:()=>N,onSuccess:()=>yi(r,i)}))(m(([c,p])=>X(p)(as(c)))(s));return y([a,o])}return m(s=>m(i=>_(a=>{let c=_e(l=>m(f=>m(d=>{switch(d._tag){case xe:return $(U(d.i0))($(sn(f,d))(es(i,d.i0)));case ye:return X(d.i0[1])($(Ei(i,d.i0))($(yi(r,h=>m(S=>S(h))(Rr(a))))($(ic(s,h=>h+1))(ro(a,h=>oe(hi(Ll(s,S=>[S===1,S-1]))(sn(f,h))))))))}})(ne(l(m(t2(t,f),d=>ss(d(this)))))))(ms())),p=[_r(Xn({onFailure:()=>N,onSuccess:()=>ic(s,l=>l+1)}))(Pe(i)),l=>m(f=>f(l))(Rr(a))];return[c,FL(t)?o:o.set(t,p)]})(ns(()=>N)))(lt()))(ns(0))}))}},AL=()=>_(bf(new Map),e=>new vy(e));var e2=u(2,(e,t)=>m(AL(),r=>m(t2(e,t),o=>o(r)))),t2=(e,t)=>{let r=e;switch(r._tag){case"Locally":return D(()=>o=>r.f(o.getOrElseMemoize(r.self,t)));case"ExtendScope":return D(()=>o=>ln(n=>o.getOrElseMemoize(r.layer,n)));case"Fold":return D(()=>o=>ee({onFailure:n=>o.getOrElseMemoize(r.failureK(n),t),onSuccess:n=>o.getOrElseMemoize(r.successK(n),t)})(o.getOrElseMemoize(r.layer,t)));case"Fresh":return D(()=>o=>e2(t)(r.layer));case"FromEffect":return D(()=>o=>r.effect);case"ProvideTo":return D(()=>o=>m(n=>Lt(n)(o.getOrElseMemoize(r.second,t)))(o.getOrElseMemoize(r.first,t)));case"Scoped":return D(()=>o=>ds(r.effect,t));case"Suspend":return D(()=>o=>o.getOrElseMemoize(r.evaluate(),t));case"ZipWith":return D(()=>o=>Ro(o.getOrElseMemoize(r.second,t),r.zipK)(o.getOrElseMemoize(r.first,t)));case"ZipWithPar":return D(()=>o=>Io(o.getOrElseMemoize(r.second,t),r.zipK,{concurrent:!0})(o.getOrElseMemoize(r.first,t)))}};var vL=()=>ML(Yr());function ML(e){let t=Object.create(Ef);return t._tag=PA,t.effect=e,t}var TL=u(2,(e,t)=>PL(e,t,(r,o)=>En(o)(r)));var Bt=e=>kL(X(Tt())(e)),kL=e=>{let t=Object.create(Ef);return t._tag=NA,t.effect=e,t};var IL=e=>{let t=Object.create(Ef);return t._tag=LA,t.evaluate=e,t};var PL=u(3,(e,t,r)=>IL(()=>{let o=Object.create(Ef);return o._tag=qA,o.first=e,o.second=t,o.zipK=r,o})),My=u(2,(e,t)=>er(ms(),r=>m(e2(t,r),o=>Lt(e,o)),(r,o)=>sn(r,o))),r2=u(2,(e,t)=>My(e,TL(vL(),t)));var n2=e=>Bt(af(e)),s2=e=>Bt(mf(e)),i2=(e,t)=>Bt(lf(e,t)),a2=e=>Bt(ff(e));var Ty=Wn;var Wi=Se(YF(65536,()=>_(lt(),e=>({listeners:new Ec,handle:e})),()=>Dd(60))),Pc=V(Symbol.for("@effect/io/FiberRef/currentCacheEnabled"),()=>Se(!1)),ky=(e,t)=>m(De(t)?t:y(t),r=>rr(o=>{let n=new Proxy(e,{});return Oe(Pc,s=>{if(s)return Oe(Wi,a=>m(a.getEither(n),c=>{switch(c._tag){case"Left":return c.left.listeners.increment(),be(ZE,m(ne(Pe(c.left.handle)),p=>p._tag==="Failure"&&Qo(p.cause)?(c.left.listeners.decrement(),m(a.invalidateWhen(n,l=>l.handle===c.left.handle),()=>ky(n,t))):no(Pe(c.left.handle),D(()=>c.left.listeners.decrement()))));case"Right":return c.right.listeners.increment(),be(Hh(r,jh({request:n,result:c.right.handle,listeners:c.right.listeners,ownerId:o,state:{completed:!1}})),_e(p=>m(ne(p(Pe(c.right.handle))),l=>(c.right.listeners.decrement(),l))))}}));let i=new Ec;return i.increment(),m(lt(),a=>be(Hh(r,jh({request:n,result:a,listeners:i,ownerId:o,state:{completed:!1}})),no(Pe(a),D(()=>i.decrement()))))})})),c2=(e,t)=>Oe(Pc,r=>r?Oe(Wi,o=>m(o.getEither(e),n=>{switch(n._tag){case"Left":return N;case"Right":return ug(n.right.handle,t)}})):N),u2=u(2,(e,t)=>we(e,Pc,t)),p2=u(2,(e,t)=>we(e,Wi,t));var HL=pi,jL=De,BL=EA,UL=_y,WL=Gg,zL=RA,KL=Vg,$L=Bi,GL=CF,VL=_F,JL=B_,YL=U_,ZL=Z_,QL=DF,XL=EF,e3=G_,t3=J_,Nc=ar,r3=tO,o3=Xx,n3=ey,s3=FO,i3=vF,a3=AO,c3=vO,u3=Zx,p3=OF,l3=qO,f3=HO,m3=FF,d3=LF,h3=tr,g3=QA,x3=O_,y3=Gr,b3=W,D3=Cr,S3=U,E3=Zr,C3=$h,_3=li,O3=en,w3=eO,R3=Zn,F3=DO,A3=OO,v3=y,M3=Ti,T3=Yg,zi=v,k3=D,Rt=N,I3=Ht,P3=w_;var N3=_t,L3=Vr,q3=R_,H3=g0,j3=F_,B3=A_,U3=v_,W3=M_,z3=T_,K3=Wg,$3=rO,G3=oO,V3=_O,J3=IO,Y3=cA,Z3=uA,Q3=yy,X3=fA,eq=kc,tq=mA,rq=by,oq=cc;var nq=GO,sq=VO,iq=tx,aq=ZO,cq=P_,uq=x0,pq=zF,lq=Ip,fq=Pp,mq=Xt,dq=y0,hq=on,gq=$r,xq=_e,yq=X,bq=jl,Dq=__,Sq=oe,Eq=rn,Cq=Y_,Ny=_,_q=yO,Oq=Np,wq=wo,Rq=vi,Fq=bO,Aq=lc,vq=Ac,Mq=yF,l2=er,Tq=vc,kq=no,Iq=Lp,Pq=_r,Nq=MF,Lq=TF,qq=cf,Hq=ln,jq=ty,Bq=IF,Uq=HF,Wq=SA,zq=bF,Kq=N_,$q=Bl,Gq=ss,Vq=CA,Jq=yf,Yq=tn,Zq=rr,Qq=jt,Xq=fs,eH=_A,tH=Oy,rH=wy,oH=wF,nH=OA,sH=wA,iH=Ry,aH=Hp,cH=S0,uH=e=>Bt(cr(Ao,e)),pH=A0,lH=F0,fH=ng,mH=k_,dH=oo,hH=e=>Bt(Fr(ft,ke(eo,e))),gH=qF,xH=LC,yH=I_,bH=Mi,DH=zO,SH=ex,EH=vA,CH=MA,_H=TA,OH=Ic,wH=HC,RH=wg,FH=n2,AH=qC,vH=af,MH=Yr,f2=W_,TH=fi,kH=Jn,IH=Lt,m2=D0,PH=u(2,(e,t)=>{let r=Ty(Ar.runtimeFlags,t.runtimeFlags),o=Ty(t.runtimeFlags,Ar.runtimeFlags),n=Pi(Ar.fiberRefs,t.fiberRefs),s=Pi(t.fiberRefs,Ar.fiberRefs);return l2(m(Py(r),()=>Iy(n)),()=>m2(e,t.context),()=>m(Py(o),()=>Iy(s)))}),NH=My,LH=wO,qH=Jg,HH=r2,jH=ow,BH=rw,UH=rx,WH=ox,zH=nw,KH=e=>f2(t=>xd(t,e)),$H=QO,GH=L_,VH=q_,JH=H_,YH=j_;var fn=Jr,ZH=ne,QH=Qr,XH=SO,ej=NO,tj=PF,rj=kp;var oj=z_,nj=K_,sj=uc,ij=$_,aj=JO,cj=YO,uj=zl,pj=hi,lj=XO,fj=ew,Ut=m,mj=Ot,dj=AF,hj=pf,gj=FA,xj=ay,yj=Ul,bj=qt,Dj=jO,Sj=BO,Ej=Xg,Cj=UO,_j=WO,Oj=X_,wj=Kg,Rj=hO,Fj=nA,Aj=TO,vj=gy,Mj=iA,Tj=Tc,kj=aA,Ij=xy,Pj=hf,Nj=AA,Lj=Dy,qj=Yn,Hj=zg,jj=nO,Bj=we,Uj=Je,Wj=cr,zj=Fr,Iy=as,Kj=PO,$j=Wl,Gj=sO,Vj=iO,Jj=pc,Yj=za,Zj=ee,Qj=pe,Xj=aO,eB=cO,tB=$g,rB=uO,oB=pO,nB=lO,sB=fO,iB=mO,aB=C_,cB=dO,uB=v0,pB=e=>Bt(cr(Va,e)),lB=Vn,fB=Gh,mB=Gn,dB=EO,hB=CO,gB=RO,xB=Ol,yB=Ay,bB=qp,Py=di,DB=C0,SB=sy,EB=LO,CB=Zg,_B=Qg,OB=kF,wB=ry,RB=oy,FB=M0,AB=tw,vB=Xo,MB=I,TB=xf,kB=DA,IB=GA,PB=$A,d2=VA,NB=JA,LB=YA,qB=ZA,HB=NF,jB=ny,BB=jF,UB=BF,WB=UF,zB=Io,KB=be,$B=Tp,GB=Kr,VB=mi,JB=ky,YB=c2,ZB=E0,QB=e=>Bt(cr(Ga,e)),XB=e=>Bt(cr(Pc,e)),e5=e=>Bt(De(e)?m(e,t=>cr(Wi,t)):cr(Wi,e)),t5=u2,r5=p2,o5=a2,n5=$O,s5=wl,i5=jC,a5=ff,c5=_0,u5=e=>Bt(cr(Ja,e)),p5=iw,l5=sw,f5=sx,m5=nx,d5=cw,h5=uw,g5=aw,x5=ki,y5=s2,b5=i2,D5=ix,S5=KF,E5=pw,C5=lf,_5=ax,O5=mf,w5=lw,R5=fw;var Ft={};_s(Ft,{ConfigTypeId:()=>F5,all:()=>A5,array:()=>v5,boolean:()=>M5,chunk:()=>T5,date:()=>k5,fail:()=>I5,hashMap:()=>e6,hashSet:()=>J5,integer:()=>N5,isConfig:()=>q5,logLevel:()=>L5,map:()=>H5,mapAttempt:()=>j5,mapOrFail:()=>B5,nested:()=>U5,number:()=>P5,option:()=>K5,orElse:()=>W5,orElseIf:()=>z5,primitive:()=>$5,repeat:()=>G5,secret:()=>V5,string:()=>Y5,succeed:()=>Z5,suspend:()=>Q5,sync:()=>X5,unwrap:()=>t6,validate:()=>r6,withDefault:()=>o6,withDescription:()=>n6,zip:()=>s6,zipWith:()=>i6});var F5=Dl,A5=hC,v5=oC,M5=rC,T5=Sl,k5=nC,I5=sC,P5=iC,N5=aC,L5=cC,q5=yg,H5=ko,j5=uC,B5=Oi,U5=sr,W5=lC,z5=El,K5=fC,$5=an,G5=bl,V5=mC,J5=dC,Y5=xg,Z5=wi,Q5=ec,X5=xC,e6=yC,t6=bg,r6=bC,o6=DC,n6=SC,s6=EC,i6=tc;var Cf={};_s(Cf,{Tag:()=>bt,add:()=>ke,empty:()=>Tt,get:()=>Lr,getOption:()=>xd,isContext:()=>Uk,isTag:()=>WD,make:()=>Ru,merge:()=>En,omit:()=>zk,pick:()=>Wk,unsafeGet:()=>Ls});var Ki={};_s(Ki,{Class:()=>$D,TaggedClass:()=>Yk,array:()=>Vk,case:()=>Jk,struct:()=>go,tagged:()=>KD,taggedEnum:()=>Zk,tuple:()=>Gk,unsafeArray:()=>yd,unsafeStruct:()=>zD});var L={};_s(L,{Do:()=>GH,EffectTypeId:()=>HL,acquireRelease:()=>vq,acquireReleaseInterruptible:()=>Mq,acquireUseRelease:()=>l2,addFinalizer:()=>Tq,all:()=>$L,allSuccesses:()=>VL,allWith:()=>GL,allowInterrupt:()=>cq,annotateCurrentSpan:()=>l5,annotateLogs:()=>aB,annotateSpans:()=>p5,as:()=>yq,asSome:()=>bq,asSomeError:()=>Dq,asUnit:()=>Sq,async:()=>h3,asyncEffect:()=>g3,asyncEither:()=>y3,asyncOption:()=>x3,awaitAllChildren:()=>Wq,bind:()=>VH,bindTo:()=>JH,blocked:()=>KB,cacheRequestResult:()=>YB,cached:()=>WL,cachedFunction:()=>zL,cachedInvalidateWithTTL:()=>UL,cachedWithTTL:()=>BL,catch:()=>P3,catchAll:()=>N3,catchAllCause:()=>L3,catchAllDefect:()=>q3,catchSome:()=>H3,catchSomeCause:()=>j3,catchSomeDefect:()=>B3,catchTag:()=>U3,catchTags:()=>W3,cause:()=>z3,checkInterruptible:()=>uq,clock:()=>mH,clockWith:()=>dH,config:()=>wH,configProviderWith:()=>RH,context:()=>MH,contextWith:()=>f2,contextWithEffect:()=>TH,currentParentSpan:()=>m5,currentSpan:()=>f5,daemonChildren:()=>zq,delay:()=>yH,descriptor:()=>Kq,descriptorWith:()=>$q,die:()=>C3,dieMessage:()=>_3,dieSync:()=>O3,diffFiberRefs:()=>Gq,disconnect:()=>pq,dropUntil:()=>JL,dropWhile:()=>YL,either:()=>fn,ensuring:()=>kq,ensuringChild:()=>Vq,ensuringChildren:()=>Jq,eventually:()=>K3,every:()=>ZL,exists:()=>QL,exit:()=>ZH,fail:()=>b3,failCause:()=>S3,failCauseSync:()=>E3,failSync:()=>D3,fiberId:()=>Yq,fiberIdWith:()=>Zq,filter:()=>XL,filterOrDie:()=>oj,filterOrDieMessage:()=>nj,filterOrElse:()=>sj,filterOrFail:()=>ij,findFirst:()=>e3,firstSuccessOf:()=>t3,flatMap:()=>Ut,flatMapStep:()=>VB,flatten:()=>mj,flip:()=>Eq,flipWith:()=>Cq,forEach:()=>Nc,forever:()=>Oj,fork:()=>Qq,forkAll:()=>eH,forkDaemon:()=>Xq,forkIn:()=>tH,forkScoped:()=>rH,forkWithErrorHandler:()=>oH,fromFiber:()=>nH,fromFiberEffect:()=>sH,fromNullable:()=>w5,gen:()=>w3,getFiberRefs:()=>Hj,head:()=>r3,if:()=>rj,ignore:()=>$3,ignoreLogged:()=>G3,inheritFiberRefs:()=>jj,interrupt:()=>lq,interruptWith:()=>fq,interruptible:()=>mq,interruptibleMask:()=>dq,intoDeferred:()=>QH,isEffect:()=>jL,isFailure:()=>Gj,isSuccess:()=>Vj,iterate:()=>wj,labelMetrics:()=>CB,labelMetricsScoped:()=>wB,labelMetricsScopedSet:()=>RB,labelMetricsSet:()=>_B,let:()=>YH,linkSpans:()=>g5,locally:()=>Bj,locallyScoped:()=>Wj,locallyScopedWith:()=>zj,locallyWith:()=>Uj,log:()=>Xj,logAnnotations:()=>cB,logDebug:()=>tB,logError:()=>nB,logFatal:()=>sB,logInfo:()=>rB,logTrace:()=>eB,logWarning:()=>oB,loop:()=>Rj,makeSemaphore:()=>kB,makeSpan:()=>x5,map:()=>Ny,mapAccum:()=>_q,mapBoth:()=>Oq,mapError:()=>wq,mapErrorCause:()=>Rq,mapInputContext:()=>kH,match:()=>Jj,matchCause:()=>Yj,matchCauseEffect:()=>Zj,matchEffect:()=>Qj,merge:()=>Fq,mergeAll:()=>o3,metricLabels:()=>FB,negate:()=>Aq,never:()=>R3,none:()=>F3,onError:()=>Iq,onExit:()=>Pq,onInterrupt:()=>hq,once:()=>KL,option:()=>XH,optionFromOptional:()=>R5,orDie:()=>lB,orDieWith:()=>fB,orElse:()=>mB,orElseFail:()=>dB,orElseSucceed:()=>hB,parallelErrors:()=>V3,parallelFinalizers:()=>Nq,partition:()=>n3,patchFiberRefs:()=>Iy,promise:()=>A3,provideContext:()=>IH,provideLayer:()=>NH,provideService:()=>LH,provideServiceEffect:()=>qH,provideSomeContext:()=>m2,provideSomeLayer:()=>HH,provideSomeRuntime:()=>PH,race:()=>hj,raceAll:()=>dj,raceFirst:()=>gj,raceWith:()=>xj,random:()=>gB,randomWith:()=>xB,reduce:()=>s3,reduceEffect:()=>i3,reduceRight:()=>a3,reduceWhile:()=>c3,repeat:()=>Fj,repeatN:()=>Aj,repeatOrElse:()=>vj,repeatUntil:()=>Mj,repeatUntilEffect:()=>Tj,repeatWhile:()=>kj,repeatWhileEffect:()=>Ij,replicate:()=>u3,replicateEffect:()=>p3,request:()=>JB,retry:()=>Y3,retryN:()=>Z3,retryOrElse:()=>Q3,retryUntil:()=>X3,retryUntilEffect:()=>eq,retryWhile:()=>tq,retryWhileEffect:()=>rq,runCallback:()=>PB,runFork:()=>IB,runPromise:()=>d2,runPromiseExit:()=>NB,runRequestBlock:()=>$B,runSync:()=>LB,runSyncExit:()=>qB,runtime:()=>yB,runtimeFlags:()=>bB,sandbox:()=>J3,schedule:()=>Pj,scheduleForked:()=>Nj,scheduleFrom:()=>Lj,scope:()=>qq,scopeWith:()=>Hq,scoped:()=>jq,sequentialFinalizers:()=>Lq,serviceConstants:()=>WH,serviceFunction:()=>jH,serviceFunctionEffect:()=>BH,serviceFunctions:()=>UH,serviceMembers:()=>zH,serviceOption:()=>KH,setClock:()=>hH,setConfigProvider:()=>FH,setFiberRefs:()=>Kj,setParentSpan:()=>y5,setRequestBatching:()=>QB,setRequestCache:()=>e5,setRequestCaching:()=>XB,setScheduler:()=>uH,setSpan:()=>b5,setTracer:()=>o5,setTracerTiming:()=>u5,setUnhandledErrorLogLevel:()=>pB,sleep:()=>bH,some:()=>ej,spanAnnotations:()=>d5,spanLinks:()=>h5,step:()=>GB,succeed:()=>v3,succeedNone:()=>M3,succeedSome:()=>T3,summarized:()=>yj,supervised:()=>iH,suspend:()=>zi,sync:()=>k3,tagMetrics:()=>EB,tagMetricsScoped:()=>OB,takeUntil:()=>l3,takeWhile:()=>f3,tap:()=>bj,tapBoth:()=>Dj,tapDefect:()=>Sj,tapError:()=>Ej,tapErrorCause:()=>_j,tapErrorTag:()=>Cj,timed:()=>DH,timedWith:()=>SH,timeout:()=>EH,timeoutFail:()=>CH,timeoutFailCause:()=>_H,timeoutTo:()=>OH,tracer:()=>n5,tracerWith:()=>s5,transplant:()=>aH,try:()=>oq,tryMap:()=>nq,tryMapPromise:()=>sq,tryPromise:()=>iq,unified:()=>MB,unifiedFn:()=>vB,uninterruptible:()=>gq,uninterruptibleMask:()=>xq,unit:()=>Rt,unless:()=>aj,unlessEffect:()=>cj,unsafeMakeSemaphore:()=>TB,unsandbox:()=>aq,unsome:()=>tj,updateFiberRefs:()=>$j,updateRuntimeFlags:()=>Py,updateService:()=>$H,useSpan:()=>D5,useSpanScoped:()=>S5,using:()=>Bq,validate:()=>HB,validateAll:()=>m3,validateFirst:()=>d3,validateWith:()=>jB,when:()=>uj,whenEffect:()=>pj,whenFiberRef:()=>lj,whenRef:()=>fj,whileLoop:()=>qj,withClock:()=>xH,withClockScoped:()=>gH,withConcurrency:()=>cH,withConfigProvider:()=>AH,withConfigProviderScoped:()=>vH,withEarlyRelease:()=>Uq,withLogSpan:()=>iB,withMaxFiberOps:()=>pH,withMetric:()=>AB,withParentSpan:()=>_5,withParentSpanScoped:()=>O5,withRequestBatching:()=>ZB,withRequestCache:()=>r5,withRequestCaching:()=>t5,withRuntimeFlags:()=>DB,withRuntimeFlagsScoped:()=>SB,withScheduler:()=>lH,withSchedulingPriority:()=>fH,withSpan:()=>E5,withSpanScoped:()=>C5,withTracer:()=>i5,withTracerScoped:()=>a5,withTracerTiming:()=>c5,withUnhandledErrorLogLevel:()=>uB,yieldNow:()=>I3,zip:()=>BB,zipLeft:()=>UB,zipRight:()=>WB,zipWith:()=>zB});var qc={};_s(qc,{SafeRefinementId:()=>b6,any:()=>_6,bigint:()=>A6,boolean:()=>w6,date:()=>v6,defined:()=>O6,discriminator:()=>g2,discriminators:()=>Hy,discriminatorsExhaustive:()=>x2,either:()=>_f,exhaustive:()=>D2,instanceOf:()=>y2,instanceOfUnsafe:()=>T6,is:()=>S6,nonEmptyString:()=>D6,not:()=>y6,null:()=>F6,number:()=>C6,option:()=>I6,orElse:()=>b2,orElseAbsurd:()=>k6,record:()=>M6,string:()=>E6,tag:()=>g6,tags:()=>x6,tagsExhaustive:()=>jy,type:()=>u6,typeTags:()=>f6,undefined:()=>R6,value:()=>p6,valueTags:()=>l6,when:()=>m6,whenAnd:()=>h6,whenOr:()=>d6});var Lc=class e{constructor(t){this.cases=t,this._tag="TypeMatcher",this._input=I,this._filters=I,this._remaining=I,this._result=I}add(t){return new e([...this.cases,t])}pipe(){return C(this,arguments)}},Ly=class e{constructor(t,r){this.provided=t,this.value=r,this._tag="ValueMatcher",this._input=I,this._filters=I,this._result=I}add(t){return this.value._tag==="Right"?this:t._tag==="When"&&t.guard(this.provided)===!0?new e(this.provided,H(t.evaluate(this.provided))):t._tag==="Not"&&t.guard(this.provided)===!1?new e(this.provided,H(t.evaluate(this.provided))):this}pipe(){return C(this,arguments)}},hs=class{constructor(t,r){this.guard=t,this.evaluate=r,this._tag="When"}},qy=class{constructor(t,r){this.guard=t,this.evaluate=r,this._tag="Not"}},$i=e=>{if(typeof e=="function")return e;if(Array.isArray(e)){let t=e.map($i),r=t.length;return o=>{if(!Array.isArray(o))return!1;for(let n=0;n<r;n++)if(t[n](o[n])===!1)return!1;return!0}}else if(e!==null&&typeof e=="object"){let t=Object.entries(e).map(([o,n])=>[o,$i(n)]),r=t.length;return o=>{if(typeof o!="object"||o===null)return!1;for(let n=0;n<r;n++){let[s,i]=t[n];if(!(s in o)||i(o[s])===!1)return!1}return!0}}return t=>t===e},a6=e=>{let t=e.map($i),r=t.length;return o=>{for(let n=0;n<r;n++)if(t[n](o)===!0)return!0;return!1}},c6=e=>{let t=e.map($i),r=t.length;return o=>{for(let n=0;n<r;n++)if(t[n](o)===!1)return!1;return!0}},u6=()=>new Lc([]),p6=e=>new Ly(e,z(e)),l6=e=>{let t=jy(e)(new Lc([]));return r=>t(r)},f6=()=>e=>{let t=jy(e)(new Lc([]));return r=>t(r)},m6=(e,t)=>r=>r.add(new hs($i(e),t)),d6=(...e)=>t=>{let r=e[e.length-1],o=e.slice(0,-1);return t.add(new hs(a6(o),r))},h6=(...e)=>t=>{let r=e[e.length-1],o=e.slice(0,-1);return t.add(new hs(c6(o),r))},g2=e=>(...t)=>{let r=t[t.length-1],o=t.slice(0,-1),n=o.length===1?s=>s[e]===o[0]:s=>o.includes(s[e]);return s=>s.add(new hs(n,r))},Hy=e=>t=>{let r=[];for(let n in t){let s=a=>a[e]===n,i=t[n];i&&r.push(new hs(s,i))}let o=r.length;return n=>{let s=n;for(let i=0;i<o;i++)s=s.add(r[i]);return s}},x2=e=>t=>{let r=Hy(e)(t);return o=>D2(r(o))},g6=g2("_tag"),x6=Hy("_tag"),jy=x2("_tag"),y6=(e,t)=>r=>r.add(new qy($i(e),t)),b6=Symbol.for("@effect/match/SafeRefinementId"),D6=e=>typeof e=="string"&&e.length>0,S6=(...e)=>{let t=e.length;return r=>{for(let o=0;o<t;o++)if(r===e[o])return!0;return!1}},E6=pa,C6=xn,_6=()=>!0,O6=e=>e!=null,w6=uu,R6=la;var F6=Jb;var A6=vs,v6=pu,M6=fa,y2=e=>t=>t instanceof e,T6=y2,b2=e=>t=>{let r=_f(t);return ha(r)?r._tag==="Right"?r.right:e(r.left):o=>{let n=r(o);return n._tag==="Right"?n.right:e(n.left)}},k6=e=>b2(()=>{throw new Error("absurd")})(e),_f=e=>{if(e._tag==="ValueMatcher")return e.value;let t=e.cases.length;return r=>{for(let o=0;o<t;o++){let n=e.cases[o];if(n._tag==="When"&&n.guard(r)===!0)return H(n.evaluate(r));if(n._tag==="Not"&&n.guard(r)===!1)return H(n.evaluate(r))}return z(r)}},I6=e=>{let t=_f(e);return ha(t)?ga(t,{onLeft:()=>g(),onRight:x}):r=>ga(t(r),{onLeft:()=>g(),onRight:o=>x(o)})},D2=e=>{let t=_f(e);if(ha(t)){if(t._tag==="Right")return t.right;throw new Error("@effect/match: exhaustive absurd")}return r=>{let o=t(r);if(o._tag==="Right")return o.right;throw new Error("@effect/match: exhaustive absurd")}};var Po={};_s(Po,{Do:()=>vk,TypeId:()=>gD,all:()=>ED,ap:()=>mk,as:()=>bD,asUnit:()=>ik,bind:()=>Ak,bindTo:()=>Rk,composeK:()=>pk,contains:()=>nd,containsWith:()=>wD,divide:()=>_k,exists:()=>Dk,filter:()=>gk,filterMap:()=>_D,firstSomeOf:()=>ok,flatMap:()=>mr,flatMapNullable:()=>ck,flatten:()=>rd,fromIterable:()=>ek,fromNullable:()=>Qe,gen:()=>Tk,getEquivalence:()=>xk,getLeft:()=>tk,getOrElse:()=>J,getOrNull:()=>ed,getOrThrow:()=>td,getOrThrowWith:()=>yD,getOrUndefined:()=>$e,getOrder:()=>yk,getRight:()=>xD,isNone:()=>j,isOption:()=>Xm,isSome:()=>P,let:()=>Fk,lift2:()=>ya,liftNullable:()=>nk,liftPredicate:()=>OD,liftThrowable:()=>sk,map:()=>te,match:()=>He,multiply:()=>Ek,multiplyCompact:()=>wk,none:()=>g,orElse:()=>bn,orElseEither:()=>rk,partitionMap:()=>hk,product:()=>SD,productMany:()=>fk,reduceCompact:()=>dk,some:()=>x,subtract:()=>Ck,sum:()=>Sk,sumCompact:()=>Ok,tap:()=>DD,toArray:()=>CD,toRefinement:()=>XT,unit:()=>ak,zipLeft:()=>lk,zipRight:()=>uk,zipWith:()=>od});var Of="@effect/schema/ArbitraryHookId",By="@effect/schema/PrettyHookId",Uy=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return Uy(e,t.from)}},Hc=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),wf=e=>{let t=!1,r;return()=>(t||(r=e(),t=!0),r)};var Wy=e=>({_tag:"ParseError",errors:e}),ur=(e,t,r)=>({_tag:"Type",expected:e,actual:t,message:Qe(r)}),E2={_tag:"Forbidden"},No=(e,t)=>({_tag:"Index",index:e,errors:t}),so=(e,t)=>({_tag:"Key",key:e,errors:t}),Rf={_tag:"Missing"},zy=e=>({_tag:"Unexpected",actual:e}),Ky=e=>({_tag:"UnionMember",errors:e}),Te=H,mt=e=>z(Wy([e])),Ye=e=>z(Wy(e)),io=e=>{let t=e;if(t._tag==="Left"||t._tag==="Right")return t},jc=(e,t)=>{let r=e;return r._tag==="Left"?r:r._tag==="Right"?t(r.right):Ut(e,t)},C2=(e,t)=>{let r=e;return r._tag==="Left"?r:r._tag==="Right"?H(t(r.right)):Ny(e,t)};var vf="@effect/schema/TypeAnnotationId",Mf="@effect/schema/MessageAnnotationId",Gi="@effect/schema/IdentifierAnnotationId",dt="@effect/schema/TitleAnnotationId",Lo="@effect/schema/DescriptionAnnotationId",Gy="@effect/schema/ExamplesAnnotationId",Wc="@effect/schema/JSONSchemaAnnotationId",w2="@effect/schema/DocumentationAnnotationId",xs=e=>t=>Object.prototype.hasOwnProperty.call(t.annotations,e)?x(t.annotations[e]):g(),Vi=(e,t,r,o={})=>({_tag:"Declaration",typeParameters:e,type:t,decode:r,annotations:o});var Vy=e=>({_tag:"Literal",literal:e,annotations:{}}),gs=e=>e._tag==="Literal";var P6=e=>e._tag==="UniqueSymbol",N6={_tag:"UndefinedKeyword",annotations:{[dt]:"undefined"}};var L6={_tag:"VoidKeyword",annotations:{[dt]:"void"}};var zc={_tag:"NeverKeyword",annotations:{[dt]:"never"}};var Ji={_tag:"UnknownKeyword",annotations:{[dt]:"unknown"}},q6=e=>e._tag==="UnknownKeyword",R2={_tag:"AnyKeyword",annotations:{[dt]:"any"}},H6=e=>e._tag==="AnyKeyword",Tf={_tag:"StringKeyword",annotations:{[dt]:"string"}},Uc=e=>e._tag==="StringKeyword",F2={_tag:"NumberKeyword",annotations:{[dt]:"number"}},Af=e=>e._tag==="NumberKeyword",A2={_tag:"BooleanKeyword",annotations:{[dt]:"boolean"}},_2=e=>e._tag==="BooleanKeyword",j6={_tag:"BigIntKeyword",annotations:{[dt]:"bigint"}},O2=e=>e._tag==="BigIntKeyword",Jy={_tag:"SymbolKeyword",annotations:{[dt]:"symbol"}},$y=e=>e._tag==="SymbolKeyword",B6={_tag:"ObjectKeyword",annotations:{[dt]:"object"}};var Kc=(e,t)=>({type:e,isOptional:t}),ys=(e,t,r,o={})=>({_tag:"Tuple",elements:e,rest:t,isReadonly:r,annotations:o});var Be=(e,t,r,o,n={})=>({name:e,type:t,isOptional:r,isReadonly:o,annotations:n}),v2=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return v2(e.from);default:return!1}},Yi=(e,t,r)=>{if(v2(e))return{parameter:e,type:t,isReadonly:r};throw new Error("An index signature parameter type must be 'string', 'symbol', a template literal type or a refinement of the previous types")},qo=(e,t,r={})=>{let o={};for(let s=0;s<e.length;s++){let i=e[s].name;if(Object.prototype.hasOwnProperty.call(o,i))throw new Error(`Duplicate property signature ${String(i)}`);o[i]=null}let n={string:!1,symbol:!1};for(let s=0;s<t.length;s++){let i=If(t[s].parameter);if(Uc(i)){if(n.string)throw new Error("Duplicate index signature for type `string`");n.string=!0}else if($y(i)){if(n.symbol)throw new Error("Duplicate index signature for type `symbol`");n.symbol=!0}}return{_tag:"TypeLiteral",propertySignatures:U6(e),indexSignatures:t,annotations:r}};var Ho=(e,t={})=>{let r=$6(e);switch(r.length){case 0:return zc;case 1:return r[0];default:return{_tag:"Union",types:K6(r),annotations:t}}};var $c=(e,t={})=>({_tag:"Lazy",f:wf(e),annotations:t});var Gc=(e,t,r,o={})=>({_tag:"Refinement",from:e,decode:t,isReversed:r,annotations:o}),M2=e=>e._tag==="Refinement",Vc=(e,t,r,o)=>({from:e,to:t,decode:r,encode:o}),kf=(e,t,r,o,n,s={})=>({_tag:"Transform",from:e,to:t,decode:r,encode:o,propertySignatureTransformations:n,annotations:s}),T2=(e,t,r,o,n={})=>kf(e,t,r,o,[],n),k2=(e,t,r,o={})=>kf(e,t,n=>{for(let s=0;s<r.length;s++){let i=r[s],a=i.from,c=Object.prototype.hasOwnProperty.call(n,a)?x(n[a]):g();delete n[a];let p=i.decode(c);P(p)&&(n[i.to]=p.value)}return Te(n)},n=>{for(let s=0;s<r.length;s++){let i=r[s],a=i.to,c=Object.prototype.hasOwnProperty.call(n,a)?x(n[a]):g();delete n[a];let p=i.encode(c);P(p)&&(n[i.from]=p.value)}return Te(n)},r,o);var I2=(e,t)=>({...e,annotations:{...e.annotations,...t}}),Yy=(e,t,r)=>({...e,annotations:{...e.annotations,[t]:r}});var P2=e=>e.map(t=>Be(t.name,Ne(t.type),t.isOptional,t.isReadonly,t.annotations)),N2=e=>e.map(t=>Yi(t.parameter,Ne(t.type),t.isReadonly)),Ne=e=>{switch(e._tag){case"Declaration":return Vi(e.typeParameters.map(Ne),Ne(e.type),e.decode,e.annotations);case"Tuple":return ys(e.elements.map(t=>Kc(Ne(t.type),t.isOptional)),te(e.rest,Ns(Ne)),e.isReadonly,e.annotations);case"TypeLiteral":return qo(P2(e.propertySignatures),N2(e.indexSignatures),e.annotations);case"Union":return Ho(e.types.map(Ne),e.annotations);case"Lazy":return $c(()=>Ne(e.f()),e.annotations);case"Refinement":return Gc(Ne(e.from),e.decode,!1,e.annotations);case"Transform":return Ne(e.to)}return e},pr=e=>{switch(e._tag){case"Declaration":return Vi(e.typeParameters.map(pr),pr(e.type),e.decode,e.annotations);case"Tuple":return ys(e.elements.map(t=>Kc(pr(t.type),t.isOptional)),te(e.rest,Ns(pr)),e.isReadonly);case"TypeLiteral":return qo(e.propertySignatures.map(t=>Be(t.name,pr(t.type),t.isOptional,t.isReadonly)),e.indexSignatures.map(t=>Yi(t.parameter,pr(t.type),t.isReadonly)));case"Union":return Ho(e.types.map(pr));case"Lazy":return $c(()=>pr(e.f()));case"Refinement":case"Transform":return pr(e.from)}return e},L2=e=>{switch(e._tag){case"Declaration":return L2(e.type);case"NeverKeyword":return 0;case"Literal":case"UndefinedKeyword":case"VoidKeyword":case"UniqueSymbol":return 1;case"BooleanKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3;case"ObjectKeyword":return 5;case"UnknownKeyword":case"AnyKeyword":return 6;default:return 4}},U6=Dn(Ke(vt,ua(e=>L2(e.type)))),q2=$b(vt,vt,vt),W6=jm(q2),H2=[0,0,0],z6=e=>e.reduce(W6,H2),Bc=e=>{switch(e._tag){case"Tuple":{let t=e.elements.length,r=P(e.rest)?e.rest.value.length:0;return[2,t,r]}case"TypeLiteral":{let t=e.propertySignatures.length,r=e.indexSignatures.length;return t+r===0?[-4,0,0]:[4,t,r]}case"Declaration":{let[t,r,o]=Bc(e.type);return[6,r,o]}case"Lazy":return[8,0,0];case"Union":return z6(e.types.map(Bc));case"Refinement":{let[t,r,o]=Bc(e.from);return[t+1,r,o]}case"Transform":return Bc(e.from);case"ObjectKeyword":return[-2,0,0];case"UnknownKeyword":case"AnyKeyword":return[-4,0,0];default:return H2}},K6=Dn(Kb(ua(q2,Bc))),$6=e=>{let t=Ke(e,Cu(o=>{switch(o._tag){case"NeverKeyword":return[];case"Union":return o.types;default:return[o]}}));if(t.some(H6))return[R2];if(t.some(q6))return[Ji];let r;return(r=t.findIndex(Uc))!==-1&&(t=t.filter((o,n)=>n===r||!Uc(o)&&!(gs(o)&&typeof o.literal=="string"))),(r=t.findIndex(Af))!==-1&&(t=t.filter((o,n)=>n===r||!Af(o)&&!(gs(o)&&typeof o.literal=="number"))),(r=t.findIndex(_2))!==-1&&(t=t.filter((o,n)=>n===r||!_2(o)&&!(gs(o)&&typeof o.literal=="boolean"))),(r=t.findIndex(O2))!==-1&&(t=t.filter((o,n)=>n===r||!O2(o)&&!(gs(o)&&typeof o.literal=="bigint"))),(r=t.findIndex($y))!==-1&&(t=t.filter((o,n)=>n===r||!$y(o)&&!P6(o))),t},If=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return If(e.from)}};var ao=(e,t=[])=>({value:e,forest:t}),j2=e=>G6(ao("error(s) found",e.map(Lf))),G6=e=>e.value+B2(`
`,e.forest),B2=(e,t)=>{let r="",o=t.length,n;for(let s=0;s<o;s++){n=t[s];let i=s===o-1;r+=e+(i?"\u2514":"\u251C")+"\u2500 "+n.value,r+=B2(e+(o>1&&!i?"\u2502  ":"   "),n.forest)}return r},Jc=e=>{if(e==null||typeof e=="number"||typeof e=="symbol"||e instanceof Date)return String(e);if(typeof e=="bigint")return String(e)+"n";try{return JSON.stringify(e)}catch{return String(e)}},V6=e=>{switch(e.type._tag){case"StringKeyword":return"${string}";case"NumberKeyword":return"${number}"}},J6=e=>e.head+e.spans.map(t=>V6(t)+t.literal).join(""),Y6=xs(Mf),Z6=xs(dt),Q6=xs(Gi),X6=xs(Lo),vr=e=>Ke(Q6(e),bn(()=>Z6(e)),bn(()=>X6(e))),Nf=e=>{switch(e._tag){case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"UndefinedKeyword":case"SymbolKeyword":case"ObjectKeyword":case"AnyKeyword":case"UnknownKeyword":case"VoidKeyword":case"NeverKeyword":return J(vr(e),()=>e._tag);case"Literal":return J(vr(e),()=>Jc(e.literal));case"UniqueSymbol":return J(vr(e),()=>Jc(e.symbol));case"Union":return e.types.map(Nf).join(" or ");case"TemplateLiteral":return J(vr(e),()=>J6(e));case"Tuple":return J(vr(e),()=>"<anonymous tuple or array schema>");case"TypeLiteral":return J(vr(e),()=>"<anonymous type literal schema>");case"Enums":return J(vr(e),()=>e.enums.map((t,r)=>JSON.stringify(r)).join(" | "));case"Lazy":return J(vr(e),()=>"<anonymous lazy schema>");case"Declaration":return J(vr(e),()=>"<anonymous declaration schema>");case"Refinement":return J(vr(e),()=>"<anonymous refinement schema>");case"Transform":return J(vr(e),()=>`${Nf(e.from)} -> ${Nf(e.to)}`)}},Lf=e=>{switch(e._tag){case"Type":return ao(Ke(Y6(e.expected),te(t=>t(e.actual)),bn(()=>e.message),J(()=>`Expected ${Nf(e.expected)}, actual ${Jc(e.actual)}`)));case"Forbidden":return ao("is forbidden");case"Index":{let t=e.errors.map(Lf);return t.length===1&&t[0].forest.length!==0?ao(`[${e.index}]${t[0].value}`,t[0].forest):ao(`[${e.index}]`,t)}case"Unexpected":return ao("is unexpected");case"Key":{let t=e.errors.map(Lf);return t.length===1&&t[0].forest.length!==0?ao(`[${Jc(e.key)}]${t[0].value}`,t[0].forest):ao(`[${Jc(e.key)}]`,t)}case"Missing":return ao("is missing");case"UnionMember":return ao("union member",e.errors.map(Lf))}};var W2=e=>{let t=ht(e);return(r,o)=>t(r,{...o,isEffectAllowed:!0})};var Qy=e=>ht(e.ast);var Yc=e=>W2(e.ast);var Zc=e=>W2(Mr(e.ast)),ht=(e,t=!0)=>{switch(e._tag){case"Refinement":if(e.isReversed){let r=ht(Ne(e),t),o=ht(Mr(z2(e.from)),!1);return(n,s)=>qf(jc(r(n,s),i=>o(i,s)),s)}else{let r=ht(e.from,t);return(o,n)=>qf(jc(r(o,n),s=>e.decode(s,n)),n)}case"Transform":{let r=ht(e.from,t),o=ht(e.to,!1);return(n,s)=>qf(jc(r(n,s),i=>jc(e.decode(i,s),a=>o(a,s))),s)}case"Declaration":{let r=e.decode(...e.typeParameters);return(o,n)=>qf(r(o,n),n)}case"Literal":return At(e,r=>r===e.literal);case"UniqueSymbol":return At(e,r=>r===e.symbol);case"UndefinedKeyword":return At(e,la);case"VoidKeyword":return At(e,la);case"NeverKeyword":return At(e,Yb);case"UnknownKeyword":case"AnyKeyword":return Te;case"StringKeyword":return At(e,pa);case"NumberKeyword":return At(e,xn);case"BooleanKeyword":return At(e,uu);case"BigIntKeyword":return At(e,vs);case"SymbolKeyword":return At(e,Gb);case"ObjectKeyword":return At(e,de);case"Enums":return At(e,r=>e.enums.some(([o,n])=>n===r));case"TemplateLiteral":{let r=r8(e);return At(e,o=>pa(o)&&r.test(o))}case"Tuple":{let r=e.elements.map(s=>ht(s.type,t)),o=Ke(e.rest,te(Ns(s=>ht(s)))),n=e.elements.filter(s=>!s.isOptional).length;return P(e.rest)&&(n+=e.rest.value.length-1),(s,i)=>{if(!Array.isArray(s))return mt(ur(t8,s));let a=i?.errors==="all",c=[],p=0,l=s.length;for(let w=l;w<=n-1;w++){let A=No(w,[Rf]);if(a){c.push([p++,A]);continue}else return mt(A)}if(j(e.rest))for(let w=e.elements.length;w<=l-1;w++){let A=No(w,[zy(s[w])]);if(a){c.push([p++,A]);continue}else return Ye(Wt(Ze(c),A))}let f=[],d=0,h;for(;d<r.length;d++)if(l<d+1){if(e.elements[d].isOptional)continue}else{let w=r[d],A=w(s[d],i),k=io(A);if(k){if(Re(k)){let B=No(d,k.left.errors);if(a){c.push([p++,B]);continue}else return Ye(Wt(Ze(c),B))}f.push([p++,k.right])}else{let B=p++,K=d;h||(h=[]),h.push(({es:ae,output:Ee})=>Ut(fn(A),Le=>{if(Re(Le)){let me=No(K,Le.left.errors);return a?(ae.push([B,me]),Rt):Ye(Wt(Ze(ae),me))}return Ee.push([B,Le.right]),Rt}))}}if(P(o)){let w=Fe(o.value),A=Jt(o.value);for(;d<l-A.length;d++){let k=w(s[d],i),B=io(k);if(B)if(Re(B)){let K=No(d,B.left.errors);if(a){c.push([p++,K]);continue}else return Ye(Wt(Ze(c),K))}else f.push([p++,B.right]);else{let K=p++,ae=d;h||(h=[]),h.push(({es:Ee,output:Le})=>Ut(fn(k),me=>{if(Re(me)){let kr=No(ae,me.left.errors);return a?(Ee.push([K,kr]),Rt):Ye(Wt(Ze(Ee),kr))}else return Le.push([K,me.right]),Rt}))}}for(let k=0;k<A.length;k++)if(d+=k,!(l<d+1)){let B=A[k](s[d],i),K=io(B);if(K){if(Re(K)){let ae=No(d,K.left.errors);if(a){c.push([p++,ae]);continue}else return Ye(Wt(Ze(c),ae))}f.push([p++,K.right])}else{let ae=p++,Ee=d;h||(h=[]),h.push(({es:Le,output:me})=>Ut(fn(B),kr=>{if(Re(kr)){let po=No(Ee,kr.left.errors);return a?(Le.push([ae,po]),Rt):Ye(Wt(Ze(Le),po))}return me.push([ae,kr.right]),Rt}))}}}let S=({es:w,output:A})=>Su(w)?Ye(Ze(w)):Te(Ze(A));if(h&&h.length>0){let w=h;return zi(()=>{let A={es:Array.from(c),output:Array.from(f)};return Ut(Nc(w,k=>k(A),{concurrency:"unbounded",discard:!0}),()=>S(A))})}return S({output:f,es:c})}}case"TypeLiteral":{if(e.propertySignatures.length===0&&e.indexSignatures.length===0)return At(e,Zb);let r=e.propertySignatures.map(i=>ht(i.type,t)),o=e.indexSignatures.map(i=>[ht(i.parameter,t),ht(i.type,t)]),n=ht(Ho(e.indexSignatures.map(i=>If(i.parameter)))),s={};for(let i=0;i<r.length;i++)s[e.propertySignatures[i].name]=null;return(i,a)=>{if(!fa(i))return mt(ur(U2,i));let c=a?.errors==="all",p=[],l=0;if(a?.onExcessProperty==="error"){for(let w of Hc(i))if(!Object.prototype.hasOwnProperty.call(s,w)){let A=n(w),k=io(A);if(k&&Re(k)){let B=so(w,[zy(i[w])]);if(c){p.push([l++,B]);continue}else return Ye(Wt(Ze(p),B))}}}let d={},h;for(let w=0;w<r.length;w++){let A=e.propertySignatures[w],k=r[w],B=A.name;if(Object.prototype.hasOwnProperty.call(i,B)){let K=k(i[B],a),ae=io(K);if(ae){if(Re(ae)){let Ee=so(B,ae.left.errors);if(c){p.push([l++,Ee]);continue}else return Ye(Wt(Ze(p),Ee))}d[B]=ae.right}else{let Ee=l++,Le=B;h||(h=[]),h.push(({es:me,output:kr})=>Ut(fn(K),po=>{if(Re(po)){let nu=so(Le,po.left.errors);return c?(me.push([Ee,nu]),Rt):Ye(Wt(Ze(me),nu))}return kr[Le]=po.right,Rt}))}}else if(!A.isOptional){let K=so(B,[Rf]);if(c){p.push([l++,K]);continue}else return mt(K)}}for(let w=0;w<o.length;w++){let A=o[w][0],k=o[w][1],B=Uy(i,e.indexSignatures[w].parameter);for(let K of B){if(Object.prototype.hasOwnProperty.call(s,K))continue;let ae=io(A(K,a));if(ae&&Re(ae)){let me=so(K,ae.left.errors);if(c){p.push([l++,me]);continue}else return Ye(Wt(Ze(p),me))}let Ee=k(i[K],a),Le=io(Ee);if(Le)if(Re(Le)){let me=so(K,Le.left.errors);if(c){p.push([l++,me]);continue}else return Ye(Wt(Ze(p),me))}else d[K]=Le.right;else{let me=l++,kr=K;h||(h=[]),h.push(({es:po,output:nu})=>Ut(fn(Ee),Lm=>{if(Re(Lm)){let jb=so(kr,Lm.left.errors);return c?(po.push([me,jb]),Rt):Ye(Wt(Ze(po),jb))}else return nu[K]=Lm.right,Rt}))}}}let S=({es:w,output:A})=>Su(w)?Ye(Ze(w)):Te(A);if(h&&h.length>0){let w=h;return zi(()=>{let A={es:Array.from(p),output:Object.assign({},d)};return Ut(Nc(w,k=>k(A),{concurrency:"unbounded",discard:!0}),()=>S(A))})}return S({es:p,output:d})}}case"Union":{let r=e8(e.types),o=Hc(r.keys),n=o.length,s=new Map;for(let i=0;i<e.types.length;i++)s.set(e.types[i],ht(e.types[i],!0));return(i,a)=>{let c=[],p=0,l=[];if(n>0)if(fa(i))for(let h=0;h<n;h++){let S=o[h],w=r.keys[S].buckets;if(Object.prototype.hasOwnProperty.call(i,S)){let A=String(i[S]);Object.prototype.hasOwnProperty.call(w,A)?l=l.concat(w[A]):c.push([p++,so(S,[ur(r.keys[S].ast,i[S])])])}else c.push([p++,so(S,[Rf])])}else c.push([p++,ur(U2,i)]);r.otherwise.length>0&&(l=l.concat(r.otherwise));let f;for(let h=0;h<l.length;h++){let S=s.get(l[h])(i,a),w=!f||f.length===0?io(S):void 0;if(w){if(Pr(w))return Te(w.right);c.push([p++,Ky(w.left.errors)])}else{let A=p++;f||(f=[]),f.push(k=>zi(()=>"finalResult"in k?Rt:Ut(fn(S),B=>(Pr(B)?k.finalResult=Te(B.right):k.es.push([A,Ky(B.left.errors)]),Rt))))}}let d=h=>Su(h)?Ye(Ze(h)):mt(ur(zc,i));if(f&&f.length>0){let h=f;return zi(()=>{let S={es:Array.from(c)};return Ut(Nc(h,w=>w(S),{concurrency:1,discard:!0}),()=>"finalResult"in S?S.finalResult:d(S.es))})}return d(c)}}case"Lazy":{let r=wf(()=>ht(e.f(),t));return(o,n)=>r()(o,n)}}},At=(e,t)=>r=>t(r)?Te(r):mt(ur(e,r)),Zy=e=>{switch(e._tag){case"Declaration":return Zy(e.type);case"TypeLiteral":{let t=[];for(let r=0;r<e.propertySignatures.length;r++){let o=e.propertySignatures[r],n=pr(o.type);gs(n)&&!o.isOptional&&t.push([o.name,n])}return t}case"Refinement":case"Transform":return Zy(e.from)}return[]},e8=e=>{let t={},r=[];for(let o=0;o<e.length;o++){let n=e[o],s=Zy(n);if(s.length>0)for(let i=0;i<s.length;i++){let[a,c]=s[i],p=String(c.literal);t[a]=t[a]||{buckets:{},ast:zc};let l=t[a].buckets;if(Object.prototype.hasOwnProperty.call(l,p)){if(i<s.length-1)continue;l[p].push(n),t[a].ast=Ho([t[a].ast,c])}else{l[p]=[n],t[a].ast=Ho([t[a].ast,c]);break}}else r.push(n)}return{keys:t,otherwise:r}},z2=e=>M2(e)?z2(e.from):e,qf=(e,t)=>{let r=io(e);return r||(t?.isEffectAllowed===!0?e:mt(E2))},t8=ys([],x([Ji]),!0,{[Lo]:"a generic array"}),U2=qo([],[Yi(Tf,Ji,!0),Yi(Jy,Ji,!0)],{[Lo]:"a generic object"}),Wt=(e,t)=>(e.push(t),e),r8=e=>{let t=`^${e.head}`;for(let r of e.spans)Uc(r.type)?t+=".*":Af(r.type)&&(t+="-?\\d+(\\.\\d+)?"),t+=r.literal;return t+="$",new RegExp(t)};function Ze(e){return e.sort(([t],[r])=>t>r?1:t<r?-1:0).map(([t,r])=>r)}var Mr=e=>{switch(e._tag){case"Declaration":return Vi(e.typeParameters.map(Mr),e.type,e.decode,e.annotations);case"Tuple":return ys(e.elements.map(t=>Kc(Mr(t.type),t.isOptional)),te(e.rest,Ns(Mr)),e.isReadonly);case"TypeLiteral":return qo(e.propertySignatures.map(t=>Be(t.name,Mr(t.type),t.isOptional,t.isReadonly,t.annotations)),e.indexSignatures.map(t=>Yi(t.parameter,Mr(t.type),t.isReadonly)));case"Union":return Ho(e.types.map(Mr));case"Lazy":return $c(()=>Mr(e.f()));case"Refinement":return Gc(e.from,e.decode,!e.isReversed,e.annotations);case"Transform":return kf(Mr(e.to),Mr(e.from),e.encode,e.decode,e.propertySignatureTransformations.map(t=>Vc(t.to,t.from,t.encode,t.decode)))}return e};var c8=Symbol.for("@effect/schema/Schema");var u8=e=>Ue(Ne(e.ast)),Xy=class{constructor(t){$t(this,"ast");$t(this,"_id",c8);$t(this,"From");$t(this,"To");this.ast=t}pipe(){return C(this,arguments)}},Ue=e=>new Xy(e);var p8=e=>Ue(Vy(e)),mn=(...e)=>dn(...e.map(t=>p8(t)));var eb=(e,t,r,o)=>Ue(Vi(e.map(n=>n.ast),t.ast,(...n)=>r(...n.map(Ue)),o)),dn=(...e)=>Ue(Ho(e.map(t=>t.ast))),l8=e=>dn(d8,e);var bs=e=>Ue(ys([],x([e.ast]),!0));var Hf=class e{constructor(t,r,o){$t(this,"_from");$t(this,"_annotations");$t(this,"_optional");$t(this,"From");$t(this,"FromIsOptional");$t(this,"To");$t(this,"ToIsOptional");this._from=t,this._annotations=r,this._optional=o}optional(){if(this._optional)throw new Error("duplicate optional configuration");return new e(this._from,this._annotations,{to:"optional"})}withDefault(t){if(this._optional&&this._optional.to!=="optional")throw new Error("duplicate optional configuration");return new e(this._from,this._annotations,{to:"default",value:t})}toOption(){if(this._optional&&this._optional.to!=="optional")throw new Error("duplicate optional configuration");return new e(this._from,this._annotations,{to:"Option"})}},f8=(e,t)=>new Hf(e.ast,t),jf=(e,t)=>f8(e,t).optional(),gt=e=>{let t=Hc(e),r=[],o=[],n=[],s=[];for(let i=0;i<t.length;i++){let a=t[i],c=e[a];if(c instanceof Hf){let p=c._optional;if(p)switch(p.to){case"optional":{r.push(Be(a,c._from,!0,!0,c._annotations)),o.push(Be(a,c._from,!0,!0)),n.push(Be(a,Ne(c._from),!0,!0,c._annotations));break}case"default":{o.push(Be(a,c._from,!0,!0)),n.push(Be(a,Ne(c._from),!1,!0,c._annotations)),s.push(Vc(a,a,bn(()=>x(p.value())),I));break}case"Option":{o.push(Be(a,c._from,!0,!0)),n.push(Be(a,ev(Ue(Ne(c._from))).ast,!1,!0,c._annotations)),s.push(Vc(a,a,x,rd));break}}else r.push(Be(a,c._from,!1,!0,c._annotations)),o.push(Be(a,c._from,!1,!0)),n.push(Be(a,Ne(c._from),!1,!0,c._annotations))}else r.push(Be(a,c.ast,!1,!0)),o.push(Be(a,c.ast,!1,!0)),n.push(Be(a,Ne(c.ast),!1,!0))}return s.length>0?Ue(k2(qo(o,[]),qo(n,[]),s)):Ue(qo(r,[]))};var $2=e=>{let t={};if(e?.typeId!==void 0){let r=e?.typeId;typeof r=="object"?(t[vf]=r.id,t[r.id]=r.params):t[vf]=r}return e?.message!==void 0&&(t[Mf]=e?.message),e?.identifier!==void 0&&(t[Gi]=e?.identifier),e?.title!==void 0&&(t[dt]=e?.title),e?.description!==void 0&&(t[Lo]=e?.description),e?.examples!==void 0&&(t[Gy]=e?.examples),e?.documentation!==void 0&&(t[w2]=e?.documentation),e?.jsonSchema!==void 0&&(t[Wc]=e?.jsonSchema),e?.arbitrary!==void 0&&(t[Of]=e?.arbitrary),t};function tb(e,t){return r=>{let o=s=>e(s)?Te(s):mt(ur(n,s)),n=Gc(r.ast,o,!1,$2(t));return Ue(n)}}var Bf=u(4,(e,t,r,o)=>Ue(T2(e.ast,t.ast,r,o))),m8=u(4,(e,t,r,o)=>Bf(e,t,n=>H(r(n)),n=>H(o(n))));var G2=e=>t=>Ue(I2(t.ast,e));var V2=e=>t=>Ue(Yy(t.ast,Lo,e)),J2=e=>t=>Ue(Yy(t.ast,Gy,e));var d8=Ue(Vy(null));var lr=Ue(Tf),Uf=Ue(F2),Y2=Ue(A2);var h8=()=>e=>e.date(),g8=()=>e=>`new Date(${JSON.stringify(e)})`,Z2=eb([],gt({}),()=>e=>pu(e)?Te(e):mt(ur(Z2.ast,e)),{[Gi]:"Date",[By]:g8,[Of]:h8}),x8="@effect/schema/ValidDateTypeId",y8=e=>t=>t.pipe(tb(r=>!isNaN(r.getTime()),{typeId:x8,description:"a valid Date",...e})),b8=Z2.pipe(y8()),Q2=e=>Bf(e,b8,t=>Te(new Date(t)),t=>Te(t.toISOString()));var K2="@effect/schema/InstanceOfTypeId",X2=(e,t)=>{let r=$2(t),o=eb([],gt({}),()=>n=>n instanceof e?Te(n):mt(ur(o.ast,n)),{[vf]:K2,[K2]:{constructor:e},[Lo]:`an instance of ${e.name}`,...r});return o},D8=e=>t=>t.oneof(t.constant(g()),e(t).map(x)),S8=e=>He({onNone:()=>"none()",onSome:t=>`some(${e(t)})`}),E8=e=>dn(gt({_tag:mn("None")}),gt({_tag:mn("Some"),value:e})),ev=e=>{let t=eb([e],E8(e),r=>{let o=Qy(r);return(n,s)=>Xm(n)?j(n)?Te(g()):C2(o(n.value,s),x):mt(ur(t.ast,n))},{[Gi]:"Option",[By]:S8,[Of]:D8});return t};var Qc=e=>m8(l8(e),u8(ev(e)),Qe,ed);var C8="@effect/schema/MaxLengthTypeId",rb=(e,t)=>r=>r.pipe(tb(o=>o.length<=e,{typeId:C8,description:`a string at most ${e} character(s) long`,jsonSchema:{maxLength:e},...t})),_8="@effect/schema/MinLengthTypeId",ob=(e,t)=>r=>r.pipe(tb(o=>o.length>=e,{typeId:_8,description:`a string at least ${e} character(s) long`,jsonSchema:{minLength:e},...t}));var nv=Os(require("fs/promises")),sv=Os(require("@actions/glob"));var Wf=require("@actions/core");var We=class extends Ki.TaggedClass("GenericError"){},rv=e=>L.sync(()=>((0,Wf.error)(e.message),(0,Wf.debug)(`cause: ${e.error}`),process.exitCode=1,L.unit));var Xc=e=>t=>t.pipe(G2({[Wc]:{...xs(Wc)(t.ast).pipe(Po.getOrNull),...e}})),O8=e=>t=>t.pipe(J2(e),Xc({examples:e})),hn=e=>t=>t.pipe(V2(e),Xc({description:e})),w8=Ft.string("INPUT_FILE").pipe(Ft.map(e=>({_tag:"File",path:e})),Ft.orElse(()=>Ft.string("JSON").pipe(Ft.map(e=>({_tag:"Json",stringified:e})))),Ft.orElse(()=>Ke(Ft.all({key:Ft.string("KEY"),value:Ft.number("VALUE")}),Ft.map(({key:e,value:t})=>({_tag:"KeyVal",key:e,value:t})))),Ft.nested("INPUT")),iv=e=>L.try({try:()=>JSON.parse(e),catch:t=>new We({message:"Failed to parse JSON",error:t})}),R8=dn(mn("lower-is-better").pipe(hn("if value is _lower_ than the previous run, the trend is _good_. otherwise, the trend is bad")),mn("higher-is-better").pipe(hn("if value is _higher_ than the previous run, the trend is _good_. otherwise, the trend is bad"))).pipe(hn("The acceptable trend for the given metric")),F8=Ke(lr,hn("A unique string that represents this metric across runs"),rb(120),ob(1),ob(1)),A8=Ke(Uf,hn("The numeric value of the metric")),v8=Ke(lr,Q2,hn("the date to apply sorting by. defaults to the commit time"),Xc({format:"date-time"})),M8=Ke(lr,rb(32),hn("The units of the metric"),O8(["ms","ns","bytes","kb","mb"])),zf=gt({key:F8,value:A8,sortDate:v8.pipe(jf),units:M8.pipe(jf),trend:R8.pipe(jf)}).pipe(Xc({additionalProperties:!0})),tY=gt({metrics:zf.pipe(bs)}),av=dn(gt({metrics:bs(zf).pipe(hn("A list of metrics to report"))}).pipe(Xc({additionalProperties:!0})),zf.pipe(bs),zf),rY=Zc(av),cv=e=>Yc(av)(e).pipe(L.map(t=>"metrics"in t?t.metrics:t),L.map(t=>[t].flat()),L.mapError(t=>new We({error:t,message:`Failed to parse given JSON:
${j2(t.errors)}`}))),T8=e=>L.tryPromise({try:()=>nv.default.readFile(e,"utf-8"),catch:t=>new We({message:"Failed to read file",error:t})}).pipe(L.flatMap(iv),L.flatMap(cv)),k8=e=>L.gen(function*(t){let r=yield*t(L.tryPromise({try:()=>sv.create(e),catch:s=>new We({message:"Failed to parse glob syntax",error:s})})),o=yield*t(L.tryPromise({try:()=>r.glob(),catch:s=>new We({message:"Failed to iterate through glob",error:s})}));return(yield*t(L.all(o.map(T8),{concurrency:5}))).flat()}),I8=Ke(qc.type(),qc.tagsExhaustive({File:({path:e})=>k8(e),Json:({stringified:e})=>iv(e).pipe(L.flatMap(cv)),KeyVal:({key:e,value:t})=>L.succeed([{key:e,value:t}])})),uv=Ke(L.config(w8),L.mapError(e=>new We({error:e,message:"Failed to read input"})),L.flatMap(I8));var pv=e=>e;var lv=(e=0)=>t=>`\x1B[${t+e}m`,fv=(e=0)=>t=>`\x1B[${38+e};5;${t}m`,mv=(e=0)=>(t,r,o)=>`\x1B[${38+e};2;${t};${r};${o}m`,le={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},nY=Object.keys(le.modifier),N8=Object.keys(le.color),L8=Object.keys(le.bgColor),sY=[...N8,...L8];function q8(){let e=new Map;for(let[t,r]of Object.entries(le)){for(let[o,n]of Object.entries(r))le[o]={open:`\x1B[${n[0]}m`,close:`\x1B[${n[1]}m`},r[o]=le[o],e.set(n[0],n[1]);Object.defineProperty(le,t,{value:r,enumerable:!1})}return Object.defineProperty(le,"codes",{value:e,enumerable:!1}),le.color.close="\x1B[39m",le.bgColor.close="\x1B[49m",le.color.ansi=lv(),le.color.ansi256=fv(),le.color.ansi16m=mv(),le.bgColor.ansi=lv(10),le.bgColor.ansi256=fv(10),le.bgColor.ansi16m=mv(10),Object.defineProperties(le,{rgbToAnsi256:{value(t,r,o){return t===r&&r===o?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(o/255*5)},enumerable:!1},hexToRgb:{value(t){let r=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!r)return[0,0,0];let[o]=r;o.length===3&&(o=[...o].map(s=>s+s).join(""));let n=Number.parseInt(o,16);return[n>>16&255,n>>8&255,n&255]},enumerable:!1},hexToAnsi256:{value:t=>le.rgbToAnsi256(...le.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value(t){if(t<8)return 30+t;if(t<16)return 90+(t-8);let r,o,n;if(t>=232)r=((t-232)*10+8)/255,o=r,n=r;else{t-=16;let a=t%36;r=Math.floor(t/36)/5,o=Math.floor(a/6)/5,n=a%6/5}let s=Math.max(r,o,n)*2;if(s===0)return 30;let i=30+(Math.round(n)<<2|Math.round(o)<<1|Math.round(r));return s===2&&(i+=60),i},enumerable:!1},rgbToAnsi:{value:(t,r,o)=>le.ansi256ToAnsi(le.rgbToAnsi256(t,r,o)),enumerable:!1},hexToAnsi:{value:t=>le.ansi256ToAnsi(le.hexToAnsi256(t)),enumerable:!1}}),le}var H8=q8(),Tr=H8;var $f=Os(require("process"),1),hv=Os(require("os"),1),nb=Os(require("tty"),1);function fr(e,t=globalThis.Deno?globalThis.Deno.args:$f.default.argv){let r=e.startsWith("-")?"":e.length===1?"-":"--",o=t.indexOf(r+e),n=t.indexOf("--");return o!==-1&&(n===-1||o<n)}var{env:ge}=$f.default,Kf;fr("no-color")||fr("no-colors")||fr("color=false")||fr("color=never")?Kf=0:(fr("color")||fr("colors")||fr("color=true")||fr("color=always"))&&(Kf=1);function j8(){if("FORCE_COLOR"in ge)return ge.FORCE_COLOR==="true"?1:ge.FORCE_COLOR==="false"?0:ge.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(ge.FORCE_COLOR,10),3)}function B8(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function U8(e,{streamIsTTY:t,sniffFlags:r=!0}={}){let o=j8();o!==void 0&&(Kf=o);let n=r?Kf:o;if(n===0)return 0;if(r){if(fr("color=16m")||fr("color=full")||fr("color=truecolor"))return 3;if(fr("color=256"))return 2}if("TF_BUILD"in ge&&"AGENT_NAME"in ge)return 1;if(e&&!t&&n===void 0)return 0;let s=n||0;if(ge.TERM==="dumb")return s;if($f.default.platform==="win32"){let i=hv.default.release().split(".");return Number(i[0])>=10&&Number(i[2])>=10586?Number(i[2])>=14931?3:2:1}if("CI"in ge)return"GITHUB_ACTIONS"in ge||"GITEA_ACTIONS"in ge?3:["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(i=>i in ge)||ge.CI_NAME==="codeship"?1:s;if("TEAMCITY_VERSION"in ge)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ge.TEAMCITY_VERSION)?1:0;if(ge.COLORTERM==="truecolor"||ge.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in ge){let i=Number.parseInt((ge.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ge.TERM_PROGRAM){case"iTerm.app":return i>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ge.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ge.TERM)||"COLORTERM"in ge?1:s}function dv(e,t={}){let r=U8(e,{streamIsTTY:e&&e.isTTY,...t});return B8(r)}var W8={stdout:dv({isTTY:nb.default.isatty(1)}),stderr:dv({isTTY:nb.default.isatty(2)})},gv=W8;function xv(e,t,r){let o=e.indexOf(t);if(o===-1)return e;let n=t.length,s=0,i="";do i+=e.slice(s,o)+t+r,s=o+n,o=e.indexOf(t,s);while(o!==-1);return i+=e.slice(s),i}function yv(e,t,r,o){let n=0,s="";do{let i=e[o-1]==="\r";s+=e.slice(n,i?o-1:o)+t+(i?`\r
`:`
`)+r,n=o+1,o=e.indexOf(`
`,n)}while(o!==-1);return s+=e.slice(n),s}var{stdout:bv,stderr:Dv}=gv,sb=Symbol("GENERATOR"),Zi=Symbol("STYLER"),eu=Symbol("IS_EMPTY"),Sv=["ansi","ansi","ansi256","ansi16m"],Qi=Object.create(null),z8=(e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let r=bv?bv.level:0;e.level=t.level===void 0?r:t.level},Gf=class{constructor(t){return Ev(t)}},Ev=e=>{let t=(...r)=>r.join(" ");return z8(t,e),Object.setPrototypeOf(t,tu.prototype),t};function tu(e){return Ev(e)}Object.setPrototypeOf(tu.prototype,Function.prototype);for(let[e,t]of Object.entries(Tr))Qi[e]={get(){let r=Vf(this,ab(t.open,t.close,this[Zi]),this[eu]);return Object.defineProperty(this,e,{value:r}),r}};Qi.visible={get(){let e=Vf(this,this[Zi],!0);return Object.defineProperty(this,"visible",{value:e}),e}};var ib=(e,t,r,...o)=>e==="rgb"?t==="ansi16m"?Tr[r].ansi16m(...o):t==="ansi256"?Tr[r].ansi256(Tr.rgbToAnsi256(...o)):Tr[r].ansi(Tr.rgbToAnsi(...o)):e==="hex"?ib("rgb",t,r,...Tr.hexToRgb(...o)):Tr[r][e](...o),K8=["rgb","hex","ansi256"];for(let e of K8){Qi[e]={get(){let{level:r}=this;return function(...o){let n=ab(ib(e,Sv[r],"color",...o),Tr.color.close,this[Zi]);return Vf(this,n,this[eu])}}};let t="bg"+e[0].toUpperCase()+e.slice(1);Qi[t]={get(){let{level:r}=this;return function(...o){let n=ab(ib(e,Sv[r],"bgColor",...o),Tr.bgColor.close,this[Zi]);return Vf(this,n,this[eu])}}}}var $8=Object.defineProperties(()=>{},{...Qi,level:{enumerable:!0,get(){return this[sb].level},set(e){this[sb].level=e}}}),ab=(e,t,r)=>{let o,n;return r===void 0?(o=e,n=t):(o=r.openAll+e,n=t+r.closeAll),{open:e,close:t,openAll:o,closeAll:n,parent:r}},Vf=(e,t,r)=>{let o=(...n)=>G8(o,n.length===1?""+n[0]:n.join(" "));return Object.setPrototypeOf(o,$8),o[sb]=e,o[Zi]=t,o[eu]=r,o},G8=(e,t)=>{if(e.level<=0||!t)return e[eu]?"":t;let r=e[Zi];if(r===void 0)return t;let{openAll:o,closeAll:n}=r;if(t.includes("\x1B"))for(;r!==void 0;)t=xv(t,r.close,r.open),r=r.parent;let s=t.indexOf(`
`);return s!==-1&&(t=yv(t,n,o,s)),o+t+n};Object.defineProperties(tu.prototype,Qi);var fY=tu(),mY=tu({level:Dv?Dv.level:0});var Ds=Cf.Tag(),Cv=L.sync(()=>new Gf({level:2}));function _v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,o)}return r}function Ov(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_v(Object(r),!0).forEach(function(o){V8(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_v(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function V8(e,t,r){return t=J8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J8(e){var t=Y8(e,"string");return typeof t=="symbol"?t:String(t)}function Y8(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wv=Rv({});function Rv(e){return t.withOptions=r=>Rv(Ov(Ov({},e),r)),t;function t(r,...o){let n=typeof r=="string"?[r]:r.raw,{escapeSpecialCharacters:s=Array.isArray(r)}=e,i="";for(let p=0;p<n.length;p++){let l=n[p];s&&(l=l.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\{/g,"{")),i+=l,p<o.length&&(i+=o[p])}let a=i.split(`
`),c=null;for(let p of a){let l=p.match(/^(\s+)\S+/);if(l){let f=l[1].length;c?c=Math.min(c,f):c=f}}if(c!==null){let p=c;i=a.map(l=>l[0]===" "||l[0]==="	"?l.slice(p):l).join(`
`)}return i.trim().replace(/\\n/g,`
`)}}var Fv=require("@actions/core"),ub=class extends Ki.TaggedClass("IdTokenError"){},Av=e=>L.gen(function*(t){let r=yield*t(Ds),o=r.cyan("`id-token`"),n=wv`
      Failed to read GitHub Actions ID token.

      This means you probably forgot to add permissions for ${o} in your workflow/job definition.
      The ${o} permissions allows GitHub to sign your requests to the Benchy API. This does not
      give GitHub access to your Benchy account: it's merely a way to prove that the request is coming
      from your GitHub workflow.

      An example of a workflow with the ${o} permission:

      \`\`\`yaml
       jobs:
         test:
           runs-on: ubuntu-latest
      ${r.green("+    permissions:")}
      ${r.green("+      id-token: write")}
           steps:
             # ...
      \`\`\`

      For more information about the ${o} permisison, see the GitHub documentation on OpenID Connect: https://docs.github.com/en/actions/deployment/security-hardening-your-deployments/about-security-hardening-with-openid-connect#overview-of-openid-connect
   `;return yield*t(L.fail(new We({message:n,error:e.error})))}),vv=L.tryPromise({try:()=>(0,Fv.getIDToken)(),catch:e=>new ub({error:e})});var Pv=require("@actions/http-client");var Nv=require("@actions/core"),Lv=require("util");var pb=gt({value:Uf,units:Qc(lr)}),Tv=Bf(lr,X2(URL),e=>{try{return Te(new URL(e))}catch{return mt({_tag:"Unexpected",actual:e})}},e=>Te(e.href)),kv=gt({key:lr,storedValue:Qc(pb),currentValue:pb,sparkline:lr,diff:Qc(pb),trend:Qc(gt({alt:lr,url:Tv,good:Y2})),chartUrl:Tv}),SY=Zc(kv),Z8=gt({error:mn(!0),message:lr}),Q8=gt({error:mn(!1),data:gt({warnings:bs(lr),metrics:bs(kv)})}),X8=dn(Z8,Q8),Iv=Yc(X8);var qv=L.gen(function*(e){let t=yield*e(vv);return new Pv.HttpClient("benchy-action",[],{headers:{Authorization:`Bearer ${t}`}})}),eU=e=>L.tryPromise({try:async()=>({...e,body:await e.readBody()}),catch:t=>new We({message:"Failed to read response body",error:t})}).pipe(L.flatMap(t=>L.try({try:()=>({...e,json:JSON.parse(t.body)}),catch:r=>new We({message:"Failed to parse JSON of response body",error:r})})),L.mapError(t=>new We({error:t.error,message:`HTTP ${e.message.statusCode}: ${t.message}`})),L.map(t=>t.json)),Hv=(e,t)=>L.gen(function*(r){let o=yield*r(L.tryPromise({try:()=>e.post("https://benchy.hagever.com/api/metrics",JSON.stringify({metrics:t})),catch:a=>new We({message:"Failed to send metrics",error:a})})),n=yield*r(eU(o)),s=yield*r(Iv(n),L.mapError(a=>new We({error:a,message:"Response is malformed"})));if(s.error)return yield*r(L.fail(new We({error:new Error(`HTTP ${o.message.statusCode}: ${s.message}`),message:s.message})));let i={...o,body:s};return yield*r(L.sync(()=>{(0,Nv.debug)(`got response: ${(0,Lv.inspect)(i,{depth:10,colors:!0})}`)})),i});var wT=require("@actions/core");var _T=Os(CT());var OT=e=>L.gen(function*(t){let r=yield*t(Ds),o=yield*t(I9),n=[["",r.bold("change"),r.bold("current"),r.bold("diff"),""]];for(let s of e){let i=Po.match(s.trend,{onNone:()=>r.reset,onSome:a=>a.good?r.green:r.red});n.push([i(s.key),i(o(s.currentValue)),Po.match(s.storedValue,{onNone:()=>"",onSome:a=>i(o(a))}),Po.match(s.diff,{onNone:()=>"",onSome:a=>i(o(a))}),i(s.sparkline)])}return(0,_T.table)(n)}),I9=Ds.pipe(L.map(e=>t=>{let r=Po.match(t.units,{onNone:()=>"",onSome:n=>e.dim(n)});return`${Math.round(t.value*1e3)/1e3}${r}`}));var N9=L.gen(function*(e){let t=yield*e(uv),r=yield*e(qv),o=yield*e(Hv(r,t));for(let s of o.body.data.warnings)yield*e(L.sync(()=>(0,wT.warning)(s)));let n=OT(o.body.data.metrics);yield*e(L.sync(()=>console.log(n)))});N9.pipe(L.catchTag("IdTokenError",e=>Av(e)),L.catchTag("GenericError",e=>rv(e)),pv,L.provideServiceEffect(Ds,Cv),L.runPromise);
